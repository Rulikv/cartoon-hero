var BEMHTML;!function(t){var e=function(t,e){var n=function(){function t(t){return t._mode=s,t.block=r,t.elem=o,t.elemMods=a,t.mods=c,t}function i(t,e){var n=s;s=e._mode;var i=r;r=e.block;var u=o;o=e.elem;var l=a;a=e.elemMods;var h=c;c=e.mods;var d=t(e);return s=n,r=i,o=u,a=l,c=h,d}var s,r,o,a,c,u,l={},h=function(l){function h(t){var e=s;if(""===e)return d(t);if("default"===e)return m(t);if("mix"===e)return E(t);if("attrs"===e)return B(t);if("tag"===e)return S(t);if("content"===e)return I(t);if("public-params"===e){if("i-global"===r){var e=o;return"incutPosition"===e||"isPumpkin"===e||"isYandexNet"===e||"ncrnd"===e||"isSpok"===e||"showRelevance"===e||"isOldBrowser"===e||"router"===e||"seo"===e||"counterDebug"===e||"serviceName"===e||"tablet"===e||"expFlags"===e||"mobile"===e||"abuseLink"===e||"page"===e||"is500pxAvailable"===e||"searchInputText"===e||"lags"===e||"query"===e||"isPornoQuery"===e||"serpid"===e||"uid"===e?!0:!o==!1?{id:1,lang:1,tld:1,"content-region":1,"user-region":1,login:1,displayName:1,index:1,yandexuid:1,"passport-host":1,"pass-host":1,"passport-msg":1,"static-host":1,"lego-static-host":1,"social-host":1,clck:1,"click-host":1,"export-host":1,"i-host":1,"social-retpath":1,"lego-path":1,sid:1,retpath:1,uid:1}[o]||!1:P(t)}return P(t)}return"env"===e&&"i-global"===r?D(t):P(t)}function d(t){if(!(t.__$anflg143!==!0)==!1){if(!!t.require==!1){var n,i,s,r;return n=t.__$anflg143,t.__$anflg143=!0,s=t.require,t.require=function(t){return e[t]},r=d(t),t.require=s,i=r,t.__$anflg143=n,i}return p(t)}return p(t)}function p(t){if(!!t.hasOwnProperty("ctx")==!1)throw Error("Seems like you have no base templates from i-bem__html.bemhtml");return!(t.__$anflg141!==!0)==!1&&!!t["i-global"]==!1?f(t):P(t)}function f(t){for(var e,n,i,a,c,u,l,h,p={},f=["lang","tld","content-region","click-host","passport-host","pass-host","social-host","export-host","login","lego-static-host"];h=f.shift();)p[h]=(e=s,s="default",n=r,r="i-global",i=o,o=h,a=y(t),s=e,r=n,o=i,a);var m=(c=s,s="env",u=r,r="i-global",l=D(t),s=c,r=u,l),_=t.__$anflg141;t.__$anflg141=!0;var g=t["i-global"];t["i-global"]=t.extend(p,m),d(t),t["i-global"]=g,t.__$anflg141=_}function m(t){var e=r;return"select"===e?g(t):"domik"===e?!!o==!1?v(t):P(t):"i-global"===e?y(t):"i-jquery"===e?!(t.__$anflg140!==!0)==!1&&!!o==!1?M(t):x(t):P(t)}function g(t){return"group"===o?b(t):P(t)}function b(t){if(!(t.__$anflg142!==!0)==!1){var e=t.__$anflg142;t.__$anflg142=!0;var n=t._labelId;return t._labelId=t.generateId(),b(t),t._labelId=n,void(t.__$anflg142=e)}return P(t)}function v(t){if(!!(t.ctx.mods||{}).logo==!1){var e,n;BEM.blocks?(n=BEM.blocks["i-global"],e=n.param("lang")):(n=t["i-global"],e=n.lang);var i=t.ctx,s=i.mods;return i.mods=t.extend(t.ctx.mods||{},{logo:~["en","tr"].indexOf(e)?"en":"ru"}),v(t),void(i.mods=s)}return P(t)}function y(t){var e=o;return"lego-static-host"===e?"//yastatic.net/lego/2.10-142":"export-host"===e?"https://export.yandex.ru":"social-host"===e?"https://social.yandex.ru":"pass-host"===e?"https://pass.yandex.ru":"passport-host"===e?"https://passport.yandex.ru":"click-host"===e?"//clck.yandex.ru":"content-region"===e||"tld"===e||"lang"===e?"ru":!o==!1?"":!!o==!1?k(t):P(t)}function k(t){var e,n,i,s=t.ctx.params||{},r=t["i-global"],o=s.tld&&s.tld!==r.tld;o&&(e=s.tld,n="tr"===e?"yandex.com.tr":"yandex."+e,i=-1!=["ua","by","kz"].indexOf(e)?"yandex.ru":n,r["content-region"]=e,r["click-host"]="//clck."+i,r["passport-host"]="https://passport."+i,r["pass-host"]="https://pass."+n,r["social-host"]="https://social."+n,r["export-host"]="https://export."+n);for(var a in s)r[a]=s[a]}function M(t){var e,n,i,r,o;return e=t.__$anflg140,t.__$anflg140=!0,i=t.ctx,t.ctx={block:"b-page",elem:"js",url:t.ctx.url||(t.ctx.protocol?t.ctx.protocol+":":"")+"//yastatic.net/jquery/"+c.version+"/jquery.min.js"},r=s,s="",o=d(t),t.ctx=i,s=r,n=o,t.__$anflg140=e,n}function x(t){return!(t.__$anflg139!==!0)==!1&&!!o==!1?w(t):P(t)}function w(t){var e,n,i,r,o;return e=t.__$anflg139,t.__$anflg139=!0,i=t.ctx,t.ctx={block:"b-page",elem:"js",nonce:t.ctx.nonce||t._nonce,url:t.ctx.url||(t.ctx.protocol?t.ctx.protocol+":":"")+"//yastatic.net/jquery/"+c.version+"/jquery.min.js"},r=s,s="",o=d(t),t.ctx=i,s=r,n=o,t.__$anflg139=e,n}function E(t){if("select"===r){if("group"===o){var e=t.isFirst()?t.isLast()?"both":"first":t.isLast()?"last":"middle";return{mods:{position:e}}}return P(t)}return P(t)}function B(t){return"select"===r&&"group"===o?{role:"group","aria-labelledby":t._labelId}:P(t)}function S(t){var e=r;if("domik"===e){var e=o;return"logo"===e||"roof-body"===e||"roof-border"===e?"i":P(t)}if("incut"===e){var e=o;return"warning"===e?!(c&&"direct-like"===c.type)==!1?"span":P(t):"description"===e||"title"===e?!(c&&"market"===c.type)==!1?"span":P(t):"advertising"===e?"span":P(t)}return P(t)}function I(t){var e=r;if("domik"===e)return!!o==!1?[{elem:"roof",content:[{elem:"roof-border"},{elem:"roof-body"},{elem:"logo"}]},{elem:"content",content:t.ctx.content}]:P(t);if("incut"===e){var e=o;if("warning"===e)return!(c&&"direct-like"===c.type)==!1?"Есть&nbsp;противопоказания. Посоветуйтесь&nbsp;с&nbsp;врачом.":P(t);if("item"===e)return!(c&&"direct-like"===c.type)==!1?C(t):P(t);if("description"===e)return!(c&&"market"===c.type)==!1?"Товары на этих картинках можно купить":P(t);if("title"===e){if(!(c&&"market"===c.type)==!1){var n=[{elem:"title-text",content:t.ctx.text}," — предложения из Яндекс.Маркета"];return t.ctx.isClickable?{block:"link",target:"_blank",url:t.ctx.url,attrs:{onmousedown:t.ctx.counter},content:n}:n}return P(t)}return"advertising"===e?"Реклама":P(t)}return P(t)}function C(t){var e=120,n=Math.round(e*t.ctx.size.width/t.ctx.size.height);return{elem:"link",tag:"a",attrs:{href:t.ctx.url,target:"_blank"},content:[{elem:"thumb",attrs:{style:"background-image: url("+t.ctx.img_href.replace("y150","orig")+");width:"+n+"px"}},{elem:"title",content:t.ctx.title},{elem:"domain",tag:"span",content:t.ctx.domain},t.ctx.warning&&{elem:"warning",mods:{type:"direct-like"}}]}}function D(t){return!!o==!1?{}:P(t)}function P(t){return"incut"===r&&!(t.__$anflg138!==!0)==!1&&!!o==!1?T(t):O(t)}function T(t){var e,n,i,r,o;return e=t.__$anflg138,t.__$anflg138=!0,i=t.ctx,t.ctx={block:"incut",elem:"wrapper",mods:{footer:"bottom"===t.ctx.js.positionType?"yes":""},content:t.ctx},r=s,s="",o=d(t),t.ctx=i,s=r,n=o,t.__$anflg138=e,n}function O(t){var e=s;return(to[e]||eo)(t)}function $(t){return{block:"popup",js:t.ctx.js,mix:{elem:"feedback"},mods:{type:"modal",position:"fixed","has-close":"yes"},underMods:{type:"paranja"},content:[{elem:"content",content:[{elem:"complaint",content:[{elem:"title",content:BEM.I18N("feedback","Пожаловаться",{context:"Заголовок формы для жалобы на выдачу: https://yadi.sk/i/jVD4gXcngrcTU"})},{block:"radiobox",mods:{size:"m"},name:"complaint-query",value:"yes",content:[{elem:"radio",content:BEM.I18N("feedback","На этот результат",{context:"Пожаловаться на этот результат: https://yadi.sk/i/jVD4gXcngrcTU"}),controlAttrs:{value:"no"}},{elem:"radio",content:BEM.I18N("feedback","На всю страницу",{context:"Пожаловаться на всю страницу: https://yadi.sk/i/jVD4gXcngrcTU"}),controlAttrs:{value:"yes"}}]},{block:"sub-title",content:BEM.I18N("feedback","Причина жалобы",{context:"Заголовок в форме подачи жалобы на выдачу: https://yadi.sk/i/jVD4gXcngrcTU"})},{block:"checkbox-group",content:[{val:"norelevance",content:BEM.I18N("feedback","Несоответствие запросу",{context:"Причина жалобы несоответствие запросу: https://yadi.sk/i/jVD4gXcngrcTU"})},{val:"revolting",content:BEM.I18N("feedback","Шокирующая или неприятная информация",{context:"Причина жалобы шокирующая, неприятная информация: https://yadi.sk/i/jVD4gXcngrcTU"})},{val:"porno",content:BEM.I18N("feedback","Порнография",{context:"Причина жалобы порнография: https://yadi.sk/i/jVD4gXcngrcTU"})}].map(function(t){return{block:"checkbox",mods:{size:"m"},checkboxAttrs:{name:"reason-complaint",value:t.val},content:{elem:"label",content:t.content}}})},{block:"button",mods:{size:"m",disabled:"yes",theme:"action",type:"submit"},content:BEM.I18N("feedback","Пожаловаться",{context:"Текст кнопки в форме жалобы на выдачу: https://yadi.sk/i/jVD4gXcngrcTU"})}]},{elem:"result",content:[{elem:"title",content:BEM.I18N("feedback","Спасибо, что помогаете делать Яндекс лучше!",{context:"Заголовок окна с сообщением после отправки жалобы на результаты в выдаче: https://yadi.sk/i/t-YVsVUsgrchL"})},{elem:"thanks-text",content:BEM.I18N("feedback","Ваш отзыв будет использован алгоритмами Поиска.",{context:"Сообщение пользователю после отправки жалобы на результаты в выдаче: https://yadi.sk/i/t-YVsVUsgrchL"})},{block:"button",mods:{size:"m",theme:"action",type:"close"},content:BEM.I18N("feedback","Вернуться на Яндекс",{context:"Кнопка, чтобы закрыть форму отправки жалобы на результаты выдачи: https://yadi.sk/i/t-YVsVUsgrchL"})}]}]}]}}function N(t){if(!(t._.isArray(t.ctx.content)&&1===t.ctx.content.length)==!1){var e=t.ctx.content;return"left"!==e[0].side?[{elem:"option",side:"left"},e]:[e,{elem:"option",side:"right"}]}return Be(t)}function j(t){return!(t.__$anflg91!==!0)==!1&&!t._service==!1?F(t):Be(t)}function F(t){var e,n,i,s=(e=t.__$anflg91,t.__$anflg91=!0,n=j(t),t.__$anflg91=e,n);return c&&"yes"===c.cbir&&(i=s.content,i.splice(1,0,{elem:"box-layout-cell",content:{block:"cbir-intent",src:t.cbirImage,mods:{visibility:t.cbirImage&&t.isCopyPages?"visible":""}}})),t.hideServiceLabel&&(i[0].content=""),s}function L(t){return!(t.__$anflg89!==!0)==!1&&!t._service==!1?R(t):A(t)}function R(t){var e,n;return[{elem:"box-layout",content:{tag:"tr",content:[{elem:"box-layout-cell",elemMods:{pos:"first"},content:t._.extend({block:"service",urlAttrs:{tabindex:-1,"aria-hidden":!0},mix:[{block:"input",elem:"service-label"}],icon:!1},"string"==typeof t._service?{service:t._service}:t._service)},{elem:"box-layout-cell",elemMods:{pos:"last"},content:(e=t.__$anflg89,t.__$anflg89=!0,n=L(t),t.__$anflg89=e,n)}]}}]}function A(t){if(!(t.__$anflg51!==!0)==!1){if(!!c.clear==!1){var e,n;return[(e=t.__$anflg51,t.__$anflg51=!0,n=L(t),t.__$anflg51=e,n),{elem:"clear",elemMods:t._value||0===t._value?{visibility:"visible"}:void 0}]}return Be(t)}return Be(t)}function z(t){if(!(t.__$anflg120!==!0)==!1){if(!(c&&"tablo"===c["more-type"])==!1){var e,n;return[(e=t.__$anflg120,t.__$anflg120=!0,n=z(t),t.__$anflg120=e,n),{elem:"more"}]}return H(t)}return H(t)}function q(t){if(!(t.__$anflg118!==!0)==!1){if(!(t.ctx.clickable===!0)==!1){var e,n,i=(e=t.__$anflg118,t.__$anflg118=!0,n=q(t),t.__$anflg118=e,n);return i.mods||(i.mods={}),i.mods["selected-clickable"]="yes",i.url=t.ctx.url,i}return U(t)}return U(t)}function U(t){return{block:"service",service:t.ctx.service,iconMods:{self:"40"},name:t.ctx.name,mods:t.ctx.selected?!1:{hoverable:"yes"},lang:t.ctx.lang,url:t.ctx.selected?!1:t.ctx.url,urlParams:(t.ctx.search||"")+(t.ctx.params||""),urlAttrs:{target:t.ctx.target,tabindex:0},counter:t.ctx.counter}}function H(e){return!!o==!1?{elem:"region",content:e.ctx.content.map(function(t){return t.block="navigation",this.extend(this.extend({},t),{elemMods:{service:"yes"}})},t(e))}:Be(e)}function V(t){return!!o==!1?[{block:"complain",elem:"icon"},"yes"===c.full?{elem:"title",content:t.ctx.title}:""]:Be(t)}function W(t){return!!o==!1?{elem:"text",tag:"span",content:t.ctx.content}:Be(t)}function K(t){var e=[],n=[];e.push({elem:"link",url:BEM.I18N("footer","apps-url"),content:BEM.I18N("footer","apps")});var i=!(t["i-global"].tld.indexOf("com")>=0);return i&&n.push({elem:"link",url:BEM.I18N("footer","advert-url"),content:BEM.I18N("footer","advert")}),i&&t.ctx.statUrl&&n.push({elem:"link",url:t.ctx.statUrl,content:BEM.I18N("footer","stat")}),n.push({elem:"link",url:BEM.I18N("footer","termsofuse-url"),content:BEM.I18N("footer","termsofuse")}),n.push({elem:"link",url:BEM.I18N("footer","about-url"),content:BEM.I18N("footer","about")}),n.push({block:"copyright",start:t.ctx.start}),[{elem:"column",content:e},{elem:"column",elemMods:{side:"right"},content:n}]}function G(t){return!(t.__$anflg99!==!0)==!1&&!(t.searchError===!0)==!1&&!!o==!1?Y(t):Q(t)}function Y(t){var e,n;return[(e=t.__$anflg99,t.__$anflg99=!0,n=G(t),t.__$anflg99=e,n),{block:"popup",mix:[{block:"cbir-error",elem:"popup",elemMods:{type:"search"}}],mods:{position:"fixed",type:"modal",autoclosable:"yes"},content:{elem:"content",content:[{elem:"caption",content:BEM.I18N("cbir-error_spok_yes","Ошибка")},{elem:"error-text",content:BEM.I18N("cbir-error_spok_yes","Картинка не загрузилась, попробуйте загрузить другую.")},{elem:"close-button",content:{block:"button",mix:[{block:"cbir-error",elem:"close-error-button"}],mods:{size:"s",theme:"action"},content:BEM.I18N("cbir-error_spok_yes","Закрыть")}}]}}]}function Q(t){return!!o==!1?{block:"popup",mods:{autoclosable:"yes","watch-scroll":"no",position:"fixed"},mix:[{block:"cbir-error",elem:"popup",elemMods:{type:"user"}}],content:[{elem:"tail"},{elem:"content",content:[{block:"cbir-error",elem:"mark",content:"!"},{elem:"error-text-wrap",content:{elem:"error-text",tag:"span"}}]}]}:Be(t)}function X(e){var n=o;return"fact"===n?!(c&&"nav"===c.type)==!1?e.xmlEscape(e.ctx.content):[{block:"suggest2",elem:"a11y",content:BEM.I18N("suggest2-item","quick-answer")+": "},e.escapeContent===!1?e.ctx.content:e.xmlEscape(e.ctx.content)]:"thumb"===n?!!e.ctx.content==!1?{elem:"thumb-wrapper",attrs:{style:e.ctx.bgColor?"background-color: "+e.ctx.bgColor+";border: none;":""},content:{elem:"thumb-img",attrs:{src:e.ctx.src,alt:e.ctx.alt}}}:Be(e):"highlight"===n?e.xmlEscape(e.ctx.content):"text"===n?Array.isArray(e.ctx.content)?e.ctx.content.map(function(t){return"string"==typeof t?this.xmlEscape(t):t},t(e)):e.xmlEscape(e.ctx.content):Be(e)}function J(t){for(var e,n,i,r,o,a,c,u,l=t.ctx.input,h=t._.isArray(l)?l.length:(l=[l],1),d=[],p=0;h>p;)u=l[p++],u&&d.push([(e=s,s="lego-label",n=t.ctx,t.ctx=u,i=t.position,t.position=p,r=Mr(t),s=e,t.ctx=n,t.position=i,r),(o=s,s="lego-input",a=t.ctx,t.ctx=u,c=kr(t),s=o,t.ctx=a,c)]);return t.ctx.button&&d.push({elem:"button",content:t.ctx.button.content}),d={elem:"table",content:[{elem:"row",content:d}]},u&&d.content.push({elem:"row",content:u}),t.ctx.hidden&&(d=[d,t.ctx.hidden]),d}function Z(t){return!!o==!1?{elem:"table",content:t.ctx.content}:Be(t)}function te(t){return!(c&&"com"===c.type)==!1&&!!o==!1?[{elem:"item",content:{block:"service",service:"images"}},{elem:"item",content:{block:"service",service:"video"}},{elem:"item",content:{block:"service",service:"mail",urlAttrs:{target:t.ctx.prefsTarget}}},{elem:"item",content:{block:"service",service:"translate",urlAttrs:{target:t.ctx.prefsTarget}}},{elem:"all"}]:ee(t)}function ee(t){return!(c&&"ru"===c.type)==!1&&!!o==!1?ne(t):ie(t)}function ne(){return[{elem:"item",content:{block:"service",service:"images"}},{elem:"item",content:{block:"service",service:"maps"}},{elem:"item",content:{block:"service",service:"news"}},{elem:"item",content:{block:"service",service:"mail"}},{elem:"item",content:{block:"service",service:"video"}},{elem:"item",content:{block:"service",service:"translate"}},{elem:"item",content:{block:"service",service:"browser"}},{elem:"item",content:{block:"service",service:"afisha"}},{elem:"item",content:{block:"service",service:"disk"}},{elem:"item",content:{block:"service",service:"market"}},{elem:"item",content:{block:"service",service:"slovari"}},{elem:"item",content:{block:"service",service:"music"}},{elem:"item",content:{block:"service",service:"taxi"}},{elem:"item",content:{block:"service",service:"auto"}},{elem:"item",content:{block:"service",service:"money"}},{elem:"all"}]}function ie(t){if(!(t.__$anflg79!==!0)==!1){if(!(c&&"turkish"===c.type)==!1){if(!!o==!1){var e,n,i=(e=t.__$anflg79,t.__$anflg79=!0,n=te(t),t.__$anflg79=e,n);return i[8].content.service="market",i}return se(t)}return se(t)}return se(t)}function se(t){return!(c&&"turkish"===c.type)==!1&&!!o==!1?re(t):Be(t)}function re(){return[{elem:"item",content:{block:"service",service:"images"}},{elem:"item",content:{block:"service",service:"maps"}},{elem:"item",content:{block:"service",service:"weather"}},{elem:"item",content:{block:"service",service:"news"}},{elem:"item",content:{block:"service",service:"mail"}},{elem:"item",content:{block:"service",service:"video"}},{elem:"item",content:{block:"service",service:"translate"}},{elem:"item",content:{block:"service",service:"browser"}},{elem:"item",content:{block:"service",service:"market"}},{elem:"item",content:{block:"service",service:"disk"}},{elem:"all"}]}function oe(t){var e=o;if("url"===e)return t.ctx.content;if("name"===e){var n=t.ctx,i=n.service,s=n.name||t["i-services"].serviceName(i)||i;return s}if(!!t._url==!1){if(!!o==!1){var r=[];return t._icon&&r.push({elem:"icon",service:t.ctx.service,elemMods:t.ctx.iconMods}),t._name&&r.push({elem:"name",service:t.ctx.service,name:t.ctx.name}),r}return ae(t)}return ae(t)}function ae(t){return!(t.__$anflg76!==!0)==!1&&!t._url==!1&&!!o==!1?ce(t):Be(t)}function ce(t){var e,n,i,s;return{elem:"url",url:t._url,urlParams:t.ctx.urlParams||"",urlAttrs:t.ctx.urlAttrs,counter:t.ctx.counter,content:(e=t.__$anflg76,t.__$anflg76=!0,i=t._url,t._url=!1,s=oe(t),t._url=i,n=s,t.__$anflg76=e,n)}}function ue(t){if(!!o==!1){var e,n;return[t.ctx.content||(e=s,s="auto-content",n=$r(t),s=e,n),{elem:"retpath"}]}return Be(t)}function le(t){if(!(t.__$anflg42!==!0)==!1){if(!!o==!1){var e,n;return[{elem:"inner",content:[(e=t.__$anflg42,t.__$anflg42=!0,n=le(t),t.__$anflg42=e,n),{elem:"corner",content:{elem:"triangle"}}]}]}return Be(t)}return Be(t)}function he(t){var e=o;return"thumb"===e?{block:"link",mods:{ajax:"yes"},mix:[{block:"similar",elem:"link"}],url:t.ctx.url,content:{block:"similar",elem:"image",tag:"img",attrs:{alt:"",src:t.ctx.thumb}}}:"thumbs"===e?de(t):pe(t)}function de(t){if(!(t.__$anflg39!==!0)==!1){var e,n;return[(e=t.__$anflg39,t.__$anflg39=!0,n=de(t),t.__$anflg39=e,n),{block:"similar",elem:"more-link",content:{elem:"more-link-wrap",content:[{elem:"more-title",content:t.ctx.moreLinkText},{elem:"more-arrow"}]}}]}return pe(t)}function pe(t){if(!(t.__$anflg38!==!0)==!1){if(!!o==!1){var e,n;return[{elem:"head",mix:[{block:"serp-block",elem:"head"}],content:BEM.I18N("similar_spok_yes","Похожие картинки")},(e=t.__$anflg38,t.__$anflg38=!0,n=he(t),t.__$anflg38=e,n)]}return Be(t)}return Be(t)}function fe(t){return[{block:"link",mods:{ajax:"yes"},mix:[{block:"clearfix"},{block:"other-sizes",elem:"head"}],url:t.ctx.dupsLink,counter:t.ctx.dupsLinkCounter,content:[{block:"other-sizes",elem:"title",content:BEM.I18N("other-sizes_spok_yes","Эта картинка в других размерах")},{block:"other-sizes",elem:"link",attrs:{role:"presentation"},content:[BEM.I18N("other-sizes_spok_yes","Ещё размеры"),{block:"other-sizes",elem:"link-icon",tag:"span"}]}]},{elem:"content",content:t.ctx.columns}]}function me(t){if(!(t.__$anflg34!==!0)==!1){if(!!o==!1){var e,n;return[{elem:"head",attrs:{role:"heading","aria-level":2},mix:[{block:"serp-block",elem:"head"}],content:BEM.I18N("other-sites_spok_yes","Сайты, где встречается картинка")},(e=t.__$anflg34,t.__$anflg34=!0,n=me(t),t.__$anflg34=e,n)]}return Be(t)}return Be(t)}function _e(t){return[{elem:"wrap",content:{elem:"list",mix:[{block:"clearfix"}],content:t.ctx.content.map(function(t){return t.mix||(t.mix=[]),t.mix.push({block:"carousel",elem:"item"}),t})}},t.ctx.js.controls!==!1&&[{elem:"control",mods:{side:"left"},counter:t.ctx.counters&&t.ctx.counters.left},{elem:"control",mods:{side:"right"},counter:t.ctx.counters&&t.ctx.counters.right}]]}function ge(t){return!(a&&"yes"===a.banner)==!1?{elem:"one-thumb",attrs:{style:"background-image: url("+t.ctx.thumbs+");"+(t.ctx.height?"height: "+t.ctx.height+"px;":"")}}:!(a&&"yes"===a["one-thumb"])==!1?{elem:"one-thumb",attrs:{style:"background-image: url(data:image/jpeg;base64,"+t.ctx.thumbs+");"}}:!(a&&"no"===a["hash-thumb"])==!1&&!(a&&"no"===a["one-thumb"])==!1?[{elem:"big-thumb",attrs:{style:"background-image: url(data:image/jpeg;base64,"+t.ctx.thumbs.bigThumb+");"}},{elem:"thumb-list",content:[t.ctx.thumbs.smallThumbs.map(function(t){return{elem:"small-thumb",attrs:{style:"background-image: url(data:image/jpeg;base64,"+t+");"}}})]}]:Be(t)}function be(t){return{elem:"preview",tag:"a",mix:[{block:"link",mods:{ajax:"yes"}}],attrs:{href:t.ctx.href},content:[{elem:"cover",elemMods:{"one-thumb":t.ctx.isOneThumb?"yes":"no",banner:t.ctx.banner?"yes":"","hash-thumb":t.ctx.isHashThumb?"yes":"no","background-thumb":t.ctx.isBackgroundThumb?"yes":"no"},thumbs:t.ctx.thumbs,height:t.ctx.height,sizes:t.ctx.sizes},{elem:"label",elemMods:{font:t.ctx.isBigFont?"big":""},content:t.ctx.label}]}}function ve(t){return[{block:"button",mods:{"only-icon":"yes",size:"s",theme:""},mix:{block:"b-501px",elem:"caption-icon"},content:{elem:"image",mix:[{block:"button",elem:"icon"}],alt:BEM.I18N("b-501px__caption","Подробнее о проекте")}},{block:"button",mods:{size:"m",theme:"pseudo"},mix:{block:"b-501px",elem:"info-button"},url:t.ctx.authorLink,attrs:{target:"_blank"},content:[{block:"b-501px",elem:"caption-title",tag:"span",content:[BEM.I18N("b-501px__caption","Картинка дня"),": "]},{block:"b-501px",elem:"name",tag:"span",content:t.ctx.title},", ",{block:"b-501px",elem:"caption-author",tag:"span",cnotent:t.ctx.linkText}]}]}function ye(t){if(!(t.__$anflg15!==!0)==!1){var e,n;return[{elem:"box",tag:"span",content:{elem:"control"}},(e=t.__$anflg15,t.__$anflg15=!0,n=ye(t),t.__$anflg15=e,n)]}return Be(t)}function ke(t){if(!(t.__$anflg7!==!0)==!1){if(!(c&&"yes"===c["has-close"])==!1){if(!!o==!1){var e,n;return[(e=t.__$anflg7,t.__$anflg7=!0,n=ke(t),t.__$anflg7=e,n),{elem:"close"}]}return Me(t)}return Me(t)}return Me(t)}function Me(t){return!!o==!1?[{elem:"under",mods:t.ctx.underMods},t.ctx.content]:Be(t)}function xe(t){if(!(t.__$anflg2!==!0)==!1){if(!!o==!1){var e,n,i=(e=t.__$anflg2,t.__$anflg2=!0,n=xe(t),t.__$anflg2=e,n);return i+=[";(function(w,e,s,c,x,l,p,d){",'c="className";','x="deviceXDPI";','l="logicalXDPI";','p="devicePixelRatio";',"d=x in s&&l in s&&s[x]/s[l]||p in w&&w[p];",'d>1&&(e[c]+=" i-ua_retina_yes")',"})(window,document.documentElement,screen);"].join("")}return we(t)}return we(t)}function we(t){if(!(t.__$anflg1!==!0)==!1){if(!!o==!1){var e,n,i=(e=t.__$anflg1,t.__$anflg1=!0,n=xe(t),t.__$anflg1=e,n);return i+=[";(function(d,e,c,n,w,v,f){","e=d.documentElement;",'c="className";','n="createElementNS";','f="firstChild";','w="http://www.w3.org/2000/svg";','e[c]+=" i-ua_svg_"+(!!d[n]&&!!d[n](w,"svg").createSVGRect?"yes":"no");','v=d.createElement("div");','v.innerHTML="<svg/>";','e[c]+=" i-ua_inlinesvg_"+((v[f]&&v[f].namespaceURI)==w?"yes":"no");',"})(document);"].join("")}return Ee(t)}return Ee(t)}function Ee(t){return!!o==!1?[";(function(d,e,c,r){","e=d.documentElement;",'c="className";','r="replace";','e[c]=e[c][r]("i-ua_js_no","i-ua_js_yes");','if(d.compatMode!="CSS1Compat")','e[c]=e[c][r]("i-ua_css_standart","i-ua_css_quirks")',"})(document);"].join(""):Be(t)}function Be(t){return t.ctx.content}function Se(t){if(!(c&&"yes"===c["selected-clickable"])==!1)return[{block:"link",mods:{ajax:"yes"}}];if(!(t.__$anflg97!==!0)==!1){var e,n,i=(e=t.__$anflg97,t.__$anflg97=!0,n=Se(t),t.__$anflg97=e,n);return i.push({block:"search2",elem:"label"}),i.push({block:"link",mods:{ajax:"yes"}}),i}if(!(t.__$anflg83!==!0)==!1){var e,n,s=(e=t.__$anflg83,t.__$anflg83=!0,n=Se(t),t.__$anflg83=e,n);return s.push({block:"search",elem:"label"}),s}return[{block:"link"}]}function Ie(t){return!("title"===o||"link"===o)==!1?[{block:"link",mods:"link"===o?{outer:"yes"}:{}}]:Ne(t)}function Ce(t){return!!t._count==!1&&!!o==!1?[{mods:{state:"empty"}}]:Ne(t)}function De(t){return!!o==!1?[{block:"serp-controller",elem:"list"}]:Ne(t)}function Pe(t){if(!(t.__$anflg5!==!0)==!1){if(!(c&&"yes"===c.edge)==!1){if(!!o==!1){if(!!c.pumpkin==!1){var e,n,i=(e=t.__$anflg5,t.__$anflg5=!0,n=Pe(t),t.__$anflg5=e,n||[]);return _.isArray(i)||(i=[i]),i.push({block:"i-cbir-controller"},{block:"i-cbir-initer",js:!0}),i}return Te(t)}return Te(t)}return Te(t)}return Te(t)}function Te(t){return!!t.ctx._iGlobal==!1&&!!o==!1?Oe(t):$e(t)}function Oe(t){var e,n,i,r,o,a=(e=t.ctx,n=e._iGlobal,e._iGlobal=!0,i=Pe(t),e._iGlobal=n,i),c=(r=s,s="js-params",o=Ar(t),s=r,o);return a?a.push(c):a=[c],a.push({block:"i-ua",mods:{interaction:"yes"},js:!0}),a}function $e(t){return!!o==!1?[{elem:"body"}]:Ne(t)}function Ne(){return void 0}function je(t){return t.extend({live:!1},t.ctx.js)}function Fe(t){return!!o==!1?!0:!t.ctx.tabindex==!1&&!!o==!1?{origTabindex:t.ctx.tabindex}:Ae(t)}function Le(t){if(!(t.__$anflg94!==!0)==!1){if(!(c&&"m"===c.size)==!1){if(!!o==!1){var e,n;return t.extend((e=t.__$anflg94,t.__$anflg94=!0,n=Le(t),t.__$anflg94=e,n),{tailWidth:14,tailHeight:7})}return Re(t)}return Re(t)}return Re(t)}function Re(t){if(!(t.__$anflg93!==!0)==!1){if(!(c&&"s"===c.size)==!1){if(!!o==!1){var e,n;return t.extend((e=t.__$anflg93,t.__$anflg93=!0,n=Le(t),t.__$anflg93=e,n),{tailWidth:14,tailHeight:7})}return Ae(t)}return Ae(t)}return Ae(t)}function Ae(){return void 0}function ze(t){if(!(t.__$anflg137!==!0)==!1){var e,n,i=(e=t.__$anflg137,t.__$anflg137=!0,n=ze(t),t.__$anflg137=e,n||{});return i["aria-hidden"]=!0,i}return sn(t)}function qe(t){if(!(t.__$anflg136!==!0)==!1){var e,n,i=(e=t.__$anflg136,t.__$anflg136=!0,n=qe(t),t.__$anflg136=e,n||{});return side=a.side,i.id="left"===side?t._leftId:t._rightId,i["aria-hidden"]=!0,i}return sn(t)}function Ue(t){if(!(t.__$anflg133!==!0)==!1){if(!t._sideId==!1){var e,n,i=(e=t.__$anflg133,t.__$anflg133=!0,n=Ue(t),t.__$anflg133=e,n||{});return i["aria-labelledby"]=t._sideId,i}return sn(t)}return sn(t)}function He(t){if(!(t.__$anflg125!==!0)==!1){var e,n,i=(e=t.__$anflg125,t.__$anflg125=!0,n=He(t),t.__$anflg125=e,n||{});return"yes"===(t.ctx.elemMods||{}).label&&(t._labelId&&(i.id=t._labelId),i["aria-hidden"]=!0),i}return{id:t.generateId()}}function Ve(t){if(!(t.__$anflg126!==!0)==!1){if(!t._formSelect==!1){if(!!o==!1){var e,n,i=(e=t.__$anflg126,t.__$anflg126=!0,n=Ve(t),t.__$anflg126=e,n||{});i.role="listbox",i.type="button",i["aria-haspopup"]=!0,i["aria-expanded"]=!1;var s=t._formSelect.tabindex;return"undefined"!=typeof s&&(i.tabindex=s),i}return sn(t)}return sn(t)}return sn(t)}function We(t){if(!!t._baseAttrsApplyed==!1){var e,n,i,s=(e=t._value,t._value=null,n=t._baseAttrsApplyed,t._baseAttrsApplyed=!0,i=We(t),t._value=e,t._baseAttrsApplyed=n,i);return t._.extend(s,{rows:10,cols:10})}return sn(t)}function Ke(t){if(!(t.__$anflg121!==!0)==!1){if(!(c&&"yes"===c.pseudo)==!1){var e,n,i=(e=t.__$anflg121,t.__$anflg121=!0,n=Ke(t),t.__$anflg121=e,n);return i.value="",i}return Ge(t)}return Ge(t)}function Ge(t){for(var e,n=t.ctx,i={type:"checkbox"},s=["tabindex","name","value","id"];e=s.pop();)n[e]&&(i[e]=n[e]);return n.checked&&(i.checked="checked"),n.disabled&&(i.disabled="disabled"),i["aria-labelledby"]=n.labelledby,i}function Ye(t){return!!o==!1?{"for":t._control.id}:sn(t)}function Qe(t){var e=o;return"more"===e?{role:"listitem",onmousedown:t._moreCounter}:"more-label"===e?Xe(t):"region"===e?{role:"list"}:Je(t)}function Xe(t){if(!(t.__$anflg116!==!0)==!1){var e,n,i=(e=t.__$anflg116,t.__$anflg116=!0,n=Xe(t),t.__$anflg116=e,n||{}),s=BEM.I18N("navigation","more");return t._.extend(i,{tabindex:0,role:"button",title:s,"aria-label":s,"aria-haspopup":!0,"aria-expanded":!1})}return Je(t)}function Je(t){if(!(t.__$anflg115!==!0)==!1){if(!!o==!1){var e,n,i,s=(e=t.__$anflg115,t.__$anflg115=!0,n=Qe(t),t.__$anflg115=e,n||{}),r=t.ctx.query;return s.role="navigation",i=r?BEM.I18N("navigation","search-on",{query:r}):BEM.I18N("navigation","search-also"),s["aria-label"]=i,s}return sn(t)}return sn(t)}function Ze(t){if(!(t.__$anflg111!==!0)==!1){var e,n,i=(e=t.__$anflg111,t.__$anflg111=!0,n=Ze(t),t.__$anflg111=e,n);return t.ctx.counter&&(i.onmousedown=t.ctx.counter),i}return{href:t.ctx.url}}function tn(t){if(!(t.__$anflg109!==!0)==!1){if(!(c&&"series"===c.type)==!1){var e,n,i=(e=t.__$anflg109,t.__$anflg109=!0,n=tn(t),t.__$anflg109=e,n);return t.ctx.counter&&(i.onmousedown=t.ctx.counter),i}return en(t)}return en(t)}function en(t){return!("title"===o||"link"===o)==!1?{target:"_blank",href:""}:sn(t)}function nn(t){if(!(t.__$anflg104!==!0)==!1){if(!(c&&"yes"===c.pseudo)==!1){if(!!o==!1){if(!!t.ctx.url==!1){var e,n;return t.extend({role:"button",tabindex:0},(e=t.__$anflg104,t.__$anflg104=!0,n=nn(t),t.__$anflg104=e,n))}return sn(t)}return sn(t)}return sn(t)}return sn(t)}function sn(t){return"item"===o&&!("b-menu-vert"===r||"b-menu-horiz"===r)==!1&&!t._inDropdownMenu==!1?{role:"menuitem"}:rn(t)}function rn(t){return!("b-menu-vert"===r||"b-menu-horiz"===r)==!1&&!t._inDropdownMenu==!1&&!!o==!1?{role:"menu"}:on(t)}function on(t){var e=r;return(oo[e]||ao)(t)}function an(t){return"icon"===o&&!t.ctx._icon==!1&&!t._uid==!1?{style:"background-image: url("+t.ctx._icon+");"}:cn(t)}function cn(t){if(!!o==!1){var e=t["i-global"],n=e.login&&0===e.login.lastIndexOf("uid-",0),i={href:n?e["social-host"]:e["passport-host"]+"/passport?mode=passport"},s=t.ctx.counter||(t.ctx.counters||{}).user;return s&&(i.onmousedown=s),i}return"enter-label"===o?{"aria-hidden":!0}:fn(t)}function un(t){return!!o==!1?{role:"alert","aria-live":"assertive","aria-atomic":!0}:fn(t)}function ln(t){if(!(t.__$anflg11!==!0)==!1){if(!!o==!1){if(!!t.ctx.url==!1){var e,n,i=t.ctx,s=(e=t.__$anflg11,t.__$anflg11=!0,n=Ve(t),t.__$anflg11=e,n),r={type:i.type||"button",name:i.name,value:i.value};return t.extend(s,r)}return hn(t)}return hn(t)}return hn(t)}function hn(t){if(!(t.__$anflg10!==!0)==!1){if(!t.ctx.url==!1){if(!!o==!1){var e,n,i=t.ctx,s=(e=t.__$anflg10,t.__$anflg10=!0,n=Ve(t),t.__$anflg10=e,n),r={href:i.url,target:i.target};return t.extend(s,r)}return dn(t)}return dn(t)}return dn(t)}function dn(t){if(!!o==!1){var e=t.ctx,n={role:"button"};return n.tabindex=e.tabindex,n}return fn(t)}function pn(t){if(!!o==!1){for(var e,n=t.ctx,i={href:n.url},s=["title","target"];e=s.pop();)n[e]&&(i[e]=n[e]);return n.counter&&(i.onmousedown=n.counter),i}return fn(t)}function fn(){return void 0}function mn(t){return!!o==!1?"span":Mn(t)}function _n(t){return!("title"===o||"link"===o)==!1?"a":Mn(t)}function gn(){return"span"}function bn(t){var e=o;return"hidden-value"===e?!(c&&"yes"===c.advanced)==!1?"input":Mn(t):"switcher-text"===e||"text"===e?"span":Mn(t)}function vn(t){return!!o==!1?"label":Mn(t)}function yn(t){return!!o==!1?"a":"enter-label"===o?"span":Mn(t)}function kn(t){return!!o==!1?"button":Mn(t)}function Mn(){return void 0}function xn(t){if("option"===o){if("left"===t.ctx.side){if(!(t.__$anflg135!==!0)==!1){var e=t.__$anflg135;t.__$anflg135=!0;var n=t.ctx;t.ctx=[t.ctx,{elem:"box"}];var i=s;return s="",d(t),t.ctx=n,s=i,void(t.__$anflg135=e)}return wn(t)}return wn(t)}return Bn(t)}function wn(t){return!(t.__$anflg134!==!0)==!1?En(t):Bn(t)}function En(t){var e,n,i=(e=s,s="value",n=cr(t),s=e,n),r=t.__$anflg134;t.__$anflg134=!0;var o=t.ctx;t.ctx={elem:"label",content:[{elem:"input",name:t._name,value:i,disabled:t._disabled,elemMods:{side:t.ctx.side}},{elem:"text",tag:"span",elemMods:{side:t.ctx.side},content:t.ctx.content}]};var a=s;s="",d(t),t.ctx=o,s=a,t.__$anflg134=r}function Bn(t){if("yes"===(t.ctx.mods||{}).disabled){if(!(t.__$anflg132!==!0)==!1){if(!!o==!1){var e=t.__$anflg132;t.__$anflg132=!0;var n=t._disabled;return t._disabled="disabled",xn(t),t._disabled=n,void(t.__$anflg132=e)}return Sn(t)}return Sn(t)}return Sn(t)}function Sn(t){if("yes"===(t.ctx.mods||{}).checked){if(!(t.__$anflg131!==!0)==!1){if(!!o==!1){var e=t.__$anflg131;t.__$anflg131=!0;var n=t._checked;return t._checked="checked",xn(t),t._checked=n,void(t.__$anflg131=e)}return In(t)}return In(t)}return In(t)}function In(t){if(!(t.__$anflg130!==!0)==!1){if(!!o==!1){if(!!(t.ctx.mods||{}).theme==!1){var e=t.__$anflg130;t.__$anflg130=!0;var n=t.ctx,i=n.mods;return n.mods=t._.extend(t.ctx.mods||{},{theme:"normal"}),xn(t),n.mods=i,void(t.__$anflg130=e)}return Cn(t)}return Cn(t)}return Cn(t)}function Cn(t){return!(t.__$anflg129!==!0)==!1&&!!o==!1?Dn(t):Ur(t)}function Dn(t){var e=t.generateId(),n="left"+e,i="right"+e,s=null,r=t.ctx.content;r&&r.length>0&&(s="left"===t.ctx.content[0].side?n:i);var o=t.__$anflg129;t.__$anflg129=!0;var a=t._name;t._name=t.ctx.name||(t.ctx.name=e);
var c=t._leftId;t._leftId=n;var u=t._rightId;t._rightId=i;var l=t._sideId;t._sideId=s,xn(t),t._name=a,t._leftId=c,t._rightId=u,t._sideId=l,t.__$anflg129=o}function Pn(t){if(!(t.__$anflg128!==!0)==!1){if(!t._initValue==!1){var e=t.ctx;e.attrs=t.extend(e.attrs,{value:t._initValue});var n=t.__$anflg128;return t.__$anflg128=!0,Pn(t),void(t.__$anflg128=n)}return Tn(t)}return Tn(t)}function Tn(t){return!(t.__$anflg123!==!0&&t.__$anflg124!==!0)==!1&&!!o==!1?On(t):$n(t)}function On(t){var e,n,i=t.ctx,r=(e=s,s="js",n=je(t),s=e,n||{}).live;if(r){var o=i.content.filter(function(t){return"control"===t.elem})[0].content,a=function(t){for(var e,n,i=0;i<t.length&&(e=t[i],"option"===e.elem&&Object(e.attrs).selected?n=e:"option-group"===e.elem&&(n=a(e.content)),!n);i++);return n},c=a(o);c||(c=o[0],"option-group"===c.elem&&(c=c.content[0]));var u=t.__$anflg123;t.__$anflg123=!0;var l=t._initValue;t._initValue=c.attrs.value;var h=t._initText;t._initText=c.content,g(t),t._initValue=l,t._initText=h,t.__$anflg123=u}else{var d=t.__$anflg124;t.__$anflg124=!0,g(t),t.__$anflg124=d}}function $n(t){return!(t.__$anflg122!==!0)==!1&&!!o==!1?Nn(t):Ur(t)}function Nn(t){var e=t.ctx,n=e.id||t.generateId(),i=t.__$anflg122;t.__$anflg122=!0;var s=t._controlAttrs;t._controlAttrs={id:n,name:e.name||n};var o=t._formSelect;t._formSelect={block:r,mods:c,tabindex:e.tabindex},g(t),t._controlAttrs=s,t._formSelect=o,t.__$anflg122=i}function jn(t){return!(t.__$anflg127!==!0)==!1&&!t._formSelect==!1&&!!o==!1?Fn(t):Ln(t)}function Fn(t){var e=t.ctx,n=t._formSelect.mods,i=(t._formSelect.tabindex,e.mods||{});i.arrow="down",n.theme&&(i.theme=n.theme),n.size&&(i.size=n.size),"yes"===n.disabled&&(i.disabled="yes"),e.mods=i,t._initText&&(e.content=t._initText);var s=t.__$anflg127;t.__$anflg127=!0;var r=t.ctx,o=r._theme;r._theme=!0,jn(t),r._theme=o,t.__$anflg127=s}function Ln(t){if(!(t.__$anflg23!==!0)==!1){if(!(c&&"yes"===c.pseudo)==!1){if(!!o==!1){t.ctx.mods=t.extend({theme:"pseudo"},t.ctx.mods);var e=t.__$anflg23;return t.__$anflg23=!0,jn(t),void(t.__$anflg23=e)}return Rn(t)}return Rn(t)}return Rn(t)}function Rn(t){if(!(t.__$anflg9!==!0)==!1){if(!!o==!1){t.ctx.mods=t.extend({theme:"normal"},t.ctx.mods);var e=t.__$anflg9;return t.__$anflg9=!0,jn(t),void(t.__$anflg9=e)}return Ur(t)}return Ur(t)}function An(t){return!(c&&"yes"===c.pseudo)==!1&&!!o==!1?zn(t):qn(t)}function zn(t){if(!!(t.ctx.mods||{}).theme==!1){var e=t.ctx,n=e.mods;return e.mods=t._.extend(t.ctx.mods||{},{theme:"pseudo"}),zn(t),void(e.mods=n)}return qn(t)}function qn(t){return!(t.__$anflg71!==!0)==!1&&!!o==!1?Un(t):Ur(t)}function Un(t){var e=t.ctx,n=(e.controlAttrs||{}).id||t.generateId(),i=e.mods||{};i.theme=i.theme||"normal";var s=t.__$anflg71;t.__$anflg71=!0;var r=t._control;t._control={elem:"control",attrs:e.controlAttrs,id:n,labelledby:"text"+n,name:e.name,tabindex:e.tabindex,checked:c.checked,disabled:c.disabled,value:e.value||e.content};var o=t.ctx,a=o.mods;o.mods=i,An(t),t._control=r,o.mods=a,t.__$anflg71=s}function Hn(t){return"item"===o&&!(t.__$anflg119!==!0)==!1?Vn(t):Wn(t)}function Vn(t){var e,n,i,r,o,a=t.ctx.serpsearch,c=t.ctx.query,u=t.ctx.tld,l=t.ctx.hostname,h=t.ctx.prefsTarget,p=t.ctx.urlSuffix,f=t.ctx.isCopyPages,m={afisha:{search:"/search/?text="+c,target:h,search:p},appsearch:{url:"//yandex."+(u||"com.tr"),search:"/yandsearch?text="+c,target:h,params:"&filter=mobile_apps"},auto:{search:"/search?text="+c,target:h},blogs:{search:"/search.xml?text="+c,target:h,params:t.ctx.family&&"&family=yes"},encyc:{service:"slovari",search:"/"+c+"/значение/",target:h},fresh:{service:"fresh",url:"//"+l,search:a+"?text="+c,params:"&time_from=-3dE"+(t.ctx.family?"&family=yes":""),ajax:!0},images:{service:"images",search:"/search?text="+c,params:t.ctx.family&&"&family=yes",url:"//"+l+("com.tr"==u?"/gorsel":"/images")},mail:{service:"mail",search:"/",target:h},maps:{service:"maps",search:f&&!c?"/":"/?text="+c,target:h},market:{service:"market",search:"com.tr"==u?f&&!c?"/":"/search?text="+c:f&&!c?"/":"/search.xml?text="+c,target:h,url:"//market.yandex."+(u||"ru")},music:{search:"/search?text="+c,target:h},news:{service:"news",search:"/yandsearch?text="+c,params:"&rpt=nnews2&grhow=clutop",target:h},peoplesearch:{url:"//yandex."+(u||"ru"),search:a+"?text="+c,params:"&filter=people",target:h},rabota:{search:"/search.xml?text="+c,target:h},rasp:{search:p,target:h},realty:{search:p,target:h},review:{},serp:{service:"www",url:"//"+l,search:f&&!c?"/":a+"?text="+c,ajax:!0},sloavri:{service:"slovari",search:"/"+c+"/значение/",target:h},slovari:{service:"slovari",search:"/"+c+"/значение/",target:h},ticket:{service:"avia",target:h},translate:{service:"translate",search:f&&!c?"/":"/?text="+c,target:h},tv:{target:h},video:{service:"video",search:f&&!c?"/":"/search?text="+c,params:t.ctx.family&&"&family=yes",url:"//"+l+"/video"},weather:{service:"weather",search:p,target:h},web:{service:"www",url:"//"+l,search:f&&!c?"/":"/search?text="+c},www:{service:"www",url:"//"+l,search:a+"?text="+c}},_=m[t.ctx.service];return _&&t.ctx.ncrnd&&(_.params=(_.params||"")+("/"===_.search?"?":"&")+"ncrnd="+t.ctx.ncrnd),(t.ctx.isContextVerticalsEnable||t.ctx.clickable)&&(_.url=t.ctx.url||_.url,_.search=null,_.params=null),t.ctx.newTab&&(_.target="_blank"),e=t.__$anflg119,t.__$anflg119=!0,i=t.ctx,t.ctx=t._.extend(t.ctx,_),r=s,s="",o=d(t),t.ctx=i,s=r,n=o,t.__$anflg119=e,n}function Wn(t){if(!(t.__$anflg117!==!0)==!1){if(!!o==!1){var e,n,i,s;return e=t.__$anflg117,t.__$anflg117=!0,i=t._moreCounter,t._moreCounter=t.ctx.moreCounter,s=Hn(t),t._moreCounter=i,n=s,t.__$anflg117=e,n}return Kn(t)}return Kn(t)}function Kn(t){if(!(t.__$anflg114!==!0)==!1){if(!!o==!1){if(!!c["more-type"]==!1){t.ctx.mods=t.extend(t.ctx.mods||{},{"more-type":"popup"});var e=t.__$anflg114;t.__$anflg114=!0;var n=t.ctx;t.ctx=t.ctx;var i=s;return s="",d(t),t.ctx=n,s=i,void(t.__$anflg114=e)}return Ur(t)}return Ur(t)}return Ur(t)}function Gn(e){var n,i,r,o,a,c,u,l,h,p;return n=e.__$anflg113,e.__$anflg113=!0,r=s,s="",o=e._title,e._title=e.ctx.share&&e.ctx.share.title||"",a=e._image,e._image=e.ctx.share&&e.ctx.share.image||"",c=e._description,e._description=e.ctx.share&&e.ctx.share.description||"",u=e._url,e._url=e["i-global"].url||e.ctx.share&&e.ctx.share.url||"",l=e._mods,e._mods=e.ctx.mods||{size:16},h=e.ctx,e.ctx={block:"dropdown-menu",mix:[{block:"share-dropdown",js:{id:e.generateId()}}],content:[{elem:"switcher",content:{block:"button",mods:{size:e.ctx.buttonSize},content:[{block:"image",mix:[{block:"button",elem:"icon",mods:{16:"link"}}],alt:""},{block:"share-dropdown",elem:"label",tag:"span",content:BEM.I18N("share-dropdown","share")}]}},{elem:"popup",mods:{position:"fixed"},mix:[{block:"share-dropdown",js:{id:e.generateId()}}],content:e.ctx.content.map(function(t){var e={service:t.service};return e[t.service]=this._mods.size,{elem:"item",mix:[{block:"share-dropdown",elem:"share-item",elemMods:e}],content:{block:"link",attrs:{target:"_blank","data-service":t.service},url:"http://share.yandex.ru/go.xml?service="+t.service+"&url="+this._url+"&title="+encodeURIComponent(this._title)+"&image="+this._image+"&description="+this._description,content:[{block:"image"},BEM.I18N("share-dropdown",t.service)]}}},t(e))}]},p=d(e),s=r,e._title=o,e._image=a,e._description=c,e._url=u,e._mods=l,e.ctx=h,i=p,e.__$anflg113=n,i}function Yn(t){return!(t.__$anflg112!==!0)==!1&&!!o==!1?Qn(t):Ur(t)}function Qn(t){var e=t.extend({title:"",image:"",description:"",url:t["i-global"].url||""},t.ctx.share),n=t.extend({size:16},t.ctx.mods),i=t.extend({size:"m"},t.ctx.buttonMods),r=t.ctx.id||t.generateId(),o=t.__$anflg112;t.__$anflg112=!0;var a=t.ctx;t.ctx={block:"dropdown-menu",mix:[{block:"share-dropdown",mods:n,js:{id:r,live:t.ctx.js&&t.ctx.js.live||!1}}],content:[{elem:"switcher",content:{block:"button",mods:i,content:[{block:"image",mix:[{block:"button",elem:"icon",mods:{16:"link"}}],alt:""},{block:"share-dropdown",elem:"label",tag:"span",content:BEM.I18N("share-dropdown","share")}]}},{elem:"popup",js:t.ctx.js&&t.ctx.js.popupParams,mix:[{block:"share-dropdown",js:{id:r}}],content:t.ctx.content.map(function(t){var i={service:t.service};return i[t.service]=n.size,{elem:"item",mix:[{block:"share-dropdown",elem:"share-item",elemMods:i}],content:{block:"link",attrs:{target:"_blank","data-service":t.service},url:"http://share.yandex.ru/go.xml?service="+t.service+"&url="+e.url+"&title="+encodeURIComponent(e.title)+"&image="+e.image+"&description="+e.description,content:[{block:"image"},BEM.I18N("share-dropdown",t.service)]}}})}]};var c=s;s="",d(t),t.ctx=a,s=c,t.__$anflg112=o}function Xn(t){var e,n,i,r,o;return e=t.__$anflg110,t.__$anflg110=!0,i=t.ctx,t.ctx={block:"button",mix:[{block:"slideshow-switcher",js:!0}],mods:{size:"m",theme:"action",focus:"no"},content:[{block:"slideshow-switcher",elem:"control"},BEM.I18N("slideshow-switcher_spok_yes","Слайдшоу")]},r=s,s="",o=d(t),t.ctx=i,s=r,n=o,t.__$anflg110=e,n}function Jn(t){return"metrika"===o?Zn(t):ni(t)}function Zn(t){return!(t.__$anflg108!==!0)==!1&&!!t.ctx.hasOwnProperty("_noindex")==!1?ti(t):ei(t)}function ti(t){t.ctx._noindex=t.ctx.js&&("noindex"===t.ctx.js.ut||0===t.ctx.js.ut);var e=t.__$anflg108;t.__$anflg108=!0;var n=t.ctx;t.ctx=t.ctx;var i=s;s="",d(t),t.ctx=n,s=i,t.__$anflg108=e}function ei(t){if(!!t.ctx._haveTriedToGetCounter==!1){if(!!t.ctx.counter==!1){var e,n,i,s,r;return e=t.ctx,n=e.counter,e.counter=t._services.metrika[t["i-global"].id],i=t.ctx,s=i._haveTriedToGetCounter,i._haveTriedToGetCounter=!0,r=Zn(t),e.counter=n,i._haveTriedToGetCounter=s,r}return ni(t)}return ni(t)}function ni(t){return!!t._services==!1&&!!o==!1?ii(t):si(t)}function ii(t){var e,n;return e=t._services,t._services={gemius:{morda:{ua:".FiadjwiP9UYHyKfnAdx9rR2Pw1yqHsEeo4qE539Jrb.d7",by:"nG5KUUCPDxt5ugMoPnW8F8Q8T.Ry8PiaZF58FwOq98P.67"},serp:{ua:"ApiQcuNuY7w0rQGVoQOIALR2P4NyqHropLkKqJsj5fb.E7",by:"nG5KUUCPDxrZ8U2PJjJwA8Q8.jhy8SM6BNrOY9udjNr.U7"},mail:{ua:"oktF.vNu2Rsvqe8efbpW.5PafZuip2MgOijdfB6Nbe7.R7",by:"nG5Aq0CPM0tzo2X4nTm0JsPc7MpyMThZBMTiDVsHTBv.f7"},fotki:{ua:"okrlPPNuySwvX_98NSdul5SsfbuiXmMwBN835Et7rb..K7",by:"nAfg60BtI8pzszYSnTB8wqSf.jiiPiM6ZD3uq4sVz.f.L7"},moikrug:{ua:"outFXvL_2Zs5e6V5VcAag5RMfZuibmMg2lzd_k6uxYv.c7",by:"AqHgjecHI4DUV5xy68I368Pc7OpyMThpmqBMDP5qh0r.a7"},direct:{ua:"dvaQbcbtYvNUdJa3E1UGfNTJP1IN43uSkZZw4VCYA6n.r7",by:"0tTglGdBI4EPpzapFxC8YresPxOwiAd78iP_LJKg_Tj.Z7"},uslugi:{ua:"d1aQy8dtYzv_lFviy8bZhNVp354NI7s1t1Pq71fpVsL.Z7",by:"zNFAUrAcM8rkEywMsn5HjZcP33Lg1kdWvMxobPeHSaD.o7"},money:{ua:"zNtATbvKsxz_nWuWjP5wdsbi.j6wAcdrZdHew21UiWf.j7",by:"zU.qjyNp.2OlLR2XXqQ0JJbxzUrgyg9SUr5_n9o0pB3.Z7"},market:{ua:"nFFL_0vjNElzO86U0EXtQoYhHZJFD6LvXxaNNa0pvQ..y7",by:"AkhArecpM4HUW2a2awS0D3ZJ7Op18zhptTvi7_geTLf.D7"},wow:{ua:".FtF.Tvz2ePtXI8xsHm2QpR63_mit7tH2trqcPXgqp7.w7",by:"AqhAS_epM8t_wGZms4y0t3Xp7FR1Mzh13vbiMD1_dF7.r7"},tv:{ua:"nFDrOUvjJFnT0mhCuJwym4XBHXJFH6Lfv6_tDVW6fRf.c7",by:"nAfg60BtI8pzGTYSVT30Y6SfT.SiPfia_jl8F9XZ98P.h7"},afisha:{ua:"ourr2PL_JNo5285ynWf9spRMfZuibmMg2rM39fZMBVX.07",by:"nG3qj0CP.2Nz3dNB1Y50_8Pc.hhyMSMqOqLuzS6AdBL.27"},weather:{ua:".FtL_zvzNElD7M40eIPl05R6P32it3uU2rsaIHXdwsT.K7",by:"AqJKT_cHD_R0EU2Po3H468Pc.q5yMSMemiXuiKYkzAX.w7"},video:{ua:".FtL_TvzNBHtvG6nsFDNDpPa33Oip7tjOl7qpEYAUl..K7",by:"AkHg7eeHIwDUxvxNMyLHE8PcXfdyMeNuZO3_DoLHJJP.r7"},music:{ua:"bQqQy09xYzwpf1viMB7ZhNU7354N2rs1t2Hq79gmVsL.d7",by:"0tVKVmdBD_S5ck12lzE4_resfQWwiO8e8lq1FGn7pAr.B7"},news:{ua:"nFDlP0vjyWN9.aT5cOmiGoYhfZtFD2Mgv69XPf25xe..u7",by:"nAhKsUBtD5t59gN4hgA8.6Rt.jiixyM6ZKXuq2N4TA3.c7"},maps:{ua:".FtL_TvzNBJD7M3ysOdlS5PafZuip2MgOkm9scZuBQH.g7",by:"AkJKT_eHD_Qe8U1NoxRwfMQ8TBRy8PiqOqzyk1XYfNz.77"},slovari:{ua:".FtFXTvz2WRD7O_8MDPeqJR6fbuit2Mw2oW9IPaRLUL.H7",by:"AqfgjeepI4F_xfx.61zHQnZJTBR18viqtVwS22h0vFH.P7"},images:{ua:"ourr2PL_JNqPr84S1R31y5RM33OibrtjOgFA9Z6GP7X.47",by:"Aqfqj_ep.2LUix1nM3iwx3YX7Op1fDhp3x7i7xU2TB..t7"},blogs:{ua:"nFDlP0vjyWN9.e__OEVmxoYh33NFD7tjv3lgPVVbJzn.B7",by:"Akfgi_cpI0p0uvv9I1nPqsRqXmFyOuN6Ogr_T64EpFb.E7"},auto:{ua:"nLrlPUvgySxzIQUkmL86OoaTHZJF1qLvX66tfQT.fbf..7",by:"AkJKr_eHD2R0GwN420i8b8Q8.hhy8SMqmpXuzP32dBL.e7"},games:{ua:"nLtFXUvg2WR9k6U38KmSDIaTP31F1nuUv4b62H2y2kD.P7",by:"AkHqkeeH.5oekdNBo4P8Y8Pc7MpyMThZBMTiDbOV9Cn.f7"},yaca:{ua:".FrlPTvzySxDTKT5eBSikpPaP32ip3uUOimQNx41b7n.27",by:"AqHqj_cH.2N0sR1nI2e4J8Q8XkFy8eNqOq10Ci6keUz.A7"},rasp:{ua:"okrr2vNuJBGP3wf2HV_q65SsP32iXnuU2p2QNvYF76P.k7",by:"nGhArU.tM4J5IGa2vmU8d6RtTBSixviqxBLyk7OZJJP.j7"},rabota:{ua:"AjrgG_LAo_4KlMup_qzUlKbkjzLgqptUYqR6s1odIm..n7",by:"nSA1ZLOt_RzUykUXMVXMdbbuDmywPMOAVPMU7W1ZRcD.y7"},realty:{ua:"dw.ldsd6yaNUd6WSSy_ilbdMjw6wyJrWzCUd2d7FDuT.U7",by:"B22QdCtD4w6uR2wGjbjbWJYU7FlF7zizTwM.TGTJjDD.97"},lego:{ua:"uacode",by:"bycode"}},metrika:{mail:"316002",zakladki:"723085",fotki:"149814",moikrug:"723019",direct:"34",money:"152220",lenta:"723182",market:"160656",wow:"723021",tv:"146686",afisha:"115081",calendar:"723179",nahodki:"723082",weather:"115080",kuda:"",video:"722884",music:"","music-partner":"",www:"722545",search:"731962",news:"722818",maps:"114208","maps-wiki":"912227",probki:"114208",slovari:"115079",images:"722889",blogs:"722825",auto:"722874",adresa:"114208",games:"",yaca:"722622",rasp:"99704",pvo:"723177",online:"723158",books:"722938",site:"723122",bar:"139765",widgets:"816290",wdgt:"464613",interests:"723187",kraski:"",local:"723183",museums:"",collection:"723203",company:"723139",tests:"",toster:"",referats:"",terms:"",tune:"",api:"146685",punto:"723162",opinion:"",perevod:"",rabota:"",ege:"946192",advertising:"191494","direct.market":"",ba:"",partners:"38",metrika:"101500",balance:"",wordstat:"",webmaster:"723120",stat:"723152",mobile:"83907",help:"723245",feedback:"115569",start:"",cityday:"",openid:"",nano:"",partnersearch:"",goroda:"723193",toster:"",love:"",rk:"",lost:"",soft:"413990",opera:"780511",browser:"1635717",passport:"",wiki:"153432",staff:"156784",jira:"1065347",maillists:"445887",statface:"657309",doc:"811196",job:"",otrs:"",planner:"153440",jabber:"",bond:"330896",diary:"1004067",jing:"193857",lunapark:"","intranet-passport":"",blogmon:"",videoteka:"",gap:"",libra:"193850",admins:"","jams-arm":"",subs:"",center:"",all:"",lego:"123456"}},n=Jn(t),t._services=e,n}function si(t){return"gemius"===o?!(t.__$anflg107!==!0)==!1&&!!t.ctx._country==!1&&!!t.ctx._haveTriedToGetCountry==!1?ri(t):oi(t):Ur(t)}function ri(t){var e,n=(t["i-global"].gemius||{}).country,i=t["i-global"]["user-region"];n?e={187:"ua",149:"by"}[n]:i&&(e=-1!=["ua","by"].indexOf(i)&&i);var s=t.__$anflg107;t.__$anflg107=!0;var r=t.ctx,o=r._country;r._country=e||!1;var a=t.ctx,c=a._haveTriedToGetCountry;a._haveTriedToGetCountry=!0,ni(t),r._country=o,a._haveTriedToGetCountry=c,t.__$anflg107=s}function oi(t){if(!t.ctx._country==!1){if(!!t.ctx._code==!1){if(!!t.ctx._haveTriedToGetCode==!1){var e=t.ctx._country,n=(t._services.gemius[t["i-global"].id]||{})[e],i=t.ctx,s=i._code;i._code=t.ctx[e]||n;var r=t.ctx,o=r._haveTriedToGetCode;return r._haveTriedToGetCode=!0,ni(t),i._code=s,void(r._haveTriedToGetCode=o)}return ai(t)}return ai(t)}return ai(t)}function ai(t){if(!t.ctx._code==!1){if(!!t.ctx._src==!1){var e,n,i;return e=t.ctx,n=e._src,e._src={ua:"//yandexgaua.hit.gemius.pl/redot.gif?id=",by:"//yandexgaby.hit.gemius.pl/redot.gif?id="}[t.ctx._country]+t.ctx._code,i=ni(t),e._src=n,i}return ci(t)}return ci(t)}function ci(t){if(!!t.ctx._src==!1){var e,n,i,s;return e=r,r="",n=o,o="",i=t.ctx,t.ctx={tag:""},s=Ur(t),r=e,o=n,t.ctx=i,s}return Ur(t)}function ui(t){var e,n,i=(e=s,s="country-flag",n=pr(t),s=e,n),r=t.__$anflg106;t.__$anflg106=!0;var o=t.ctx;t.ctx={block:"country-flag",mods:{s16:i},mix:[{block:"lang-switcher",elem:"flag"}],alt:""};var a=s;s="",d(t),t.ctx=o,s=a,t.__$anflg106=r}function li(t){var e,n=t.ctx.lang;n.code?e={short_ename:"en"==n.code?"com":n.code}:n.langCode?e={lang:n.langCode}:n.region&&(e=n.region);var i=t["i-geodata"].getRegion(e),o=t.ctx;o._lang={lang:i.lang,name:t.ctx.lang.name},t.ctx._isCurrentLang||(t.position=t.position-1,t._hasLinkToAll&&t.position===t._listLength-2&&(t.position=t._listLength-1),o={block:"b-menu-vert",elem:"layout-unit",content:t._.extend(t.ctx,{block:r})});var a=t.__$anflg105;t.__$anflg105=!0;var c=t.ctx;t.ctx=o;var u=s;s="",d(t),t.ctx=c,s=u,t.__$anflg105=a}function hi(t){return!(t.__$anflg103!==!0)==!1&&!!o==!1?di(t):Ur(t)}function di(t){t._withFlags=!(t.ctx.mods&&t.ctx.mods.noflags);var e=t.extend({"secret-key":t["i-global"]["secret-key"],tune:t["i-services"].serviceUrl("tune")},t.ctx.js),n=t.__$anflg103;t.__$anflg103=!0;var i=t.ctx;t.ctx={block:"dropdown-menu",mix:(t.ctx.mix||[]).concat(t.extend(t.ctx,{js:e})),content:[{elem:"switcher",content:{block:"lang-switcher",mix:[{block:"link",mods:{pseudo:"yes"},js:!0}],elem:"lang",lang:t.ctx.lang,mods:{selected:"yes"},attrs:{role:"button",tabindex:0},_isCurrentLang:!0}},{elem:"popup",mix:[{block:"lang-switcher",elem:"popup-content"}],content:{block:r,mods:c,tag:"",content:t._.isArray(t.ctx.content)&&t.ctx.content.length<4&&t.ctx.noMore!==!0?(t._hasLinkToAll=!0,t.ctx.content.concat([{block:"b-menu-vert",elem:"layout-unit",mix:[{block:"lang-switcher",elem:"all"}],content:{block:"link",url:t["i-services"].serviceUrl("tune")+"/lang/",content:t.ctx.moreText||BEM.I18N("lang-switcher","all")}}])):t.ctx.content}}]};var o=s;s="",d(t),t.ctx=i,s=o,t.__$anflg103=n}function pi(t){if(!!t._userRegion==!1){if(!!o==!1){var e=t._userRegion;return t._userRegion=t["i-geodata"].getRegion(t.ctx.region),pi(t),void(t._userRegion=e)}return Ur(t)}return Ur(t)}function fi(t){return"link"===o&&!(t.__$anflg101!==!0)==!1?mi(t):_i(t)}function mi(t){var e=t.extend(t.ctx,{block:"link",mix:[{block:r,elem:o,elemMods:a}]});t.ctx.mix&&(e.mix=e.mix.concat(t.ctx.mix)),delete e.elem,delete e.elemMods;var n=t.__$anflg101;t.__$anflg101=!0;var i=t.ctx;t.ctx=e;var c=s;s="",d(t),t.ctx=i,s=c,t.__$anflg101=n}function _i(t){if(!(t.__$anflg100!==!0)==!1){if(!!o==!1){var e,n,i,s;return e=t.__$anflg100,t.__$anflg100=!0,i=t._inFooter,t._inFooter=!0,s=fi(t),t._inFooter=i,n=s,t.__$anflg100=e,n}return Ur(t)}return Ur(t)}function gi(t){if(!(t.__$anflg98!==!0)==!1){if(!!o==!1){var e,n,i,s;return e=t.__$anflg98,t.__$anflg98=!0,i=t.searchError,t.searchError=t.ctx.searchError,s=gi(t),t.searchError=i,n=s,t.__$anflg98=e,n}return Ur(t)}return Ur(t)}function bi(t){if(!(t.__$anflg96!==!0)==!1){if(!!o==!1){var e,n,i,s;return e=t.__$anflg96,t.__$anflg96=!0,i=t._service,t._service=t.ctx.service,s=bi(t),t._service=i,n=s,t.__$anflg96=e,n}return Ur(t)}return Ur(t)}function vi(t){if(!(t.__$anflg95!==!0)==!1){if(!!o==!1){var e=t.__$anflg95;t.__$anflg95=!0;var n=t.texts;t.texts={loading:BEM.I18N("cbir-intent_spok_yes","Загружаем картинку"),loaded:BEM.I18N("cbir-intent_spok_yes","Загруженная картинка")};var i=t.src;return t.src=t.ctx.src,vi(t),t.texts=n,t.src=i,void(t.__$anflg95=e)}return Ur(t)}return Ur(t)}function yi(t){var e,n,i=t.ctx,o=c,a=o.theme,u={adaptive:"yes",autoclosable:o.autoclosable||"no",theme:a,position:o.position||"","watch-scroll":o["watch-scroll"]||""},l=(e=s,s="js",n=Le(t),s=e,n);l=(l?t.extend(l,"true"===i.js?{}:i.js):i.js)||{};var h=(l.offset?-l.offset:0)-(l.tailHeight?l.tailHeight:0),p={directions:(l.directions||["right","bottom","top","left"]).map(function(t){return{to:t,offset:h}})},f=s;s="";var m=t._isInTooltip;t._isInTooltip=!0;var _=t.ctx;t.ctx={block:"popup",mods:u,js:p,mix:{block:r,mods:o,js:l},content:[{block:r,elem:"tail"},{elem:"content",content:i.content}]},d(t),s=f,t._isInTooltip=m,t.ctx=_}function ki(t){if(!(t.__$anflg92!==!0)==!1){if(!t._isInTooltip==!1){if(!!o==!1){delete t._isInTooltip;var e=t.__$anflg92;return t.__$anflg92=!0,ki(t),void(t.__$anflg92=e)}return Mi(t)}return Mi(t)}return Mi(t)}function Mi(t){return!!t._popupDefaults==!1&&!!o==!1?xi(t):Ur(t)}function xi(t){var e=t.ctx;if(e.mods=c=t.extend({theme:"ffffff",autoclosable:"yes",adaptive:"yes",animate:"yes"},c),e.zIndex){var n=e.attrs||(e.attrs={});n.style=(n.style||"")+";z-index:"+e.zIndex+";"}var i=t._popupDefaults;t._popupDefaults=!0,ki(t),t._popupDefaults=i}function wi(t){return!(t.__$anflg90!==!0)==!1&&!t._service==!1&&!!o==!1?Ei(t):Bi(t)}function Ei(t){var e=t.__$anflg90;t.__$anflg90=!0;var n=t.cbirImage;t.cbirImage=t.ctx.cbirImage;var i=t.hideServiceLabel;t.hideServiceLabel=t.ctx.hideServiceLabel;var s=t.isCopyPages;t.isCopyPages=t.ctx.isCopyPages,wi(t),t.cbirImage=n,t.hideServiceLabel=i,t.isCopyPages=s,t.__$anflg90=e}function Bi(t){var e=o;if("hint"===e)return!(t.__$anflg53!==!0)==!1&&!!t._value==!1&&!(0!==t._value)==!1?Si(t):Ii(t);if("control"===e){if(!(t.__$anflg52!==!0)==!1){var n=t.__$anflg52;t.__$anflg52=!0;var i=t.ctx;t.ctx={elem:"box",content:t.ctx};var r=s;return s="",d(t),t.ctx=i,s=r,void(t.__$anflg52=n)}return Ii(t)}return Ii(t)}function Si(t){var e,n,i,r,o,a=t.ctx,c=a.elemMods||(a.elemMods={});return c.visibility="visible",e=t.__$anflg53,t.__$anflg53=!0,i=t.ctx,t.ctx=a,r=s,s="",o=d(t),t.ctx=i,s=r,n=o,t.__$anflg53=e,n}function Ii(t){return!(t.__$anflg50!==!0)==!1&&!!o==!1?Ci(t):Ur(t)}function Ci(t){var e,n,i,r,o,a=(e=s,s="value",n=t.ctx,t.ctx=t.ctx.value,i=ur(t),s=e,t.ctx=n,i),u=t.ctx.id||t.generateId(),l=t.ctx.mods||{},h=(r=s,s="getLive",o=Tr(t),s=r,o);l.theme=l.theme||"normal";var d=t.__$anflg50;t.__$anflg50=!0;var p=t._inputId;t._inputId=u;var f=t._labelId;t._labelId="label"+u;var m=t._hintId;t._hintId="hint"+u;var _=t._name;t._name=t.ctx.name||"";var g=t._value;t._value=a;var b=t._inputLink;t._inputLink=!0;var v=t._disabled;t._disabled=c.disabled;var y=t._live;t._live=h;var k=t.ctx,M=k.mods;k.mods=l,wi(t),t._inputId=p,t._labelId=f,t._hintId=m,t._name=_,t._value=g,t._inputLink=b,t._disabled=v,t._live=y,k.mods=M,t.__$anflg50=d}function Di(t){if(!(t.__$anflg88!==!0)==!1){if(!(c&&"yes"===c["service-label"])==!1){if(!!o==!1){var e,n,i,s;return e=t.__$anflg88,t.__$anflg88=!0,i=t._service,t._service=t.ctx.service,s=Di(t),t._service=i,n=s,t.__$anflg88=e,n}return Ur(t)}return Ur(t)}return Ur(t)}function Pi(t){if(!(t.__$anflg87!==!0)==!1){if(!a.weather==!1){var e=t.__$anflg87;t.__$anflg87=!0;var n=a,i=n.weather;return n.weather=a.weather.replace("-","minus-").replace("+","plus-").replace(/_/g,"-"),Pi(t),n.weather=i,void(t.__$anflg87=e)}return Ti(t)}return Ti(t)}function Ti(t){return!(t.__$anflg86!==!0)==!1?Oi(t):Ur(t)}function Oi(t){var e=t.ctx.png&&t.ctx.svg?t.ctx[BEM.blocks["i-ua"]&&BEM.blocks["suggest2-detect"].isSupportInlineSVG()?"svg":"png"]:t.ctx.svg||t.ctx.png;e&&(t.ctx.attrs=t.extend(Object(t.ctx.attrs),{style:';background-image:url("'+e+'");'+(Object(t.ctx.attrs).style||"")}));var n=t.__$anflg86;t.__$anflg86=!0,Pi(t),t.__$anflg86=n}function $i(t){if(!(t.__$anflg85!==!0)==!1){if(!t.ctx.color==!1){t.ctx.attrs=t.extend(Object(t.ctx.attrs),{style:";color:"+t.ctx.color+";"+(Object(t.ctx.attrs).style||"")});var e=t.__$anflg85;return t.__$anflg85=!0,$i(t),void(t.__$anflg85=e)}return Ur(t)}return Ur(t)}function Ni(t){return!(t.__$anflg84!==!0)==!1?ji(t):Ur(t)}function ji(t){var e=t.ctx.attrs||{};t.ctx.src&&(e.style="background-image: url('"+t.ctx.src+"');"+(e.style||""));var n=t.__$anflg84;t.__$anflg84=!0;var i=t.ctx,s=i.attrs;i.attrs=e,Ni(t),i.attrs=s,t.__$anflg84=n}function Fi(t){var e,n,i,r,o;return e=t.__$anflg82,t.__$anflg82=!0,i=t.ctx,t.ctx={block:"link",mods:{ajax:t.ctx.selected?"yes":""},url:t.ctx.url,mix:[{block:"tabs-navigation",elem:"tab",elemMods:{selected:t.ctx.selected?"yes":"",first:t.ctx.first?"yes":""}}],target:t.ctx.target||"",counter:t.ctx.counter||"",content:t.ctx.title},r=s,s="",o=d(t),t.ctx=i,s=r,n=o,t.__$anflg82=e,n}function Li(t){if(!(t.__$anflg81!==!0)==!1){if(!(c&&"com"===c.type)==!1){var e=t.__$anflg81;t.__$anflg81=!0;var n=t.isComTable;return t.isComTable=!0,Li(t),t.isComTable=n,void(t.__$anflg81=e)}return Ri(t)}return Ri(t)}function Ri(t){if(!(t.__$anflg80!==!0)==!1){if(!(c&&"ru"===c.type)==!1){var e=t.__$anflg80;t.__$anflg80=!0;var n=t.isRuTable;return t.isRuTable=!0,Li(t),t.isRuTable=n,void(t.__$anflg80=e)}return Ai(t)}return Ai(t)}function Ai(t){if(!(t.__$anflg78!==!0)==!1){if(!(c&&"turkish"===c.type)==!1){var e=t.__$anflg78;t.__$anflg78=!0;var n=t.isTurkishTable;return t.isTurkishTable=!0,Li(t),t.isTurkishTable=n,void(t.__$anflg78=e)}return qi(t)}return qi(t)}function zi(t){var e=t["i-services"],n=t.__$anflg74;t.__$anflg74=!0;var i=t.ctx;t.ctx={block:"button",mods:{theme:"pseudo",size:"m"},mix:{block:"services-table",elem:"all"},url:e.serviceUrl("all"),content:e.serviceName("all")};var r=s;s="",d(t),t.ctx=i,s=r,t.__$anflg74=n}function qi(t){return!(t.__$anflg73!==!0)==!1&&!!o==!1&&!!(t.ctx.mods||{}).type==!1?Ui(t):Ur(t)}function Ui(t){var e=t["i-global"]["content-region"],n={tr:"turkish"},i=n[e]||"",r=t.__$anflg73;t.__$anflg73=!0;var o=s;s="";var a=t.ctx,c=a.mods;a.mods=t.extend(t.ctx.mods,{type:i}),d(t),s=o,a.mods=c,t.__$anflg73=r}function Hi(t){return!(t.__$anflg77!==!0)==!1&&!!o==!1?Vi(t):Wi(t)}function Vi(t){var e,n,i,r,o;return e=t.__$anflg77,t.__$anflg77=!0,i=t.ctx,t.ctx=t._.extend(t.ctx,{mix:(t.ctx.mix||[]).concat({block:"service",mods:{name:t.ctx.service}})}),r=s,s="",o=d(t),t.ctx=i,s=r,n=o,t.__$anflg77=e,n}function Wi(t){return!(t.__$anflg75!==!0)==!1&&!!o==!1?Ki(t):Ur(t)}function Ki(t){var e,n,i,s,r,o,a=t.ctx;return e=t.__$anflg75,t.__$anflg75=!0,i=t._url,t._url=a.url!==!1&&(a.url||t["i-services"].serviceUrl(a.service)),s=t._icon,t._icon=a.icon!==!1,r=t._name,t._name=a.name!==!1,o=Hi(t),t._url=i,t._icon=s,t._name=r,n=o,t.__$anflg75=e,n}function Gi(t){if(!(t.__$anflg72!==!0)==!1){if(!!o==!1){var e,n,i,s,r;return e=t.__$anflg72,t.__$anflg72=!0,i=t.ctx,s=i.mods,i.mods=t.extend({state:"close",theme:"normal"},t.ctx.mods),r=Gi(t),i.mods=s,n=r,t.__$anflg72=e,n}return Ur(t)}return Ur(t)}function Yi(t){if(!(t.__$anflg70!==!0)==!1){if(!!o==!1){var e,n,i,s,r;return e=t.__$anflg70,t.__$anflg70=!0,i=t.ctx,s=i.mods,i.mods=t.extend({dir:"t",dur:"150"},t.ctx.mods),r=Yi(t),i.mods=s,n=r,t.__$anflg70=e,n}return Ur(t)}return Ur(t)}function Qi(t){var e=t.__$anflg69;t.__$anflg69=!0;var n=s;s="";var i=t.position;t.position=t.position-1;var r=t.ctx;t.ctx={elem:"layout-unit",content:t.ctx},d(t),s=n,t.position=i,t.ctx=r,t.__$anflg69=e}function Xi(t){var e=t.__$anflg68;t.__$anflg68=!0;var n=s;s="";var i=t.position;t.position=t.position-1;var r=t.ctx;t.ctx={elem:"layout-unit",content:[t.ctx,t.ctx["item-content"]]},d(t),s=n,t.position=i,t.ctx=r,t.__$anflg68=e}function Ji(t){var e=t.ctx.content;e.mix=(e.mix||[]).concat([{block:"dropdown-menu",elem:"switcher"}]);var n=t.__$anflg67;t.__$anflg67=!0;var i=t.ctx;t.ctx=e;var r=s;s="",d(t),t.ctx=i,s=r,t.__$anflg67=n}function Zi(t){var e=t.ctx,n=t.__$anflg66;t.__$anflg66=!0;var i=t.ctx;t.ctx={block:"dropdown",elem:"popup",js:t.ctx.js,mix:(e.mix||[]).concat({block:"dropdown-menu",elem:"popup",mods:t._.extend({size:t.dropdownMenuSize},e.mods)}),mods:t.ctx.mods,attrs:e.attrs,content:{block:"dropdown-menu",elem:"menu",title:e.menuTitle,type:e.type,mods:e.menuMods,mix:e.menuMix,content:e.content}};var r=s;s="",d(t),t.ctx=i,s=r,t.__$anflg66=n}function ts(t){var e=t.ctx,n=t.__$anflg65;t.__$anflg65=!0;var i=t.ctx;t.ctx={block:"dropdown",elem:"popup",js:t.ctx.js,mix:(e.mix||[]).concat({block:"dropdown-menu",elem:"popup",mods:t._.extend({size:t.dropdownMenuSize},e.mods)}),attrs:e.attrs,content:{block:"dropdown-menu",elem:"menu",title:e.menuTitle,type:e.type,mods:e.menuMods,mix:e.menuMix,content:e.content}};var r=s;s="",d(t),t.ctx=i,s=r,t.__$anflg65=n}function es(t){var e=t.ctx,n=e.type||"vert",i=e.mods||{};i.theme||(i.theme="ffffff");var r=t.__$anflg64;t.__$anflg64=!0;var o=t.ctx;t.ctx={block:"b-menu-"+n,mix:(e.mix||[]).concat({block:"dropdown-menu",elem:"menu",mods:i}),title:e.title,content:e.content};var a=s;s="",d(t),t.ctx=o,s=a,t.__$anflg64=r}function ns(t){return!(t.__$anflg63!==!0)==!1&&!!o==!1?is(t):Ur(t)}function is(t){var e=t.ctx,n=e.mods||(e.mods={});n.theme||(n.theme="ffffff"),t.dropdownMenuSize=n.size,t._inDropdownMenu=!0;var i=t.__$anflg63;t.__$anflg63=!0;var r=t.ctx;t.ctx=e;var o=s;s="",d(t),t.ctx=r,s=o,t.__$anflg63=i}function ss(t){return!(t.__$anflg62!==!0)==!1&&!(c&&"yes"===c.menu)==!1&&!t["i-global"].login==!1&&!!o==!1?rs(t):os(t)}function rs(t){var e,n,i,r,o,a,c,u=(e=s,s="user-menu",n=wr(t),s=e,n);return i=t.__$anflg62,t.__$anflg62=!0,o=s,s="",a=t.ctx,t.ctx={block:"dropdown-menu",mods:{user:"yes"},content:[{block:"user",mods:t.ctx.mods,js:t.ctx.js,counter:t.ctx.counter,content:t.ctx.content},{elem:"popup",mods:{user:"yes"},mix:[{block:"popup",mods:{"fade-out":"no","watch-scroll":"no"}}],js:{directions:"bottom-right"},content:u}]},c=d(t),s=o,t.ctx=a,r=c,t.__$anflg62=i,r}function os(t){var e=o;if("ticker"===e){if(!(t.__$anflg59!==!0)==!1){var n=t.__$anflg59;t.__$anflg59=!0;var i=t.ctx;t.ctx={block:"ticker",mix:{block:"user",elem:"ticker"},count:t.ctx.count,content:t.ctx.content};var r=s;return s="",d(t),t.ctx=i,s=r,void(t.__$anflg59=n)}return cs(t)}if("icon"===e){if(!(t.__$anflg57!==!0)==!1){if(!t._uid==!1){var n,i,a=(n=s,s="icon",i=Dr(t),s=n,i),r=t.__$anflg57;t.__$anflg57=!0;var c=t.ctx,u=c._icon;return c._icon=a,ss(t),c._icon=u,void(t.__$anflg57=r)}return cs(t)}return cs(t)}return"name"===e&&!(t.__$anflg56!==!0)==!1?as(t):cs(t)}function as(t){var e=t.ctx,n=t["i-global"],i=e.content||e.login||(n.displayName||{}).name,s=!1;i||(/^uid-/.test(n.login)?(i="",s=!0):i=n.login);var r=t.__$anflg56;t.__$anflg56=!0;var o=t._maxLength;t._maxLength=e.hasOwnProperty("maxLength")?e.maxLength:16;var a=t._maxLengthRelative;t._maxLengthRelative=e.hasOwnProperty("maxLengthRelative")?e.maxLengthRelative:3;var c=t._userName;t._userName=i;var u=t._isUglyUserName;t._isUglyUserName=e.isUglyUserName||s,ss(t),t._maxLength=o,t._maxLengthRelative=a,t._userName=c,t._isUglyUserName=u,t.__$anflg56=r}function cs(t){return!(t.__$anflg55!==!0)==!1&&!!o==!1?us(t):ls(t)}function us(t){var e=t.ctx.js||{};e.uid=e.uid||t["i-global"].uid;var n=t.__$anflg55;t.__$anflg55=!0;var i=t._uid;t._uid=e.uid;var s=t.ctx,r=s.js;s.js=e,ss(t),t._uid=i,s.js=r,t.__$anflg55=n}function ls(t){return"enter"===o&&!(t.__$anflg44!==!0)==!1?hs(t):Ur(t)}function hs(t){var e=BEM.I18N("user","enter"),n=t.__$anflg44;t.__$anflg44=!0;var i=t.ctx;t.ctx=[{block:"button",mods:{pseudo:"yes",size:"m"},mix:[{block:"user",elem:"enter"}],attrs:{tabindex:"-1",title:e,"aria-label":e},content:[{block:"image",mix:[{block:"button",elem:"icon",mods:{16:"enter"}}],alt:""},{block:"user",elem:"enter-label"}]},{block:"domik",mods:{type:"hidden"}}];var r=s;s="",d(t),t.ctx=i,s=r,t.__$anflg44=n}function ds(t){return!(t.__$anflg60!==!0)==!1&&!!o==!1?ps(t):Ur(t)}function ps(t){var e=t.__$anflg60;t.__$anflg60=!0;var n=t._count;t._count=t.ctx.count||0;var i=t._maxCount;t._maxCount=t.ctx.maxCount||99;var s=t._url;t._url=t.ctx.url,ds(t),t._count=n,t._maxCount=i,t._url=s,t.__$anflg60=e}function fs(t){return!(t.__$anflg54!==!0)==!1&&!!o==!1?ms(t):Ur(t)}function ms(t){var e=t.ctx,n=e.checkboxAttrs||{},i=n.id||t.generateId(),s=e.mods||{};s.theme=s.theme||"normal";var r=t.__$anflg54;t.__$anflg54=!0;var o=t._checkboxAttrs;t._checkboxAttrs=n.id?n:{id:"id"+i};var a=t._labelId;t._labelId="label"+i;var c=t.ctx,u=c.mods;c.mods=s,fs(t),t._checkboxAttrs=o,t._labelId=a,c.mods=u,t.__$anflg54=r}function _s(t){var e=t.ctx,n=[{block:"dropdown",elem:"popup"}];e.mix&&(n=n.concat(e.mix));var i=t.__$anflg49;t.__$anflg49=!0;var r=t.ctx;t.ctx={block:"popup",mix:n,mods:e.mods,attrs:e.attrs,js:e.js,content:[{elem:"tail"},{elem:"content",content:e.content}]};var o=s;s="",d(t),t.ctx=r,s=o,t.__$anflg49=i}function gs(t){return"retpath"===o?bs(t):vs(t)}function bs(t){if(!(t.__$anflg48!==!0)==!1){var e=t.__$anflg48;t.__$anflg48=!0;var n=t._retpath;return t._retpath=BEM&&BEM.blocks?BEM.blocks["i-global"].param("retpath"):t["i-global"].retpath,bs(t),t._retpath=n,void(t.__$anflg48=e)}return vs(t)}function vs(t){return!(t.__$anflg47!==!0)==!1&&!!o==!1?ys(t):Ur(t)}function ys(t){var e,n,i,s;BEM&&BEM.blocks?(s=BEM.blocks["i-global"],e=s.param("passport-host"),n=s.param("retpath"),i=s.param("passport-msg")):(s=t["i-global"],e=s["passport-host"],n=s.retpath,i=s["passport-msg"]);var r=t.__$anflg47;t.__$anflg47=!0;var o=t._passportHost;t._passportHost=e;var a=t._paramRetpath;t._paramRetpath=n?"&retpath="+encodeURIComponent(n):"";var c=t._paramFrom;t._paramFrom=i?"&from="+encodeURIComponent(i):"",gs(t),t._passportHost=o,t._paramRetpath=a,t._paramFrom=c,t.__$anflg47=r
}function ks(t){var e,n,i,r,o;return e=t.__$anflg46,t.__$anflg46=!0,i=t.ctx,t.ctx={block:"auth",mix:[{block:"domik",mods:{type:"hidden"}}],js:!1,attrs:{style:"display:none"},content:[{tag:"input",attrs:{name:"login"}},{tag:"input",attrs:{name:"passwd",type:"password"}}]},r=s,s="",o=d(t),t.ctx=i,s=r,n=o,t.__$anflg46=e,n}function Ms(t){return!(a&&"adv"===a.type)==!1?xs(t):ws(t)}function xs(t){if(!!t.ctx.content==!1){var e=t.ctx,n=e.content;return e.content=[{elem:"action-i",tag:"i"},{block:"header",elem:"filters-count",mods:{hidden:t.ctx["enabled-filters"]?"":"yes"},content:t.ctx["enabled-filters"]||""}],xs(t),void(e.content=n)}return ws(t)}function ws(t){if(!!t.ctx.content==!1){var e=t.ctx,n=e.content;return e.content=[{elem:"action-i",tag:"i"}],Ms(t),void(e.content=n)}return Bs(t)}function Es(t){var e,n,i,r,o;return e=t.__$anflg41,t.__$anflg41=!0,i=t.ctx,t.ctx={block:"layout",elem:"col",elemMods:{size:"10"},mix:[{block:"header",elem:"search"}],content:{block:"arrow",mods:{type:"search"},content:t.ctx.content}},r=s,s="",o=d(t),t.ctx=i,s=r,n=o,t.__$anflg41=e,n}function Bs(t){return!(t.__$anflg40!==!0)==!1&&!~["logo","search","nav"].indexOf(o)==!1?Ss(t):Ur(t)}function Ss(t){var e={logo:2,search:10},n=t.__$anflg40;t.__$anflg40=!0;var i=t.ctx;t.ctx=t._.extend(t.ctx,{block:"layout",elem:"col",elemMods:{size:t.ctx.mods&&t.ctx.mods.size||e[o]},mix:[{block:"header",elem:o,elemMods:t.ctx.elemMods}]});var r=s;s="",d(t),t.ctx=i,s=r,t.__$anflg40=n}function Is(t){var e,n,i,r,o;return e=t.__$anflg37,t.__$anflg37=!0,i=t.ctx,t.ctx={block:"link",target:"blank",mix:[{block:"other-sizes",elem:"column-link"}],url:t.ctx.url,content:[t.ctx.resolution.width,{block:"other-sizes",elem:"size-separator",content:"&times;"},t.ctx.resolution.height]},r=s,s="",o=d(t),t.ctx=i,s=r,n=o,t.__$anflg37=e,n}function Cs(t){var e,n,i,r,o;return e=t.__$anflg36,t.__$anflg36=!0,i=t.ctx,t.ctx={block:"link",mix:[{block:"other-sites",elem:"outer-link"}],mods:{outer:"yes"},url:t.ctx.url,target:"_blank",content:t.ctx.content},r=s,s="",o=d(t),t.ctx=i,s=r,n=o,t.__$anflg36=e,n}function Ds(t){var e,n,i,r,o;return e=t.__$anflg35,t.__$anflg35=!0,i=t.ctx,t.ctx={block:"link",mix:[{block:"other-sites",elem:"title-link"}],url:t.ctx.url,target:"_blank",content:t.ctx.content},r=s,s="",o=d(t),t.ctx=i,s=r,n=o,t.__$anflg35=e,n}function Ps(t){var e,n,i,r,o;return e=t.__$anflg32,t.__$anflg32=!0,i=t.ctx,t.ctx={block:"button",mix:[{block:"back",js:!0,mods:t.ctx.mods}],mods:{size:"s",theme:"pseudo"},content:[{block:"image",mix:[{block:"button",elem:"icon",mods:{6:"back"}}],alt:""},t.ctx.caption]},r=s,s="",o=d(t),t.ctx=i,s=r,n=o,t.__$anflg32=e,n}function Ts(t){var e,n,i,r,o;return e=t.__$anflg31,t.__$anflg31=!0,i=t.ctx,t.ctx={block:"b-501px-wizard",elem:"wrap",mix:[{block:"fluider",elem:"item"}],content:{block:"b-501px-wizard",elem:"thumb",thumb:t.ctx.thumb}},r=s,s="",o=d(t),t.ctx=i,s=r,n=o,t.__$anflg31=e,n}function Os(t){var e,n,i,r,o;return e=t.__$anflg30,t.__$anflg30=!0,i=t.ctx,t.ctx={block:"popup",mods:{hoverable:"yes",wizard:"yes"},js:{directions:"top-right-right"},content:[{elem:"tail"},{elem:"content",content:t.ctx.content}]},r=s,s="",o=d(t),t.ctx=i,s=r,n=o,t.__$anflg30=e,n}function $s(t){var e,n,i,r,o;return e=t.__$anflg29,t.__$anflg29=!0,i=t.ctx,t.ctx={block:"link",mods:{ajax:"yes"},mix:[{block:"b-501px-wizard",elem:"images"},{block:"fluider",js:{margin:1,minItemWidth:25}}],url:"#",content:t.ctx.content},r=s,s="",o=d(t),t.ctx=i,s=r,n=o,t.__$anflg29=e,n}function Ns(t){var e,n,i,r,o;return e=t.__$anflg28,t.__$anflg28=!0,i=t.ctx,t.ctx={block:"link",url:t.ctx.url,mix:[{block:"b-501px-info",elem:"program"}],content:t.ctx.content},r=s,s="",o=d(t),t.ctx=i,s=r,n=o,t.__$anflg28=e,n}function js(t){return!(t.__$anflg27!==!0)==!1&&!!o==!1?Fs(t):Ur(t)}function Fs(t){var e,n,i,r,o;return e=t.__$anflg27,t.__$anflg27=!0,i=t.ctx,t.ctx={block:"b-501px-popup",mods:{type:"info",scrollable:"yes",centering:"yes"},mix:[{block:"b-501px-info",js:t.ctx.js}],title:t.ctx.title,content:t.ctx.content},r=s,s="",o=d(t),t.ctx=i,s=r,n=o,t.__$anflg27=e,n}function Ls(t){var e,n,i,r,o;return e=t.__$anflg26,t.__$anflg26=!0,i=t.ctx,t.ctx={block:"button",mods:{size:"m",theme:"pseudo",type:"search",triggerable:"yes"},mix:[{block:"b-501px",elem:"search"},{block:"link",mods:{ajax:"yes"}}],url:t.ctx.url,content:[{block:"icon",mix:[{block:"button",elem:"icon"}]},{block:"b-501px",elem:"search-text",tag:"span",content:BEM.I18N("b-501px__search","Ещё картинки<br> по этой теме")}]},r=s,s="",o=d(t),t.ctx=i,s=r,n=o,t.__$anflg26=e,n}function Rs(t){var e,n,i,r,o;return e=t.__$anflg25,t.__$anflg25=!0,i=t.ctx,t.ctx={block:"button",mods:{size:"m",theme:"pseudo",type:"download"},mix:{block:"b-501px",elem:"download"},attrs:{target:"_blank"},url:t.ctx.url,content:[{block:"icon",mix:[{block:"button",elem:"icon"}]},{block:"b-501px",elem:"download-text",tag:"span",content:BEM.I18N("b-501px__download","Скачать обои<br> для моего экрана")}]},r=s,s="",o=d(t),t.ctx=i,s=r,n=o,t.__$anflg25=e,n}function As(t){var e,n,i,r,o;return e=t.__$anflg24,t.__$anflg24=!0,i=t.ctx,t.ctx={block:"link",mods:{outer:"yes"},mix:[{block:"b-501px",elem:"author-link"}],url:t.ctx.url,attrs:{target:"_blank"},content:t.ctx.content},r=s,s="",o=d(t),t.ctx=i,s=r,n=o,t.__$anflg24=e,n}function zs(t){var e,n,i,r,o;return e=t.__$anflg21,t.__$anflg21=!0,i=t.ctx,t.ctx=t._.extend(t.ctx,{block:"link",elem:"",mix:function(t){return t.mix=t.mix||[],t.mix.push({block:"misspell",elem:"link"}),t.mix}(t.ctx)}),r=s,s="",o=d(t),t.ctx=i,s=r,n=o,t.__$anflg21=e,n}function qs(t){var e=o;return"control"===e?!(t.__$anflg20!==!0)==!1&&!(c&&"track"===c.theme)==!1?Us(t):Ks(t):"text"===e?!(t.__$anflg19!==!0)==!1&&!(c&&"track"===c.theme)==!1?Hs(t):Vs(t):Ks(t)}function Us(t){var e,n,i,r,o;return e=t.__$anflg20,t.__$anflg20=!0,i=t.ctx,t.ctx={elem:"control-wrap",tag:"span",content:t.ctx},r=s,s="",o=d(t),t.ctx=i,s=r,n=o,t.__$anflg20=e,n}function Hs(t){var e,n,i,r,o;return e=t.__$anflg19,t.__$anflg19=!0,i=t.ctx,t.ctx={tag:"",content:""},r=s,s="",o=d(t),t.ctx=i,s=r,n=o,t.__$anflg19=e,n}function Vs(t){return!(t.__$anflg18!==!0)==!1&&!(c&&"star"===c.theme)==!1?Ws(t):Ks(t)}function Ws(t){var e,n,i,r,o;return e=t.__$anflg18,t.__$anflg18=!0,i=t.ctx,t.ctx={tag:"",content:""},r=s,s="",o=d(t),t.ctx=i,s=r,n=o,t.__$anflg18=e,n}function Ks(t){return!(t.__$anflg17!==!0)==!1&&!!o==!1?Gs(t):Ys(t)}function Gs(t){var e=t.ctx;e.mods||(e.mods={}),e.mods.theme||(e.mods.theme="normal");var n=t.__$anflg17;t.__$anflg17=!0;var i=t._radioButton;t._radioButton={name:e.name,value:e.value,disabled:Boolean(e.mods.disabled)},qs(t),t._radioButton=i,t.__$anflg17=n}function Ys(t){return"radio"===o&&!(t.__$anflg16!==!0)==!1?Qs(t):Ur(t)}function Qs(t){t.ctx.elemMods||(t.ctx.elemMods={});var e=t.ctx.elemMods,n=t._radioButton,i=n.disabled,s=t.extend({},t.ctx.controlAttrs),r=void 0!==s.value&&s.value===n.value;r&&(e.checked="yes",e.pressed="yes"),e.checked&&(e.pressed="yes"),i&&(e.disabled="yes");var o=Object(t.ctx.mods).side;e.side||(e.side=o?o:["","right","left","both"][2*t.isFirst()+t.isLast()]),t._nextForPressed&&(e["next-for-pressed"]="yes",t._nextForPressed=!1),t._nextForPressed=e.checked,s.checked=Boolean(e.checked),s.disabled=Boolean(e.disabled),s.id||(s.id=t.generateId());var a=t.__$anflg16;t.__$anflg16=!0;var c=t._controlAttrs;t._controlAttrs=s,Ks(t),t._controlAttrs=c,t.__$anflg16=a}function Xs(t){return"radio"===o?Js(t):tr(t)}function Js(t){return!(t.__$anflg14!==!0)==!1?Zs(t):tr(t)}function Zs(t){var e,n,i,s,r=t.ctx,o=t.extend({id:t.generateId(),type:"radio",name:t._name},r.controlAttrs),a=void 0!==o.value&&o.value===t._value;return r.elemMods=t.extend({disabled:t._disabled,checked:a?"yes":""},r.elemMods),"yes"===r.elemMods.disabled&&(o.disabled="disabled",o.tabindex=-1),"yes"===r.elemMods.checked&&(o.checked="checked"),e=t.__$anflg14,t.__$anflg14=!0,i=t._controlAttrs,t._controlAttrs=o,s=Js(t),t._controlAttrs=i,n=s,t.__$anflg14=e,n}function tr(t){return!(t.__$anflg13!==!0)==!1&&!!o==!1?er(t):Ur(t)}function er(t){var e=t.ctx,n=t.extend({theme:"normal"},e.mods),i=t.__$anflg13;t.__$anflg13=!0;var s=t.ctx,r=s.mods;s.mods=n;var o=t._disabled;t._disabled=n.disabled;var a=t._name;t._name=t.ctx.name;var c=t._value;t._value=t.ctx.value,Xs(t),s.mods=r,t._disabled=o,t._name=a,t._value=c,t.__$anflg13=i}function nr(t){var e,n,i,r,o;return e=t.__$anflg8,t.__$anflg8=!0,i=t.ctx,t.ctx={block:"popup",mods:{"has-close":"yes",autoclosable:"no",animate:"no",position:"fixed","watch-scroll":"no"},js:{directions:"top",position:{top:"i-kostyl"}},mix:[t.ctx],content:[{elem:"content",content:[{block:"nps",elem:"text",js:t.ctx.params},t.ctx.content,{block:"nps",elem:"button",content:{block:"button",mods:{theme:"action",size:"s"}}},{block:"clearfix"}]}]},r=s,s="",o=d(t),t.ctx=i,s=r,n=o,t.__$anflg8=e,n}function ir(e){var n=e.ctx.ie;if(n===!0){var i=s;s="";var r=e.ctx;e.ctx=[6,7,8,9].map(function(t){return{elem:"css",url:this.ctx.url+".ie"+t+".css",ie:"IE "+t}},t(e)),d(e),s=i,e.ctx=r}else{var o=n?"!IE"===n?[n,"<!-->","<!--"]:[n,"",""]:["gt IE 9","<!-->","<!--"],a=s;s="";var c=e.ctx,u=c._ieCommented;c._ieCommented=!0;var l=e.ctx;e.ctx=["<!--[if "+o[0]+"]>",o[1],e.ctx,o[2],"<![endif]-->"],d(e),s=a,c._ieCommented=u,e.ctx=l}}function sr(t){return!(t.__$anflg4!==!0)==!1&&!!o==!1?rr(t):Ur(t)}function rr(t){var e,n,i,r,o=t.ctx,a=(e=s,s="doctype",n=qr(t),s=e,n),c=(i=s,s="xUACompatible",r=Rr(t),s=i,r),u=[a,{elem:"root",content:[{elem:"head",content:[o.csp&&t.extend(o.csp,{elem:"csp"}),{tag:"meta",attrs:{charset:"utf-8"}},c,{tag:"title",content:o.title},o.favicon?{elem:"favicon",url:o.favicon}:"",o.meta,{block:"i-ua",attrs:{nonce:o.nonce}},o.head]},o]}];t._nonce=t.ctx.nonce;var l=t.__$anflg4;t.__$anflg4=!0;var h=t.ctx;t.ctx=u;var p=s;s="",d(t),t.ctx=h,s=p,t.__$anflg4=l}function or(t){var e,n,i,r;if(!t.ctx)return"";var o=t.ctx,a=o.keyset,c=o.key,u=o.params||{};if(!a&&!c)return"";if(o.content){var l;u.content=(l=[],e=t._buf,t._buf=l,n=s,s="",i=t.ctx,t.ctx=o.content,r=d(t),t._buf=e,s=n,t.ctx=i,l.join(""))}t._buf.push(BEM.I18N(a,c,u))}function ar(t){var e,n,i,r,o;return e=t.__$anflg3,t.__$anflg3=!0,i=t.ctx,t.ctx={block:"b-page",elem:"js",nonce:t.ctx.nonce||t._nonce,url:"//yastatic.net/jquery/1.8.3/jquery.min.js"},r=s,s="",o=d(t),t.ctx=i,s=r,n=o,t.__$anflg3=e,n}function cr(t){return t.ctx.value||"left"!==t.ctx.side}function ur(t){return!t.isSimple(t.ctx)==!1&&!!o==!1?t.ctx:lr(t)}function lr(t){if(!t.ctx==!1){if(!!o==!1){var e=[],n=t._buf;t._buf=e;var i=s;return s="",d(t),t._buf=n,s=i,e.join("")}return hr(t)}return hr(t)}function hr(t){return!!o==!1?"":Ur(t)}function dr(){return void 0}function pr(){return!(a&&"uk"===a.icon)==!1?"ua":!(a&&"tt"===a.icon)==!1?"tt":!(a&&"tr"===a.icon)==!1?"tr":!(a&&"ru"===a.icon)==!1?"ru":!(a&&"kk"===a.icon)==!1?"kz":!(a&&"en"===a.icon)==!1?"gb":!(a&&"be"===a.icon)==!1?"by":"gb"}function fr(t){return!!o==!1?mr(t):Ur(t)}function mr(){return{10000:{id:"10000",lang:"en",ename:"Earth",short_ename:"com",name:"Земля",parent:0},225:{id:"225",lang:"ru",ename:"Russia",short_ename:"ru",name:"Россия",parent:"10000"},213:{id:"213",ename:"Moscow",short_ename:"msk",name:"Москва",parent:"225"},9999:{id:"9999",ename:"Yandex",short_ename:"yndx",name:"Яндекс",parent:"213"},187:{id:"187",lang:"uk",ename:"Ukraine",short_ename:"ua",name:"Украина",parent:"10000"},149:{id:"149",lang:"be",ename:"Belarus",short_ename:"by",name:"Беларусь",parent:"10000"},159:{id:"159",lang:"kk",ename:"Kazakhstan",short_ename:"kz",name:"Казахстан",parent:"10000"},11119:{id:"11119",lang:"tt",ename:"Tatarstan",short_ename:"tt",name:"Республика Татарстан",parent:"10000"},167:{id:"167",lang:"az",ename:"Azerbaijan",short_ename:"az",name:"Азербайджан",parent:"10000"},983:{id:"983",lang:"tr",ename:"Turkey",short_ename:"tr",name:"Турция",parent:"10000"},20730:{id:"20730",lang:"en",ename:"Mars",short_ename:"mars",name:"Марс",parent:0,hidden:!0}}}function _r(e){var n,i,o,a=e["i-geodata"]={},c=e["i-global"],u=t(e);a._data=(n=r,r="i-geodata",i=s,s="regions",o=fr(e),r=n,s=i,o),a._getRegionLang=function(t){return t.lang||a._getRegionLang(a._data[t.parent])},a.getRegion=function(t){t||(t={short_ename:c["user-region"]||c["content-region"]});var e;if(t.id)e=t.id;else{var n,i;for(n in a._data)for(i in t){if(t.hasOwnProperty(i)&&t[i]===a._data[n][i]&&!a._data[n].hidden){e=a._data[n].id;break}if(e)break}}var s=a._data[e];return s.lang||(s.lang=a._getRegionLang(s)),s},a.isRegionIn=function(t,e,n){!e||u._.isSimple(e)||n||(n=e,e=!1),e||(e="short_ename"),n=a.getRegion(n);for(var i in t)if(t.hasOwnProperty(i)&&t[i]==n[e])return n;return n.parent?a.isRegionIn(t,e,{id:n.parent}):!1};var l=e.__$anflg102;e.__$anflg102=!0,d(e),e.__$anflg102=l}function gr(t){return!t._==!1&&!!t._.cleverSubstring==!1?(t._.cleverSubstring=function(t,e,n){return t.length>e+n?t.substring(0,e-1)+"…":t},void Zr(t)):br(t)}function br(t){return!t["i-global"]==!1&&!!t["i-services"]==!1?vr(t):yr(t)}function vr(e){var n,i,o,a=e["i-services"]={},c=t(e);a._data=(n=r,r="i-services",i=s,s="service-url",o=Fr(e),r=n,s=i,o),a.serviceName=function(t){return BEM.I18N("i-services",t||c["i-global"].id)},a.serviceUrl=function(t,e){var n=c["i-global"];return t||(t=n.id),a._data[t](e||n["content-region"])},Zr(e)}function yr(t){return"popup"===r&&!t._popupDefaults==!1&&!!o==!1?(delete t._popupDefaults,void Zr(t)):Ur(t)}function kr(t){return{elem:"input",content:t.ctx.content}}function Mr(){return void 0}function xr(t){return t.ctx.label?t.ctx.label:BEM.I18N("search","search-for")}function wr(e){var n,i,r=(n=s,s="exit-url",i=Er(e),s=n,i),o=e.ctx.counters||{};return[{elem:"item",type:"mail",content:{block:"link",mods:o.mail?{counter:"yes"}:{},url:e["i-services"].serviceUrl("mail"),counter:o.mail,content:[{block:"image",mods:{icon:"mail"}},{elem:"text",tag:"span",mix:[{block:"user-menu-update",js:!0}],content:function(){var t=this.ctx.js&&this.ctx.js.mail||0,e=t?t+" ":"";return e+BEM.I18N("user","letter",{count:t})}.call(t(e))}]}},{elem:"item",type:"mailCompose",content:{block:"link",mods:o.write?{counter:"yes"}:{},content:BEM.I18N("user","letter_compose"),url:e["i-services"].serviceUrl("mail")+"/compose",counter:o.write}},{elem:"item",type:"disk",content:{block:"link",url:e["i-services"].serviceUrl("disk")+"?source=main-loginmenu",content:[{block:"image",mods:{icon:"disk"}},{elem:"text",tag:"span",content:BEM.I18N("user","upload_files")}]}},{elem:"item",mods:{separator:"yes"}},{elem:"item",type:"tune",content:{block:"link",mods:o.settings?{counter:"yes"}:{},content:BEM.I18N("user","tune"),url:e["i-services"].serviceUrl("tune"),counter:o.settings}},{elem:"item",type:"passport",content:{block:"link",mods:o.passport?{counter:"yes"}:{},content:BEM.I18N("user","passport"),url:e["i-services"].serviceUrl("passport"),counter:o.passport}},{elem:"item",type:"logout",content:{block:"link",mods:o.logout?{counter:"yes"}:{},mix:[{block:"user",js:{_uniqId:"user__logout"}},{block:"user",elem:"logout"}],content:BEM.I18N("user","exit"),url:r,counter:o.logout}}]}function Er(t){var e=t["i-global"],n="/passport?mode=";return n+="logout&yu="+(e.yandexuid||""),e.retpath&&(n+="&retpath="+encodeURIComponent(e.retpath)),e["passport-host"]+n}function Br(t){return t._count>t._maxCount?t._maxCount+"+":t._count}function Sr(t){if(!(t.__$anflg58!==!0)==!1){var e,n;return"com.tr"==t["i-global"].tld?"mail":(e=t.__$anflg58,t.__$anflg58=!0,n=Sr(t),t.__$anflg58=e,n)}return Ur(t)}function Ir(){return"//avatars.yandex.net"}function Cr(){return"middle"}function Dr(t){var e,n,i,r;return[(e=s,s="host",n=Ir(t),s=e,n),"/get-yapic/",t._uid,"/islands-",(i=s,s="iconSize",r=Cr(t),s=i,r),"?rnd=",+new Date].join("")}function Pr(t){var e=t.ctx;return[{elem:"first-letter",tag:"span",content:e.charAt(0)},e.slice(1)]}function Tr(t){var e,n,i=(e=s,s="live",n=Or(t),s=e,n),r=t.ctx.js,o=t.ctx.mods,a={autofocus:"yes",width:"content","tap-ahead":"yes"};if(r){if(r.autoFocus&&r.live)throw new Error('input block can\'t have both "live" and "autoFocus" enabled');r.hasOwnProperty("live")&&(i=r.live);var c=Object.keys(a).some(function(t){return o[t]===a[t]});(c||r.autoFocus)&&(i=!1)}return i}function Or(){return!1}function $r(t){return!!t.ctx.content==!1&&!!o==!1?[{elem:"username"},{elem:"password"},{elem:"row",mods:{button:"yes"},content:[{elem:"haunter"},{elem:"button"}]},{elem:"social"},{elem:"row",content:[{elem:"remember"},{elem:"register"}]}]:Nr(t)}function Nr(t){return!!o==!1?[]:Ur(t)}function jr(t){var e,n;return BEM&&BEM.blocks?(e=BEM.blocks["i-global"],n=e.param("passport-msg")):(e=t["i-global"],n=e["passport-msg"]),[t._passportHost,"/auth?twoweeks=yes",n?"&from="+encodeURIComponent(n):""].join("")}function Fr(t){return!!o==!1?Lr(t):Ur(t)}function Lr(){return{serp:function(t){return"ru"===t?"http://yandex.ru":"ua"===t?"http://yandex.ua":"by"===t?"http://yandex.by":"kz"===t?"http://yandex.kz":"com"===t?"http://www.yandex.com":"tr"===t?"http://www.yandex.com.tr":"http://yandex.ru"},mail:function(t){return"ru"===t?"https://mail.yandex.ru":"ua"===t?"https://mail.yandex.ua":"by"===t?"https://mail.yandex.by":"kz"===t?"https://mail.yandex.kz":"com"===t?"https://mail.yandex.com":"tr"===t?"https://mail.yandex.com.tr":"https://mail.yandex.ru"},pdd:function(t){return"ru"===t?"http://pdd.yandex.ru":"http://pdd.yandex.ru"},zakladki:function(t){return"ru"===t?"http://zakladki.yandex.ru":"http://zakladki.yandex.ru"},fotki:function(t){return"ru"===t?"http://fotki.yandex.ru":"http://fotki.yandex.ru"},moikrug:function(t){return"ru"===t?"http://moikrug.ru":"http://moikrug.ru"},direct:function(t){return"ru"===t?"http://direct.yandex.ru":"ua"===t?"http://direct.yandex.ua":"by"===t?"http://direct.yandex.by":"kz"===t?"http://direct.yandex.kz":"com"===t?"http://direct.yandex.com":"http://direct.yandex.ru"},money:function(t){return"ru"===t?"https://money.yandex.ru":"https://money.yandex.ru"},lenta:function(t){return"ru"===t?"http://lenta.yandex.ru":"http://lenta.yandex.ru"},market:function(t){return"ru"===t?"//market.yandex.ru":"ua"===t?"//market.yandex.ua":"by"===t?"//market.yandex.by":"kz"===t?"//market.yandex.kz":"tr"===t?"//market.yandex.com.tr":"//market.yandex.ru"},"market.advertising":function(t){return"ru"===t?"http://welcome.advertising.yandex.ru/market/":"http://welcome.advertising.yandex.ru/market/"},wow:function(t){return"ru"===t?"http://my.ya.ru":"http://my.ya.ru"},tv:function(t){return"ru"===t?"http://tv.yandex.ru":"ua"===t?"http://tv.yandex.ua":"by"===t?"http://tv.yandex.by":"kz"===t?"http://tv.yandex.kz":"http://tv.yandex.ru"},afisha:function(t){return"ru"===t?"http://afisha.yandex.ru":"ua"===t?"http://afisha.yandex.ua":"by"===t?"http://afisha.yandex.by":"kz"===t?"http://afisha.yandex.kz":"tr"===t?"http://afis.yandex.com.tr":"http://afisha.yandex.ru"},calendar:function(t){return"ru"===t?"http://calendar.yandex.ru":"http://calendar.yandex.ru"},nahodki:function(t){return"ru"===t?"http://nahodki.yandex.ru":"ua"===t?"http://nahodki.yandex.ua":"kz"===t?"http://nahodki.yandex.kz":"http://nahodki.yandex.ru"},weather:function(t){return"ru"===t?"http://pogoda.yandex.ru":"ua"===t?"http://pogoda.yandex.ua":"by"===t?"http://pogoda.yandex.by":"kz"===t?"http://pogoda.yandex.kz":"tr"===t?"http://hava.yandex.com.tr":"http://pogoda.yandex.ru"},kuda:function(t){return"ru"===t?"http://kuda.yandex.ru":"http://kuda.yandex.ru"},video:function(t){return"ru"===t?"http://www.yandex.ru/video/":"ua"===t?"http://www.yandex.ua/video/":"by"===t?"http://www.yandex.by/video/":"kz"===t?"http://www.yandex.kz/video/":"com"===t?"http://www.yandex.com/video/":"tr"===t?"http://www.yandex.com.tr/video/":"http://yandex.ru/video/"},"video-com":function(t){return"ru"===t?"http://video.yandex.com":"http://video.yandex.com"},music:function(t){return"ru"===t?"//music.yandex.ru":"ua"===t?"//music.yandex.ua":"by"===t?"//music.yandex.by":"kz"===t?"//music.yandex.kz":"//music.yandex.ru"},"music-partner":function(t){return"ru"===t?"http://music-partner.yandex.ru":"http://music-partner.yandex.ru"},www:function(t){return"ru"===t?"http://www.yandex.ru":"ua"===t?"http://www.yandex.ua":"com"===t?"http://www.yandex.com":"by"===t?"http://www.yandex.by":"kz"===t?"http://www.yandex.kz":"tr"===t?"http://www.yandex.com.tr":"http://www.yandex.ru"},search:function(t){return"ru"===t?"http://yandex.ru":"ua"===t?"http://yandex.ua":"com"===t?"http://yandex.com":"by"===t?"http://yandex.by":"kz"===t?"http://yandex.kz":"tr"===t?"http://yandex.com.tr":"http://yandex.ru"},review:function(t){return"ru"===t?"http://yandex.ru":"ua"===t?"http://yandex.ua":"by"===t?"http://yandex.by":"kz"===t?"http://yandex.kz":"com"===t?"http://www.yandex.com":"tr"===t?"http://www.yandex.com.tr":"http://yandex.ru"},fresh:function(t){return"ru"===t?"http://yandex.ru":"ua"===t?"http://yandex.ua":"by"===t?"http://yandex.by":"kz"===t?"http://yandex.kz":"com"===t?"http://www.yandex.com":"tr"===t?"http://www.yandex.com.tr":"http://yandex.ru"},news:function(t){return"ru"===t?"http://news.yandex.ru":"ua"===t?"http://news.yandex.ua":"by"===t?"http://news.yandex.by":"kz"===t?"http://news.yandex.kz":"tr"===t?"http://haber.yandex.com.tr":"http://news.yandex.ru"},"news-com":function(t){return"ru"===t?"http://news.yandex.com":"http://news.yandex.com"},maps:function(t){return"ru"===t?"//maps.yandex.ru":"ua"===t?"//maps.yandex.ua":"tr"===t?"//harita.yandex.com.tr":"//maps.yandex.ru"},"maps-com":function(t){return"ru"===t?"http://maps.yandex.com":"http://maps.yandex.com"},probki:function(t){return"ru"===t?"http://probki.yandex.ru":"ua"===t?"http://probki.yandex.ua":"http://probki.yandex.ru"},slovari:function(t){return"ru"===t?"//slovari.yandex.ru":"ua"===t?"//slovari.yandex.ua":"by"===t?"//slovari.yandex.by":"kz"===t?"//slovari.yandex.kz":"//slovari.yandex.ru"},images:function(t){return"ru"===t?"http://www.yandex.ru/images/":"ua"===t?"http://www.yandex.ua/images/":"by"===t?"http://www.yandex.by/images/":"kz"===t?"http://www.yandex.kz/images/":"com"===t?"http://www.yandex.com/images/":"tr"===t?"http://www.yandex.com.tr/gorsel/":"http://yandex.ru/images/"},"images-com":function(){return"http://www.yandex.com/images/"},blogs:function(t){return"ru"===t?"http://blogs.yandex.ru":"ua"===t?"http://blogs.yandex.ua":"by"===t?"http://blogs.yandex.by":"kz"===t?"http://blogs.yandex.kz":"http://blogs.yandex.ru"},auto:function(t){return"ru"===t?"http://auto.yandex.ru":"ua"===t?"http://auto.yandex.ua":"http://auto.yandex.ru"},adresa:function(t){return"ru"===t?"http://adresa.yandex.ru":"http://adresa.yandex.ru"},games:function(t){return"ru"===t?"http://games.yandex.ru":"http://games.yandex.ru"},yaca:function(t){return"ru"===t?"http://yaca.yandex.ru":"ua"===t?"http://yaca.yandex.ua":"by"===t?"http://yaca.yandex.by":"http://yaca.yandex.ru"},rasp:function(t){return"ru"===t?"http://rasp.yandex.ru":"ua"===t?"http://rasp.yandex.ua":"by"===t?"http://rasp.yandex.by":"kz"===t?"http://rasp.yandex.kz":"tr"===t?"http://seferler.yandex.com.tr":"http://rasp.yandex.ru"},avia:function(t){return"ru"===t?"https://avia.yandex.ru":"ua"===t?"https://avia.yandex.ua":"https://avia.yandex.ru"},ticket:function(){return"http://ticket.yandex.ru"},pvo:function(t){return"ru"===t?"http://ask.yandex.ru":"http://ask.yandex.ru"},online:function(t){return"ru"===t?"http://online.yandex.ru":"http://online.yandex.ru"},books:function(t){return"ru"===t?"http://books.yandex.ru":"http://books.yandex.ru"},site:function(t){return"ru"===t?"http://site.yandex.ru":"ua"===t?"http://site.yandex.ua":"tr"===t?"http://ozel.yandex.com.tr":"http://site.yandex.ru"},bar:function(t){return"ru"===t?"http://bar.yandex.ru":"ua"===t?"http://bar.yandex.ua":"by"===t?"http://bar.yandex.by":"kz"===t?"http://bar.yandex.kz":"tr"===t?"http://bar.yandex.com.tr":"http://bar.yandex.ru"},widgets:function(t){return"ru"===t?"http://widgets.yandex.ru":"ua"===t?"http://widgets.yandex.ua":"by"===t?"http://widgets.yandex.by":"kz"===t?"http://widgets.yandex.kz":"tr"===t?"http://widgets.yandex.com.tr":"http://widgets.yandex.ru"},wdgt:function(t){return"ru"===t?"http://wdgt.yandex.ru":"ua"===t?"http://wdgt.yandex.ua":"by"===t?"http://wdgt.yandex.by":"kz"===t?"http://wdgt.yandex.kz":"tr"===t?"http://wdgt.yandex.com.tr":"http://wdgt.yandex.ru"},interests:function(t){return"ru"===t?"http://interests.yandex.ru":"http://interests.yandex.ru"},kraski:function(t){return"ru"===t?"http://kraski.yandex.ru":"http://kraski.yandex.ru"},local:function(t){return"ru"===t?"http://local.yandex.ru":"http://local.yandex.ru"},museums:function(t){return"ru"===t?"http://18.yandex.ru":"http://18.yandex.ru"},collection:function(t){return"ru"===t?"http://collection.yandex.ru":"http://collection.yandex.ru"},company:function(t){return"ru"===t?"http://company.yandex.ru":"com"===t?"http://company.yandex.com":"tr"===t?"http://company.yandex.com.tr":"http://company.yandex.ru"},tests:function(t){return"ru"===t?"http://tests.yandex.ru":"http://tests.yandex.ru"},referats:function(t){return"ru"===t?"http://referats.yandex.ru":"http://referats.yandex.ru"},terms:function(t){return"ru"===t?"http://terms.yandex.ru":"http://terms.yandex.ru"},tune:function(t){return"ru"===t?"http://tune.yandex.ru":"ua"===t?"http://tune.yandex.ua":"com"===t?"http://tune.yandex.com":"by"===t?"http://tune.yandex.by":"kz"===t?"http://tune.yandex.kz":"tr"===t?"http://tune.yandex.com.tr":"http://tune.yandex.ru"},api:function(t){return"ru"===t?"http://api.yandex.ru":"com"===t?"http://api.yandex.com":"http://api.yandex.ru"},punto:function(t){return"ru"===t?"http://punto.yandex.ru":"http://punto.yandex.ru"},opinion:function(t){return"ru"===t?"http://opinion.yandex.ru":"http://opinion.yandex.ru"},perevod:function(t){return"ru"===t?"http://perevod.yandex.ru":"http://perevod.yandex.ru"},rabota:function(t){return"ru"===t?"http://rabota.yandex.ru":"ua"===t?"http://rabota.yandex.ua":"by"===t?"http://rabota.yandex.by":"kz"===t?"http://rabota.yandex.kz":"http://rabota.yandex.ru"},sprav:function(t){return"ru"===t?"http://sprav.yandex.ru":"ua"===t?"http://sprav.yandex.ua":"by"===t?"http://sprav.yandex.by":"kz"===t?"http://sprav.yandex.kz":"tr"===t?"http://rehber.yandex.com.tr":"http://sprav.yandex.ru"},realty:function(t){return"ru"===t?"http://realty.yandex.ru":"ua"===t?"http://realty.yandex.ua":"by"===t?"http://realty.yandex.by":"kz"===t?"http://realty.yandex.kz":"http://realty.yandex.ru"},advertising:function(t){return"ru"===t?"http://advertising.yandex.ru":"ua"===t?"http://advertising.yandex.ua":"com"===t?"http://advertising.yandex.com":"by"===t?"http://advertising.yandex.by":"kz"===t?"http://advertising.yandex.kz":"http://advertising.yandex.ru"},expert:function(t){return"ru"===t?"http://expert.yandex.ru":"http://expert.yandex.ru"},"direct.market":function(t){return"ru"===t?"http://partner.market.yandex.ru/yandex.market/":"http://partner.market.yandex.ru/yandex.market/"},ba:function(t){return"ru"===t?"http://ba.yandex.ru":"ua"===t?"http://ba.yandex.ua":"com"===t?"http://ba.yandex.com":"by"===t?"http://ba.yandex.by":"kz"===t?"http://ba.yandex.kz":"http://ba.yandex.ru"},bayan:function(t){return"ru"===t?"http://bayan.yandex.ru":"http://bayan.yandex.ru"},partners:function(t){return"ru"===t?"http://partner.yandex.ru":"ua"===t?"http://partner.yandex.ua":"com"===t?"http://partner.yandex.com":"by"===t?"http://partner.yandex.by":"kz"===t?"http://partner.yandex.kz":"http://partner.yandex.ru"},metrika:function(t){return"ru"===t?"https://metrika.yandex.ru":"ua"===t?"https://metrika.yandex.ua":"com"===t?"https://metrica.yandex.com":"by"===t?"https://metrika.yandex.by":"kz"===t?"https://metrika.yandex.kz":"tr"===t?"https://metrica.yandex.com.tr":"https://metrika.yandex.ru"},balance:function(t){return"ru"===t?"http://balance.yandex.ru":"http://balance.yandex.ru"},wordstat:function(t){return"ru"===t?"http://wordstat.yandex.ru":"http://wordstat.yandex.ru"},webmaster:function(t){return"ru"===t?"http://webmaster.yandex.ru":"ua"===t?"http://webmaster.yandex.ua":"com"===t?"http://webmaster.yandex.com":"tr"===t?"http://webmaster.yandex.com.tr":"http://webmaster.yandex.ru"},server:function(t){return"ru"===t?"http://company.yandex.ru/technology/server/":"http://company.yandex.ru/technology/server/"},stat:function(t){return"ru"===t?"http://stat.yandex.ru":"ua"===t?"http://stat.yandex.ua":"by"===t?"http://stat.yandex.by":"http://stat.yandex.ru"},mobile:function(t){return"ru"===t?"http://mobile.yandex.ru":"ua"===t?"http://mobile.yandex.ua":"tr"===t?"http://mobil.yandex.com.tr":"http://mobile.yandex.ru"},help:function(t){return"ru"===t?"http://help.yandex.ru":"ua"===t?"http://help.yandex.ua":"com"===t?"http://help.yandex.com":"tr"===t?"http://yardim.yandex.com.tr":"http://help.yandex.ru"},feedback:function(t){return"ru"===t?"http://feedback.yandex.ru":"ua"===t?"http://feedback.yandex.ua":"com"===t?"http://feedback.yandex.com":"by"===t?"http://feedback.yandex.by":"kz"===t?"http://feedback.yandex.kz":"tr"===t?"http://contact.yandex.com.tr":"http://feedback.yandex.ru"},feedback2:function(t){return"ru"===t?"http://feedback2.yandex.ru":"ua"===t?"http://feedback2.yandex.ua":"com"===t?"http://feedback2.yandex.com":"by"===t?"http://feedback2.yandex.by":"kz"===t?"http://feedback2.yandex.kz":"tr"===t?"http://contact2.yandex.com.tr":"http://feedback2.yandex.ru"},start:function(t){return"ru"===t?"http://help.yandex.ru/start/":"ua"===t?"http://help.yandex.ua/start/":"com"===t?"http://help.yandex.com/start/":"tr"===t?"http://yardim.yandex.com.tr/start":"http://help.yandex.ru/start/"},cityday:function(t){return"ru"===t?"http://cityday.yandex.ru":"http://cityday.yandex.ru"},openid:function(t){return"ru"===t?"http://openid.yandex.ru":"http://openid.yandex.ru"},oauth:function(t){return"ru"===t?"https://oauth.yandex.ru":"com"===t?"https://oauth.yandex.com":"https://oauth.yandex.ru"},nano:function(t){return"ru"===t?"http://nano.yandex.ru":"http://nano.yandex.ru"},partnersearch:function(t){return"ru"===t?"http://yandex.ru":"http://yandex.ru"},city:function(t){return"ru"===t?"https://gorod.yandex.ru":"ua"===t?"https://gorod.yandex.ua":"com"===t?"https://city.yandex.com":"by"===t?"https://gorod.yandex.by":"kz"===t?"https://gorod.yandex.kz":"tr"===t?"https://city.yandex.com.tr":"https://gorod.yandex.ru"},goroda:function(t){return"ru"===t?"http://goroda.yandex.ru":"http://goroda.yandex.ru"},toster:function(t){return"ru"===t?"http://toster.yandex.ru":"http://toster.yandex.ru"},love:function(t){return"ru"===t?"http://love.yandex.ru":"http://love.yandex.ru"},rk:function(t){return"ru"===t?"http://rk.yandex.ru":"http://rk.yandex.ru"},lost:function(t){return"ru"===t?"http://lost.yandex.ru":"http://lost.yandex.ru"},soft:function(t){return"ru"===t?"http://soft.yandex.ru":"ua"===t?"http://soft.yandex.ua":"tr"===t?"http://soft.yandex.com.tr":"http://soft.yandex.ru"},passport:function(t){return"ru"===t?"https://passport.yandex.ru":"com"===t?"https://passport.yandex.com":"tr"===t?"https://passport.yandex.com.tr":"https://passport.yandex.ru"},"maps-wiki":function(t){return"ru"===t?"http://nk.yandex.ru":"http://nk.yandex.ru"},404:function(t){return"ru"===t?"http://404.yandex.ru":"ua"===t?"http://404.yandex.ua":"com"===t?"http://404.yandex.com":"by"===t?"http://404.yandex.by":"kz"===t?"http://404.yandex.kz":"tr"===t?"http://404.yandex.com.tr":"http://404.yandex.ru"},i:function(t){return"ru"===t?"http://i.yandex.ru":"http://i.yandex.ru"},desktop:function(t){return"ru"===t?"http://desktop.yandex.ru":"http://desktop.yandex.ru"},ff:function(t){return"ru"===t?"http://ff.yandex.ru":"http://ff.yandex.ru"},fx:function(t){return"ru"===t?"http://fx.yandex.ru":"ua"===t?"http://fx.yandex.ua":"tr"===t?"http://fx.yandex.com.tr":"http://fx.yandex.ru"},ie:function(t){return"ru"===t?"http://ie.yandex.ru":"ua"===t?"http://ie.yandex.ua":"tr"===t?"http://ie.yandex.com.tr":"http://ie.yandex.ru"},"bar-ie":function(t){return"ru"===t?"http://bar.yandex.ru/ie":"ua"===t?"http://bar.yandex.ua/ie":"com"===t?"http://bar.yandex.com/ie":"by"===t?"http://bar.yandex.by/ie":"kz"===t?"http://bar.yandex.kz/ie":"tr"===t?"http://bar.yandex.com.tr/ie":"http://bar.yandex.ru/ie"},"bar-ie9":function(t){return"ru"===t?"http://bar.yandex.ru/ie":"ua"===t?"http://bar.yandex.ua/ie":"com"===t?"http://bar.yandex.com/ie":"by"===t?"http://bar.yandex.by/ie":"kz"===t?"http://bar.yandex.kz/ie":"tr"===t?"http://bar.yandex.com.tr/ie":"http://bar.yandex.ru/ie"
},internet:function(t){return"ru"===t?"http://internet.yandex.ru":"com"===t?"http://internet.yandex.com":"tr"===t?"http://internet.yandex.com.tr":"http://internet.yandex.ru"},keyboard:function(t){return"ru"===t?"http://www.yandex.ru/index_engl_qwerty.html":"http://www.yandex.ru/index_engl_qwerty.html"},metro:function(t){return"ru"===t?"http://metro.yandex.ru":"http://metro.yandex.ru"},pulse:function(t){return"ru"===t?"http://blogs.yandex.ru/pulse":"ua"===t?"http://blogs.yandex.ua/pulse":"by"===t?"http://blogs.yandex.by/pulse":"kz"===t?"http://blogs.yandex.kz/pulse":"http://blogs.yandex.ru/pulse"},school:function(t){return"ru"===t?"http://school.yandex.ru":"http://school.yandex.ru"},so:function(t){return"ru"===t?"http://so.yandex.ru":"http://so.yandex.ru"},time:function(t){return"ru"===t?"http://time.yandex.ru":"ua"===t?"http://time.yandex.ua":"com"===t?"http://time.yandex.com":"by"===t?"http://time.yandex.by":"kz"===t?"http://time.yandex.kz":"tr"===t?"http://saat.yandex.com.tr":"http://time.yandex.ru"},xmlsearch:function(t){return"ru"===t?"http://xml.yandex.ru":"ua"===t?"http://xml.yandex.ua":"com"===t?"http://xml.yandex.com":"by"===t?"http://xml.yandex.by":"kz"===t?"http://xml.yandex.kz":"tr"===t?"http://xml.yandex.com.tr":"http://xml.yandex.ru"},catalogwdgt:function(t){return"ru"===t?"http://www.yandex.ru/catalog":"http://www.yandex.ru/catalog"},opera:function(t){return"ru"===t?"http://opera.yandex.ru":"tr"===t?"http://opera.yandex.com.tr":"http://opera.yandex.ru"},uslugi:function(t){return"ru"===t?"http://uslugi.yandex.ru":"http://uslugi.yandex.ru"},backapv:function(t){return"ru"===t?"http://backapv.yandex.ru":"http://backapv.yandex.ru"},chrome:function(t){return"ru"===t?"http://chrome.yandex.ru":"http://chrome.yandex.ru"},browser:function(t){return"ru"===t?"//browser.yandex.ru":"ua"===t?"//browser.yandex.ua":"com"===t?"//browser.yandex.com":"by"===t?"//browser.yandex.by":"kz"===t?"//browser.yandex.kz":"tr"===t?"//browser.yandex.com.tr":"//browser.yandex.ru"},aziada:function(t){return"ru"===t?"http://aziada2011.yandex.kz":"http://aziada2011.yandex.kz"},translate:function(t){return"ru"===t?"//translate.yandex.ru":"ua"===t?"//translate.yandex.ua":"com"===t?"//translate.yandex.com":"by"===t?"//translate.yandex.by":"kz"===t?"//translate.yandex.kz":"tr"===t?"//ceviri.yandex.com.tr":"//translate.yandex.ru"},subs:function(t){return"ru"===t?"http://subs.yandex.ru":"http://subs.yandex.ru"},all:function(t){return"ru"===t?"http://www.yandex.ru/all":"ua"===t?"http://www.yandex.ua/all":"com"===t?"http://www.yandex.com/all":"by"===t?"http://www.yandex.by/all":"kz"===t?"http://www.yandex.kz/all":"tr"===t?"http://www.yandex.com.tr/all":"http://www.yandex.ru/all"},large:function(t){return"ru"===t?"http://large.yandex.ru":"http://large.yandex.ru"},geocontext:function(t){return"ru"===t?"http://geocontext.yandex.ru":"http://geocontext.yandex.ru"},root:function(t){return"ru"===t?"http://root.yandex.ru":"http://root.yandex.ru"},yamb:function(t){return"ru"===t?"https://yamb.yandex.ru":"https://yamb.yandex.ru"},legal:function(t){return"ru"===t?"http://legal.yandex.ru":"ua"===t?"http://legal.yandex.ua":"com"===t?"http://legal.yandex.com":"tr"===t?"http://legal.yandex.com.tr":"http://legal.yandex.ru"},taxi:function(t){return"ru"===t?"https://taxi.yandex.ru":"https://taxi.yandex.ru"},social:function(t){return"ru"===t?"https://social.yandex.ru":"ua"===t?"https://social.yandex.ua":"com"===t?"https://social.yandex.ru":"by"===t?"https://social.yandex.by":"kz"===t?"https://social.yandex.kz":"tr"===t?"https://social.yandex.com.tr":"https://social.yandex.ru"},contest:function(t){return"ru"===t?"http://contest.yandex.ru":"com"===t?"http://contest.yandex.com":"http://contest.yandex.ru"},peoplesearch:function(t){return"ru"===t?"http://people.yandex.ru":"ua"===t?"http://people.yandex.ua":"http://people.yandex.ru"},disk:function(t){return"ru"===t?"https://disk.yandex.ru":"com"===t?"https://disk.yandex.com":"ua"===t?"https://disk.yandex.ua":"kz"===t?"https://disk.yandex.kz":"by"===t?"https://disk.yandex.by":"tr"===t?"https://disk.yandex.com.tr":"https://disk.yandex.ru"},sport:function(t){return"ru"===t?"http://sport.yandex.ru":"by"===t?"http://sport.yandex.by":"ua"===t?"http://sport.yandex.ua":"kz"===t?"http://sport.yandex.kz":"tr"===t?"http://spor.yandex.com.tr":"http://sport.yandex.ru"},literacy:function(t){return"ru"===t?"http://literacy.yandex.ru":"http://literacy.yandex.ru"},appsearch:function(t){return"ru"===t?"//appsearch.yandex.ru":"//appsearch.yandex.ru"},ege:function(t){return"ru"===t?"//ege.yandex.ru":"//ege.yandex.ru"},vno:function(t){return"ru"===t?"//zno.yandex.ua":"//zno.yandex.ua"},notifications:function(t){return"ru"===t?"https://notifications.yandex.ru":"ua"===t?"https://notifications.yandex.ua":"by"===t?"https://notifications.yandex.by":"kz"===t?"https://notifications.yandex.kz":"com"===t?"https://notifications.yandex.com":"tr"===t?"https://notifications.yandex.com.tr":"https://notifications.yandex.ru"},kassa:function(t){return"ru"===t?"https://money.yandex.ru/start":"https://money.yandex.ru/start/"},shtrafi:function(t){return"ru"===t?"https://money.yandex.net/debts":"http://money.yandex.net/debts"},master:function(t){return"ru"===t?"https://master.yandex.ru":"https://master.yandex.ru"}}}function Rr(){return{tag:"meta",attrs:{"http-equiv":"X-UA-Compatible",content:"IE=edge"}}}function Ar(t){var e=t["i-global"],n={},s={block:"i-global",js:n};return Object.keys(e).forEach(function(t){__r0=this._mode,this._mode="public-params",__r1=this.block,this.block="i-global",__r2=this.elem,this.elem=t,__r3=i(Zr,this),this._mode=__r0,this.block=__r1,this.elem=__r2,__r3&&(n[t]=e[t])}),s}function zr(){return void 0}function qr(t){return t.ctx.doctype||"<!DOCTYPE html>"}function Ur(t){return!t.ctx==!1&&!t.ctx.link==!1&&!!t._.isSimple(t.ctx)==!1?Hr(t):Vr(t)}function Hr(e){function n(){if("no-follow"===this.ctx.link)return void 0;var t=this._links[this.ctx.link];return __r0=this.ctx,this.ctx=t,__r1=i(Zr,this),this.ctx=__r0,__r1}if(!u||!e._cacheLog)return n.call(t(e));var s=e._buf.slice(e._cachePos).join("");e._cachePos=e._buf.length,e._cacheLog.push(s,{log:e._localLog.slice(),link:e.ctx.link});var r=n.call(t(e));return e._cachePos=e._buf.length,r}function Vr(t){return!u==!1&&!t.ctx==!1&&!t.ctx.cache==!1?Wr(t):Kr(t)}function Wr(e){function n(t,e,n){if(0===e.length)return void 0;if(Array.isArray(n)){for(var i=t,s=0;s<n.length-1;s++)i=i[n[s]];n=i[n[s]]}for(var r,o=t,s=0;s<e.length-1;s++)o=o[e[s]];return r=o[e[s]],o[e[s]]=n,r}var i;if(i=u.get(e.ctx.cache)){var s=e._links;e.ctx.links&&(e._links=e.ctx.links);for(var r=0;r<i.log.length;r++)if("string"!=typeof i.log[r]){var o,a=i.log[r];o=a.log.map(function(t){return{key:t[0],value:n(this,t[0],t[1])}},t(e)).reverse();var c=e.ctx,l=c.cache;c.cache=null;var d=e._cacheLog;e._cacheLog=null;var p=e.ctx,f=p.link;p.link=a.link,h(e),c.cache=l,e._cacheLog=d,p.link=f,o.forEach(function(t){n(this,t.key,t.value)},t(e))}else e._buf.push(i.log[r]);return e._links=s,i.res}var m,_=[],g=e.ctx,b=g.cache;g.cache=null;var v=e._cachePos;e._cachePos=e._buf.length;var y=e._cacheLog;e._cacheLog=_;var k=e._localLog;e._localLog=[],m=h(e);var M=e._buf.slice(e._cachePos).join("");return M&&_.push(M),g.cache=b,e._cachePos=v,e._cacheLog=y,e._localLog=k,u.set(e.ctx.cache,{log:_,res:m}),m}function Kr(t){var e=s;if("default"===e)return Gr(t);if(""===e){if(!t._.isSimple(t.ctx)==!1){t._listLength--;var n=t.ctx;return void((n&&n!==!0||0===n)&&t._buf.push(n))}return!!t.ctx==!1?void t._listLength--:!t._.isArray(t.ctx)==!1?Yr(t):Qr(t)}return Xr(t)}function Gr(t){function e(t,e){return(t||"")+"__"+(e||"")}var n,i,u,l,h,p,f,m,_,g,b,v,y,k,M,x,w,C,D,T,O,$,N,j=t.BEM,F=t.ctx,L=t._buf;if(i=s,s="tag",v=S(t),s=i,N=v,"undefined"!=typeof N||(N=F.tag),"undefined"!=typeof N||(N="div"),N){var R,A;r&&F.js!==!1&&(u=s,s="js",l=P(t),s=u,A=l,A=A?t._.extend(F.js,A===!0?{}:A):F.js===!0?{}:F.js,A&&((R={})[j.INTERNAL.buildClass(r,F.elem)]=A)),L.push("<",N);var z=(h=s,s="bem",p=P(t),s=h,p);"undefined"!=typeof z||(z="undefined"!=typeof F.bem?F.bem:F.block||F.elem);var q=(f=s,s="cls",m=P(t),s=f,m);q||(q=F.cls);var U=F.block&&R&&!F.elem;if(z||q){if(L.push(' class="'),z){j.INTERNAL.buildClasses(r,F.elem,F.elemMods||F.mods,L);var H=(_=s,s="mix",g=E(t),s=_,g);if(F.mix&&(H=H?[].concat(H,F.mix):F.mix),H){var V={};V[e(r,o)]=!0,t._.isArray(H)||(H=[H]);for(var W=0;W<H.length;W++){var K=H[W];if(K){var G=K.block||K.elem,Y=K.block||K._block||r,Q=K.elem||K._elem||o,X=K.mods||c,J=K.elemMods||{};if(G&&L.push(" "),j.INTERNAL[G?"buildClasses":"buildModsClasses"](Y,K.elem||K._elem||(K.block?void 0:o),K.elemMods||K.mods,L),K.js&&((R||(R={}))[j.INTERNAL.buildClass(Y,K.elem)]=K.js===!0?{}:K.js,U||(U=Y&&!K.elem)),G&&!V[e(Y,Q)]){V[e(Y,Q)]=!0;var Z=(b=r,r=Y,n=o,o=Q,y=c,c=X,k=a,a=J,M=s,s="mix",x=E(t),r=b,o=n,c=y,a=k,s=M,x);if(Z)for(var te=0;te<Z.length;te++){var ee=Z[te];(ee.block||ee.elem)&&V[e(ee.block,ee.elem)]||(ee._block=Y,ee._elem=Q,H.splice(W+1,0,ee))}}}}}}q&&L.push(z?" ":"",q),U&&L.push(" i-bem"),L.push('"')}if(R){var ne=(w=s,s="jsAttr",C=P(t),s=w,C);L.push(" ",ne||"data-bem",'="',t._.attrEscape(JSON.stringify(R)),'"')}var ie=(D=s,s="attrs",T=B(t),s=D,T);if(ie=t._.extend(ie,F.attrs)){var se;for(se in ie)void 0!==ie[se]&&L.push(" ",se,'="',t._.attrEscape(ie[se]),'"')}}if(t._.isShortTag(N))L.push("/>");else{N&&L.push(">");var re=(O=s,s="content",$=I(t),s=O,$);if(re||0===re){var z=r||o,oe=t._notNewList;t._notNewList=!1;var ae=t.position;t.position=z?1:t.position;var ce=t._listLength;t._listLength=z?1:t._listLength;var ue=t.ctx;t.ctx=re;var le=s;s="",d(t),t._notNewList=oe,t.position=ae,t._listLength=ce,t.ctx=ue,s=le}N&&L.push("</",N,">")}}function Yr(t){var e=t.ctx,n=e.length,i=0,s=t.position,r=t._notNewList;for(r?t._listLength+=n-1:(t.position=0,t._listLength=n),t._notNewList=!0;n>i;){var o=e[i++],a=t.ctx;t.ctx=null==o?"":o,d(t),t.ctx=a}r||(t.position=s)}function Qr(t){var e=t.ctx.block,n=t.ctx.elem,i=t._currBlock||r;t.ctx||(t.ctx={});var u=s;s="default";var l=t._links;t._links=t.ctx.links||t._links;var h=r;r=e||(n?i:void 0);var d=t._currBlock;t._currBlock=e||n?void 0:i;var p=o;o=t.ctx.elem;var f=c;c=e?t.ctx.mods||(t.ctx.mods={}):c;var _=a;a=t.ctx.elemMods||{},r||o?t.position=(t.position||0)+1:t._listLength--,m(t),s=u,t._links=l,r=h,t._currBlock=d,o=p,c=f,a=_}function Xr(){throw new Error(this)}function Jr(t){return Zr(t||this)}function Zr(t){return h(t)}var to={content:function(t){var e=r;return(no[e]||io)(t)},"get-label":function(t){return"search"===r&&!!o==!1?xr(t):Ur(t)},elem:function(t){return"dropdown"===r&&!(c&&"yes"===c.advanced)==!1?title-text:Ur(t)},"user-menu":function(t){return"user"===r&&!(c&&"yes"===c.menu)==!1&&!!o==!1?wr(t):Ur(t)},"exit-url":function(t){return"user"===r&&!(c&&"yes"===c.menu)==!1&&!!o==!1?Er(t):Ur(t)},"lego-label":function(t){return"search"===r&&!!o==!1?Mr(t):Ur(t)},id:function(t){return"user"===r&&"icon"===o?Sr(t):Ur(t)},host:function(t){return"user"===r&&"icon"===o&&!t._uid==!1?Ir(t):Ur(t)},iconSize:function(t){return"user"===r&&"icon"===o?Cr(t):Ur(t)},icon:function(t){return"user"===r&&"icon"===o&&!t._uid==!1?Dr(t):Ur(t)},counter:function(t){return"user"===r&&"name"===o?"images.login.user":Ur(t)},"lego-input":function(t){return"search"===r&&!!o==!1?kr(t):Ur(t)},"pre-content":function(t){return"user"===r&&"name"===o?Pr(t):Ur(t)},"":function(t){return!(t.__$anflg102!==!0)==!1&&!t["i-global"]==!1&&!!t["i-geodata"]==!1?_r(t):gr(t)},getLive:function(t){return"input"===r&&!!o==!1?Tr(t):Ur(t)},regions:function(t){return"i-geodata"===r?fr(t):Ur(t)},live:function(t){return"input"===r&&!!o==!1?Or(t):Ur(t)},"country-flag":function(t){return"lang-switcher"===r&&"flag"===o?pr(t):Ur(t)},"auto-content":function(t){return"auth"===r?$r(t):Ur(t)},bem:function(t){var e=r;if("b-statcounter"===e){var e=o;return"metrika"===e?!(a&&"js"===a.type)==!1?!0:!1:"tns"===e||"gemius"===e?!1:dr(t)}if("suggest2-item"===e)return"highlight"===o?!1:dr(t);if("search"===e)return"row"===o?!0:dr(t);if("b-page"===e){var e=o;return"css"===e||"js"===e||"link"===e||"favicon"===e||"meta"===e||"head"===e||"root"===e?!1:dr(t)}return"i-ua"===e&&!!o==!1?!1:dr(t)},action:function(t){return"auth"===r&&!!o==!1?jr(t):Ur(t)},value:function(t){var e=r;return"tumbler"===e?"option"===o?cr(t):Ur(t):"input"===e?ur(t):Ur(t)},"service-url":function(t){return"i-services"===r?Fr(t):Ur(t)},"default":function(t){var e=r;return(lo[e]||ho)(t)},xUACompatible:function(t){return"b-page"===r&&!!o==!1?Rr(t):Ur(t)},tag:function(t){var e=r;return(co[e]||uo)(t)},"js-params":function(t){return"b-page"===r&&!!o==!1?Ar(t):Ur(t)},attrs:function(t){var e=r;if("tumbler"===e){var e=o;if("sticker"===e)return ze(t);if("text"===e)return qe(t);if("input"===e){var n,i=a.side;return n="left"===i?t._checked?void 0:"checked":t._checked,{type:"radio",name:t.ctx.name,value:t.ctx.value,checked:n,disabled:t.ctx.disabled,"aria-labelledby":"left"===i?t._leftId:t._rightId}}return"button"===e?Ue(t):sn(t)}if("snippet2"===e)return!("title"===o||"link"===o)==!1?{target:"_blank",href:""}:sn(t);if("snippet"===e)return"link"===o?tn(t):en(t);if("b-statcounter"===e){var e=o;return"metrika"===e?!(a&&"js"===a.type)==!1?{}:{alt:"",src:"//mc.yandex.ru/watch/"+t.ctx.counter+(t.ctx._noindex?"?ut=noindex":"")}:"tns"===e?{style:"background: url(//www.tns-counter.ru/V13a****yandex_ru/ru/CP1251/tmsec="+(t["i-global"].tns||t.ctx.id||"yandex_"+t["i-global"].id)+"/"+Math.round(1e9*Math.random())+")"}:"gemius"===e?t.ctx.tag&&"img"!=t.ctx.tag?{style:'background:url("'+t.ctx._src+'");'}:{alt:"",src:t.ctx._src}:sn(t)}if("lang-switcher"===e){if("lang"===o){if(!("yes"!=a.selected)==!1){if(!!c.selected==!1){var u=t.ctx,l=u._lang.lang,h=t["i-global"],d=h["secret-key"],p=h.retpath?"&retpath="+encodeURIComponent(h.retpath):"",f=d?"/api/lang/v1.1/save.xml?intl="+l+"&sk="+d+p:"/lang/";return{href:u.url||t["i-services"].serviceUrl("tune")+f,role:"button",tabindex:0}}return sn(t)}return sn(t)}return sn(t)}if("gallery"===e)return"item"===o?Ze(t):sn(t);if("copyright"===e)return"link"===o&&!t.ctx.url==!1?{href:t.ctx.url}:sn(t);if("footer"===e)return!!o==!1?{role:"contentinfo"}:sn(t);if("cbir-panel"===e)return"file-input"===o?{type:"file",accept:"image/*",name:"upfile"}:sn(t);if("search2"===e)return!!o==!1?{action:t.ctx.url,role:"search","aria-label":t.ctx.label}:sn(t);if("cbir-intent"===e){var e=o;return"close"===e?{role:"button","aria-label":BEM.I18N("cbir-intent_spok_yes","Закрыть"),"tab-index":4}:"thumb"===e?{src:t.src||"",alt:t.texts.loaded}:sn(t)}if("related2"===e){var e=o;return"img"===e?{style:"background-image: url("+t.ctx.thumb+");"}:"thumb"===e?{href:t.ctx.href}:sn(t)}if("cbir-logo"===e)return!!o==!1?{type:"button",role:"button",tabindex:3}:sn(t);if("competitors"===e){if("link"===o){var m={href:t.ctx.url};return t.ctx.counter&&(m.onmousedown=t.ctx.counter),t.ctx.target&&(m.target=t.ctx.target),m}return sn(t)}if("suggest2-item"===e){var e=o;return"link"===e?{href:t.ctx.url,target:t.ctx.target}:"bullet"===e?{"aria-hidden":!0}:sn(t)}if("navigation"===e)return Qe(t);if("search"===e){if(!!o==!1){var _,g;return{action:t.ctx.action||"/",role:"search","aria-label":(_=s,s="get-label",g=xr(t),s=_,g)}}return sn(t)}if("check-button"===e){var e=o;return"control"===e?Ke(t):"hidden-value"===e?!(c&&"yes"===c.advanced)==!1?{type:"hidden",name:t.ctx.name,value:t.ctx.value||""}:Ye(t):"text"===e?{id:t._control.labelledby}:Ye(t)}if("service"===e){if("url"===o){var b=t.ctx.urlAttrs||{};return b.href=t.ctx.url+t.ctx.urlParams,t.ctx.counter&&(b.onmousedown=t.ctx.counter),b}return sn(t)}if("input"===e)return"control"===o&&!(c&&"textarea"===c.type)==!1?We(t):sn(t);if("dropdown"===e)return"hidden-value"===o&&!(c&&"yes"===c.advanced)==!1?{type:"hidden",name:t.ctx.name,value:t.ctx.value||""}:sn(t);if("button"===e)return Ve(t);if("advanced-search"===e){var e=o;return"action"===e?{onmousedown:t.ctx.counter}:"hidden-value"===e?{type:"hidden",name:t.ctx.name,value:t.ctx.value}:!!o==!1?{action:"//yandex.ru"}:sn(t)}if("select"===e){var e=o;if("control"===e){for(var v,y=["id","name","tabindex"],k={};v=y.pop();)t._controlAttrs[v]&&(k[v]=t._controlAttrs[v]);return"yes"===c.disabled&&(k.disabled="disabled"),k.tabindex=-1,k["aria-hidden"]=!0,t.ctx.controlAttrs||k}return"item"===e?He(t):sn(t)}return"slide"===e?!!o==!1?{"aria-hidden":!0}:sn(t):"link"===e?nn(t):sn(t)},cls:function(t){return"b-page"===r&&"root"===o?"i-ua_js_no i-ua_css_standard":zr(t)},js:function(t){var e=r;return(so[e]||ro)(t)},doctype:function(t){return"b-page"===r&&!!o==!1?qr(t):Ur(t)},mix:function(t){var e=r;if("b-mooa"===e)return!!o==!1?[{mods:{loading:"no"}}]:Ne(t);if("copyright"===e)return"link"===o&&!t._inFooter==!1?[{block:"footer",elem:"link"}]:Ne(t);if("footer"===e)return!!o==!1?[{block:"clearfix"}]:Ne(t);if("cbir-logo"===e)return!!o==!1?[{block:"button"}]:Ne(t);if("b-statcounter"===e)return"metrika"===o&&!(a&&"js"===a.type)==!1?[{block:"i-bem"}]:Ne(t);if("suggest2"===e)return!!o==!1?{block:"suggest2-detect",js:!0}:Ne(t);if("service-icon"===e)return!o==!1?!t.isComTable==!1?[{mods:{color:56}}]:!t.isRuTable==!1?[{mods:{color:56}}]:!t.isTurkishTable==!1?[{mods:{color:56}}]:Ne(t):Ne(t);if("b-menu-horiz"===e){if("layout-unit"===o){if(!c==!1){var n=[];return t.isFirst()&&n.push({elemMods:{position:"first"}}),t.isLast()&&n.push({elemMods:{position:"last"}}),n}return Ne(t)}return Ne(t)}if("b-menu-vert"===e){if("layout-unit"===o){var i=[];return t.isFirst()&&i.push({elemMods:{position:"first"}}),t.isLast()&&i.push({elemMods:{position:"last"}}),i}return Ne(t)}if("ticker"===e){var e=o;return"text"===e?[{block:"a11y-hidden"}]:"count"===e&&!!t.ctx.url==!1?[{elem:"plain"}]:Ce(t)}if("pane2"===e)return"close"===o?[{elem:"control"}]:Ne(t);if("input"===e)return"ahead"===o?[{block:"input",elem:"input"}]:Ne(t);if("snippet"===e)return"link"===o&&!(c&&"series"===c.type)==!1?[]:Ie(t);if("dropdown"===e)return!!o==!1?[{mods:{action:"closed"}}]:Ne(t);if("snippet2"===e)return!("title"===o||"link"===o)==!1?[{block:"link",mods:"link"===o?{outer:"yes"}:{}}]:Ne(t);if("logo"===e)return!!o==!1&&!!c.lang==!1?[{mods:{lang:~["en","tr"].indexOf(t["i-global"].lang)?"en":"ru"}}]:Ne(t);if("preview2"===e){var e=o;return"arrow"===e?!(a&&"right"===a.side)==!1?[{block:"pane2-api",elem:"arrow",elemMods:{side:"right"}}]:!(a&&"left"===a.side)==!1?[{block:"pane2-api",elem:"arrow",elemMods:{side:"left"}}]:Ne(t):"fullscreen"===e?[{elem:"control"}]:Ne(t)}if("similar"===e)return"thumb"===o?[{block:"island"}]:!!o==!1?[{block:"serp-block"}]:Ne(t);if("related2"===e)return"thumb"===o?[{block:"link",mods:{ajax:"yes"}}]:Ne(t);if("other-sites"===e){var e=o;return"meta"===e?[{block:"serp-item",elem:"meta"}]:"plates"===e?[{block:"serp-item",elem:"plates"}]:!!o==!1?[{block:"serp-block"}]:Ne(t)}if("competitors"===e)return"link"===o?[{block:"link"}]:Ne(t);if("categories-index"===e)return"button"===o?[{block:"link",mods:{ajax:"yes"}}]:Ne(t);if("navigation"===e){var e=o;return"more"===e?[{elem:"item"}]:"item"===e?[{elemMods:{name:t.ctx.service,state:t.ctx.selected?"selected":null}}]:Ne(t)}if("market-icon"===e)return!!o==!1?[{block:"button",elem:"icon"}]:Ne(t);if("service"===e){var e=o;return"url"===e?Se(t):"icon"===e?[{block:"service-icon",elem:t.ctx.service,elemMods:t.ctx.elemMods}]:Ne(t)}return"serp-list"===e?!t.ctx.reqid==!1&&!!o==!1?[{block:"serp-controller",elem:"list"},{block:"counter",elem:"reqid",js:{reqid:t.ctx.reqid}}]:De(t):"button"===e?!t._formSelect==!1&&!!o==!1?[{block:t._formSelect.block,elem:"button"}]:Ne(t):"b-page"===e?Pe(t):"suggest2-item"===e&&"text"===o&&!(c&&"link"===c.interact)==!1&&!("nav"===c.type||"icon"===c.type)==!1?{mods:{type:"url"}}:Ne(t)},jsAttr:function(){return void 0},"format-value":function(t){return"ticker"===r&&"value"===o?Br(t):Ur(t)}},eo=function(t){return Ur(t)},no={feedback:function(t){return!!o==!1?$(t):Be(t)},"suggest2-item":function(t){return!(c&&"link"===c.interact)==!1&&!!o==!1?{elem:"link",url:t.ctx.url,target:t.ctx.target||"_blank",content:t.ctx.content}:X(t)},search:function(t){return!!t.ctx.content==!1&&!!o==!1?J(t):Z(t)},"services-table":te,service:oe,suggest2:function(t){return"title"===o?[{elem:"a11y",content:BEM.I18N("suggest2","group")+": "},t.ctx.content]:Be(t)},"b-menu-vert":function(t){return!!o==!1?[t.ctx.title,{elem:"layout",content:t.ctx.content}]:Be(t)},ticker:function(t){var e=o;if("value"===e){var n,i;return n=s,s="format-value",i=Br(t),s=n,i}return"text"===e?BEM.I18N("ticker__text","notifications"):"count"===e?[{elem:"text"},{elem:"value",count:t.ctx.content}]:!!o==!1?{elem:"count",url:t.ctx.url,content:t.ctx.count}:Be(t)},user:function(t){if("name"===o){var e,n,i;return e=s,s="pre-content",n=t.ctx,t.ctx=t.xmlEscape(t.cleverSubstring(t._userName,t._maxLength,t._maxLengthRelative)),i=Pr(t),s=e,t.ctx=n,i}if(!!o==!1){var r=t["i-global"].login||(t["i-global"].displayName||{}).name;return r?[t.ctx.content]:{elem:"enter"}}return"enter-label"===o?BEM.I18N("user","enter"):Be(t)},checkbox:function(t){return!!o==!1?[{elem:"box",tag:"span",elemMods:"yes"===c.checked?{checked:"yes"}:"",content:[{elem:"control",attrs:t.ctx.checkboxAttrs||{}},{elem:"tick",tag:"i"}]},t.ctx.content]:Be(t)},auth:function(t){var e=o;return"register"===e?!!t.ctx.content==!1?{block:"button",mods:{theme:"pseudo",size:"s"},url:t.ctx.url||[t._passportHost,"/passport?mode=register",t._paramFrom,t._paramRetpath].join(""),content:BEM.I18N("auth","register")}:ue(t):"remember"===e?!!t.ctx.content==!1?{block:"button",mods:{theme:"pseudo",size:"s"},url:t.ctx.url||[t._passportHost,"/passport?mode=restore",t._paramFrom,t._paramRetpath].join(""),content:BEM.I18N("auth","remember")}:ue(t):"button"===e?!!t.ctx.content==!1?{block:"button",type:"submit",mods:{theme:"action",size:"m"},content:BEM.I18N("auth","logon")}:ue(t):"haunter"===e?!!t.ctx.content==!1?{block:"checkbox",mods:{theme:"normal",size:"m"},checkboxAttrs:{id:"auth-haunter",autocomplete:"off",name:"twoweeks",value:"no"},content:{elem:"label",content:BEM.I18N("auth","temporary")}}:ue(t):"password"===e?!!t.ctx.content==!1?{block:"input",mods:{theme:"normal",size:"m"},name:"passwd",content:[{elem:"hint",content:BEM.I18N("auth","password")},{elem:"control",attrs:{type:"password",maxlength:256,"aria-required":!0}}]}:ue(t):"username"===e&&!!t.ctx.content==!1?{block:"input",mods:{theme:"normal",size:"m"},name:"login",content:[{elem:"hint",content:BEM.I18N("auth","login")},{elem:"control",attrs:{"aria-required":!0}}]}:ue(t)},"cbir-intent":function(t){return!!o==!1?[{block:"spinner",js:!0,mix:[{block:"cbir-intent",elem:"spinner"}],mods:{size:"xxs"}},{elem:"thumb",elemMods:{visibility:"visible"}},{elem:"title"},{elem:"close"}]:"title"===o?t.texts.loaded:Be(t)},arrow:le,search2:function(t){return!!t.ctx.content==!1&&!!o==!1?[{elem:"button",content:t.ctx.button},{elem:"input",content:t.ctx.input}]:Be(t)},logo:function(t){return"link"===o?t.ctx.alt||BEM&&BEM.I18N("logo","yandex"):!!o==!1?[{elem:"link",url:t.ctx.url,alt:t.ctx.alt},t.ctx.content]:Be(t)},"cbir-panel":function(t){if("dragMessage"===o)return[{elem:"drag-label",tag:"span",content:BEM.I18N("cbir-panel_spok_yes","Перетащите картинку сюда или")}," ",{elem:"upload-link",tag:"span",content:BEM.I18N("cbir-panel_spok_yes","выберите файл")}];if(!!o==!1)return{elem:"table",content:[{elem:"logo"},{elem:"tabs"},{elem:"close"},{elem:"error"}]};var e=o;return"tabs"===e?{elem:"wrap",content:[{elem:"dragzone"},{elem:"or"},{elem:"input"}]}:"input"===e?[{block:"input",mods:{size:"s",autofocus:"yes",theme:"normal",type:"cbir"},content:[{elem:"hint",content:BEM.I18N("cbir-panel_spok_yes","Введите адрес картинки")},{elem:"control",attrs:{name:"cbir-url"}}]},{block:"button",mods:{size:"s",type:"cbir"},mix:[{block:"cbir-panel",elem:"search-button"}],type:"submit",name:"cbir-submit",content:BEM.I18N("cbir-panel_spok_yes","Найти")}]:"dragzone"===e?[{elem:"label",content:[{block:"cbir-icon",mods:{theme:"default"}},{elem:"label-text",content:BEM.I18N("cbir-panel_spok_yes","Поиск по картинке")}]},{elem:"upload-box",content:{elem:"dragMessage"}},{elem:"file-input"}]:"or"===e?{elem:"or-text",content:BEM.I18N("cbir-panel_spok_yes","или")}:"close"===e?{elem:"close-icon"}:"logo"===e?{block:"logo"}:Be(t)},similar:he,"cbir-error":G,"cbir-no-results":function(t){return!!o==!1?[{elem:"tail"},{elem:"content",content:BEM.I18N("cbir-no-results_spok_yes","Таких же картинок не найдено")}]:Be(t)},footer:function(t){return!!t.ctx.content==!1&&!!o==!1?K(t):Be(t)},"other-sizes":function(t){return!!o==!1?fe(t):"column"===o?[{elem:"column-title",content:t.ctx.title},{elem:"column-list",mods:{size:t.ctx.size},content:t.ctx.items}]:Be(t)},copyright:function(t){if("link"===o)return t.ctx.content||BEM.I18N("copyright","yandex");if(!!o==!1){var e=(new Date).getFullYear(),n=t.ctx.start||e;return["&copy;&nbsp;"+n+(e===n?"":"&ndash;"+e)+"&nbsp;&nbsp;",t.ctx.content||{block:"i-bem",elem:"i18n",keyset:"copyright",key:"link",content:{block:r,elem:"link",url:void 0===t.ctx.url?t["i-services"].serviceUrl("www"):t.ctx.url}}]}return Be(t)},"other-sites":me,"i-geodata":function(t){var e=o;return"region-parent"===e?t._userRegion.parent:"region-name"===e?t._userRegion.name:"region-short-ename"===e?t._userRegion.short_ename:"region-ename"===e?t._userRegion.ename:"region-lang"===e?t._userRegion.lang:"region-id"===e?t._userRegion.id:Be(t)},"categories-index":function(t){var e=o;return"button"===e?{elem:"link",content:[{elem:"link-text",tag:"span",content:t.ctx.query},{elem:"link-arrow"}]}:"item"===e?{elem:"preview",tag:"a",mix:[{block:"link",mods:{ajax:"yes"}}],attrs:{href:t.ctx.href},content:[{elem:"thumb",tag:"img",attrs:{src:t.ctx.thumb,alt:t.ctx.label}},{elem:"preview-label",content:t.ctx.label}]}:Be(t)},link:function(t){return!(c&&"yes"===c.pseudo)==!1&&!!o==!1&&!!c.inner==!1?{elem:"inner",content:t.ctx.content}:Be(t)},"b-501px-popular-themes":function(t){return"item"===o?{elem:"preview",tag:"a",mix:[{block:"link",mods:{ajax:"yes"}}],attrs:{href:t.ctx.href},content:[{elem:"shadow"},{elem:"thumb",attrs:{style:"background-image: url("+t.ctx.thumb+")"}},{elem:"preview-label",content:t.ctx.label}]}:Be(t)},"lang-switcher":function(t){if("lang"===o){var e=t.ctx._lang.lang;return[{elem:"flag",elemMods:{icon:e}},{elem:"lang-name",tag:"span",content:t.ctx._lang.name}]}return Be(t)},carousel:function(t){return!!o==!1?_e(t):Be(t)},"b-statcounter":function(t){return"metrika"===o&&!(a&&"js"===a.type)==!1?{tag:"noscript",content:{tag:"img",attrs:{alt:"",src:"//mc.yandex.ru/watch/"+t.ctx.counter+(t.ctx._noindex?"?ut=noindex":"")}}}:Be(t)},related:function(t){var e=o;return"cover"===e?!(a&&"no"===a["background-thumb"])==!1&&!(a&&"yes"===a["hash-thumb"])==!1?[{elem:"hash-thumb",tag:"img",attrs:{src:t.ctx.thumbs,width:t.ctx.sizes&&t.ctx.sizes.width,height:t.ctx.sizes&&t.ctx.sizes.height,alt:"",onerror:['this.onerror = "";',"var item = this.parentNode.parentNode.parentNode;","item.parentNode.removeChild(item);","errcnt(this, 72765);","return true;"].join("")}}]:ge(t):"item"===e?be(t):Be(t)},header:function(t){return!(c&&"yes"===c.fixed)==!1&&!!o==!1?{elem:"wrapper",content:t.ctx.content}:Be(t)},"b-501px-slider":function(t){var e=o;return"list"===e?[{elem:"preview",mods:{hidden:"yes"}},{elem:"preview",mods:{hidden:"yes"}},{elem:"preview",mods:{hidden:"yes"}},{elem:"preview",mods:{hidden:"yes"}},{elem:"preview",mods:{hidden:"yes"}}]:"arrow"===e?{elem:"arrow-icon"}:"preview"===e?{elem:"thumb",tag:"img",attrs:{src:"",alt:""},content:t.ctx.content}:Be(t)},"page-layout":function(t){return"column"===o&&!(a&&"content"===a.type)==!1?{elem:"content-wrapper",mix:[{block:"b-page",elem:"content"}],content:t.ctx.content}:Be(t)},"b-501px-popup":function(t){return"content"===o?[{elem:"close"},{elem:"title",content:t.ctx.title},t.ctx.content]:!!o==!1?{elem:"content-wrapper",content:{elem:"content",content:t.ctx.content,title:t.ctx.title}}:Be(t)},pane2:function(t){return"close"===o?{elem:"close-icon"}:Be(t)},"b-501px-info":function(t){return"partner"===o?{block:"link",mods:{outer:"yes"},url:t.ctx.url,content:t.ctx.content}:Be(t)},snippet:function(t){return"arrow"===o&&!(c&&"series"===c.type)==!1?'<svg class="snippet__arrow-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 9 16"><path class="snippet__arrow-icon-path" d="M.764-.002.113.665 7.273 8 .113 15.335.764 16 8.576 8z"/></svg>':Be(t)},"b-501px":function(t){var e=o;return"caption"===e?ve(t):"avatar"===e?{elem:"avatar-image",tag:"img",attrs:{src:t.ctx.image,alt:t.ctx.name}}:"back"===e?[{block:"icon"},{block:"b-501px",elem:"back-text",tag:"span",content:BEM.I18N("b-501px_spok_yes","Вернуться<br> к картинке дня")}]:Be(t)},preview2:function(t){var e=o;return"error"===e?{elem:"error-content",content:t.ctx.content}:"arrow"===e?!(a&&"right"===a.side)==!1?{elem:"arrow-icon"}:!(a&&"left"===a.side)==!1?{elem:"arrow-icon"}:Be(t):"fullscreen"===e?{elem:"fullscreen-icon"}:Be(t)},"serp-mark":function(t){return!!o==!1?{block:"popup",mix:[{block:"serp-mark",elem:"popup"}],js:{directions:{to:"bottom",offset:{top:5}}},content:[{elem:"tail"},{elem:"content"}]}:Be(t)},gallery:function(t){var e=o;return"spinner"===e?{block:"spinner",mods:{size:"m"}}:"item"===e?[{elem:"thumb",tag:"img",attrs:{src:t.ctx.thumb,width:t.ctx.size.width,height:t.ctx.size.height,style:t.ctx.style,alt:""}},t.ctx.moreText&&{elem:"more",content:t.ctx.moreText}]:Be(t)},"serp-url":function(t){return!!o==!1?{elem:"item",content:{elem:"link",mix:t.ctx.linkMix,url:t.ctx.url,counter:t.ctx.counter,content:t.ctx.content}}:Be(t)},button:function(t){return"text"===o&&!(c&&"yes"===c["only-icon"])==!1?["&#160;",t.ctx.content]:W(t)},"serp-item":function(t){var e=o;return"link"===e?[{elem:"thumb",thumb:t.ctx.thumb},t.ctx.meta||t.ctx.fresh?{elem:"plates",content:[t.ctx.fresh?{elem:"meta",mix:[{elem:"fresh"}],content:t.ctx.fresh}:"",t.ctx.meta?{elem:"meta",content:t.ctx.meta}:""]}:""]:"preview"===e?[{elem:"link",url:t.ctx.url,meta:t.ctx.meta,fresh:t.ctx.fresh,thumb:t.ctx.thumb,counter:t.ctx.counter},t.ctx.content]:Be(t)},"search-by-image":function(t){return!!o==!1?{block:"button",mix:[{block:"link",mods:{ajax:"yes"}}],attrs:{"aria-label":t.ctx.label},mods:{size:t.ctx.buttonSize},url:"#",content:[{block:"cbir-icon",mods:{theme:"black"},mix:[{block:"search-by-image",elem:"icon"}]},{block:"search-by-image",elem:"label",tag:"span",content:t.ctx.label}]}:Be(t)},"page-divider":function(t){return!!o==!1?{elem:"text",content:t.ctx.content}:Be(t)},complain:function(t){return!(c&&"yes"===c.pane2)==!1&&!!o==!1?t.ctx.title:V(t)},"serp-controller":function(t){return"content"===o?[{block:"a11y-hidden",tag:"h1",content:BEM.I18N("serp-controller_spok_yes","Результаты поиска",{context:"Результаты поиска по картинкам или видео"})},t.ctx.content]:Be(t)},navigation:function(t){var e=o;return"more-label"===e?!(c&&"yes"===c["text-nav"])==!1?BEM.I18N("navigation","more"):H(t):"region"===e?z(t):"item"===e?q(t):"more"===e?[{elem:"more-label",mix:[{block:"service",mods:{hoverable:"yes"}}],content:{block:"service",elem:"icon"}}]:H(t)},"radio-button":function(t){if(!!o==!1){var e=t.ctx.content,n=t.isSimple;return Array.isArray(e)?e.filter(function(t){return!n(t)&&!!t}):e}return"radio"===o?[{elem:"control"},{elem:"text",tag:"span",content:t.ctx.content}]:Be(t)},input:function(t){var e=o;return"control"===e?!(c&&"textarea"===c.type)==!1?t.xmlEscape(t._value||t.ctx.content||""):Be(t):"box-layout"===e?j(t):"box"===e?L(t):"clear"===e?!!t.ctx.content==!1?"":Be(t):"ahead"===e?[{elem:"ahead-filler"},{elem:"ahead-hint"}]:Be(t)},radiobox:function(t){return"radio"===o?ye(t):Be(t)},tumbler:function(t){return"box"===o?[{elem:"sticker",elemMods:{position:"left"},content:{elem:"sticker-label",content:BEM.I18N("tumbler","on")}},{elem:"sticker",elemMods:{position:"right"},content:{elem:"sticker-label",content:BEM.I18N("tumbler","off")}},{elem:"button"}]:!(void 0===t.ctx.content)==!1&&!!o==!1?[{elem:"option",side:"left"},{elem:"option",side:"right"}]:N(t)},popup:ke,"i-debugger":function(t){var e=o;return"val"===e?!(a&&"object"===a.type)==!1?[{elem:"brace",content:"{"},t.ctx.content,{elem:"brace",content:"}"}]:!(a&&"array"===a.type)==!1?[{elem:"brace",content:"["},t.ctx.content,{elem:"brace",content:"]"}]:Be(t):"name"===e?t.ctx.content+": ":Be(t)
},"b-page":function(t){return!!o==!1?{elem:"body",content:t.ctx.content}:Be(t)},"b-mooa":function(t){return!!o==!1?{elem:"open"}:Be(t)},"i-ua":xe,"check-button":function(t){return!!o==!1?[t._control,{elem:"text",tag:"span",content:t.ctx.content}]:Be(t)}},io=function(t){return Be(t)},so={"b-mooa":function(t){return!!o==!1?!0:Ae(t)},suggest2:function(t){return!!o==!1?!0:Ae(t)},"check-button":function(t){return!!o==!1?t.extend({live:!1},t.ctx.js):Ae(t)},"user-menu-update":function(t){return!!o==!1?!0:Ae(t)},"suggest2-item":function(t){return!!o==!1?!0:Ae(t)},"dropdown-menu":function(t){return!!o==!1?!0:Ae(t)},ticker:function(t){return!!o==!1?{count:t._count,maxCount:t._maxCount}:Ae(t)},user:function(t){return"name"===o?{maxLength:t._maxLength,maxLengthRelative:t._maxLengthRelative,isUglyUserName:!0}:!!o==!1?!0:Ae(t)},checkbox:function(t){return!!o==!1?t.extend({live:!1},t.ctx.js):Ae(t)},input:function(t){return!!o==!1?{live:t._live}:Ae(t)},"cbir-logo":function(t){return!!o==!1?!0:Ae(t)},dropdown:function(t){return!!o==!1?!0:Ae(t)},tooltip:Le,auth:function(t){return!!o==!1?!0:Ae(t)},"cbir-intent":function(t){return!!o==!1?{texts:t.texts}:Ae(t)},domik:function(t){return!(c&&"hidden"===c.type)==!1&&!!o==!1?!1:Ae(t)},popup2:function(t){if(!!o==!1){var e=t.ctx;return{mainOffset:e.mainOffset,secondaryOffset:e.secondaryOffset,viewportOffset:e.viewportOffset,directions:e.directions,zIndexGroupLevel:e.zIndexGroupLevel}}return Ae(t)},header:function(t){return"action"===o?t.extend({releaseByHeaderOutsideClick:!0,releaseByDocumentScroll:!0},t.ctx.js):!!o==!1?!0:Ae(t)},"cbir-panel":function(t){return!!o==!1?!0:Ae(t)},"cbir-no-results":function(t){return!!o==!1?!0:Ae(t)},"cbir-error":function(t){return!!o==!1?{searchError:t.searchError}:Ae(t)},"b-501px-popup":function(t){return!!o==!1?!0:Ae(t)},link:function(t){return!(c&&"yes"===c.pseudo)==!1&&!!o==!1?!0:Fe(t)},"serp-list":function(t){return!!o==!1?!0:Ae(t)},"lang-switcher":function(t){return"lang"===o&&!("yes"!=a.selected)==!1&&!!c.selected==!1?{lang:t.ctx._lang.lang,url:t.ctx.url}:Ae(t)},"serp-controller":function(t){return!!o==!1?!0:Ae(t)},"b-statcounter":function(t){return"metrika"===o&&!(a&&"js"===a.type)==!1?{id:+t.ctx.counter}:Ae(t)},"radio-button":function(t){return!!o==!1?t.extend({live:!1},t.ctx.js):Ae(t)},navigation:function(t){return!!o==!1?!0:Ae(t)},radiobox:function(t){return!!o==!1?t.extend({live:!1},t.ctx.js):Ae(t)},select:function(t){return!!o==!1?je(t):Ae(t)},button:function(t){return!!o==!1?!0:Ae(t)},tumbler:function(t){return!!o==!1?t.extend({live:!1},t.ctx.js):Ae(t)},"b-page":function(t){return!!o==!1?!0:Ae(t)},"b-menu-horiz":function(t){return!c==!1&&!!o==!1?!0:Ae(t)}},ro=function(t){return Ae(t)},oo={user:function(t){if(!(t.__$anflg61!==!0)==!1){if(!(c&&"yes"===c.menu)==!1){if(!!o==!1){var e,n,i=(e=t.__$anflg61,t.__$anflg61=!0,n=sn(t),t.__$anflg61=e,n||{});return i.role="button",i.tabindex=0,i["aria-haspopup"]=!0,i["aria-expanded"]=!1,i}return an(t)}return an(t)}return an(t)},"categories-index":function(t){return"button"===o?{href:t.ctx.href}:fn(t)},carousel:function(t){if("control"===o){if(!(t.__$anflg33!==!0)==!1){var e,n,i=(e=t.__$anflg33,t.__$anflg33=!0,n=rn(t),t.__$anflg33=e,n||{});return i.onmousedown=t.ctx.counter,i}return fn(t)}return fn(t)},related:function(t){return"cover"===o&&!(a&&"yes"===a["background-thumb"])==!1?{style:"background-image: url("+t.ctx.thumbs+");"}:fn(t)},direct:function(t){return!(c&&"iframe"===c.target)==!1&&!!o==!1?t._.extend(t.ctx.attrs,{frameborder:0}):fn(t)},"original-image":function(t){if("thumb"===o){var e="",n={"background-image":'url("'+t.ctx.href+'")',"background-size":"auto "+t.ctx.sizes.height+"px",height:t.ctx.sizes.height+"px",width:t.ctx.sizes.width+"px"};return _.forOwn(n,function(t,n){e+=n+":"+t+";"}),{style:e}}return fn(t)},"b-501px-wizard":function(t){return"thumb"===o?{src:t.ctx.thumb.url,width:t.ctx.thumb.size.width,height:t.ctx.thumb.size.height,alt:""}:fn(t)},"b-501px-info":function(t){return"image"===o?{src:"",alt:""}:fn(t)},"b-501px":function(t){var e=o;return"avatar"===e?{href:t.ctx.url,target:"_blank"}:"download-me"===e?{src:t.ctx.url||"",alt:""}:fn(t)},"serp-block":function(t){return!!o==!1?{role:"complementary"}:fn(t)},"serp-url":function(t){if("link"===o){var e={target:"_blank",href:t.ctx.url};return t.ctx.counter&&(e.onmousedown=t.ctx.counter),e}return fn(t)},"other-sites":function(t){var e=o;return"plates"===e?{role:"presentation"}:"preview-link"===e?{href:t.ctx.url,target:"_blank"}:"thumb"===e?{src:t.ctx.url,alt:"",width:t.ctx.width,height:t.ctx.height}:fn(t)},"serp-item":function(t){var e=o;if("link"===e){var n={href:t.ctx.url};return t.ctx.counter&&(n.onmousedown=t.ctx.counter),n}if("thumb"===e){var i=t.ctx.thumb,s=i.attrs||{};return s.src=i.url,s}return fn(t)},similar:function(t){return"thumb"===o?{style:"max-width:"+t.ctx.thumbSizes.width+"px;width:"+Math.floor(.8*t.ctx.thumbSizes.width)+"px;"}:fn(t)},complain:function(t){return!!o==!1?{title:t.ctx.title}:fn(t)},logo:function(t){return"link"===o?{href:t.ctx.url||t["i-services"].serviceUrl("www")}:fn(t)},"serp-controller":function(t){return"content"===o?{role:"main"}:fn(t)},header:function(t){if("action"===o){if(!(t.__$anflg43!==!0)==!1){var e,n,i=(e=t.__$anflg43,t.__$anflg43=!0,n=rn(t),t.__$anflg43=e,n||{});if("srv"===(t.ctx.elemMods||{}).type){var s=BEM.I18N("header__action_type_srv","services-table");i.title=s,i["aria-label"]=s}return i}return{href:t.ctx.url,role:"button",tabindex:0,"aria-pressed":!1,"aria-expanded":!1,"aria-haspopup":!0}}return!!o==!1?{role:"banner"}:fn(t)},more:function(t){if(!(t.__$anflg22!==!0)==!1){if(!t.ctx.counter==!1){if(!!o==!1){var e,n,i=(e=t.__$anflg22,t.__$anflg22=!0,n=sn(t),t.__$anflg22=e,n||{});return i.onmousedown=t.ctx.counter,i}return fn(t)}return fn(t)}return fn(t)},image:function(t){if(!!o==!1){var e,n=t.ctx,i={src:"//yastatic.net/lego/_/La6qi18Z8LwgnZdsAr1qy1GwCwo.gif",alt:""},s=["alt","width","height"];for(n.url&&(i.src=n.url);e=s.shift();)n[e]&&(i[e]=n[e]);return i}return fn(t)},"radio-button":function(t){var e=o;if("control"===e){var n=t._controlAttrs;return n.disabled?(n.disabled="disabled",n.tabindex="-1"):delete n.disabled,n.checked?n.checked="checked":delete n.checked,n.type="radio",n.name=t._radioButton.name,n}return"radio"===e?{"for":t._controlAttrs.id}:fn(t)},domik:function(t){if(!(t.__$anflg45!==!0)==!1){if(!(c&&"popup"===c.type)==!1){if(!!o==!1){var e,n,i=(e=t.__$anflg45,t.__$anflg45=!0,n=sn(t),t.__$anflg45=e,n||{});return i.role="dialog",i}return fn(t)}return fn(t)}return fn(t)},radiobox:function(t){var e=o;return"control"===e?t._controlAttrs:"radio"===e?{"for":t._controlAttrs.id}:fn(t)},auth:function(t){var e=o;if("social-link"===e)return{role:"button",tabindex:0,title:t.ctx.title,"aria-label":t.ctx.title};if("social"===e)return{role:"group","aria-label":BEM.I18N("auth","social-log-in")};if("retpath"===e)return{type:"hidden",name:"retpath",value:t._retpath||""};if(!!o==!1){var n,i;return{method:"POST",action:t.ctx.url||(n=s,s="action",i=jr(t),s=n,i),role:"form","aria-label":BEM.I18N("auth","auth")}}return fn(t)},button:function(t){if(!(t.__$anflg12!==!0)==!1){if(!(c&&"yes"===c.disabled)==!1){if(!!o==!1){var e,n,i=t.ctx,s={};return i.url?s["aria-disabled"]=!0:s.disabled="disabled",t.extend((e=t.__$anflg12,t.__$anflg12=!0,n=Ve(t),t.__$anflg12=e,n),s)}return ln(t)}return ln(t)}return ln(t)},input:function(t){var e=o;if("hint"===e)return{id:t._hintId,"for":t._inputId,"aria-hidden":!0};if("clear"===e)return{unselectable:"on"};if("control"===e){var n=t._.extend({id:t._inputId,name:t._name},t.ctx.controlAttrs);return(t._value||0===t._value)&&(n.value=t._value),c.disabled&&(n.disabled="disabled"),t._live&&(n.autocomplete="off"),n["aria-labelledby"]=t._labelId+" "+t._hintId,n}return fn(t)},link:function(t){if(!(t.__$anflg6!==!0)==!1){if(!(c&&"yes"===c.disabled)==!1){if(!!o==!1){var e,n;return t.extend((e=t.__$anflg6,t.__$anflg6=!0,n=nn(t),t.__$anflg6=e,n),{tabindex:-1,"aria-disabled":!0})}return pn(t)}return pn(t)}return pn(t)},checkbox:function(t){var e=o;if("label"===e){var n=t.ctx.attrs||{};return n["for"]=t._checkboxAttrs.id,n.id=t._labelId,n["aria-hidden"]=!0,n}if("control"===e){var i=t.ctx.attrs||{};return i.id=t._checkboxAttrs.id,i.type="checkbox",i.autocomplete="off",c.disabled&&(i.disabled="disabled"),"yes"==c.checked&&(i.checked="checked"),i["aria-labelledby"]=t._labelId,i}return fn(t)},"b-page":function(t){var e=o;return"css"===e?!t.ctx.url==!1?{rel:"stylesheet",href:t.ctx.url}:{nonce:t.ctx.nonce||t._nonce}:"js"===e?{src:t.ctx.url,nonce:t.ctx.nonce||t._nonce}:"root"===e?{lang:t["i-global"].lang||"ru"}:"favicon"===e?{rel:"shortcut icon",href:t.ctx.url}:"meta"===e?t.ctx.attrs:fn(t)},ticker:function(t){var e=o;return"value"===e?{title:t._count}:"count"===e&&!t.ctx.url==!1?{href:t.ctx.url}:un(t)},"i-ua":function(t){return!!o==!1?{nonce:t.ctx.nonce||t._nonce}:fn(t)},"b-icon":function(t){if(!!o==!1){var e,n=t.ctx,i={src:"//yastatic.net/lego/_/La6qi18Z8LwgnZdsAr1qy1GwCwo.gif",alt:""},s=["alt","width","height"];for(n.url&&(i.src=n.url);e=s.shift();)n[e]&&(i[e]=n[e]);return i}return fn(t)}},ao=function(t){return fn(t)},co={tumbler:function(t){var e=o;return"input"===e?"input":"label"===e?"label":"box"===e?"span":!!o==!1?"span":Mn(t)},"check-button":function(t){var e=o;return"hidden-value"===e?!(c&&"yes"===c.advanced)==!1?"input":vn(t):"control"===e?"input":vn(t)},"advanced-search":function(t){return"hidden-value"===o?"input":!!o==!1?"form":Mn(t)},"b-menu-horiz":function(t){return"item-selector"===o&&!c==!1?"span":Mn(t)},"b-menu-vert":function(t){var e=o;return"title"===e?"h3":"submenu"===e?"ul":"item-selector"===e?"span":"layout-unit"===e?"li":"layout"===e?"ul":Mn(t)},dropdown:function(t){return!(c&&"yes"===c.advanced)==!1&&!!o==!1?"span":bn(t)},user:function(t){var e=o;return"icon"===e?!t._uid==!1?"span":yn(t):"name"===e?"span":yn(t)},checkbox:function(t){var e=o;return"label"===e?"label":"control"===e?"input":!!o==!1?"span":Mn(t)},auth:function(t){var e=o;return"social-link"===e?"a":"social-icon"===e?"i":"retpath"===e?"input":!!o==!1?"form":Mn(t)},popup:function(t){var e=o;return"tail"===e||"close"===e?"i":Mn(t)},image:function(t){return!!o==!1?"img":Mn(t)},"services-table":function(t){return"item"===o?"li":!!o==!1?"ul":Mn(t)},header:function(t){return"action"===o?"a":Mn(t)},service:function(t){return"url"===o?"a":Mn(t)},logo:function(t){return"link"===o?"a":Mn(t)},search:function(t){var e=o;return"cell"===e?"td":"row"===e?"tr":"table"===e?"table":!!o==!1?"form":Mn(t)},similar:function(t){var e=o;return"thumb"===e?"li":"thumbs"===e?"ul":Mn(t)},suggest2:function(t){var e=o;return"a11y"===e?"span":"items"===e?"ul":Mn(t)},"other-sizes":function(t){var e=o;return"size-separator"===e?"span":"column-item"===e?"li":"column-list"===e?"ul":Mn(t)},"suggest2-item":function(t){var e=o;return"icon"===e?"span":"link"===e?"a":"bullet"===e?"span":"text"===e?!(a&&"green-url"===a.type)==!1?"div":!(a&&"title-url"===a.type)==!1?"div":t.ctx.tag||"span":"thumb-img"===e?"img":"highlight"===e?"b":"fact"===e?"span":!!o==!1?"li":Mn(t)},"other-sites":function(t){var e=o;return"preview-link"===e?"a":"thumb"===e?"img":"item"===e?"li":"container"===e?"ul":Mn(t)},"cbir-logo":function(t){return"icon"===o?"span":!!o==!1?"button":Mn(t)},"original-image":function(t){return"thumb"===o?"span":Mn(t)},"cbir-icon":function(t){return!!o==!1?"span":Mn(t)},"categories-index":function(t){return"button"===o?"a":Mn(t)},"cbir-intent":function(t){var e=o;return"close"===e?"span":"thumb"===e?"img":"title"===e?"span":Mn(t)},direct:function(t){return!(c&&"iframe"===c.target)==!1&&!!o==!1?"iframe":Mn(t)},search2:function(t){return!!o==!1?"form":Mn(t)},"b-icon":function(t){return!!o==!1?"img":Mn(t)},"cbir-panel":function(t){var e=o;return"dragMessage"===e?"span":"input"===e||"dragzone"===e?"form":"label-text"===e?"h1":"file-input"===e?"input":Mn(t)},"b-501px-wizard":function(t){return"thumb"===o?"img":Mn(t)},copyright:function(t){return"link"===o?"span":Mn(t)},"b-501px-popup":function(t){return"title"===o?"h1":Mn(t)},"lang-switcher":function(t){return"lang"===o?!("yes"!=a.selected)==!1&&!!c.selected==!1?"a":gn(t):Mn(t)},icon:function(t){return!!o==!1?"i":Mn(t)},"b-statcounter":function(t){var e=o;return"metrika"===e?!(a&&"js"===a.type)==!1?"i":"img":"tns"===e?"i":"gemius"===e?!t.ctx.tag==!1?t.ctx.tag:"img":!!o==!1?"i":Mn(t)},"b-501px-info":function(t){var e=o;return"image-wrapper"===e?"span":"image"===e?"img":Mn(t)},pane2:function(t){return"close"===o?"a":Mn(t)},"b-501px":function(t){var e=o;return"avatar"===e?"a":"author-name"===e?"span":"about"===e?"p":"download-me"===e?"img":"description"===e?"p":"back"===e?"span":"data"===e?"":Mn(t)},snippet:function(t){var e=o;return("link-text"===e||"arrow"===e||"domain"===e)&&!(c&&"series"===c.type)==!1?"span":_n(t)},"serp-url":function(t){var e=o;return"link"===e?"a":"item"===e?"span":Mn(t)},snippet2:function(t){return!("title"===o||"link"===o)==!1?"a":Mn(t)},"serp-item":function(t){var e=o;return"link"===e?"a":"thumb"===e?"img":Mn(t)},preview2:function(t){var e=o;return"thumb"===e?"img":"fullscreen"===e?"a":Mn(t)},more:function(t){return"icon"===o?"span":Mn(t)},"slideshow-switcher":function(t){return"control"===o?"span":Mn(t)},misspell:function(t){return"message"===o?"span":Mn(t)},gallery:function(t){return"item"===o?"a":Mn(t)},"radio-button":function(t){if(!!o==!1)return"span";var e=o;return"control"===e?"input":"radio"===e?"label":Mn(t)},related2:function(t){return"thumb"===o?"a":Mn(t)},radiobox:function(t){var e=o;return"control"===e?"input":"radio"===e?"label":!!o==!1?"span":Mn(t)},competitors:function(t){var e=o;return"links"===e||"query"===e?"span":"link"===e?"a":Mn(t)},button:function(t){return!t.ctx.url==!1&&!!o==!1?"a":kn(t)},"internal-table":function(t){var e=o;return"params-count"===e?"span":"cell"===e||"head"===e?"td":"row"===e?"tr":!!o==!1?"table":Mn(t)},link:function(t){return"inner"===o?"span":!!o==!1?t.ctx.url?"a":"span":Mn(t)},input:function(t){var e=o;return"control"===e?!(c&&"textarea"===c.type)==!1?"textarea":"input":"box-layout-cell"===e?!t._service==!1?"td":mn(t):"box-layout"===e?!t._service==!1?"table":mn(t):"hint"===e?"label":"clear"===e||"box"===e||"ahead-hint"===e||"ahead-filler"===e?"span":mn(t)},"b-page":function(t){var e=o;return"css"===e?!t.ctx.url==!1?"link":"style":"js"===e?"script":"link"===e?"link":"body"===e?"":"favicon"===e?"link":"meta"===e?"meta":"head"===e?"head":"root"===e?"html":!!o==!1?"body":Mn(t)},select:function(t){var e=o;return"control"===e?"select":"text"===e?"span":"option-group"===e?"optgroup":"option"===e?"option":!!o==!1?"span":Mn(t)},"i-ua":function(t){return!!o==!1?"script":Mn(t)},ticker:function(t){var e=o;return"value"===e||"text"===e?"span":"count"===e?!t.ctx.url==!1?"a":"span":!!o==!1?"span":Mn(t)}},uo=function(t){return Mn(t)},lo={tumbler:xn,"services-table":function(t){var e=o;return"item"===e?Li(t):"all"===e&&!(t.__$anflg74!==!0)==!1?zi(t):qi(t)},service:Hi,paranja:Gi,slide:Yi,"tabs-navigation":function(t){return"link"===o&&!(t.__$anflg82!==!0)==!1?Fi(t):Ur(t)},"b-menu-vert":function(t){return"item"===o&&!(t.__$anflg68!==!0)==!1?Xi(t):Ur(t)},"dropdown-menu":function(t){var e=o;return"switcher"===e?!(t.__$anflg67!==!0)==!1?Ji(t):ns(t):"popup"===e?!(t.__$anflg66!==!0)==!1?Zi(t):!(t.__$anflg65!==!0)==!1?ts(t):ns(t):"menu"===e&&!(t.__$anflg64!==!0)==!1?es(t):ns(t)},user:ss,ticker:ds,checkbox:fs,"suggest2-item":function(t){var e=o;return"icon"===e?Pi(t):"fact"===e?$i(t):"img"===e?Ni(t):Ur(t)},dropdown:function(t){return"popup"===o&&!(t.__$anflg49!==!0)==!1?_s(t):Ur(t)},search:Di,auth:gs,input:wi,domik:function(t){return!(t.__$anflg46!==!0)==!1&&!(c&&"hidden"===c.type)==!1&&!!o==!1?ks(t):Ur(t)},popup:ki,header:function(t){var e=o;return"action"===e?Ms(t):"search"===e&&!(t.__$anflg41!==!0)==!1?Es(t):Bs(t)},tooltip:function(t){return!!t._isInTooltip==!1&&!!o==!1?yi(t):Ur(t)},"i-services":function(t){var e=o;return"url"===e?void t._buf.push(t["i-services"].serviceUrl(t.ctx.id,t.ctx.region)):"name"===e?void t._buf.push(t["i-services"].serviceName(t.ctx.id)):!o==!1?"":Ur(t)},"cbir-intent":vi,"other-sizes":function(t){return"column-link"===o&&!(t.__$anflg37!==!0)==!1?Is(t):Ur(t)},search2:bi,"other-sites":function(t){var e=o;return"link"===e?!(t.__$anflg36!==!0)==!1?Cs(t):Ur(t):"title"===e&&!(t.__$anflg35!==!0)==!1?Ds(t):Ur(t)},"cbir-error":gi,back:function(t){return!(t.__$anflg32!==!0)==!1&&!!o==!1?Ps(t):Ur(t)},footer:fi,"b-501px-wizard":function(t){var e=o;return"wrap"===e?!(t.__$anflg31!==!0)==!1?Ts(t):Ur(t):"popup"===e?!(t.__$anflg30!==!0)==!1?Os(t):Ur(t):"images"===e&&!(t.__$anflg29!==!0)==!1?$s(t):Ur(t)},"i-geodata":pi,"b-501px-info":function(t){return"program"===o&&!(t.__$anflg28!==!0)==!1?Ns(t):js(t)},"lang-switcher":function(t){var e=o;return"flag"===e?!(t.__$anflg106!==!0)==!1&&!t._withFlags==!1?ui(t):hi(t):"lang"===e&&!(t.__$anflg105!==!0)==!1?li(t):hi(t)},"b-501px":function(t){var e=o;return"search"===e?!(t.__$anflg26!==!0)==!1?Ls(t):Ur(t):"download"===e?!(t.__$anflg25!==!0)==!1?Rs(t):Ur(t):"author-link"===e&&!(t.__$anflg24!==!0)==!1?As(t):Ur(t)},"b-statcounter":Jn,misspell:function(t){return"link"===o&&!(t.__$anflg21!==!0)==!1?zs(t):Ur(t)},"slideshow-switcher":function(t){return!(t.__$anflg110!==!0)==!1&&!!o==!1?Xn(t):Ur(t)},"radio-button":qs,"share-dropdown":function(t){return!(t.__$anflg113!==!0)==!1&&!!o==!1?Gn(t):Yn(t)},radiobox:Xs,navigation:Hn,nps:function(t){return!(t.__$anflg8!==!0)==!1&&!!o==!1?nr(t):Ur(t)},"check-button":An,"b-page":function(t){var e=o;if("css"===e)return!t.ctx.hasOwnProperty("ie")==!1&&!!t.ctx._ieCommented==!1?ir(t):sr(t);if("favicon"===e){var i=s;s="";var r=t.ctx;return t.ctx=[t.ctx.src16&&{elem:"link",attrs:{rel:"shortcut icon",href:t.ctx.src16}},t.ctx.src32&&{elem:"link",attrs:{rel:"apple-touch-icon-precomposed",sizes:"32x32",href:t.ctx.src32}}],d(t),s=i,void(t.ctx=r)}return"flush"===e?void("pre-search"===(c.entry||t.ctx.entry)?n.yield(t._buf.join("")):"post-search"===(c.entry||t.ctx.entry)&&(t._buf.length=0)):sr(t)},button:jn,"i-bem":function(t){return"i18n"===o?or(t):Ur(t)},select:function(t){return"control"===o?Pn(t):Tn(t)},"i-jquery":function(t){return"core"===o&&!(t.__$anflg3!==!0)==!1?ar(t):Ur(t)},"b-menu-horiz":function(t){return"item"===o&&!(t.__$anflg69!==!0)==!1&&!c==!1?Qi(t):Ur(t)}},ho=function(t){return Ur(t)};return!function(){!function(t,e){if(e.I18N)return void 0;t.BEM=e;var n=e.I18N=function(t,e){return e};n.keyset=function(){return n},n.key=function(t){return t},n.lang=function(){return void 0}}(this,"undefined"==typeof BEM?{}:BEM)}(),!function(){function t(t){this.apply=t,this._buf=null,this.ctx=null,this._=this,this._start=!0,this._listLength=0,this._notNewList=!1,this._inside=!1,this.position=0}var e={},n=Object.prototype.toString,i={area:1,base:1,br:1,col:1,command:1,embed:1,hr:1,img:1,input:1,keygen:1,link:1,meta:1,param:1,source:1,wbr:1};!function(t,e){function n(t,e,n){n.push(r,t,r,e)}function i(t,e,i,s){s.push(t),i&&n(e,i,s)}function s(t,s,r,a,c){i(t,e,e,c),c.push(o,s),a&&n(r,a,c)}var r="_",o="__",a="[a-zA-Z0-9-]+";t.INTERNAL={NAME_PATTERN:a,MOD_DELIM:r,ELEM_DELIM:o,buildModPostfix:function(t,e,i){var s=i||[];return n(t,e,s),i?s:s.join("")},buildClass:function(t,n,r,o,a){var c=typeof r;if("string"==c?"string"!=typeof o&&(a=o,o=r,r=n,n=e):"undefined"!=c?(a=r,r=e):n&&"string"!=typeof n&&(a=n,n=e),!(n||r||a))return t;var u=a||[];return n?s(t,n,r,o,u):i(t,r,o,u),a?u:u.join("")},buildModsClasses:function(t,e,n,r){var o=r||[];if(n){var a;for(a in n)if(n.hasOwnProperty(a)){var c=n[a];null!=c&&(c=n[a]+"",c&&(o.push(" "),e?s(t,e,a,c,o):i(t,a,c,o)))}}return r?o:o.join("")},buildClasses:function(t,n,r,o){var a=o||[];return n?s(t,n,e,e,a):i(t,e,e,a),this.buildModsClasses(t,n,r,o),o?a:a.join("")}}}(e),t.prototype.reinit=function(t){this.ctx=null===typeof t?"":t,this._buf=[],this._start=!0,this._listLength=0,this._notNewList=!1,this.position=0},t.prototype.isArray=Array.isArray?function(t){return Array.isArray(t)}:function(t){return"[object Array]"===n.call(t)},t.prototype.isSimple=function(t){var e=typeof t;return"string"===e||"number"===e||"boolean"===e},t.prototype.isShortTag=function(t){return i.hasOwnProperty(t)},t.prototype.extend=function(t,e){if(!t||!e)return t||e;var n,i={};for(n in t)t.hasOwnProperty(n)&&(i[n]=t[n]);for(n in e)e.hasOwnProperty(n)&&(i[n]=e[n]);return i},t.prototype.identify=function(){var t=0,n=e.__id=+new Date,i="__"+n,s=function(){return"uniq"+n+ ++t};return function(t,e){return t?e||t[i]?t[i]:t[i]=s():s()}}(),t.prototype.xmlEscape=function(t){return(t+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},t.prototype.attrEscape=function(t){return(t+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},t.prototype.BEM=e,t.prototype.isFirst=function(){return 1===this.position},t.prototype.isLast=function(){return this.position===this._listLength},t.prototype.generateId=function(){return this.identify(this.ctx)},l.apply=t.apply=function(){var e=new t(Jr);return e.reinit(this),e.apply(),e._buf.join("")}}(),l}("undefined"==typeof l?{}:l);return function(t){var e=this;return t||(t={}),u=t.cache,function(){return e===this?(e=void 0,s="",r="",o="",a="",c=""):(s="",r="",o="",a="",c=""),h.apply.call([e])}.call(null)}}();return"undefined"==typeof t||(t.BEMHTML=n),t.BEMHTML},n=!0;"object"==typeof module&&"object"==typeof module.exports&&(exports.BEMHTML=e({},{}),n=!1),"object"==typeof modules&&(modules.define("BEMHTML",[],function(t){t(e({},{}))}),n=!1),n&&(BEMHTML=e({},{}),t.BEMHTML=BEMHTML)}(this),function(t){function e(e,i,s){var o=!1;if(r){var a=[];t.each(c,function(){s.hasOwnProperty(this)&&(o=!0)&&a.push({name:this,val:s[this]})}),o&&(t.each(s,function(t){a.push({name:t,val:this})}),s=a)}t.each(s,function(s,r){if(o&&(s=r.name,r=r.val),t.isFunction(r)&&(!n||r.toString().indexOf(".__base")>-1)){var a=e[s]||function(){};i[s]=function(){var t=this.__base;this.__base=a;var e=r.apply(this,arguments);return this.__base=t,e}}else i[s]=r})}var n=function(){"_"}.toString().indexOf("_")>-1,i=function(){},s=Object.create||function(t){var e=function(){};return e.prototype=t,new e},r=!0,o={toString:""};for(var a in o)o.hasOwnProperty(a)&&(r=!1);var c=r?["toString","valueOf"]:null;t.inherit=function(){var n=arguments,r=t.isFunction(n[0]),o=r?n[0]:i,a=n[r?1:0]||{},c=n[r?2:1],u=a.__constructor||r&&o.prototype.__constructor?function(){return this.__constructor.apply(this,arguments)}:function(){};if(!r)return u.prototype=a,u.prototype.__self=u.prototype.constructor=u,t.extend(u,c);t.extend(u,o);var l=o.prototype,h=u.prototype=s(l);return h.__self=h.constructor=u,e(l,h,a),c&&e(o,u,c),u},t.inheritSelf=function(t,n,i){var s=t.prototype;return e(s,s,n),i&&e(t,t,i),t}}(jQuery),function(t){var e=0,n="__"+ +new Date,i=function(){return"uniq"+ ++e};t.identify=function(t,e){if(!t)return i();var s="uniqueID"in t?"uniqueID":n;return e||s in t?t[s]:t[s]=i()}}(jQuery),function(t){t.isEmptyObject||(t.isEmptyObject=function(t){for(var e in t)return!1;return!0})}(jQuery),function(t){t.extend({debounce:function(t,e,n,i){3==arguments.length&&"boolean"!=typeof n&&(i=n,n=!1);var s;return function(){var r=arguments;i=i||this,n&&!s&&t.apply(i,r),clearTimeout(s),s=setTimeout(function(){n||t.apply(i,r),s=null},e)}},throttle:function(t,e,n){var i,s,r;return function(){s=arguments,r=!0,n=n||this,i||function(){r?(t.apply(n,s),r=!1,i=setTimeout(arguments.callee,e)):i=null}()}}})}(jQuery),function(t){var e="__"+ +new Date+"storage",n=function(e,n){return t.identify(e)+(n?t.identify(n):"")},i={buildEventName:function(t){return t},on:function(i,s,r,o,a){if("string"==typeof i){t.isFunction(s)&&(o=r,r=s,s=void 0);for(var c,u=n(r,o),l=this[e]||(this[e]={}),h=i.split(" "),d=0;i=h[d++];)if(i=this.buildEventName(i),c=l[i]||(l[i]={ids:{},list:{}}),!(u in c.ids)){var p=c.list,f={fn:r,data:s,ctx:o,special:a};p.last?(p.last.next=f,f.prev=p.last):p.first=f,c.ids[u]=p.last=f}}else{var m=this;t.each(i,function(t,e){m.on(t,e,s,a)})}return this},onFirst:function(t,e,n,i){return this.on(t,e,n,i,{one:!0})},un:function(i,s,r){if("string"==typeof i||"undefined"==typeof i){var o=this[e];if(o)if(i){for(var a,c=i.split(" "),u=0;i=c[u++];)if(i=this.buildEventName(i),a=o[i])if(s){var l=n(s,r),h=a.ids;if(l in h){var d=a.list,p=h[l],f=p.prev,m=p.next;f?f.next=m:p===d.first&&(d.first=m),m?m.prev=f:p===d.last&&(d.last=f),delete h[l]}}else delete this[e][i]}else delete this[e]}else{var _=this;t.each(i,function(t,e){_.un(t,e,r)})}return this},trigger:function(n,i){var s,r=this,o=r[e];if("string"==typeof n?n=t.Event(r.buildEventName(s=n)):n.type=r.buildEventName(s=n.type),n.target||(n.target=r),o&&(o=o[n.type]))for(var a,c=o.list.first;c;)n.data=c.data,a=c.fn.call(c.ctx||r,n,i),"undefined"!=typeof a&&(n.result=a,a===!1&&(n.preventDefault(),n.stopPropagation())),c.special&&c.special.one&&r.un(s,c.fn,c.ctx),c=c.next;return this}};t.observable=t.inherit(i,i)}(jQuery),function(t,e){function n(t,e,n){return(t?"__elem_"+t:"")+"__mod"+(e?"_"+e:"")+(n?"_"+n:"")}function i(e,i,s){t.isFunction(e)?i[n(s,"*","*")]=e:t.each(e,function(e,r){t.isFunction(r)?i[n(s,e,"*")]=r:t.each(r,function(t,r){i[n(s,e,t)]=r})})}function s(t,e){return e?Array.isArray(e)?function(n){for(var i=0,s=e.length;s>i;)if(n.hasMod(t,e[i++]))return!0;return!1}:function(n){return n.hasMod(t,e)}:function(e){return e.hasMod(t)}}var r=[],o={},a={};this.BEM=t.inherit(t.observable,{__constructor:function(t,e,n){var i=this;i._modCache=t||{},i._processingMods={},i._params=e,i.params=null,n!==!1?i._init():i.afterCurrentEvent(function(){i._init()})},_init:function(){return this._initing||this.hasMod("js","inited")||(this._initing=!0,this.params||(this.params=t.extend(this.getDefaultParams(),this._params),delete this._params),this.setMod("js","inited"),delete this._initing,this.hasMod("js","inited")&&this.trigger("init")),this},changeThis:function(t,e){return t.bind(e||this)},afterCurrentEvent:function(t,e){this.__self.afterCurrentEvent(this.changeThis(t,e))},trigger:function(t,e){return this.__base(t=this.buildEvent(t),e).__self.trigger(t,e),this},buildEvent:function(e){return"string"==typeof e&&(e=t.Event(e)),e.block=this,e},hasMod:function(t,n,i){var s=arguments.length,r=!1;1==s?(i="",n=t,t=e,r=!0):2==s&&("string"==typeof t?(i=n,n=t,t=e):(i="",r=!0));var o=this.getMod(t,n)===i;return r?!o:o},getMod:function(t,e){var n=typeof t;if("string"===n||"undefined"===n){e=t||e;var i=this._modCache;return e in i?i[e]:i[e]=this._extractModVal(e)}return this._getElemMod(e,t)},_getElemMod:function(t,e,n){return this._extractModVal(t,e,n)},getMods:function(t){var n=t&&"string"!=typeof t,i=this,s=[].slice.call(arguments,n?1:0),r=i._extractMods(s,n?t:e);return n||(s.length?s.forEach(function(t){i._modCache[t]=r[t]}):i._modCache=r),r},setMod:function(n,i,s){"undefined"==typeof s&&(s=i,i=n,n=e);var r=this;if(!n||n[0]){var o=(n&&n[0]?t.identify(n[0]):"")+"_"+i;if(this._processingMods[o])return r;var a,c=n?r._getElemMod(i,n,a=r.__self._extractElemNameFrom(n)):r.getMod(i);if(c===s)return r;this._processingMods[o]=!0;var u=!0,l=[i,s,c];n&&l.unshift(n),[["*","*"],[i,"*"],[i,s]].forEach(function(t){u=r._callModFn(a,t[0],t[1],l)!==!1&&u}),!n&&u&&(r._modCache[i]=s),u&&r._afterSetMod(i,s,c,n,a),delete this._processingMods[o]}return r},_afterSetMod:function(){},toggleMod:function(t,n,i,s,r){"string"==typeof t&&(r=s,s=i,i=n,n=t,t=e),"undefined"==typeof s?s="":"boolean"==typeof s&&(r=s,s="");var o=this.getMod(t,n);return(o==i||o==s)&&this.setMod(t,n,"boolean"==typeof r?r?i:s:this.hasMod(t,n,i)?s:i),this},delMod:function(t,n){return n||(n=t,t=e),this.setMod(t,n,"")},_callModFn:function(t,i,s,r){var o=n(t,i,s);return this[o]?this[o].apply(this,r):e},_extractModVal:function(){return""},_extractMods:function(){return{}},channel:function(t,e){return this.__self.channel(t,e)},getDefaultParams:function(){return{}},del:function(t){var e=[].slice.call(arguments);return"string"==typeof t&&e.unshift(this),this.__self.del.apply(this.__self,e),this},destruct:function(){}},{_name:"i-bem",blocks:o,decl:function(n,r,a){if("string"==typeof n?n={block:n}:n.name&&(n.block=n.name),n.baseBlock&&!o[n.baseBlock])throw'baseBlock "'+n.baseBlock+'" for "'+n.block+'" is undefined';r||(r={}),r.onSetMod&&(i(r.onSetMod,r),delete r.onSetMod),r.onElemSetMod&&(t.each(r.onElemSetMod,function(t,e){i(e,r,t)}),delete r.onElemSetMod);var c=o[n.baseBlock||n.block]||this;if(n.modName){var u=s(n.modName,n.modVal);t.each(r,function(n,i){t.isFunction(i)&&(r[n]=function(){var t;if(u(this))t=i;else{var s=c.prototype[n];s&&s!==r[n]&&(t=this.__base)}return t?t.apply(this,arguments):e})})}if(a&&"boolean"==typeof a.live){var l=a.live;a.live=function(){return l}}var h;return n.block==c._name?(h=t.inheritSelf(c,r,a))._processLive(!0):((h=o[n.block]=t.inherit(c,r,a))._name=n.block,delete h._liveInitable),h},_processLive:function(){return!1},create:function(t,e){return"string"==typeof t&&(t={block:t}),new o[t.block](t.mods,e)},getName:function(){return this._name},_extractElemNameFrom:function(){},afterCurrentEvent:function(t,e){1==r.push({fn:t,ctx:e})&&setTimeout(this._runAfterCurrentEventFns,0)},_runAfterCurrentEventFns:function(){var t=r.length;if(t)for(var e,n=r.splice(0,t);e=n.shift();)e.fn.call(e.ctx||this)},changeThis:function(t,e){return t.bind(e||this)},del:function(t){var e="string"==typeof t,n=e?0:1,i=arguments.length;for(e&&(t=this);i>n;)delete t[arguments[n++]];return this},channel:function(n,i){return"boolean"==typeof n&&(i=n,n=e),n||(n="default"),i?void(a[n]&&(a[n].un(),delete a[n])):a[n]||(a[n]=new t.observable)}})}(jQuery),function(){Object.keys||(Object.keys=function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e})}(),function(){var t=Array.prototype,e=Object.prototype.toString,n={indexOf:function(t,e){e=+(e||0);var n=this,i=n.length;if(i>0&&i>e)for(e=0>e?Math.ceil(e):Math.floor(e),-i>e&&(e=0),0>e&&(e+=i);i>e;){if(e in n&&n[e]===t)return e;++e}return-1},forEach:function(t,e){for(var n=-1,i=this,s=i.length;++n<s;)n in i&&(e?t.call(e,i[n],n,i):t(i[n],n,i))},map:function(t,e){for(var n=-1,i=this,s=i.length,r=new Array(s);++n<s;)n in i&&(r[n]=e?t.call(e,i[n],n,i):t(i[n],n,i));return r},filter:function(t,e){for(var n=-1,i=this,s=i.length,r=[];++n<s;)n in i&&(e?t.call(e,i[n],n,i):t(i[n],n,i))&&r.push(i[n]);return r},reduce:function(t,e){var n,i=-1,s=this,r=s.length;if(arguments.length<2){for(;++i<r;)if(i in s){n=s[i];break}}else n=e;for(;++i<r;)i in s&&(n=t(n,s[i],i,s));return n},some:function(t,e){for(var n=-1,i=this,s=i.length;++n<s;)if(n in i&&(e?t.call(e,i[n],n,i):t(i[n],n,i)))return!0;return!1},every:function(t,e){for(var n=-1,i=this,s=i.length;++n<s;)if(n in i&&!(e?t.call(e,i[n],n,i):t(i[n],n,i)))return!1;return!0}};for(var i in n)t[i]||(t[i]=n[i]);Array.isArray||(Array.isArray=function(t){return"[object Array]"===e.call(t)})}(),function(){var t=Array.prototype.slice;Function.prototype.bind||(Function.prototype.bind=function(e){var n=this,i=t.call(arguments,1);return function(){return n.apply(e,i.concat(t.call(arguments)))}})}(),function(t,e,n){function i(t,e,n){n.push(o,t,o,e)}function s(t,e,n,s){s.push(t),n&&i(e,n,s)}function r(t,e,r,o,c){s(t,n,n,c),c.push(a,e),o&&i(r,o,c)}var o="_",a="__",c="[a-zA-Z0-9-]+";t.INTERNAL={NAME_PATTERN:c,MOD_DELIM:o,ELEM_DELIM:a,buildModPostfix:function(t,e,n){var s=n||[];return i(t,e,s),n?s:s.join("")},buildClass:function(t,e,i,o,a){var c=typeof i;if("string"==c?"string"!=typeof o&&"number"!=typeof o&&(a=o,o=i,i=e,e=n):"undefined"!=c?(a=i,i=n):e&&"string"!=typeof e&&(a=e,e=n),!(e||i||a))return t;var u=a||[];return e?r(t,e,i,o,u):s(t,i,o,u),a?u:u.join("")},buildClasses:function(t,i,o,a){i&&"string"!=typeof i&&(a=o,o=i,i=n);var c=a||[];return i?r(t,i,n,n,c):s(t,n,n,c),o&&e.each(o,function(e,n){n&&(c.push(" "),i?r(t,i,e,n,c):s(t,e,n,c))}),a?c:c.join("")}}}(BEM,jQuery),function(t,e,n){function i(t,e,n){(t[e]||(t[e]=[])).unshift(n)}function s(t,e){return e.modName?function(n){(n._curBlock.mods||{})[e.modName]===e.modVal&&t(n)}:t}function r(t,n){var i,s=e.isArray(n);return e.isArray(t)?s?i=t.concat(n):(i=t).push(n):s?(i=n).unshift(t):i=[t,n],i
}function o(t){return t.replace(f,function(t){return p[t]})}var a=t.INTERNAL,c=a.ELEM_DELIM,u={area:1,base:1,br:1,col:1,command:1,embed:1,hr:1,img:1,input:1,keygen:1,link:1,meta:1,param:1,source:1,wbr:1},l=a.buildClass,h=a.buildClasses,d={},p={'"':"&quot;","&":"&amp;","<":"&lt;",">":"&gt;"},f=/["&<>]/g;t.HTML={decl:function(t,n){"string"==typeof t&&(t={block:t}),t.name&&(t.block=t.name);var r=d[t.block]||(d[t.block]={});n.onBlock&&i(r,"_block",s(n.onBlock,t)),n.onElem&&(e.isFunction(n.onElem)?i(r,"_elem",s(n.onElem,t)):e.each(n.onElem,function(e,n){i(r,"_elem"+("*"===e?"":c+e),s(n,t))}))},build:function(t){var e=new this.Ctx(t);return e._buildAll(),e._flush()},Ctx:e.inherit({__constructor:function(t){this._buffer=[],this._params=t,this._tParams=null,this._tParamsChanges=null,this._curBlock=n},pos:function(){return this._params._pos},isFirst:function(){return 1===this._params._pos},isLast:function(){var t=this._params;return t._pos===t._siblingsCount},params:function(t){var e=this;return"undefined"==typeof t?e._params:(e._params=t,e)},param:function(t,n,i,s){var r=this,o=r._params;return"undefined"==typeof n?o[t]:(!i&&t in o?s&&(o[t]=e.extend(n,o[t])):o[t]=n,r)},attrs:function(t,e){return this.param("attrs",t,e,!0)},attr:function(t,e,n){var i=this;if("undefined"==typeof e)return(i._params.attrs||{})[t];var s=i._params.attrs;return s?(n||!(t in s))&&(s[t]=e):(i._params.attrs={})[t]=e,i},tag:function(t,e){return this.param("tag",t,e)},cls:function(t,e){return this.param("cls",t,e)},mods:function(t,e){return this.param("mods",t,e,!0)},mod:function(t,e,n){var i=this;if("undefined"==typeof e)return(i._params.mods||{})[t];var s=i._params.mods;return s?(n||!(t in s))&&(s[t]=e):(i._params.mods={})[t]=e,i},mix:function(t,e){var n=this,i=n._params;return"undefined"==typeof t?i.mix:(i.mix=!e&&"mix"in i?i.mix.concat(t):t,n)},js:function(t){return this.param("js",t)},content:function(t,e){return this.param("content",t,e)},wrapContent:function(t){var e=this,n=e._params;return t.content=n.content,n.content=t,e},beforeContent:function(t){var e=this,n=e._params;return n.content=r(t,n.content),e},afterContent:function(t){var e=this,n=e._params;return n.content=r(n.content,t),e},wrap:function(t){var e=this,n=e._params;return t.block||(t._curBlock=e._curBlock),t.content=n._wrapper?n._wrapper:n,n._wrapper=t,e},tParam:function(t,e){var n=this,i=n._tParams||(n._tParams={});if("undefined"==typeof e)return i[t];var s=n._tParamsChanges||(n._tParamsChanges={});return t in s||(s[t]=i[t]),i[t]=e,n},generateId:function(){return e.identify()},stop:function(){this._params._isStopped=!0},_buildAll:function(){var t=this,n=t._buffer,i=t._params,s=typeof i;if("string"===s||"number"===s)n.push(i);else if(e.isArray(i))for(var r,o,a=0,c=i.length;c>a;)t._params=r=i[a++],o=typeof r,"string"===o||"number"===o?n.push(r):r&&(r._pos=a,r._siblingsCount=c,t._buildByDecl());else i&&(t._params._pos=t._params._siblingsCount=1,t._buildByDecl())},_build:function(){var t,n=this,i=n._buffer,s=n._params,r=s.tag||"div",a=s.block||s.elem,c=a&&(s.block||n._curBlock.block),d=!1;s.js&&((t={})[l(c,s.elem)]=s.js===!0?{}:s.js,d=!s.elem),i.push("<",r),(a||s.cls)&&(i.push(' class="'),a&&(h(c,s.elem,s.mods,i),s.mix&&e.each(s.mix,function(e,n){n&&(i.push(" "),h(n.block,n.elem,n.mods,i),n.js&&((t||(t={}))[l(n.block,n.elem)]=n.js===!0?{}:n.js,d||(d=!n.elem)))})),s.cls&&i.push(a?" ":"",s.cls),d&&i.push(" i-bem"),i.push('"')),t&&i.push(' onclick="return ',o(JSON.stringify(t)),'"'),s.attrs&&e.each(s.attrs,function(t,e){"undefined"!=typeof e&&null!==e&&e!==!1&&i.push(" ",t,'="',e.toString().replace(/"/g,"&quot;"),'"')}),u[r]?i.push("/>"):(i.push(">"),"undefined"!=typeof s.content&&(n._params=s.content,n._buildAll()),i.push("</",r,">"))},_flush:function(){var t=this._buffer.join("");return delete this._buffer,t},_buildByDecl:function(){var t=this,n=t._curBlock,i=t._params;if(i._curBlock&&(t._curBlock=i._curBlock),i.block&&(t._curBlock=i),!i._wrapper){if(i.block||i.elem){var s=d[t._curBlock.block];if(s){var r;if(i.elem?(r=s["_elem"+c+i.elem],s._elem&&(r=r?r.concat(s._elem):s._elem)):r=s._block,r)for(var o,a=0;(o=r[a++])&&(o(t),!i._isStopped););}}if(i._wrapper)return i._curBlock=t._curBlock,t._params=i._wrapper,t._buildAll()}var u=t._tParamsChanges;if(t._tParamsChanges=null,t._build(),t._curBlock=n,u){var l=t._tParams;e.each(u,function(t,e){"undefined"==typeof e?delete l[t]:l[t]=e})}}})}}(BEM,jQuery),function(t){if(!window.JSON){var e,n=Object.prototype.toString,i=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,s={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};window.JSON={stringify:e=function(r){if(null===r)return"null";if("undefined"==typeof r)return t;switch(n.call(r)){case"[object String]":return i.lastIndex=0,'"'+(i.test(r)?r.replace(i,function(t){var e=s[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)}):r)+'"';case"[object Number]":case"[object Boolean]":return""+r;case"[object Array]":for(var o,a="[",c=0,u=r.length;u>c;)o=e(r[c]),a+=(c++?",":"")+("undefined"==typeof o?"null":o);return a+"]";case"[object Object]":if("[object Function]"===n.call(r.toJSON))return e(r.toJSON());var o,a="{",c=0;for(var l in r)r.hasOwnProperty(l)&&(o=e(r[l]),"undefined"!=typeof o&&(a+=(c++?",":"")+'"'+l+'":'+o));return a+"}";default:return t}},parse:function(t){return Function("return "+t)()}}}}(),jQuery.cookie=function(t,e,n){if("undefined"==typeof e){var i=null;if(document.cookie&&""!=document.cookie)for(var s=document.cookie.split(";"),r=0;r<s.length;r++){var o=jQuery.trim(s[r]);if(o.substring(0,t.length+1)==t+"="){i=decodeURIComponent(o.substring(t.length+1));break}}return i}n=n||{},null===e&&(e="",n.expires=-1);var a="";if(n.expires&&("number"==typeof n.expires||n.expires.toUTCString)){var c;"number"==typeof n.expires?(c=new Date,c.setTime(c.getTime()+24*n.expires*60*60*1e3)):c=n.expires,a="; expires="+c.toUTCString()}var u=n.path?"; path="+n.path:"",l=n.domain?"; domain="+n.domain:"",h=n.secure?"; secure":"";document.cookie=[t,"=",encodeURIComponent(e),a,u,l,h].join("")},function(t){function e(t){return t.replace(/%.{2}/g,function(t){return i[t]||t})}function n(t,n){var i="";try{i=t(n)}catch(s){try{i=t(e(n))}catch(s){i=n}}return i}var i={"%D0":"%D0%A0","%C0":"%D0%90","%C1":"%D0%91","%C2":"%D0%92","%C3":"%D0%93","%C4":"%D0%94","%C5":"%D0%95","%A8":"%D0%81","%C6":"%D0%96","%C7":"%D0%97","%C8":"%D0%98","%C9":"%D0%99","%CA":"%D0%9A","%CB":"%D0%9B","%CC":"%D0%9C","%CD":"%D0%9D","%CE":"%D0%9E","%CF":"%D0%9F","%D1":"%D0%A1","%D2":"%D0%A2","%D3":"%D0%A3","%D4":"%D0%A4","%D5":"%D0%A5","%D6":"%D0%A6","%D7":"%D0%A7","%D8":"%D0%A8","%D9":"%D0%A9","%DA":"%D0%AA","%DB":"%D0%AB","%DC":"%D0%AC","%DD":"%D0%AD","%DE":"%D0%AE","%DF":"%D0%AF","%E0":"%D0%B0","%E1":"%D0%B1","%E2":"%D0%B2","%E3":"%D0%B3","%E4":"%D0%B4","%E5":"%D0%B5","%B8":"%D1%91","%E6":"%D0%B6","%E7":"%D0%B7","%E8":"%D0%B8","%E9":"%D0%B9","%EA":"%D0%BA","%EB":"%D0%BB","%EC":"%D0%BC","%ED":"%D0%BD","%EE":"%D0%BE","%EF":"%D0%BF","%F0":"%D1%80","%F1":"%D1%81","%F2":"%D1%82","%F3":"%D1%83","%F4":"%D1%84","%F5":"%D1%85","%F6":"%D1%86","%F7":"%D1%87","%F8":"%D1%88","%F9":"%D1%89","%FA":"%D1%8A","%FB":"%D1%8B","%FC":"%D1%8C","%FD":"%D1%8D","%FE":"%D1%8E","%FF":"%D1%8F"};t.extend({decodeURI:function(t){return n(decodeURI,t)},decodeURIComponent:function(t){return n(decodeURIComponent,t)}})}(jQuery),function(t){function e(t){return t.replace(/%[0-9a-f]{2}/gi,function(t){return i[t]||t})}function n(t,n){var i=n;try{i=t(n)}catch(s){try{i=t(e(n))}catch(s){}}return i}var i={"%D0":"%D0%A0","%C0":"%D0%90","%C1":"%D0%91","%C2":"%D0%92","%C3":"%D0%93","%C4":"%D0%94","%C5":"%D0%95","%A8":"%D0%81","%C6":"%D0%96","%C7":"%D0%97","%C8":"%D0%98","%C9":"%D0%99","%CA":"%D0%9A","%CB":"%D0%9B","%CC":"%D0%9C","%CD":"%D0%9D","%CE":"%D0%9E","%CF":"%D0%9F","%D1":"%D0%A1","%D2":"%D0%A2","%D3":"%D0%A3","%D4":"%D0%A4","%D5":"%D0%A5","%D6":"%D0%A6","%D7":"%D0%A7","%D8":"%D0%A8","%D9":"%D0%A9","%DA":"%D0%AA","%DB":"%D0%AB","%DC":"%D0%AC","%DD":"%D0%AD","%DE":"%D0%AE","%DF":"%D0%AF","%E0":"%D0%B0","%E1":"%D0%B1","%E2":"%D0%B2","%E3":"%D0%B3","%E4":"%D0%B4","%E5":"%D0%B5","%B8":"%D1%91","%E6":"%D0%B6","%E7":"%D0%B7","%E8":"%D0%B8","%E9":"%D0%B9","%EA":"%D0%BA","%EB":"%D0%BB","%EC":"%D0%BC","%ED":"%D0%BD","%EE":"%D0%BE","%EF":"%D0%BF","%F0":"%D1%80","%F1":"%D1%81","%F2":"%D1%82","%F3":"%D1%83","%F4":"%D1%84","%F5":"%D1%85","%F6":"%D1%86","%F7":"%D1%87","%F8":"%D1%88","%F9":"%D1%89","%FA":"%D1%8A","%FB":"%D1%8B","%FC":"%D1%8C","%FD":"%D1%8D","%FE":"%D1%8E","%FF":"%D1%8F"};t.extend({decodeURI:function(t){return n(decodeURI,t)},decodeURIComponent:function(t){return n(decodeURIComponent,t)}})}(jQuery),function(t,e,n){function i(t,n){var i=t[0];e.each(a(i),function(o,a){r(a,i,o,n);var c=f[a.uniqId];c?c.domElem.index(i)<0&&(c.domElem=c.domElem.add(t),e.extend(c._params,a)):s(o,t,a)})}function s(t,i,s,o,c){"boolean"==typeof s&&(c=o,o=s,s=n);var u=i[0];s=r(s||a(u)[t],u,t);var l=s.uniqId;if(f[l])return f[l]._init();p[l]=p[l]?p[l].add(i):i;var h=u.parentNode;h&&11!==h.nodeType||e.unique(p[l]);var d=b[t]||B.decl(t,{},{live:!0});if(!(d._liveInitable=!!d._processLive())||o||s.live===!1){o&&i.addClass("i-bem");var m=new d(p[l],s,!!o);return delete p[l],c&&c.apply(m,w.call(arguments,4)),m}}function r(t,n,i,s){(t||(t={})).uniqId||(t.uniqId=(t.id?i+"-id-"+t.id:e.identify())+(s||e.identify()));var r=e.identify(n),o=m[r]||(m[r]={});return o[i]||(o[i]=t),t}function o(t,e,n){var i=t.find(e);return n?i:i.add(t.filter(e))}function a(t){var n=e.identify(t);return m[n]||(m[n]=c(t))}function c(t){var n,i,s=t.getAttribute("data-bem");return s?JSON.parse(s):(n=t.onclick||t.ondblclick,n||"body"!=t.tagName.toLowerCase()||(i=e(t),s=i.attr("onclick")||i.attr("ondblclick"),s&&(n=Function(s))),n?n():{})}function u(t){delete m[e.identify(t)]}function l(t,e){1===t.domElem.length?t.destruct(!0):t.domElem=t.domElem.not(e)}var h=e(window),d=e(document),p={},f={},m={},_={},g={},b=t.blocks,v=t.INTERNAL,y=v.NAME_PATTERN,k=v.MOD_DELIM,M=v.ELEM_DELIM,x=v.buildClass,w=Array.prototype.slice,E=Array.prototype.reverse;e.fn.bem=function(t,e){return s(t,this,e,!0)};var B=t.DOM=t.decl("i-bem__dom",{__constructor:function(t,n,i){var s=this;s.domElem=t,s._eventNameCache={},s._elemCache={},f[s._uniqId=n.uniqId||e.identify(s)]=s,s._needSpecialUnbind=!1,s.__base(null,n,i)},findBlocksInside:function(t,e){return this._findBlocks("find",t,e)},findBlockInside:function(t,e){return this._findBlocks("find",t,e,!0)},findBlocksOutside:function(t,e){return this._findBlocks("parents",t,e)},findBlockOutside:function(t,e){return this._findBlocks("closest",t,e)[0]||null},findBlocksOn:function(t,e){return this._findBlocks("",t,e)},findBlockOn:function(t,e){return this._findBlocks("",t,e,!0)},_findBlocks:function(t,i,r,o){if(!this.domElem)return[];r||(r=i,i=n);var a=i?"string"==typeof i?this.findElem(i):i:this.domElem,c="string"==typeof r,u=c?r:r.block||r.blockName,l="."+(c?x(u):x(u,r.modName,r.modVal))+(o?":first":""),h=a.filter(l);if(t&&(h=h.add(a[t](l))),o)return h[0]?s(u,h.eq(0),!0):null;var d=[],p={};return e.each(h,function(t,n){var i=s(u,e(n),!0);p[i._uniqId]||(p[i._uniqId]=!0,d.push(i))}),d},bindToDomElem:function(t,n,i){var s=this;return i?t.bind(s._buildEventName(n),function(t){return(t.data||(t.data={})).domElem=e(this),i.apply(s,arguments)}):e.each(n,function(e,n){s.bindToDomElem(t,e,n)}),s},bindToDoc:function(t,e){return this._needSpecialUnbind=!0,this.bindToDomElem(d,t,e)},bindToWin:function(t,e){var n,i,s=e;return"resize"===t&&(e=function(){var t=h.height(),e=h.width();(n!==t||i!==e)&&(n=t,i=e,s.apply(this,arguments))}),this._needSpecialUnbind=!0,this.bindToDomElem(h,t,e)},bindTo:function(t,n,i){return!n||e.isFunction(n)?(i=n,n=t,t=this.domElem):"string"==typeof t&&(t=this.elem(t)),this.bindToDomElem(t,n,i)},unbindFromDomElem:function(t,e){return t.unbind(this._buildEventName(e)),this},unbindFromDoc:function(t){return this.unbindFromDomElem(d,t)},unbindFromWin:function(t){return this.unbindFromDomElem(h,t)},unbindFrom:function(t,e){return e?"string"==typeof t&&(t=this.elem(t)):(e=t,t=this.domElem),this.unbindFromDomElem(t,e)},_buildEventName:function(t){var e=this;return t.indexOf(" ")>1?t.split(" ").map(function(t){return e._buildOneEventName(t)}).join(" "):e._buildOneEventName(t)},_buildOneEventName:function(t){var e=this,n=e._eventNameCache;if(t in n)return n[t];var i="."+e._uniqId;if(t.indexOf(".")<0)return n[t]=t+i;var s=".bem_"+e.__self._name;return n[t]=t.split(".").map(function(t,e){return 0==e?t+s:s+"_"+t}).join("")+i},trigger:function(t,e){return this.__base(t=this.buildEvent(t),e).domElem&&this._ctxTrigger(t,e),this},_ctxTrigger:function(t,n){var i=this,s=_[i.__self._buildCtxEventName(t.type)],r={};s&&i.domElem.each(function(){for(var o=this,a=s.counter;o&&a;){var c=e.identify(o,!0);if(c){if(r[c])break;var u=s.ctxs[c];u&&(e.each(u,function(e,s){s.fn.call(s.ctx||i,t,n)}),a--),r[c]=!0}o=o.parentNode}})},setMod:function(t,n,i){if(t&&"undefined"!=typeof i&&t.length>1){var s=this;return t.each(function(){var r=e(this);r.__bemElemName=t.__bemElemName,s.setMod(r,n,i)}),s}return this.__base(t,n,i)},_extractModVal:function(t,e,n){var i,s=(e||this.domElem)[0];return s&&(i=s.className.match(this.__self._buildModValRE(t,n||e))),i?i[2]:""},_extractMods:function(t,e){var n={},i=!t.length,s=0;return((e||this.domElem)[0].className.match(this.__self._buildModValRE("("+(i?y:t.join("|"))+")",e,"g"))||[]).forEach(function(t){var e=(t=t.trim()).lastIndexOf(k),i=t.substr(0,e-1).lastIndexOf(k);n[t.substr(i+1,e-i-1)]=t.substr(e+1),++s}),s<t.length&&t.forEach(function(t){t in n||(n[t]="")}),n},_afterSetMod:function(t,n,i,s,r){if(!this._isDestructing){var o=this.__self,a=o._buildModClassPrefix(t,r),c=o._buildModValRE(t,r),u=""===n;(s||this.domElem).each(function(){var t=this.className;t.indexOf(a)>-1?this.className=t.replace(c,u?"":"$1"+a+n):u||e(this).addClass(a+n)}),r&&this.dropElemCache(r,t,i).dropElemCache(r,t,n)}},findElem:function(t,e,n,i){arguments.length%2?(i=n,n=e,e=t,t=this.domElem):"string"==typeof t&&(t=this.findElem(t)),e=e.split(" ");var s=this.__self.getName(),r=e.map(function(t){return x(s,t,n,i)}),a=1===r.length,c="."+(a?r[0]:r.join(",.")),u=o(t,c);return 1===t.length&&this.domElem&&1===this.domElem.length&&t[0]===this.domElem[0]&&r.forEach(function(t,n){(this._elemCache[t]=a?u:u.filter("."+t)).__bemElemName=e[n]},this),u},_elem:function(t,e,n){return this._elemCache[x(this.__self.getName(),t,e,n)]||this.findElem(t,e,n)},elem:function(t,n,i){if(n&&"string"!=typeof n)return n.__bemElemName=t,n;if(t.indexOf(" ")<0)return this._elem(t,n,i);var s=e([]),r=this;return t.split(" ").forEach(function(t){s=s.add(r._elem(t,n,i))}),s},dropElemCache:function(t,e,n){if(t){var i=this.__self.getName();t.split(" ").forEach(function(t){delete this._elemCache[x(i,t,e,n)]},this)}else this._elemCache={};return this},elemParams:function(t){var e;return"string"==typeof t?(e=t,t=this.elem(t)):e=this.__self._extractElemNameFrom(t),c(t[0])[x(this.__self.getName(),e)]||{}},elemify:function(t,n){return(t=e(t)).__bemElemName=n,t},containsDomElem:function(t){var e=!1;return this.domElem.each(function(){return!(e=t.parents().andSelf().index(this)>-1)}),e},buildSelector:function(t,e,n){return this.__self.buildSelector(t,e,n)},destruct:function(t){var n=this,i=n.__self;n._isDestructing||(n._isDestructing=!0,n._needSpecialUnbind&&i.doc.add(i.win).unbind("."+n._uniqId),n.dropElemCache().domElem.each(function(t,n){var i=a(n);e.each(i,function(t,e){var i=f[e.uniqId];i?i._isDestructing||l(i,n):delete p[e.uniqId]}),u(n)}),t||n.domElem.remove(),delete f[n.un()._uniqId],delete n.domElem,delete n._elemCache,n.__base())}},{scope:null,doc:d,win:h,_processLive:function(t){var e=this,n=e._liveInitable;if("live"in e){var i="undefined"==typeof n;if(i^t){n=e.live()!==!1;var s=e.getName(),r=e.live;e.live=function(){return this.getName()===s?n:r.apply(this,arguments)}}}return n},init:function(t,n,s){(!t||e.isFunction(t))&&(s=n,n=t,t=d);var r=e.identify();return o(t,".i-bem").each(function(){i(e(this),r)}),n&&this.afterCurrentEvent(function(){n.call(s||this,t)}),this._runAfterCurrentEventFns(),t},destruct:function(t,i,s){"boolean"!=typeof t&&(s=i,i=t,t=n),E.call(o(i,".i-bem",s)).each(function(t,n){var i=a(this);e.each(i,function(t,e){if(e.uniqId){var i=f[e.uniqId];i?l(i,n):delete p[e.uniqId]}}),u(this)}),t||(s?i.empty():i.remove())},update:function(t,e,n,i){return this.destruct(t,!0),this.init(t.html(e),n,i)},replace:function(t,n){return this.destruct(!0,t),this.init(e(n).replaceAll(t))},append:function(t,n){return this.init(e(n).appendTo(t))},prepend:function(t,n){return this.init(e(n).prependTo(t))},before:function(t,n){return this.init(e(n).insertBefore(t))},after:function(t,n){return this.init(e(n).insertAfter(t))},_buildCtxEventName:function(t){return this._name+":"+t},_liveClassBind:function(t,n,i,s){var r=this;if(n.indexOf(" ")>-1)n.split(" ").forEach(function(e){r._liveClassBind(t,e,i,s)});else{var o=g[n],a=e.identify(i);o||(o=g[n]={},d.bind(n,r.changeThis(r._liveClassTrigger,r))),o=o[t]||(o[t]={uniqIds:{},fns:[]}),a in o.uniqIds||(o.fns.push({uniqId:a,fn:r._buildLiveEventFn(i,s)}),o.uniqIds[a]=o.fns.length-1)}return this},_liveClassUnbind:function(t,n,i){var s=g[n];if(s)if(i){if(s=s[t]){var r=e.identify(i);if(r in s.uniqIds){var o=s.uniqIds[r],a=s.fns.length-1;for(s.fns.splice(o,1);a>o;)s.uniqIds[s.fns[o++].uniqId]=o-1;delete s.uniqIds[r]}}}else delete s[t];return this},_liveClassTrigger:function(t){var n=g[t.type];if(n){var i=t.target,s=[];for(var r in n)n.hasOwnProperty(r)&&s.push(r);do for(var o=" "+i.className+" ",a=0;r=s[a++];)if(o.indexOf(" "+r+" ")>-1){for(var c,u=0,l=n[r].fns,h=!1;c=l[u++];)c.fn.call(e(i),t)===!1&&(h=!0);if(h&&t.preventDefault(),h||t.isPropagationStopped())return;s.splice(--a,1)}while(s.length&&(i=i.parentNode))}},_buildLiveEventFn:function(t,n){var i=this;return function(r){var o=[i._name,((r.data||(r.data={})).domElem=e(this)).closest(i.buildSelector()),!0],a=s.apply(null,n?o.concat([t,r]):o);return a&&!n&&t?t.apply(a,arguments):void 0}},liveInitOnEvent:function(t,e,n){return this.liveBindTo(t,e,n,!0)},liveBindTo:function(t,i,s,r){(!i||e.isFunction(i))&&(s=i,i=t,t=n),t&&"string"!=typeof t||(t={elem:t}),t.elemName&&(t.elem=t.elemName);var o=this;return t.elem&&t.elem.indexOf(" ")>0?(t.elem.split(" ").forEach(function(e){o._liveClassBind(x(o._name,e,t.modName,t.modVal),i,s,r)}),o):o._liveClassBind(x(o._name,t.elem,t.modName,t.modVal),i,s,r)},liveUnbindFrom:function(t,i,s){(!i||e.isFunction(i))&&(s=i,i=t,t=n);var r=this;return t&&t.indexOf(" ")>1?(t.split(" ").forEach(function(t){r._liveClassUnbind(x(r._name,t),i,s)}),r):r._liveClassUnbind(x(r._name,t),i,s)},_liveInitOnBlockEvent:function(t,e,n,i){var s=this._name;return b[e].on(t,function(t){if(t.block.domElem){var e=arguments,r=t.block[i](s);n&&r.forEach(function(t){n.apply(t,e)})}}),this},liveInitOnBlockEvent:function(t,e,n){return this._liveInitOnBlockEvent(t,e,n,"findBlocksOn")},liveInitOnBlockInsideEvent:function(t,e,n){return this._liveInitOnBlockEvent(t,e,n,"findBlocksOutside")},liveInitOnBlockInit:function(t,e){return this.liveInitOnBlockEvent("init",t,e)},liveInitOnBlockInsideInit:function(t,e){return this.liveInitOnBlockInsideEvent("init",t,e)},on:function(t,e,n,i,s){return t.jquery?this._liveCtxBind(t,e,n,i,s):this.__base(t,e,n,i)},un:function(t,e,n,i){return t.jquery?this._liveCtxUnbind(t,e,n,i):this.__base(t,e,n)},liveCtxBind:function(t,e,n,i,s){return this._liveCtxBind(t,e,n,i,s)},_liveCtxBind:function(t,i,s,r,o){var a=this;if("string"==typeof i)if(e.isFunction(s)&&(o=r,r=s,s=n),i.indexOf(" ")>-1)i.split(" ").forEach(function(e){a._liveCtxBind(t,e,s,r,o)});else{var c=a._buildCtxEventName(i),u=_[c]||(_[c]={counter:0,ctxs:{}});t.each(function(){var t=e.identify(this),n=u.ctxs[t];n||(n=u.ctxs[t]={},++u.counter),n[e.identify(r)+(o?e.identify(o):"")]={fn:r,data:s,ctx:o}})}else e.each(i,function(e,n){a._liveCtxBind(t,e,n,s)});return a},liveCtxUnbind:function(t,e,n,i){return this._liveCtxUnbind(t,e,n,i)},_liveCtxUnbind:function(t,n,i,s){var r=this,o=_[n=r._buildCtxEventName(n)];return o&&(t.each(function(){var t,n=e.identify(this,!0);n&&(t=o.ctxs[n])&&(i&&delete t[e.identify(i)+(s?e.identify(s):"")],(!i||e.isEmptyObject(t))&&(o.counter--,delete o.ctxs[n]))}),o.counter||delete _[n]),r},_extractElemNameFrom:function(t){if(t.__bemElemName)return t.__bemElemName;var e=t[0].className.match(this._buildElemNameRE());return e?e[1]:n},extractParams:c,_buildModClassPrefix:function(t,e){return x(this._name)+(e?M+("string"==typeof e?e:this._extractElemNameFrom(e)):"")+k+t+k},_buildModValRE:function(t,e,n){return new RegExp("(\\s|^)"+this._buildModClassPrefix(t,e)+"("+y+")(?=\\s|$)",n)},_buildElemNameRE:function(){return new RegExp(this._name+M+"("+y+")(?:\\s|$)")},buildSelector:function(t,e,n){return"."+x(this._name,t,e,n)},getBlockByUniqId:function(t){return f[t]},getWindowSize:function(){return{width:h.width(),height:h.height()}}});e(function(){t.DOM.scope=e("body")})}(BEM,jQuery),BEM.decl("i-bem__dom",{bindToWin:function(t,e){var n,i,s,r=e;return"resize"===t&&(s=this.__self.win,e=function(){var t=s.height(),e=s.width();(n!==t||i!==e)&&(n=t,i=e,r.apply(this,arguments))}),this.__base.apply(this,arguments)}}),function(){String.prototype.trim||(String.prototype.trim=function(){for(var t=this.replace(/^\s\s*/,""),e=/\s/,n=t.length;e.test(t.charAt(--n)););return t.slice(0,n+1)})}(),function(){function t(t,e){if(t!==e){var n=null===t,i=t===li,s=t===t,r=null===e,o=e===li,a=e===e;if(t>e&&!r||!s||n&&!o&&a||i&&a)return 1;if(e>t&&!n||!a||r&&!i&&s||o&&s)return-1}return 0}function e(t,e,n){for(var i=t.length,s=n?i:-1;n?s--:++s<i;)if(e(t[s],s,t))return s;return-1}function n(t,e,n){if(e!==e)return u(t,n);for(var i=n-1,s=t.length;++i<s;)if(t[i]===e)return i;return-1}function i(t){return"function"==typeof t||!1}function s(t){return"string"==typeof t?t:null==t?"":t+""}function r(t,e){for(var n=-1,i=t.length;++n<i&&e.indexOf(t.charAt(n))>-1;);return n}function o(t,e){for(var n=t.length;n--&&e.indexOf(t.charAt(n))>-1;);return n}function a(e,n){return t(e.criteria,n.criteria)||e.index-n.index}function c(t){return _s[t]}function u(t,e,n){for(var i=t.length,s=e+(n?0:-1);n?s--:++s<i;){var r=t[s];if(r!==r)return s}return-1}function l(t){return!!t&&"object"==typeof t}function h(t){return 160>=t&&t>=9&&13>=t||32==t||160==t||5760==t||6158==t||t>=8192&&(8202>=t||8232==t||8233==t||8239==t||8287==t||12288==t||65279==t)}function d(t,e){for(var n=-1,i=t.length,s=-1,r=[];++n<i;)t[n]===e&&(t[n]=Ii,r[++s]=n);return r}function p(t,e){for(var n,i=-1,s=t.length,r=-1,o=[];++i<s;){var a=t[i],c=e?e(a,i,t):a;i&&n===c||(n=c,o[++r]=a)}return o}function f(t){for(var e=-1,n=t.length;++e<n&&h(t.charCodeAt(e)););return e}function m(t){for(var e=t.length;e--&&h(t.charCodeAt(e)););return e}function _(t){return gs[t]}function g(t){if(l(t)&&!Dr(t)&&!(t instanceof y)){if(t instanceof v)return t;if(Ts.call(t,"__chain__")&&Ts.call(t,"__wrapped__"))return on(t)}return new v(t)}function b(){}function v(t,e,n){this.__wrapped__=t,this.__actions__=n||[],this.__chain__=!!e}function y(t){this.__wrapped__=t,this.__actions__=null,this.__dir__=1,this.__dropCount__=0,this.__filtered__=!1,this.__iteratees__=null,this.__takeCount__=er,this.__views__=null}function k(){var t=this.__actions__,e=this.__iteratees__,n=this.__views__,i=new y(this.__wrapped__);return i.__actions__=t?T(t):null,i.__dir__=this.__dir__,i.__filtered__=this.__filtered__,i.__iteratees__=e?T(e):null,i.__takeCount__=this.__takeCount__,i.__views__=n?T(n):null,i}function M(){if(this.__filtered__){var t=new y(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}function x(){var t=this.__wrapped__.value();if(!Dr(t))return _e(t,this.__actions__);var e=this.__dir__,n=0>e,i=ze(0,t.length,this.__views__),s=i.start,r=i.end,o=r-s,a=n?r:s-1,c=Js(o,this.__takeCount__),u=this.__iteratees__,l=u?u.length:0,h=0,d=[];t:for(;o--&&c>h;){a+=e;for(var p=-1,f=t[a];++p<l;){var m=u[p],_=m.iteratee,g=m.type;if(g==wi){if(m.done&&(n?a>m.index:a<m.index)&&(m.count=0,m.done=!1),m.index=a,!m.done){var b=m.limit;if(!(m.done=b>-1?m.count++>=b:!_(f)))continue t}}else{var v=_(f);if(g==Bi)f=v;else if(!v){if(g==Ei)continue t;break t}}}d[h++]=f}return d}function w(){this.__data__={}}function E(t){return this.has(t)&&delete this.__data__[t]}function B(t){return"__proto__"==t?li:this.__data__[t]}function S(t){return"__proto__"!=t&&Ts.call(this.__data__,t)}function I(t,e){return"__proto__"!=t&&(this.__data__[t]=e),this}function C(t){var e=t?t.length:0;for(this.data={hash:Ks(null),set:new qs};e--;)this.push(t[e])}function D(t,e){var n=t.data,i="string"==typeof e||$n(e)?n.set.has(e):n.hash[e];return i?0:-1}function P(t){var e=this.data;"string"==typeof t||$n(t)?e.set.add(t):e.hash[t]=!0}function T(t,e){var n=-1,i=t.length;for(e||(e=Array(i));++n<i;)e[n]=t[n];return e}function O(t,e){for(var n=-1,i=t.length;++n<i&&e(t[n],n,t)!==!1;);return t}function $(t,e){for(var n=-1,i=t.length;++n<i;)if(!e(t[n],n,t))return!1;return!0}function N(t,e){for(var n=-1,i=t.length,s=-1,r=[];++n<i;){var o=t[n];e(o,n,t)&&(r[++s]=o)}return r}function j(t,e){for(var n=-1,i=t.length,s=Array(i);++n<i;)s[n]=e(t[n],n,t);return s}function F(t,e,n,i){var s=-1,r=t.length;for(i&&r&&(n=t[++s]);++s<r;)n=e(n,t[s],s,t);return n}function L(t,e){for(var n=-1,i=t.length;++n<i;)if(e(t[n],n,t))return!0;return!1}function R(t,e){return t===li?e:t}function A(t,e,n){for(var i=-1,s=Fr(e),r=s.length;++i<r;){var o=s[i],a=t[o],c=n(a,e[o],o,t,e);(c===c?c===a:a!==a)&&(a!==li||o in t)||(t[o]=c)}return t}function z(t,e){return null==e?t:q(e,Fr(e),t)}function q(t,e,n){n||(n={});for(var i=-1,s=e.length;++i<s;){var r=e[i];n[r]=t[r]}return n}function U(t,e,n){var i=typeof t;return"function"==i?e===li?t:ve(t,e,n):null==t?ii:"object"==i?re(t):e===li?ai(t):oe(t,e)}function H(t,e,n,i,s,r,o){var a;if(n&&(a=s?n(t,i,s):n(t)),a!==li)return a;if(!$n(t))return t;var c=Dr(t);if(c){if(a=qe(t),!e)return T(t,a)}else{var u=Os.call(t),l=u==$i;if(u!=Fi&&u!=Ci&&(!l||s))return ms[u]?He(t,u,e):s?t:{};if(Bs(t))return s?t:{};if(a=Ue(l?{}:t),!e)return z(a,t)}r||(r=[]),o||(o=[]);for(var h=r.length;h--;)if(r[h]==t)return o[h];return r.push(t),o.push(a),(c?O:X)(t,function(i,s){a[s]=H(i,e,n,s,t,r,o)}),a}function V(t,e){var i=t?t.length:0,s=[];if(!i)return s;var r=-1,o=Le(),a=o==n,c=a&&e.length>=200?br(e):null,u=e.length;c&&(o=D,a=!1,e=c);t:for(;++r<i;){var l=t[r];if(a&&l===l){for(var h=u;h--;)if(e[h]===l)continue t;s.push(l)}else o(e,l,0)<0&&s.push(l)}return s}function W(t,e){var n=!0;return pr(t,function(t,i,s){return n=!!e(t,i,s)}),n}function K(t,e){var n=[];return pr(t,function(t,i,s){e(t,i,s)&&n.push(t)}),n}function G(t,e,n,i){var s;return n(t,function(t,n,r){return e(t,n,r)?(s=i?n:t,!1):void 0}),s}function Y(t,e,n){for(var i=-1,s=t.length,r=-1,o=[];++i<s;){var a=t[i];if(l(a)&&Ve(a)&&(n||Dr(a)||Tn(a))){e&&(a=Y(a,e,n));for(var c=-1,u=a.length;++c<u;)o[++r]=a[c]}else n||(o[++r]=a)}return o}function Q(t,e){return mr(t,e,Vn)}function X(t,e){return mr(t,e,Fr)}function J(t,e){return _r(t,e,Fr)}function Z(t,e){for(var n=-1,i=e.length,s=-1,r=[];++n<i;){var o=e[n];Pr(t[o])&&(r[++s]=o)}return r}function te(t,e,n){if(null!=t){t=sn(t),n!==li&&n in t&&(e=[n]);for(var i=0,s=e.length;null!=t&&s>i;)t=sn(t)[e[i++]];return i&&i==s?t:li}}function ee(t,e,n,i,s,r){return t===e?!0:null==t||null==e||!$n(t)&&!l(e)?t!==t&&e!==e:ne(t,e,ee,n,i,s,r)}function ne(t,e,n,i,s,r,o){var a=Dr(t),c=Dr(e),u=Di,l=Di;a||(u=Os.call(t),u==Ci?u=Fi:u!=Fi&&(a=Rn(t))),c||(l=Os.call(e),l==Ci?l=Fi:l!=Fi&&(c=Rn(e)));var h=u==Fi&&!Bs(t),d=l==Fi&&!Bs(e),p=u==l;if(p&&!a&&!h)return $e(t,e,u);if(!s){var f=h&&Ts.call(t,"__wrapped__"),m=d&&Ts.call(e,"__wrapped__");if(f||m)return n(f?t.value():t,m?e.value():e,i,s,r,o)}if(!p)return!1;r||(r=[]),o||(o=[]);for(var _=r.length;_--;)if(r[_]==t)return o[_]==e;r.push(t),o.push(e);var g=(a?Oe:Ne)(t,e,n,i,s,r,o);return r.pop(),o.pop(),g}function ie(t,e,n){var i=e.length,s=i,r=!n;if(null==t)return!s;for(t=sn(t);i--;){var o=e[i];if(r&&o[2]?o[1]!==t[o[0]]:!(o[0]in t))return!1}for(;++i<s;){o=e[i];var a=o[0],c=t[a],u=o[1];if(r&&o[2]){if(c===li&&!(a in t))return!1}else{var l=n?n(c,u,a):li;if(!(l===li?ee(u,c,n,!0):l))return!1}}return!0}function se(t,e){var n=-1,i=Ve(t)?Array(t.length):[];return pr(t,function(t,s,r){i[++n]=e(t,s,r)}),i}function re(t){var e=Re(t);if(1==e.length&&e[0][2]){var n=e[0][0],i=e[0][1];return function(t){return null==t?!1:(t=sn(t),t[n]===i&&(i!==li||n in t))}}return function(t){return ie(t,e)}}function oe(t,e){var n=Dr(t),i=Ge(t)&&Xe(e),s=t+"";return t=rn(t),function(r){if(null==r)return!1;var o=s;if(r=sn(r),!(!n&&i||o in r)){if(r=1==t.length?r:te(r,de(t,0,-1)),null==r)return!1;o=ln(t),r=sn(r)}return r[o]===e?e!==li||o in r:ee(e,r[o],li,!0)}}function ae(t,e,n,i,s){if(!$n(t))return t;var r=Ve(e)&&(Dr(e)||Rn(e)),o=r?null:Fr(e);return O(o||e,function(a,c){if(o&&(c=a,a=e[c]),l(a))i||(i=[]),s||(s=[]),ce(t,e,c,ae,n,i,s);else{var u=t[c],h=n?n(u,a,c,t,e):li,d=h===li;d&&(h=a),h===li&&(!r||c in t)||!d&&(h===h?h===u:u!==u)||(t[c]=h)}}),t}function ce(t,e,n,i,s,r,o){for(var a=r.length,c=e[n];a--;)if(r[a]==c)return void(t[n]=o[a]);var u=t[n],l=s?s(u,c,n,t,e):li,h=l===li;h&&(l=c,Ve(c)&&(Dr(c)||Rn(c))?l=Dr(u)?u:Ve(u)?T(u):[]:Tr(c)||Tn(c)?l=Tn(u)?zn(u):Tr(u)?u:{}:h=!1),r.push(c),o.push(l),h?t[n]=i(l,c,s,r,o):(l===l?l!==u:u===u)&&(t[n]=l)}function ue(t){return function(e){return null==e?li:sn(e)[t]}}function le(t){var e=t+"";return t=rn(t),function(n){return te(n,t,e)}}function he(t,e,n,i,s){return s(t,function(t,s,r){n=i?(i=!1,t):e(n,t,s,r)}),n}function de(t,e,n){var i=-1,s=t.length;e=null==e?0:+e||0,0>e&&(e=-e>s?0:s+e),n=n===li||n>s?s:+n||0,0>n&&(n+=s),s=e>n?0:n-e>>>0,e>>>=0;for(var r=Array(s);++i<s;)r[i]=t[i+e];return r}function pe(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}function fe(t,e){var i=-1,s=Le(),r=t.length,o=s==n,a=o&&r>=200,c=a?br():null,u=[];c?(s=D,o=!1):(a=!1,c=e?[]:u);t:for(;++i<r;){var l=t[i],h=e?e(l,i,t):l;if(o&&l===l){for(var d=c.length;d--;)if(c[d]===h)continue t;e&&c.push(h),u.push(l)}else s(c,h,0)<0&&((e||a)&&c.push(h),u.push(l))}return u}function me(t,e){for(var n=-1,i=e.length,s=Array(i);++n<i;)s[n]=t[e[n]];return s}function _e(t,e){var n=t;n instanceof y&&(n=n.value());for(var i=-1,s=e.length;++i<s;){var r=[n],o=e[i];As.apply(r,o.args),n=o.func.apply(o.thisArg,r)}return n}function ge(t,e,n){var i=0,s=t?t.length:i;if("number"==typeof e&&e===e&&sr>=s){for(;s>i;){var r=i+s>>>1,o=t[r];(n?e>=o:e>o)&&null!==o?i=r+1:s=r}return s}return be(t,e,ii,n)}function be(t,e,n,i){e=n(e);for(var s=0,r=t?t.length:0,o=e!==e,a=null===e,c=e===li;r>s;){var u=Ls((s+r)/2),l=n(t[u]),h=l!==li,d=l===l;if(o)var p=d||i;else p=a?d&&h&&(i||null!=l):c?d&&(i||h):null==l?!1:i?e>=l:e>l;p?s=u+1:r=u}return Js(r,ir)}function ve(t,e,n){if("function"!=typeof t)return ii;if(e===li)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 3:return function(n,i,s){return t.call(e,n,i,s)};case 4:return function(n,i,s,r){return t.call(e,n,i,s,r)};case 5:return function(n,i,s,r,o){return t.call(e,n,i,s,r,o)}}return function(){return t.apply(e,arguments)}}function ye(t){return js.call(t,0)}function ke(t,e,n){for(var i=n.length,s=-1,r=Xs(t.length-i,0),o=-1,a=e.length,c=Array(r+a);++o<a;)c[o]=e[o];for(;++s<i;)c[n[s]]=t[s];for(;r--;)c[o++]=t[s++];return c}function Me(t,e,n){for(var i=-1,s=n.length,r=-1,o=Xs(t.length-s,0),a=-1,c=e.length,u=Array(o+c);++r<o;)u[r]=t[r];for(var l=r;++a<c;)u[l+a]=e[a];for(;++i<s;)u[l+n[i]]=t[r++];return u}function xe(t){return Cn(function(e,n){var i=-1,s=null==e?0:n.length,r=s>2?n[s-2]:li,o=s>2?n[2]:li,a=s>1?n[s-1]:li;for("function"==typeof r?(r=ve(r,a,5),s-=2):(r="function"==typeof a?a:li,s-=r?1:0),o&&Ke(n[0],n[1],o)&&(r=3>s?li:r,s=1);++i<s;){var c=n[i];c&&t(e,c,r)}return e})}function we(t,e){return function(n,i){var s=n?yr(n):0;if(!Qe(s))return t(n,i);for(var r=e?s:-1,o=sn(n);(e?r--:++r<s)&&i(o[r],r,o)!==!1;);return n}}function Ee(t){return function(e,n,i){for(var s=sn(e),r=i(e),o=r.length,a=t?o:-1;t?a--:++a<o;){var c=r[a];
if(n(s[c],c,s)===!1)break}return e}}function Be(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4])}var n=dr(t.prototype),i=t.apply(n,e);return $n(i)?i:n}}function Se(t,n){return function(i,s,r){if(s=je(s,r,3),Dr(i)){var o=e(i,s,n);return o>-1?i[o]:li}return G(i,s,t)}}function Ie(t){return function(e,n,i){return n=je(n,i,3),G(e,n,t,!0)}}function Ce(t,e){return function(n,i,s){return"function"==typeof i&&s===li&&Dr(n)?t(n,i):e(n,ve(i,s,3))}}function De(t){return function(e,n,i){return("function"!=typeof n||i!==li)&&(n=ve(n,i,3)),t(e,n)}}function Pe(t,e){return function(n,i,s,r){var o=arguments.length<3;return"function"==typeof i&&r===li&&Dr(n)?t(n,i,s,o):he(n,je(i,r,4),s,o,e)}}function Te(t,e,n,i,s,r,o,a,c,u){function l(){for(var v=arguments.length,y=v,k=Array(v);y--;)k[y]=arguments[y];if(i&&(k=ke(k,i,s)),r&&(k=Me(k,r,o)),m||g){var M=l.placeholder,x=d(k,M);if(v-=x.length,u>v){var w=a?T(a):null,E=Xs(u-v,0),B=m?x:null,S=m?null:x,I=m?k:null,C=m?null:k;e|=m?gi:bi,e&=~(m?bi:gi),_||(e&=~(di|pi));var D=[t,e,n,I,B,C,S,w,c,E],P=Te.apply(li,D);return Ye(t)&&kr(P,D),P.placeholder=M,P}}var O=p?n:this,$=f?O[t]:t;return a&&(k=tn(k,a)),h&&c<k.length&&(k.length=c),this&&this!==Es&&this instanceof l&&($=b||Be(t)),$.apply(O,k)}var h=e&vi,p=e&di,f=e&pi,m=e&mi,_=e&fi,g=e&_i,b=f?null:Be(t);return l}function Oe(t,e,n,i,s,r,o){var a=-1,c=t.length,u=e.length;if(c!=u&&!(s&&u>c))return!1;for(;++a<c;){var l=t[a],h=e[a],d=i?i(s?h:l,s?l:h,a):li;if(d!==li){if(d)continue;return!1}if(s){if(!L(e,function(t){return l===t||n(l,t,i,s,r,o)}))return!1}else if(l!==h&&!n(l,h,i,s,r,o))return!1}return!0}function $e(t,e,n){switch(n){case Pi:case Ti:return+t==+e;case Oi:return t.name==e.name&&t.message==e.message;case ji:return t!=+t?e!=+e:t==+e;case Li:case Ai:return t==e+""}return!1}function Ne(t,e,n,i,s,r,o){var a=Fr(t),c=a.length,u=Fr(e),l=u.length;if(c!=l&&!s)return!1;for(var h=c;h--;){var d=a[h];if(!(s?d in e:Ts.call(e,d)))return!1}for(var p=s;++h<c;){d=a[h];var f=t[d],m=e[d],_=i?i(s?m:f,s?f:m,d):li;if(!(_===li?n(f,m,i,s,r,o):_))return!1;p||(p="constructor"==d)}if(!p){var g=t.constructor,b=e.constructor;if(g!=b&&"constructor"in t&&"constructor"in e&&!("function"==typeof g&&g instanceof g&&"function"==typeof b&&b instanceof b))return!1}return!0}function je(t,e,n){var i=g.callback||ei;return i=i===ei?U:i,n?i(t,e,n):i}function Fe(t){for(var e=t.name,n=cr[e],i=n?n.length:0;i--;){var s=n[i],r=s.func;if(null==r||r==t)return s.name}return e}function Le(t,e,i){var s=g.indexOf||un;return s=s===un?n:s,t?s(t,e,i):s}function Re(t){for(var e=Wn(t),n=e.length;n--;)e[n][2]=Xe(e[n][1]);return e}function Ae(t,e){var n=null==t?li:t[e];return Nn(n)?n:li}function ze(t,e,n){for(var i=-1,s=n?n.length:0;++i<s;){var r=n[i],o=r.size;switch(r.type){case"drop":t+=o;break;case"dropRight":e-=o;break;case"take":e=Js(e,t+o);break;case"takeRight":t=Xs(t,e-o)}}return{start:t,end:e}}function qe(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&Ts.call(t,"index")&&(n.index=t.index,n.input=t.input),n}function Ue(t){var e=t.constructor;return"function"==typeof e&&e instanceof e||(e=Object),new e}function He(t,e,n){var i=t.constructor;switch(e){case qi:return ye(t);case Pi:case Ti:return new i(+t);case Ui:case Hi:case Vi:case Wi:case Ki:case Gi:case Yi:case Qi:case Xi:i instanceof i&&(i=ur[e]);var s=t.buffer;return new i(n?ye(s):s,t.byteOffset,t.length);case ji:case Ai:return new i(t);case Li:var r=new i(t.source,cs.exec(t));r.lastIndex=t.lastIndex}return r}function Ve(t){return null!=t&&Qe(yr(t))}function We(t,e){return t="number"==typeof t||hs.test(t)?+t:-1,e=null==e?or:e,t>-1&&t%1==0&&e>t}function Ke(t,e,n){if(!$n(n))return!1;var i=typeof e;if("number"==i?Ve(n)&&We(e,n.length):"string"==i&&e in n){var s=n[e];return t===t?t===s:s!==s}return!1}function Ge(t,e){var n=typeof t;if("string"==n&&is.test(t)||"number"==n)return!0;if(Dr(t))return!1;var i=!ns.test(t);return i||null!=e&&t in sn(e)}function Ye(t){var e=Fe(t);if(!(e in y.prototype))return!1;var n=g[e];if(t===n)return!0;var i=vr(n);return!!i&&t===i[0]}function Qe(t){return"number"==typeof t&&t>-1&&t%1==0&&or>=t}function Xe(t){return t===t&&!$n(t)}function Je(t,e){t=sn(t);for(var n=-1,i=e.length,s={};++n<i;){var r=e[n];r in t&&(s[r]=t[r])}return s}function Ze(t,e){var n={};return Q(t,function(t,i,s){e(t,i,s)&&(n[i]=t)}),n}function tn(t,e){for(var n=t.length,i=Js(e.length,n),s=T(t);i--;){var r=e[i];t[i]=We(r,n)?s[r]:li}return t}function en(t){var e,n=g.support;if(!l(t)||Os.call(t)!=Fi||Bs(t)||!Ts.call(t,"constructor")&&(e=t.constructor,"function"==typeof e&&!(e instanceof e))||!n.argsTag&&Tn(t))return!1;var i;return n.ownLast?(Q(t,function(t,e,n){return i=Ts.call(n,e),!1}),i!==!1):(Q(t,function(t,e){i=e}),i===li||Ts.call(t,i))}function nn(t){for(var e=Vn(t),n=e.length,i=n&&t.length,s=!!i&&Qe(i)&&(Dr(t)||Tn(t)||Ln(t)),r=-1,o=[];++r<n;){var a=e[r];(s&&We(a,i)||Ts.call(t,a))&&o.push(a)}return o}function sn(t){if(g.support.unindexedChars&&Ln(t)){for(var e=-1,n=t.length,i=Object(t);++e<n;)i[e]=t.charAt(e);return i}return $n(t)?t:Object(t)}function rn(t){if(Dr(t))return t;var e=[];return s(t).replace(ss,function(t,n,i,s){e.push(i?s.replace(as,"$1"):n||t)}),e}function on(t){return t instanceof y?t.clone():new v(t.__wrapped__,t.__chain__,T(t.__actions__))}function an(t){for(var e=-1,n=t?t.length:0,i=-1,s=[];++e<n;){var r=t[e];r&&(s[++i]=r)}return s}function cn(t,e,n){var i=t?t.length:0;return n&&Ke(t,e,n)&&(e=!1),i?Y(t,e):[]}function un(t,e,i){var s=t?t.length:0;if(!s)return-1;if("number"==typeof i)i=0>i?Xs(s+i,0):i;else if(i){var r=ge(t,e),o=t[r];return(e===e?e===o:o!==o)?r:-1}return n(t,e,i||0)}function ln(t){var e=t?t.length:0;return e?t[e-1]:li}function hn(t,e,i,s){var r=t?t.length:0;if(!r)return[];null!=e&&"boolean"!=typeof e&&(s=i,i=Ke(t,e,s)?null:e,e=!1);var o=je();return(null!=i||o!==U)&&(i=o(i,s,3)),e&&Le()==n?p(t,i):fe(t,i)}function dn(t){var e=g(t);return e.__chain__=!0,e}function pn(t,e,n){return e.call(n,t),t}function fn(t,e,n){return e.call(n,t)}function mn(){return dn(this)}function _n(){return new v(this.value(),this.__chain__)}function gn(t){for(var e,n=this;n instanceof b;){var i=on(n);e?s.__wrapped__=i:e=i;var s=i;n=n.__wrapped__}return s.__wrapped__=t,e}function bn(){var t=this.__wrapped__;return t instanceof y?(this.__actions__.length&&(t=new y(this)),new v(t.reverse(),this.__chain__)):this.thru(function(t){return t.reverse()})}function vn(){return this.value()+""}function yn(){return _e(this.__wrapped__,this.__actions__)}function kn(t,e,n){var i=Dr(t)?$:W;return n&&Ke(t,e,n)&&(e=null),("function"!=typeof e||n!==li)&&(e=je(e,n,3)),i(t,e)}function Mn(t,e,n){var i=Dr(t)?N:K;return e=je(e,n,3),i(t,e)}function xn(t,e,n,i){var s=t?yr(t):0;return Qe(s)||(t=Gn(t),s=t.length),s?(n="number"!=typeof n||i&&Ke(e,n,i)?0:0>n?Xs(s+n,0):n||0,"string"==typeof t||!Dr(t)&&Ln(t)?s>n&&t.indexOf(e,n)>-1:Le(t,e,n)>-1):!1}function wn(t,e,n){var i=Dr(t)?j:se;return e=je(e,n,3),i(t,e)}function En(t,e){return wn(t,ai(e))}function Bn(t){var e=t?yr(t):0;return Qe(e)?e:Fr(t).length}function Sn(t,e,n){if(null==t)return[];n&&Ke(t,e,n)&&(e=null);var i=-1;e=je(e,n,3);var s=se(t,function(t,n,s){return{criteria:e(t,n,s),index:++i,value:t}});return pe(s,a)}function In(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new TypeError(Si);var n=function(){var i=arguments,s=e?e.apply(this,i):i[0],r=n.cache;if(r.has(s))return r.get(s);var o=t.apply(this,i);return n.cache=r.set(s,o),o};return n.cache=new In.Cache,n}function Cn(t,e){if("function"!=typeof t)throw new TypeError(Si);return e=Xs(e===li?t.length-1:+e||0,0),function(){for(var n=arguments,i=-1,s=Xs(n.length-e,0),r=Array(s);++i<s;)r[i]=n[e+i];switch(e){case 0:return t.call(this,r);case 1:return t.call(this,n[0],r);case 2:return t.call(this,n[0],n[1],r)}var o=Array(e+1);for(i=-1;++i<e;)o[i]=n[i];return o[e]=r,t.apply(this,o)}}function Dn(t,e,n,i){return e&&"boolean"!=typeof e&&Ke(t,e,n)?e=!1:"function"==typeof e&&(i=n,n=e,e=!1),"function"==typeof n?H(t,e,ve(n,i,1)):H(t,e)}function Pn(t,e,n){return"function"==typeof e?H(t,!0,ve(e,n,1)):H(t,!0)}function Tn(t){return l(t)&&Ve(t)&&Os.call(t)==Ci}function On(t){return null==t?!0:Ve(t)&&(Dr(t)||Ln(t)||Tn(t)||l(t)&&Pr(t.splice))?!t.length:!Fr(t).length}function $n(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function Nn(t){return null==t?!1:Os.call(t)==$i?$s.test(Ps.call(t)):l(t)&&(Bs(t)?$s:ls).test(t)}function jn(t){return"number"==typeof t||l(t)&&Os.call(t)==ji}function Fn(t){return $n(t)&&Os.call(t)==Li}function Ln(t){return"string"==typeof t||l(t)&&Os.call(t)==Ai}function Rn(t){return l(t)&&Qe(t.length)&&!!fs[Os.call(t)]}function An(t){return t===li}function zn(t){return q(t,Vn(t))}function qn(t,e,n){var i=null==t?li:te(t,rn(e),e+"");return i===li?n:i}function Un(t,e){if(null==t)return!1;var n=Ts.call(t,e);if(!n&&!Ge(e)){if(e=rn(e),t=1==e.length?t:te(t,de(e,0,-1)),null==t)return!1;e=ln(e),n=Ts.call(t,e)}return n||Qe(t.length)&&We(e,t.length)&&(Dr(t)||Tn(t)||Ln(t))}function Hn(t,e,n){n&&Ke(t,e,n)&&(e=null);for(var i=-1,s=Fr(t),r=s.length,o={};++i<r;){var a=s[i],c=t[a];e?Ts.call(o,c)?o[c].push(a):o[c]=[a]:o[c]=a}return o}function Vn(t){if(null==t)return[];$n(t)||(t=Object(t));var e=t.length,n=g.support;e=e&&Qe(e)&&(Dr(t)||Tn(t)||Ln(t))&&e||0;for(var i=t.constructor,s=-1,r=Pr(i)&&i.prototype||Cs,o=r===t,a=Array(e),c=e>0,u=n.enumErrorProps&&(t===Is||t instanceof Error),l=n.enumPrototypes&&Pr(t);++s<e;)a[s]=s+"";for(var h in t)l&&"prototype"==h||u&&("message"==h||"name"==h)||c&&We(h,e)||"constructor"==h&&(o||!Ts.call(t,h))||a.push(h);if(n.nonEnumShadows&&t!==Cs){var d=t===Ds?Ai:t===Is?Oi:Os.call(t),p=lr[d]||lr[Fi];for(d==Fi&&(r=Cs),e=ps.length;e--;){h=ps[e];var f=p[h];o&&f||(f?!Ts.call(t,h):t[h]===r[h])||a.push(h)}}return a}function Wn(t){t=sn(t);for(var e=-1,n=Fr(t),i=n.length,s=Array(i);++e<i;){var r=n[e];s[e]=[r,t[r]]}return s}function Kn(t,e,n,i){var s=Dr(t)||Rn(t);if(e=je(e,i,4),null==n)if(s||$n(t)){var r=t.constructor;n=s?Dr(t)?new r:[]:dr(Pr(r)?r.prototype:null)}else n={};return(s?O:X)(t,function(t,i,s){return e(n,t,i,s)}),n}function Gn(t){return me(t,Fr(t))}function Yn(t){return t=s(t),t&&es.test(t)?t.replace(Zi,c):t}function Qn(t){return t=s(t),t&&os.test(t)?t.replace(rs,"\\$&"):t}function Xn(t,e,n){return n&&Ke(t,e,n)&&(e=0),tr(t,e)}function Jn(t,e,n){var i=t;return(t=s(t))?(n?Ke(i,e,n):null==e)?t.slice(f(t),m(t)+1):(e+="",t.slice(r(t,e),o(t,e)+1)):t}function Zn(t,e,n){n&&Ke(t,e,n)&&(e=null);var i=yi,r=ki;if(null!=e)if($n(e)){var o="separator"in e?e.separator:o;i="length"in e?+e.length||0:i,r="omission"in e?s(e.omission):r}else i=+e||0;if(t=s(t),i>=t.length)return t;var a=i-r.length;if(1>a)return r;var c=t.slice(0,a);if(null==o)return c+r;if(Fn(o)){if(t.slice(a).search(o)){var u,l,h=t.slice(0,a);for(o.global||(o=RegExp(o.source,(cs.exec(o)||"")+"g")),o.lastIndex=0;u=o.exec(h);)l=u.index;c=c.slice(0,null==l?a:l)}}else if(t.indexOf(o,a)!=a){var d=c.lastIndexOf(o);d>-1&&(c=c.slice(0,d))}return c+r}function ti(t){return t=s(t),t&&ts.test(t)?t.replace(Ji,_):t}function ei(t,e,n){return n&&Ke(t,e,n)&&(e=null),l(t)?si(t):U(t,e)}function ni(t){return function(){return t}}function ii(t){return t}function si(t){return re(H(t,!0))}function ri(t,e,n){if(null==n){var i=$n(e),s=i?Fr(e):null,r=s&&s.length?Z(e,s):null;(r?r.length:i)||(r=!1,n=e,e=t,t=this)}r||(r=Z(e,Fr(e)));var o=!0,a=-1,c=Pr(t),u=r.length;n===!1?o=!1:$n(n)&&"chain"in n&&(o=n.chain);for(;++a<u;){var l=r[a],h=e[l];t[l]=h,c&&(t.prototype[l]=function(e){return function(){var n=this.__chain__;if(o||n){var i=t(this.__wrapped__),s=i.__actions__=T(this.__actions__);return s.push({func:e,args:arguments,thisArg:t}),i.__chain__=n,i}var r=[this.value()];return As.apply(r,arguments),e.apply(t,r)}}(h))}return t}function oi(){}function ai(t){return Ge(t)?ue(t):le(t)}function ci(t,e,n){n&&Ke(t,e,n)&&(e=n=null),t=+t||0,n=null==n?1:+n||0,null==e?(e=t,t=0):e=+e||0;for(var i=-1,s=Xs(Fs((e-t)/(n||1)),0),r=Array(s);++i<s;)r[i]=t,t+=n;return r}function ui(t,e,n){if(t=Ls(t),1>t||!Ys(t))return[];var i=-1,s=Array(Js(t,nr));for(e=ve(e,n,1);++i<t;)nr>i?s[i]=e(i):e(i);return s}var li,hi="3.9.3",di=1,pi=2,fi=4,mi=8,_i=16,gi=32,bi=64,vi=128,yi=30,ki="...",Mi=150,xi=16,wi=0,Ei=1,Bi=2,Si="Expected a function",Ii="__lodash_placeholder__",Ci="[object Arguments]",Di="[object Array]",Pi="[object Boolean]",Ti="[object Date]",Oi="[object Error]",$i="[object Function]",Ni="[object Map]",ji="[object Number]",Fi="[object Object]",Li="[object RegExp]",Ri="[object Set]",Ai="[object String]",zi="[object WeakMap]",qi="[object ArrayBuffer]",Ui="[object Float32Array]",Hi="[object Float64Array]",Vi="[object Int8Array]",Wi="[object Int16Array]",Ki="[object Int32Array]",Gi="[object Uint8Array]",Yi="[object Uint8ClampedArray]",Qi="[object Uint16Array]",Xi="[object Uint32Array]",Ji=/&(?:amp|lt|gt|quot|#39|#96);/g,Zi=/[&<>"'`]/g,ts=RegExp(Ji.source),es=RegExp(Zi.source),ns=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,is=/^\w*$/,ss=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,rs=/[.*+?^${}()|[\]\/\\]/g,os=RegExp(rs.source),as=/\\(\\)?/g,cs=/\w*$/,us=/^0[xX]/,ls=/^\[object .+?Constructor\]$/,hs=/^\d+$/,ds=" 	\f ﻿\n\r\u2028\u2029 ᠎             　",ps=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],fs={};fs[Ui]=fs[Hi]=fs[Vi]=fs[Wi]=fs[Ki]=fs[Gi]=fs[Yi]=fs[Qi]=fs[Xi]=!0,fs[Ci]=fs[Di]=fs[qi]=fs[Pi]=fs[Ti]=fs[Oi]=fs[$i]=fs[Ni]=fs[ji]=fs[Fi]=fs[Li]=fs[Ri]=fs[Ai]=fs[zi]=!1;var ms={};ms[Ci]=ms[Di]=ms[qi]=ms[Pi]=ms[Ti]=ms[Ui]=ms[Hi]=ms[Vi]=ms[Wi]=ms[Ki]=ms[ji]=ms[Fi]=ms[Li]=ms[Ai]=ms[Gi]=ms[Yi]=ms[Qi]=ms[Xi]=!0,ms[Oi]=ms[$i]=ms[Ni]=ms[Ri]=ms[zi]=!1;var _s={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},gs={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},bs={"function":!0,object:!0},vs=bs[typeof exports]&&exports&&!exports.nodeType&&exports,ys=bs[typeof module]&&module&&!module.nodeType&&module,ks=vs&&ys&&"object"==typeof global&&global&&global.Object&&global,Ms=bs[typeof self]&&self&&self.Object&&self,xs=bs[typeof window]&&window&&window.Object&&window,ws=ys&&ys.exports===vs&&vs,Es=ks||xs!==(this&&this.window)&&xs||Ms||this,Bs=function(){try{Object({toString:0}+"")}catch(t){return function(){return!1}}return function(t){return"function"!=typeof t.toString&&"string"==typeof(t+"")}}(),Ss=Array.prototype,Is=Error.prototype,Cs=Object.prototype,Ds=String.prototype,Ps=Function.prototype.toString,Ts=Cs.hasOwnProperty,Os=Cs.toString,$s=RegExp("^"+Qn(Ps.call(Ts)).replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ns=Ae(Es,"ArrayBuffer"),js=Ae(Ns&&new Ns(0),"slice"),Fs=Math.ceil,Ls=Math.floor,Rs=Ae(Object,"getPrototypeOf"),As=Ss.push,zs=Cs.propertyIsEnumerable,qs=Ae(Es,"Set"),Us=Ss.splice,Hs=Ae(Es,"Uint8Array"),Vs=Ae(Es,"WeakMap"),Ws=function(){try{var t=Ae(Es,"Float64Array"),e=new t(new Ns(10),0,1)&&t}catch(n){}return e||null}(),Ks=Ae(Object,"create"),Gs=Ae(Array,"isArray"),Ys=Es.isFinite,Qs=Ae(Object,"keys"),Xs=Math.max,Js=Math.min,Zs=Ae(Date,"now"),tr=Es.parseInt,er=Number.POSITIVE_INFINITY,nr=4294967295,ir=nr-1,sr=nr>>>1,rr=Ws?Ws.BYTES_PER_ELEMENT:0,or=9007199254740991,ar=Vs&&new Vs,cr={},ur={};ur[Ui]=Es.Float32Array,ur[Hi]=Es.Float64Array,ur[Vi]=Es.Int8Array,ur[Wi]=Es.Int16Array,ur[Ki]=Es.Int32Array,ur[Gi]=Es.Uint8Array,ur[Yi]=Es.Uint8ClampedArray,ur[Qi]=Es.Uint16Array,ur[Xi]=Es.Uint32Array;var lr={};lr[Di]=lr[Ti]=lr[ji]={constructor:!0,toLocaleString:!0,toString:!0,valueOf:!0},lr[Pi]=lr[Ai]={constructor:!0,toString:!0,valueOf:!0},lr[Oi]=lr[$i]=lr[Li]={constructor:!0,toString:!0},lr[Fi]={constructor:!0},O(ps,function(t){for(var e in lr)if(Ts.call(lr,e)){var n=lr[e];n[t]=Ts.call(n,t)}});var hr=g.support={};!function(t){var e=function(){this.x=t},n={0:t,length:t},i=[];e.prototype={valueOf:t,y:t};for(var s in new e)i.push(s);hr.argsTag=Os.call(arguments)==Ci,hr.enumErrorProps=zs.call(Is,"message")||zs.call(Is,"name"),hr.enumPrototypes=zs.call(e,"prototype"),hr.nonEnumShadows=!/valueOf/.test(i),hr.ownLast="x"!=i[0],hr.spliceObjects=(Us.call(n,0,1),!n[0]),hr.unindexedChars="x"[0]+Object("x")[0]!="xx"}(1,0);var dr=function(){function t(){}return function(e){if($n(e)){t.prototype=e;var n=new t;t.prototype=null}return n||{}}}(),pr=we(X),fr=we(J,!0),mr=Ee(),_r=Ee(!0),gr=ar?function(t,e){return ar.set(t,e),t}:ii;js||(ye=Ns&&Hs?function(t){var e=t.byteLength,n=Ws?Ls(e/rr):0,i=n*rr,s=new Ns(e);if(n){var r=new Ws(s,0,n);r.set(new Ws(t,0,n))}return e!=i&&(r=new Hs(s,i),r.set(new Hs(t,i))),s}:ni(null));var br=Ks&&qs?function(t){return new C(t)}:ni(null),vr=ar?function(t){return ar.get(t)}:oi,yr=ue("length"),kr=function(){var t=0,e=0;return function(n,i){var s=Cr(),r=xi-(s-e);if(e=s,r>0){if(++t>=Mi)return n}else t=0;return gr(n,i)}}(),Mr=Cn(function(t,e){return Ve(t)?V(t,Y(e,!1,!0)):[]}),xr=Cn(function(t){for(var e=t.length,i=e,s=Array(h),r=Le(),o=r==n,a=[];i--;){var c=t[i]=Ve(c=t[i])?c:[];s[i]=o&&c.length>=120?br(i&&c):null}var u=t[0],l=-1,h=u?u.length:0,d=s[0];t:for(;++l<h;)if(c=u[l],(d?D(d,c):r(a,c,0))<0){for(var i=e;--i;){var p=s[i];if((p?D(p,c):r(t[i],c,0))<0)continue t}d&&d.push(c),a.push(c)}return a}),wr=Cn(function(t,e){return Ve(t)?V(t,e):[]}),Er=Se(pr),Br=Se(fr,!0),Sr=Ce(O,pr),Ir=Pe(F,pr),Cr=Zs||function(){return(new Date).getTime()};hr.argsTag||(Tn=function(t){return l(t)&&Ve(t)&&Ts.call(t,"callee")&&!zs.call(t,"callee")});var Dr=Gs||function(t){return l(t)&&Qe(t.length)&&Os.call(t)==Di},Pr=i(/x/)||Hs&&!i(Hs)?function(t){return Os.call(t)==$i}:i,Tr=Rs?function(t){if(!t||Os.call(t)!=Fi||!g.support.argsTag&&Tn(t))return!1;var e=Ae(t,"valueOf"),n=e&&(n=Rs(e))&&Rs(n);return n?t==n||Rs(t)==n:en(t)}:en,Or=xe(function(t,e,n){return n?A(t,e,n):z(t,e)}),$r=Cn(function(t){var e=t[0];return null==e?e:(t.push(R),Or.apply(li,t))}),Nr=Ie(X),jr=De(X),Fr=Qs?function(t){var e=null==t?null:t.constructor;return"function"==typeof e&&e.prototype===t||("function"==typeof t?g.support.enumPrototypes:Ve(t))?nn(t):$n(t)?Qs(t):[]}:nn,Lr=xe(ae),Rr=Cn(function(t,e){return null==t?{}:"function"==typeof e[0]?Ze(t,ve(e[0],e[1],3)):Je(t,Y(e))});8!=tr(ds+"08")&&(Xn=function(t,e,n){return(n?Ke(t,e,n):null==e)?e=0:e&&(e=+e),t=Jn(t),tr(t,e||(us.test(t)?16:10))}),g.prototype=b.prototype,v.prototype=dr(b.prototype),v.prototype.constructor=v,y.prototype=dr(b.prototype),y.prototype.constructor=y,w.prototype["delete"]=E,w.prototype.get=B,w.prototype.has=S,w.prototype.set=I,C.prototype.push=P,In.Cache=w,g.assign=Or,g.callback=ei,g.chain=dn,g.compact=an,g.constant=ni,g.defaults=$r,g.difference=Mr,g.filter=Mn,g.flatten=cn,g.forEach=Sr,g.forOwn=jr,g.intersection=xr,g.invert=Hn,g.keys=Fr,g.keysIn=Vn,g.map=wn,g.matches=si,g.memoize=In,g.merge=Lr,g.mixin=ri,g.pairs=Wn,g.pick=Rr,g.pluck=En,g.property=ai,g.range=ci,g.restParam=Cn,g.sortBy=Sn,g.tap=pn,g.thru=fn,g.times=ui,g.toPlainObject=zn,g.transform=Kn,g.uniq=hn,g.values=Gn,g.without=wr,g.collect=wn,g.each=Sr,g.extend=Or,g.iteratee=ei,g.select=Mn,g.unique=hn,ri(g,g),g.clone=Dn,g.cloneDeep=Pn,g.escape=Yn,g.escapeRegExp=Qn,g.every=kn,g.find=Er,g.findKey=Nr,g.findLast=Br,g.get=qn,g.has=Un,g.identity=ii,g.includes=xn,g.indexOf=un,g.isArguments=Tn,g.isArray=Dr,g.isEmpty=On,g.isFunction=Pr,g.isNative=Nn,g.isNumber=jn,g.isObject=$n,g.isPlainObject=Tr,g.isRegExp=Fn,g.isString=Ln,g.isTypedArray=Rn,g.isUndefined=An,g.last=ln,g.noop=oi,g.now=Cr,g.parseInt=Xn,g.reduce=Ir,g.size=Bn,g.trim=Jn,g.trunc=Zn,g.unescape=ti,g.all=kn,g.contains=xn,g.detect=Er,g.foldl=Ir,g.include=xn,g.inject=Ir,ri(g,function(){var t={};return X(g,function(e,n){g.prototype[n]||(t[n]=e)}),t}(),!1),g.prototype.sample=function(t){return this.__chain__||null!=t?this.thru(function(e){return sample(e,t)}):sample(this.value())},g.VERSION=hi,O(["dropWhile","filter","map","takeWhile"],function(t,e){var n=e!=Bi,i=e==wi;y.prototype[t]=function(t,s){var r=this.__filtered__,o=r&&i?new y(this):this.clone(),a=o.__iteratees__||(o.__iteratees__=[]);return a.push({done:!1,count:0,index:0,iteratee:je(t,s,1),limit:-1,type:e}),o.__filtered__=r||n,o}}),O(["drop","take"],function(t,e){var n=t+"While";y.prototype[t]=function(n){var i=this.__filtered__,s=i&&!e?this.dropWhile():this.clone();if(n=null==n?1:Xs(Ls(n)||0,0),i)e?s.__takeCount__=Js(s.__takeCount__,n):ln(s.__iteratees__).limit=n;else{var r=s.__views__||(s.__views__=[]);r.push({size:n,type:t+(s.__dir__<0?"Right":"")})}return s},y.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()},y.prototype[t+"RightWhile"]=function(t,e){return this.reverse()[n](t,e).reverse()}}),O(["first","last"],function(t,e){var n="take"+(e?"Right":"");y.prototype[t]=function(){return this[n](1).value()[0]}}),O(["initial","rest"],function(t,e){var n="drop"+(e?"":"Right");y.prototype[t]=function(){return this[n](1)}}),O(["pluck","where"],function(t,e){var n=e?"filter":"map",i=e?re:ai;y.prototype[t]=function(t){return this[n](i(t))}}),y.prototype.compact=function(){return this.filter(ii)},y.prototype.reject=function(t,e){return t=je(t,e,1),this.filter(function(e){return!t(e)})},y.prototype.slice=function(t,e){t=null==t?0:+t||0;var n=this;return 0>t?n=this.takeRight(-t):t&&(n=this.drop(t)),e!==li&&(e=+e||0,n=0>e?n.dropRight(-e):n.take(e-t)),n},y.prototype.toArray=function(){return this.drop(0)},X(y.prototype,function(t,e){var n=g[e];if(n){var i=/^(?:filter|map|reject)|While$/.test(e),s=/^(?:first|last)$/.test(e);g.prototype[e]=function(){var e=arguments,r=this.__chain__,o=this.__wrapped__,a=!!this.__actions__.length,c=o instanceof y,u=e[0],l=c||Dr(o);l&&i&&"function"==typeof u&&1!=u.length&&(c=l=!1);var h=c&&!a;if(s&&!r)return h?t.call(o):n.call(g,this.value());var d=function(t){var i=[t];return As.apply(i,e),n.apply(g,i)};if(l){var p=h?o:new y(this),f=t.apply(p,e);if(!s&&(a||f.__actions__)){var m=f.__actions__||(f.__actions__=[]);m.push({func:fn,args:[d],thisArg:g})}return new v(f,r)}return this.thru(d)}}}),O(["concat","join","pop","push","replace","shift","sort","splice","split","unshift"],function(t){var e=(/^(?:replace|split)$/.test(t)?Ds:Ss)[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",i=!hr.spliceObjects&&/^(?:pop|shift|splice)$/.test(t),s=/^(?:join|pop|replace|shift)$/.test(t),r=i?function(){var t=e.apply(this,arguments);return 0===this.length&&delete this[0],t}:e;g.prototype[t]=function(){var t=arguments;return s&&!this.__chain__?r.apply(this.value(),t):this[n](function(e){return r.apply(e,t)})}}),X(y.prototype,function(t,e){var n=g[e];if(n){var i=n.name,s=cr[i]||(cr[i]=[]);s.push({name:e,func:n})}}),cr[Te(null,pi).name]=[{name:"wrapper",func:null}],y.prototype.clone=k,y.prototype.reverse=M,y.prototype.value=x,g.prototype.chain=mn,g.prototype.commit=_n,g.prototype.plant=gn,g.prototype.reverse=bn,g.prototype.toString=vn,g.prototype.run=g.prototype.toJSON=g.prototype.valueOf=g.prototype.value=yn,g.prototype.collect=g.prototype.map,g.prototype.head=g.prototype.first,g.prototype.select=g.prototype.filter,g.prototype.tail=g.prototype.rest,"function"==typeof define&&"object"==typeof define.amd&&define.amd?(Es._=g,define(function(){return g})):vs&&ys?ws?(ys.exports=g)._=g:vs._=g:Es._=g}.call(this),BEM.DOM.decl("i-global",{onSetMod:{js:function(){this.del(this.__self._params=$.extend({},this.params),"uniqId","name");var t=this.__self._params;t["passport-msg"]||(t["passport-msg"]=t.id),void 0===t["show-counters"]&&(t["show-counters"]=Math.round(100*Math.random())<=t["show-counters-percent"]),t.locale=t.lang,$(function(){t.oframebust&&Lego.oframebust(t.oframebust)})}},getDefaultParams:function(){return{id:"",login:Lego.isSessionValid()?$.cookie("yandex_login")||"":"",yandexuid:$.cookie("yandexuid"),lang:"ru",tld:"ru",retpath:encodeURI($.decodeURI(location.href)),"passport-host":"https://passport.yandex.ru","pass-host":"https://pass.yandex.ru","social-host":"https://social.yandex.ru","lego-path":"/lego","show-counters-percent":100}}},{param:function(t){return(this._params||{})[t]}}),BEM.DOM.decl("i-global",{},{setParams:function(t){this._params=this._params||{},$.extend(!0,this._params,t)},getBlockParams:function(t,e){var n=$(t).data("bem");return n?n[e]:!1}}),function(t){t||(t=window.Lego={}),t.isSessionValid=function(){return!!t.getCookie("yandex_login")}}(window.Lego),BEM.decl("i-global__utils",{},{_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",base64Encode:function(t,e){e=e||1e6;var n,i,s,r,o,a,c,u="",l=0;for(t=this._utf8_encode(t,3*e/4|0);l<t.length;)n=t.charCodeAt(l++),i=t.charCodeAt(l++),s=t.charCodeAt(l++),r=n>>2,o=(3&n)<<4|i>>4,a=(15&i)<<2|s>>6,c=63&s,isNaN(i)?a=c=64:isNaN(s)&&(c=64),u=u+this._keyStr.charAt(r)+this._keyStr.charAt(o)+this._keyStr.charAt(a)+this._keyStr.charAt(c);return u},_utf8_encode:function(t,e){t=t.replace(/\r\n/g,"\n");for(var n,i="",s=0;s<t.length;s++){var r=t.charCodeAt(s);if(128>r?n=String.fromCharCode(r):r>127&&2048>r?(n=String.fromCharCode(r>>6|192),n+=String.fromCharCode(63&r|128)):(n=String.fromCharCode(r>>12|224),n+=String.fromCharCode(r>>6&63|128),n+=String.fromCharCode(63&r|128)),i.length+n.length>e)break;i+=n}return i}}),BEM.DOM.decl("i-global",{},{getFlag:function(t){var e=this.param("expFlags");return e||(e=this.getBlockParams(this.buildSelector(),this.getName()).expFlags||{},this.setParams({expFlags:e})),e[t]}}),function(t){function e(t){return t.replace(/^(?:https?:)?\/\//,"")}t||(t=window.Lego={}),!t.params&&(t.params={}),t.c=function(t,n,i){var s=e(i&&i.host||BEM.blocks["i-global"].param("click-host")||"clck.yandex.ru"),r=function(t,e,n,i){return e=e.replace("'","%27"),e.indexOf("/dtype=")>-1?e:location.protocol+"//"+s+"/"+n+"/dtype="+t+"/rnd="+((new Date).getTime()+Math.round(100*Math.random()))+(i?"/*"+(e.match(/^http/)?e:location.protocol+"//"+location.host+(e.match("^/")?e:"/"+e)):"/*data="+encodeURIComponent("url="+encodeURIComponent(e.match(/^http/)?e:location.protocol+"//"+location.host+(e.match("^/")?e:"/"+e))))},o=function(){var e=document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0],n=document.createElement("script");n.setAttribute("src",r(t,location.href,"jclck")),e.insertBefore(n,e.firstChild)};if(n)if(n.className.match(/b-link_pseudo_yes/)||n.href&&n.href.match(/^mailto:/)||i&&i.noRedirect===!0)o();else if(n.href){var a=n.href;n.href=r(t,a,"redir"),setTimeout(function(){n.href=a},500)}else if(n.form)if(n.type.match(/submit|button|image/)){var a=n.form.action;n.form.action=r(t,a,"redir",!0),setTimeout(function(){n.form.action=a},500)}else o();else{if(!n.action)throw"counter.js: not link and not form!";n.action=r(t,n.action,"redir",!0)}else o()}}(window.Lego),function(t,e){t||(t=window.Lego={}),t.cp=function(n,i,s,r,o,a){"string"==typeof r||(a=o,o=r,r=e),t.c("stred/pid="+n+"/cid="+i+(s?"/path="+s+(r?"/vars="+r:""):""),o,a)}}(window.Lego),function(t){t||(t=window.Lego={}),t.ch=function(e,n,i){BEM.blocks["i-global"].param("show-counters")&&t.cp(0,2219,e,n,i)}}(window.Lego),function(t){t||(t=window.Lego={}),t.getCookie=function(t){var e=document.cookie;if(e.length<1)return!1;var n=e.indexOf(t+"=");if(-1===n)return!1;n+=t.length+1;var i=e.indexOf(";",n);return decodeURIComponent(-1===i?e.substring(n):e.substring(n,i))}}(window.Lego),function(t,e){e||(e=window.Lego={}),e.init||(e.init=function(n){return(n=e.params=t.extend({id:"",login:e.isSessionValid()?e.getCookie("yandex_login")||"":"",yandexuid:e.getCookie("yandexuid"),locale:"ru",retpath:window.location.toString(),"passport-host":"https://passport.yandex.ru","pass-host":"https://pass.yandex.ru","passport-msg":n.id,"social-host":"https://social.yandex.ru","lego-path":"/lego","show-counters-percent":100},n,e.params))["show-counters"]=Math.round(100*Math.random())<=n["show-counters-percent"],BEM.blocks["i-global"]._params||t.extend(BEM.blocks["i-global"]._params={},n),t(function(){n.oframebust&&e.oframebust(n.oframebust)}),n}),e.block||(e.block={}),e.blockInit||(e.blockInit=function(n,i){n=n||document,i=i||".g-js",t(n).find(i).each(function(){var n=t(this),i=this.onclick?this.onclick():{},s=i.name||"",r=e.block[s];r&&!n.data(s)&&(r.call(n,i),n.data(s,!0).addClass(s+"_js_inited"))})}),e.blockInitBinded||(e.blockInitBinded=!!t(document).ready(function(){e.blockInit()}))}(jQuery,window.Lego),function(t,e){var n=1,i=!1;if("deviceXDPI"in screen&&"logicalXDPI"in screen?n=screen.deviceXDPI/screen.logicalXDPI:"devicePixelRatio"in t&&(n=t.devicePixelRatio),"function"==typeof t.matchMedia){var s="only screen and (-webkit-min-device-pixel-ratio: 1.3), only screen and (min-resolution: 1.3dppx), only screen and (min-resolution: 124dpi)";i=t.matchMedia(s).matches}else i=n>=1.3;var r={};/msie|trident/i.test(e)?r.ie=parseInt(e.split(/msie|rv:/i)[1],10):t.opera&&(r.opera=parseInt(t.opera.version(),10));var o,a={},c={};(o=e.match(/Windows\sPhone[^\d]*\s([\d.]+)/))?a.wp=o[1]:(o=e.match(/Android\s+([\d.]+)/))?a.android=o[1]:e.match(/\sHTC[\s_].*AppleWebKit/)?a.android="2.3":(o=e.match(/iPhone\sOS\s([\d_]+)/))?(a.ios=o[1].replace(/_/g,"."),c.iphone=!0):(o=e.match(/iPad.*OS\s([\d_]+)/))?(a.ios=o[1].replace(/_/g,"."),c.ipad=!0):(o=e.match(/Bada\/([\d.]+)/))?a.bada=o[1]:(o=e.match(/MSIE\s9/))?a.wp="7.5":a.other=!0,BEM.DOM.decl("i-ua",{onSetMod:{js:function(){var t=this.__self,e="other";["ios","android","bada","wp","opera"].some(function(n){return t[n]&&(e=n)}),this.setMod("platform",e),t.hiDpi&&this.setMod("hi-dpi","yes")}}},{ios:a.ios,iphone:c.iphone,ipad:c.ipad,android:a.android,bada:a.bada,wp:a.wp,other:a.other,dpr:n,hiDpi:i,ua:e,ie:r.ie,opera:r.opera})}(window,navigator.userAgent),function(){var t,e;BEM.decl("i-ua",{onSetMod:{js:function(){this.__base.apply(this,arguments),this.__self.wp&&this.afterCurrentEvent(function(){var t=document.querySelector("html"),e=t.getAttribute("class").replace("i-ua_inlinesvg_no","i-ua_inlinesvg_yes");t.setAttribute("class",e)})}}},{canUseCSSAnimation:function(){var t=document.createElement("div"),e="Webkit Moz O ms Khtml".split(" ");if(void 0!==t.style.animationName)return!0;for(var n=0;n<e.length;n++)if(void 0!==t.style[e[n]+"AnimationName"])return!0;return!1},hasHistoryAPI:!(!window.history||!history.pushState),canUseAjax:function(){return"undefined"==typeof t&&(t="function"==typeof(window.History||window.history||{}).replaceState&&this.isCookieEnabled()),t},isCookieEnabled:function(){if("undefined"==typeof e){var t=Math.random().toString(16).slice(2);document.cookie=t+"=1",e=document.cookie.indexOf(t)>=0,document.cookie=t+"=;expires="+new Date(0).toGMTString()}return e},getTransitionEndEvent:_.memoize(function(){var t="transitionend",e={webkitTransition:"webkitTransitionEnd",OTransition:"otransitionend",mozTransition:t,transition:t};for(var n in e)if(e.hasOwnProperty(n)&&void 0!==document.body.style[n])return e[n];return t}),isPointerEventsAvailable:_.memoize(function(){return void 0!==document.body.style.pointerEvents})})}(),function(t,e){var n={};/msie|trident/i.test(e)&&(n.ie=parseInt(e.split(/msie|rv:/i)[1],10)),BEM.DOM.decl("i-ua",{},{ie:n.ie})}(window,navigator.userAgent),function(t,e){var n,i={},s={},r={},o={},a=t.innerWidth>t.innerHeight;e.match(/Android\s+([\d.]+)/)?(n=e.match(/Android\s+([\d.]+)/),i.android=n[1]):e.match(/\sHTC[\s_].*AppleWebKit/)?i.android="2.3":e.match(/iPhone\sOS\s([\d_]+)/)?(n=e.match(/iPhone\sOS\s([\d_]+)/),i.ios=n[1].replace(/_/g,"."),r.iphone=!0):e.match(/iPad.*OS\s([\d_]+)/)?(n=e.match(/iPad.*OS\s([\d_]+)/),i.ios=n[1].replace(/_/g,"."),r.ipad=!0):e.match(/Bada\/([\d.]+)/)?(n=e.match(/Bada\/([\d.]+)/),i.bada=n[1]):e.match(/Windows\sPhone[^\d]*\s([\d.]+)/)?(n=e.match(/Windows\sPhone[^\d]*\s([\d.]+)/),i.wp=n[1]):e.match(/MSIE\s9/)?i.wp="7.5":i.other=!0,BEM.decl("i-ua",{onSetMod:{js:function(){this.__base.apply(this,arguments);var t=this.__self;this.setMod("platform",t.ios?"ios":t.android?"android":t.bada?"bada":t.wp?"wp":t.opera?"opera":"other").setMod("ios",t.ios?t.ios.charAt(0):"").setMod("android",t.android?t.android.charAt(0):"")}}},{_hasFlexBox:!1,canUseCSSCalc:function(){var t=document.createElement("div");return t.style.cssText="width: calc(10px);",!!t.style.length
},hasFlexbox:function(){if(0===BEM.blocks["i-global"].getFlag("images_flexbox"))return!1;if(this._hasFlexbox)return this._hasFlexbox;var t,e,n=["","webkit-","-moz-","ms-","o-"],i="flex-wrap",s=document.body.style;for(t=0,e=n.length;e>t;t++){var r=$.camelCase(n[t]+i);if(s.hasOwnProperty&&s.hasOwnProperty(r)||void 0!==s[r])return this._hasFlexBox=!0,this._hasFlexBox}return this._hasFlexBox},ua:e,ios:i.ios,iphone:r.iphone,ipad:r.ipad,android:i.android,bada:i.bada,wp:i.wp,other:i.other,opera:s.opera,chrome:s.chrome,screenSize:screen.width>320?"large":screen.width<320?"small":"normal",connection:o.connection,flash:o.flash,video:o.video,svg:o.svg,width:t.innerWidth,height:t.innerHeight,landscape:a})}(window,navigator.userAgent),function(t){t||(t=window.Lego={}),t.messages=t.messages||{},t.message=function(e,n){return"ru"===t.params.locale?n:t.messages[e]||n}}(window.Lego),$(function(){BEM.afterCurrentEvent(function(){BEM.DOM.init()})}),function(){var t={9:"tab",13:"enter",32:"space",33:"page up",34:"page down",35:"end",36:"home",37:"left arrow",38:"up arrow",39:"right arrow",40:"down arrow",46:"delete"},e={27:"escape"};BEM.DOM.decl({block:"i-ua",modName:"interaction",modVal:"yes"},{onSetMod:{js:{inited:function(){this.bindTo("mousedown",this._onPointer).bindTo("keydown",this._onKeyboard)}}},_onPointer:function(){this.interaction="pointer",this.domElem.attr("data-interaction","pointer"),this.unbindFrom("mousedown")},_onKeyboard:function(n){var i=n.keyCode;return e[i]?void this._onPointer():void(t[i]&&"keyboard"!==this.interaction&&(this.domElem.attr("data-interaction","keyboard"),this.interaction="keyboard",this.bindTo("mousedown",this._onPointer)))}})}(),BEM.DOM.decl("b-page",{updateTitle:function(t){document.title=_.unescape(t)},_getFilterParams:$.noop}),BEM.DOM.decl("b-page",{onSetMod:{js:function(){this.findBlocks().bindEvents(),BEM.blocks["i-global"].setParams({hasHistoryAPI:!(!window.history||!history.pushState)}),BEM.blocks["i-global"].param("isPumpkin")&&BEM.blocks.header.getSearch().fill(BEM.blocks.uri.getParamValue("text"))}},findBlocks:function(){return this._pane=this.findBlockInside("pane"),this._header=this.findBlockInside("header"),this._headerHeight=this._header.getHeight(),this._htmlBody=$("html,body"),this},bindEvents:function(){return this.bindToWin("resize",$.throttle(this._onResize,200,this)),this.bindToWin("scroll",$.throttle(this._onDomScroll,200,this)),BEM.blocks["i-global"].param("mobile")&&this.bindToWin("touchmove",$.throttle(this._onTouchMove,200,this)),this},_onResize:function(){this.trigger("resize")},_onTouchMove:function(){this.trigger("touchmove")},_onDomScroll:function(){var t=this;window.requestAnimationFrame(function(){t.trigger("scroll")})}}),BEM.DOM.decl("b-page",{_getFilterParams:function(){var t=this.__base.apply(this,arguments)||[];return t.concat("img_url","pos","rpt")},findBlocks:function(){return this.__base.apply(this,arguments),this.cbirIntent=this.findBlockInside("cbir-intent"),this}}),function(t){t=t||{},t.oframebustMatchDomain=function(t,e){t="[object Array]"===Object.prototype.toString.call(t)?t:function(){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e}();for(var n=0,i=t.length;i>n;n++){var s=t[n];if("string"==typeof s){if(/(\?|\*)/.test(s)){var r=s.replace(/\./g,"\\.").replace(/\*/g,".*").replace(/\?/g,".{1}");if(new RegExp("^"+r+"$").test(e))return!0}else if(e===s)return!0}else try{if(s.test(e))return!0}catch(o){}}}}(window.Lego),function(t){t=t||{},t.oframebust=function(e){if(window.top.location!==window.location){var n=document.referrer.match(/^https?:\/\/([^:\/\s]+)\/?.*/);if(!n)return;!t.oframebustMatchDomain(e,n[1])&&(window.top.location=window.location)}}}(window.Lego),BEM.decl("i-url-controller",{},{passedParams:["ncrnd","nojs","numdoc","rdrnd","i-m-a-hacker","l10n","family","no-tests","nocache","test-id","test-tag","yandex_login","yandexuid","waitall","exp_flags","time","sbh","dbgwzr","noredirect","category","metahost","promo","popular_category","srcrwr","suggest-uri","disable","exp_confs","rearr","pron","counterDebug","snip","qa-project","qa-field","qa-functionality","qa-element","qa-test-id","qa-run-id","videoapp"],rejectedParams:["uinfo","viewport","suggest_reqid","json_dump"],setCurrent:function(t){return this._current=t,this},setNext:function(t){return this._next=t,this},build:function(){return this.fillNextParams().fillCurrentParams().buildURL()},fillNextParams:function(){var t=this._next,e=t.url||location.href,n=this.rejectedParams;return t.path=t.path||BEM.blocks.uri.getPath(BEM.blocks.uri.clearHashSymbol(e)),t.params=$.extend({},BEM.blocks.uri.parseParams(e),t.params),t.params=_.transform(t.params,function(t,e,i){_.includes(n,i)||null===e||(t[i]=e)}),this},fillCurrentParams:function(){var t,e=this._next.params,n=this._current.params;return this.passedParams.forEach(function(i){e[i]||(t=n[i],t&&(e[i]=t))}),this},buildURL:function(){var t=this._next;return t.url=BEM.blocks.uri.buildRelativeUrl(t.path,t.params),this},mergePassedUrlParams:function(){var t=[].splice.call(arguments,0),e=_.pick(BEM.blocks.location.getInstance().getState().params,this.passedParams);return _.assign.apply(_,[e].concat(t)),_.forEach(e,function(t,n){_.isArray(t)&&(e[n]=t.join(";"))}),e}}),BEM.decl("location",{onSetMod:{js:function(){this._history=BEM.blocks.history.getInstance(),this._syncState(),this._history.on("statechange",this.changeThis(this._onStateChange))}},_onStateChange:function(){this._syncState(),this._state.referer!==BEM.blocks.uri.normalize(window.location.href)&&this._state.trigger!==!1&&(this.trigger("change",this._state),this._state.block&&this.channel(this._state.block).trigger("change"))},_syncState:function(){var t=this._history.state,e=BEM.blocks.uri.parse(t.url);return this._state=$.extend({},t.data,{referer:this._state&&this._state.url,url:e.build(),hostname:e.host(),path:e.path(),params:e.queryParams}),this},change:function(t){var e=BEM.blocks.uri.parse(t.url);if(t.url&&delete t.params,t.url=e.build(),t.params){var n=BEM.blocks.uri.parse(),i=t.forceParams?t.params:$.extend({},this._state.params,t.params);Object.keys(i).forEach(function(t){n.addParam(t,i[t])}),t.url=n.build()}t.trigger===!1||(t.trigger=!0);try{this._history.changeState(t.history===!1?"replace":"push",{data:t,url:t.url})}catch(s){window.location.assign(t.url)}},getState:function(){return $.extend(!0,{},this._state)},getUri:function(){return BEM.blocks.uri.parse(this._state.url)},getReferer:function(){return this._state.referer}},{_instance:null,getInstance:function(){return this._instance||(this._instance=BEM.create("location"))}}),BEM.decl("location",{CHANGE_DEBOUNCE:600,onSetMod:{js:function(){this.__base.apply(this,arguments),this.changeDebounced=$.debounce(this.change,this.CHANGE_DEBOUNCE,this),this.fillBlock(this.getOriginalState()),this.on("change",function(t,e){e.block||this.fillBlock(e)})}},_onStateChange:function(){this.__base.apply(this,arguments),this._state.trigger!==!1&&this._state.block&&this.trigger(this._state.block,this._state)},getOriginalState:function(){return this._state},change:function(t,e){if(e&&e.preventDefault&&e.preventDefault(),this.fillURL(t),t.reload)return void window.location.assign(t.url);var n=BEM.blocks.uri.parse(t.url);if(t.url&&delete t.params,t.url=n.build(),t.params){var i=BEM.blocks.uri.parse(),s=t.forceParams?t.params:$.extend({},this._state.params,t.params);Object.keys(s).forEach(function(t){i.addParam(t,s[t])}),t.url=i.build()}t.trigger===!1||(t.trigger=!0);try{this._history.changeState(t.history===!1?"replace":"push",{data:t,url:t.url})}catch(r){if("SecurityError"===r.name)throw r;"undefined"!=typeof console&&console.error&&console.error("location.assign fallback",r),window.location.assign(t.url)}},fillURL:function(t){BEM.blocks["i-url-controller"].setCurrent(this.getState()).setNext(t).build()},fillBlock:function(t){return t.block||(t.block=this.detectBlock(t)),this},getParamValue:function(t){var e=this._state.params[t];return e&&e[0]},hasParam:function(t,e){var n=this._state.params[t];return n?e?-1!==n.indexOf(e):!!n[0]:!1}}),BEM.decl("location",{detectBlock:function(t){var e,n=t.path;return!t.params.rpt||"imageinfo"!==t.params.rpt[0]&&"imageview"!==t.params.rpt[0]?t.params.rpt&&"imagedups"===t.params.rpt[0]?e="b-page_type_copy":t.params.rpt&&"imagelike"===t.params.rpt[0]||t.params.like?e="b-page_type_similar":~n.indexOf("search")?e="b-page_type_search":("/"===n||n===BEM.blocks["i-global"].param("router").index)&&(e="b-page_type_index"):e="b-page_type_search-by-image",e}}),BEM.decl("history",{onSetMod:{js:function(){if(!this.hasMod("provider"))throw new Error("Use BEM.blocks['history'].getInstance() instead of BEM.create('history')");this._resetUrl().bindEvents().syncState()}},destruct:function(){this.unbindEvents(),this.__base.apply(this,arguments)},pushState:function(t,e,n){return this.changeState("push",this.normalizeState(t,e,n))},replaceState:function(t,e,n){return this.changeState("replace",this.normalizeState(t,e,n))},bindEvents:function(){return this},_resetUrl:function(){return this},_removeHashbang:function(t){var e=BEM.blocks.uri,n=e.parse(t);if(""===n.anchor())return t;var i=e.parse(n.anchor().replace(/^!/,""));return n.anchor(""),n.query(i.query()),n.build()},unbindEvents:function(){return this},syncState:function(){return this.state=this.normalizeState(void 0,document.title,window.location.href),this},normalizeState:function(t,e,n){return{data:null===t?void 0:t,title:e,url:n}},changeState:function(t,e){try{window.location.assign(e.url)}catch(n){}}},{hasNativeAPI:function(){return window.history&&"pushState"in window.history},_instance:null,getInstance:function(){return this._instance||(this._instance=BEM.create({block:"history",mods:{provider:this.hasNativeAPI()?"history-api":"hashchange"}}))}}),BEM.decl("history",{_removeHashbang:function(t){var e=BEM.blocks.uri,n=e.parse(t);if(""===n.anchor())return t;var i=e.parse(n.anchor().replace(/^!/,""));return n.anchor(""),n.query(i.query()),n.uriParts.path=i.path(),n.build()}}),BEM.decl("uri",{onSetMod:{js:function(){var t=this;["protocol","host","port","path","anchor"].forEach(function(e){t[e]=function(t){return"undefined"!=typeof t?(this.uriParts[e]=t,this):this.uriParts[e]}})}},encode:function(t){return encodeURIComponent(t)},decode:function(t){try{t=decodeURIComponent(t)}catch(e){try{t=decodeURIComponent(this.convert(t))}catch(n){}}return t},convert:function(t){var e={"%D0":"%D0%A0","%C0":"%D0%90","%C1":"%D0%91","%C2":"%D0%92","%C3":"%D0%93","%C4":"%D0%94","%C5":"%D0%95","%A8":"%D0%81","%C6":"%D0%96","%C7":"%D0%97","%C8":"%D0%98","%C9":"%D0%99","%CA":"%D0%9A","%CB":"%D0%9B","%CC":"%D0%9C","%CD":"%D0%9D","%CE":"%D0%9E","%CF":"%D0%9F","%D1":"%D0%A1","%D2":"%D0%A2","%D3":"%D0%A3","%D4":"%D0%A4","%D5":"%D0%A5","%D6":"%D0%A6","%D7":"%D0%A7","%D8":"%D0%A8","%D9":"%D0%A9","%DA":"%D0%AA","%DB":"%D0%AB","%DC":"%D0%AC","%DD":"%D0%AD","%DE":"%D0%AE","%DF":"%D0%AF","%E0":"%D0%B0","%E1":"%D0%B1","%E2":"%D0%B2","%E3":"%D0%B3","%E4":"%D0%B4","%E5":"%D0%B5","%B8":"%D1%91","%E6":"%D0%B6","%E7":"%D0%B7","%E8":"%D0%B8","%E9":"%D0%B9","%EA":"%D0%BA","%EB":"%D0%BB","%EC":"%D0%BC","%ED":"%D0%BD","%EE":"%D0%BE","%EF":"%D0%BF","%F0":"%D1%80","%F1":"%D1%81","%F2":"%D1%82","%F3":"%D1%83","%F4":"%D1%84","%F5":"%D1%85","%F6":"%D1%86","%F7":"%D1%87","%F8":"%D1%88","%F9":"%D1%89","%FA":"%D1%8A","%FB":"%D1%8B","%FC":"%D1%8C","%FD":"%D1%8D","%FE":"%D1%8E","%FF":"%D1%8F"};return t=t.replace(/%.{2}/g,function(t){return e[t]||t})},normalize:function(t){return(t||"").replace(/\+/g,"%20")},parseUri:function(t){var e=/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,n=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],i=e.exec(t||""),s={};return n.forEach(function(t,e){s[t]=i[e]||""}),s},parseQuery:function(t){var e,n,i,s,r,o={};if("string"!=typeof t||""===t)return o;for(n=t.replace("?","").split("&"),e=0;e<n.length;e++)i=n[e].split("="),i=[i.shift(),void 0!==i[0]?i.join("="):null],s=this.decode(i[0]),r=i[1]||""===i[1]?this.decode(i[1]):null,o[s]?(r||""===r)&&o[s].push(r):o[s]=null===r?[]:[r];return o},query:function(t){var e="";"undefined"!=typeof t&&(this.queryParams=this.parseQuery(t));var n=this.queryParams,i=Object.keys(n),s=this;return i.forEach(function(t,i){i>0&&(e+="&"),"object"!=typeof n[t]||n[t].length?n[t].forEach(function(n,i){i>0&&(e+="&"),e+=s.encode(t)+"="+s.encode(n)}):e+=t}),e.length>0?"?"+e:e},getParam:function(t){return this.queryParams[t]},deleteParam:function(t,e){var n=[];return"undefined"!=typeof e&&(this.queryParams[t].forEach(function(t){t!==e&&n.push(t)}),this.queryParams[t]=n),("undefined"==typeof e||0===n.length)&&delete this.queryParams[t],this},addParam:function(t,e){return this.queryParams[t]=(this.queryParams[t]||[]).concat(e),this},replaceParam:function(t,e,n){return this.deleteParam(t,n).addParam(t,e)},scheme:function(){var t="";return this.protocol()?(t+=this.protocol(),this.protocol().indexOf(":")!==this.protocol().length-1&&(t+=":"),t+="//"):this.host()&&(t+="//"),t},origin:function(){var t=this.scheme();return this.host()&&(t+=this.host(),this.port()&&(t+=":"+this.port())),t},getRoot:function(){var t=this.origin();return this.path()&&(t+=this.path().replace(/\/[^\/]*$/,"")),t},pathParts:function(){return this.path().split("/")},toString:function(){var t=this.origin();return this.path()?t+=0!==this.path().indexOf("/")&&"/"!==t[t.length-1]?"/"+this.path():this.path():this.host()&&(this.query().toString()||this.anchor())&&(t+="/"),this.query().toString()&&(0!==this.query().toString().indexOf("?")&&(t+="?"),t+=this.query().toString()),this.anchor()&&(0!==this.anchor().indexOf("#")&&(t+="#"),t+=this.anchor()),t},build:function(){var t="";return t+=this.protocol()?this.protocol():window.location.protocol,t+=t.indexOf(":")!==t.length-1?"://":"//",t+=this.host()?this.host():window.location.hostname,this.port()?t+=":"+this.port():!this.host()&&window.location.hostname&&(t+=":"+window.location.port),t+=this.path()?this.path():this.host()?"/":window.location.pathname,this.query()&&(0!==this.query().indexOf("?")&&(t+="?"),t+=this.query()),this.anchor()&&(0!==this.anchor().indexOf("#")&&(t+="#"),t+=this.anchor()),t}},{parse:function(t){var e=BEM.create({block:"uri"});return e.uriParts=e.parseUri(e.normalize(t)),e.queryParams=e.parseQuery(e.uriParts.query),e},normalize:function(t){return this.parse(t).toString()}}),BEM.decl("uri",{},{_validUrlRegEx:new RegExp("^(?:(?:https?|ftp)://)(?:(?:(?:xn--)?(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:xn--)?(:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:xn--)?(?:[a-z\\u00a1-\\uffff]{2,})))(?::\\d{2,5})?(?:/[^\\s]*)?"),_acceptableUrlRegEx:/\S+\.\S{2,}/,setParam:function(t,e,n){_.isUndefined(n)&&(n=e,e=t,t=BEM.blocks.location.getInstance().getState().url);var i=this.parse(t);return _.isEmpty(n)?i.deleteParam(e).toString():i.queryParams[e]?i.replaceParam(e,n).toString():i.addParam(e,n).toString()},setParams:function(t,e){_.isObject(t)&&(e=t,t=BEM.blocks.location.getInstance().getState().url);var n=this.parse(t);return _.each(e,function(t,e){_.isUndefined(t)?n.deleteParam(e):n.queryParams[e]?n.replaceParam(e,t):n.addParam(e,t)}),n.toString()},delParams:function(t,e){_.isUndefined(e)&&_.isArray(t)&&(e=t,t=BEM.blocks.location.getInstance().getState().url);var n=this.parse(t);return _.isString(e)&&n.deleteParam(e),_.isArray(e)&&_.each(e,function(t){n.deleteParam(t)}),n.toString()},getFlatParams:function(t){var e=_.extend({},this.parse(t).queryParams);return $.each(e,function(t,n){n&&(e[t]=n.join(";"))}),e},buildRelativeUrl:function(t,e){return _.isUndefined(e)&&_.isObject(t)&&(e=t,t=BEM.blocks.location.getInstance().getState().url),!e||_.isEmpty(e)?t:(e=_.isArray(e)?[].concat(e):_.extend({},e),e=$.param(e,!0),BEM.blocks.uri.normalize(t+"?"+e))},parseParams:function(t){_.isUndefined(t)&&(t=BEM.blocks.location.getInstance().getState().url);var e=this.parse(this.clearHashSymbol(t));return e.queryParams},clearHashSymbol:function(t){return _.isUndefined(t)&&(t=BEM.blocks.location.getInstance().getState().url),t.replace(/[^\/]*\/?#!\//,"")},getPath:function(t){return this.parse(t).path()},hasHash:function(t){return _.isUndefined(t)&&(t=location.href),/#/.test(t)},isValid:function(t){return this._validUrlRegEx.test(t)},isAcceptable:function(t){return this._acceptableUrlRegEx.test(t)},getParamValue:function(t,e){_.isUndefined(e)&&(e=t,t=BEM.blocks.location.getInstance().getState().url);var n=this.parse(t).getParam(e);return _.isString(n)?n:_.isArray(n)?n[0]:void 0}}),BEM.decl({block:"history",modName:"provider",modVal:"history-api"},{_onPopState:function(t){var e=t.originalEvent.state;null!==e&&(this.state=this.normalizeState(e,document.title,window.location.href),this.state.data&&delete this.state.data.trigger,this.trigger("statechange",this.state))},bindEvents:function(){return this.__base.apply(this,arguments),BEM.DOM.win.on("popstate",this.changeThis(this._onPopState)),this},unbindEvents:function(){return this.__base.apply(this,arguments),BEM.DOM.win.off("popstate",this._onPopState),this},_resetUrl:function(){var t=BEM.blocks.uri.parse(window.location.href);return t.anchor()&&window.history.replaceState(null,document.title,this._removeHashbang(window.location.href)),this},syncState:function(){return null===window.history.state&&window.history.replaceState(void 0,document.title,window.location.href),(null===this.state||void 0===this.state)&&(this.state=this.normalizeState(void 0,document.title,window.location.href)),this},changeState:function(t,e){return window.history[t+"State"](e.data,e.title||document.title,e.url),this.state=e,this.trigger("statechange",{state:e,nativeApi:!0}),this}}),BEM.decl({block:"history",modName:"provider",modVal:"history-api"},{syncState:function(){return-1===navigator.userAgent.indexOf("Trident")&&null===window.history.state&&window.history.replaceState(void 0,document.title,window.location.href),(null===this.state||void 0===this.state)&&(this.state=this.normalizeState(void 0,document.title,window.location.href)),this}}),BEM.decl({block:"history",modName:"provider",modVal:"hashchange"},{_onHashChange:function(){this.state=this.normalizeState(void 0,document.title,this._removeHashbang(window.location.href)),this.trigger("statechange",{state:this.state,nativeApi:!1})},bindEvents:function(){return this.__base.apply(this,arguments),BEM.DOM.win.on("hashchange",this.changeThis(this._onHashChange)),this},unbindEvents:function(){return this.__base.apply(this,arguments),BEM.DOM.win.off("hashchange",this._onHashChange),this},syncState:function(){return this.state=this.normalizeState(void 0,document.title,this._removeHashbang(window.location.href)),this},_generateHashbang:function(t){var e=BEM.blocks.uri.parse(t),n=e.pathParts();return"!/"+n[n.length-1]+e.query()},_resetUrl:function(){return this},changeState:function(t,e){var n=BEM.blocks.uri.parse(e.url);if(n.host()&&n.host()!==window.location.hostname||n.port()&&n.port()!==window.location.port||n.protocol()&&n.protocol()!==window.location.protocol.replace(":",""))throw new Error("SECURITY_ERR: DOM Exception 18");this.state=e,window.location.hash=this._generateHashbang(e.url)}}),BEM.decl({block:"history",modName:"provider",modVal:"hashchange"},{_generateHashbang:function(t){var e=BEM.blocks.uri.parse(t),n=e.pathParts();return"!"+n.join("/")+e.query()},_onHashChange:function(){this.state=this.normalizeState({trigger:this.state.data&&this.state.data.trigger},document.title,this._removeHashbang(window.location.href)),this.trigger("statechange",{state:this.state,nativeApi:!1})}}),BEM.DOM.decl({block:"b-page",modName:"ajax",modVal:"yes"},{bindEvents:function(){this.__base.apply(this,arguments),this.on("contentLoad",this._onContentLoad).on("change",this._onChange)},_onContentLoad:function(t,e){this.__base.apply(this,arguments),BEM.DOM.update(this.findElem("content"),e.html),this.trigger("contentLoaded",e)},_onChange:function(){},buildCacheKey:function(){var t=this._location.getState();return[t.block?t.block:"",t.type?t.type:"",BEM.blocks.uri.delParams(t.url,this._getFilterParams())].join("_")},decodeEntities:function(t){return t.replace(/&(lt|gt|quot|apos|amp);/g,function(t,e){return{lt:"<",gt:">",quot:'"',apos:"'",amp:"&"}[e]})},updateGlobalParams:function(t){BEM.blocks["i-global"].setParams(t.params),this.updateSeoInformation(t.params.seo)}}),BEM.DOM.decl({block:"b-page",modName:"ajax",modVal:"yes"},{onSetMod:{js:function(){this.findBlockOn("i-global"),this._location=BEM.blocks.location.getInstance(),this.__base.apply(this,arguments);var t="b-page_type_index"===this._location.getState().block;this.hasMod("type","seed")&&(t?this.setMod("type","index"):this._location.change({})),BEM.blocks.uri.hasHash()&&(t&&(this._cacheKey=this.buildCacheKey()),BEM.DOM.win.trigger("hashchange")),this._cacheKey=this.buildCacheKey()},type:function(t,e){this.__base.apply(this,arguments),this.findBlockInside("page-layout").setMod("page",e)}},checkCacheKey:function(){var t=this.buildCacheKey();return this._cacheKey===t?!1:(this._cacheKey=t,!0)},load:function(t){var e=BEM.create("i-request_type_bem",{url:t.url,cache:t.cache,ctx:this}),n=[{name:"i-global__params:ajax",callback:this.updateGlobalParams},{name:"cookies_ajax",callback:this.updateCookies}],i=this.getMod("tabs-navigation"),s=BEM.blocks["i-global"],r=s.param("id");return _.isArray(t.blocks)&&(n=n.concat(t.blocks)),("grey"===i||"black"===i||"white"===i&&"images"===r)&&n.push({name:"tabs-navigation__content",callback:function(t){BEM.DOM.update($(".tabs-navigation"),t.html)}}),"images"===r&&s.getFlag("images_no_left_nav")||"video"===r&&s.getFlag("video_no_left_nav")||n.push({name:"navigation",callback:function(t){BEM.DOM.update($(".page-layout__column_type_navigation"),t.html)}}),n.push({name:"content_type_"+t.type,callback:function(e){e.page=t.type,this.trigger("contentLoad",e)}},{name:"serp-controller",callback:this.updateSerpParams}),n.forEach(function(t){e.block(t.name,t.callback)}),e.on("beforeCallback",function(){this.setMod("type",t.type)},this),this.getFade().setMod("progress","yes"),e.get(this.prepareParams(t.params),this._requestCallback.bind(this,t.type)),this},_requestCallback:function(t){this.trigger("change",{type:t}),this.getFade().delMod("progress")},prepareParams:function(t){var e=$.extend({},t);return $.each(e,function(t,n){n&&(e[t]=n.join(";"))}),e},updateSeoInformation:function(t){this.updateTitle(t.title),$("meta[name=keywords]").attr("content",t.keywords),$("meta[name=description]").attr("content",t.description),this.params.seo.shareTitle=t.shareTitle},updateCookies:function(t){BEM.blocks.cookies.save(t.params.cookies)},updateSerpParams:function(t){var e,n=BEM.blocks["serp-controller"].get(),i=t.params.mods;_.extend(n.params,t.params);for(e in i)i.hasOwnProperty(e)&&n.setMod(e,i[e])},getFade:function(){return this._fade||(this._fade=this.findBlockInside({block:"fade",modName:"region",modVal:"main"})),this._fade}}),BEM.DOM.decl({block:"b-page",modName:"ajax",modVal:"yes"},{prepareParams:function(){var t=this.__base.apply(this,arguments);return t.uinfo=BEM.blocks["i-userinfo"].get().getUserInfo(),t}}),BEM.DOM.decl({block:"b-page",modName:"ajax",modVal:"yes"},{findBlocks:function(){return this.headFilter=this.findBlockInside("head-filter"),this.__base.apply(this,arguments)},bindEvents:function(){return this.headFilter&&this.headFilter.on("saved",this._onHeadFilterSaved,this),BEM.blocks["i-cbir-controller"].on("fade",this.showFade,this).on("unfade",this.hideFade,this),BEM.blocks["b-501px"].on("updateUrl",function(){this._cacheKey=this.buildCacheKey()},this),this.__base.apply(this,arguments)},unbindEvents:function(){return this.headFilter&&this.headFilter.un("saved",this._onHeadFilterSaved,this),BEM.blocks["i-cbir-controller"].un("fade",this.showFade,this).un("unfade",this.hideFade,this),BEM.blocks["b-501px"].un("updateUrl"),this.__base.apply(this,arguments)},_onHeadFilterSaved:function(){this.getFade().setMod("progress","yes")},updateGlobalParams:function(t){this.__base.apply(this,arguments),this.trigger("warning",t.params)},_delayMethod:function(t,e){var n=BEM.blocks["i-global"].param("lags"),i=n&&n.delay;i?setTimeout(function(){t.apply(this,e)}.bind(this),i):t.apply(this,e)},_onContentLoad:function(){this._delayMethod(this.__base,arguments)},_requestCallback:function(){this._delayMethod(this.__base,arguments)},_onChange:function(t,e){this.__base.apply(this,arguments);var n="index"===e.type&&BEM.blocks["i-global"].param("is500pxAvailable");this.setMod("501px",n?"yes":"")},showFade:function(){this.getFade().setMod("progress","yes")},hideFade:function(){this.getFade().delMod("progress")},loadPage:function(t,e){this.load({type:e,url:BEM.blocks["i-global"].param("router").search,params:t.params,blocks:[{name:"cbir-intent__image-link",callback:function(t){this.trigger("cbir-intent:loaded",t)}}]})}}),BEM.DOM.decl("link",{getDefaultParams:function(){return{origTabindex:"0"}},onSetMod:{disabled:function(t,e){var n="yes"===e;this.domElem.attr({"aria-disabled":n,tabindex:n?-1:this.params.origTabindex})}}}),BEM.DOM.decl({block:"link",modName:"ajax",modVal:"yes"},{_onClick:function(t){this.__base.apply(this,arguments);var e=this.domElem.attr("href");BEM.blocks.location.getInstance().change($.extend({url:e},this.params),t)}}),BEM.DOM.decl({block:"link",modName:"ajax",modVal:"yes"},{},{live:function(){this.__base.apply(this,arguments),this.liveBindTo({block:"link",modName:"ajax",modVal:"yes"},"leftclick",function(t){this._onClick(t)})}}),function(){var t={};BEM.decl("i-request",{onSetMod:{js:function(){this._preventCache=!1}},get:function(t,e,n,i){$.isFunction(n)||(i=n,n=this.params.onError),this._get(t,e,n,$.extend({},this.params,i))},_get:function(e,n,i,s){var r=this._buildCacheKey(e,s),o=t[s.cacheGroup];s.cache&&o&&r in o.data?this.afterCurrentEvent(function(){n.call(this.params.callbackCtx,o.data[r])},this):this._do(e,n,i,s)},_do:function(){},_onSuccess:function(t,e,n,i){i.cache&&!this._preventCache&&this.putToCache(i,t,n),this._preventCache=!1},_buildCacheKey:function(t){return"string"==typeof t?t:$.param(t)},putToCache:function(e,n,i){var s=t[e.cacheGroup]||(t[e.cacheGroup]={keys:[],data:{}});s.keys.length>=e.cacheSize&&delete s.data[s.keys.shift()];var r=this._buildCacheKey(n,e);s.data[r]=i,s.keys.push(r)},dropCache:function(){delete t[this.params.cacheGroup]},getDefaultParams:function(){return{cache:!1,cacheGroup:"default",cacheSize:100,callbackCtx:this}}},{_cache:t})}(),BEM.decl("i-request_type_bem",{onSetMod:{js:function(){this.blocks=[],this._req=BEM.create("i-request_type_ajax",{dataType:this.params.dataType,url:this.params.url,cache:this.params.cache,callbackCtx:this})}},block:function(t,e,n,i){var s=Array.isArray(t)?t:"string"==typeof t?t.split(" "):[t];if(arguments.length<2)throw new Error("success callback is required");for(var r=0,o=s.length;o>r;r++)this.blocks.push({decl:s[r],success:e,error:"function"===$.type(n)?n:$.noop,params:i||"object"===$.type(n)?n:{},ctx:this.params.ctx});return this},get:function(t,e,n){var i=this.params;return"function"===$.type(t)?(i.success=t,i.error=e||$.noop,t=void 0):(i.success=e||$.noop,i.error=n||$.noop),this.afterCurrentEvent(function(){this.trigger("beforeRequest"),this._req.get($.extend({},this._getArgs(),t),this._onSuccess,this._onError)}),this},abort:function(){return this._req.abort(),this.blocks.length=0,this},_onSuccess:function(t){this._callback("success",t)},_onError:function(t){this._callback("error",t)},_callback:function(t,e){var n={};this.trigger("beforeCallback"),this.blocks.forEach(function(i,s){var r="string"==typeof i.decl?i.decl:i.decl.block;i[t].call(i.ctx,"success"===t?e.blocks?e.blocks[s]:e[i.decl]:e,i.decl),"success"===t&&("string"==typeof i.decl?n[r]=e.blocks[s]:(Array.isArray(n[r])||(n[r]=[]),n[r].push(e.blocks[s])))}),this.params[t].call(this.params.ctx,"success"===t?n:e)},_getRequestString:function(){return $.stringify($.map(this.blocks,function(t){return{block:t.decl,params:t.params,version:2}}))},_getArgs:function(){return $.extend({format:"json",request:this._getRequestString()},"jsonp"===this.params.dataType?{yu:BEM.blocks["i-global"].param("yandexuid")}:{})},getDefaultParams:function(){return{url:"/",dataType:"json",ctx:this}}}),BEM.decl("i-request_type_bem",{get:function(){BEM.blocks["i-global"].param("isYandexNet")&&this.blocks.push({decl:"i-console",error:$.noop,success:function(t){$("body").append(t.html)},params:{isAjax:!0}}),this.__base.apply(this,arguments)},getDefaultParams:function(){return _.extend(this.__base.apply(this,arguments),{dataType:"jsonp"})}}),BEM.decl("i-request_type_bem",{_onSuccess:function(){var t=BEM.blocks["i-global"].param("lags"),e=t&&t.load,n=this.__base,i=arguments;e?setTimeout(function(){n.apply(this,i)}.bind(this),e):n.apply(this,i)}}),function(t,e){if("undefined"!=typeof JSON)return t.stringify=JSON.stringify;var n=Object.prototype.toString,i=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,s={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};t.stringify=function(r){if(null===r)return"null";if("undefined"==typeof r)return e;switch(n.call(r)){case"[object String]":return'"'+(i.test(r)?r.replace(i,function(t){var e=s[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)}):r)+'"';case"[object Number]":case"[object Boolean]":return""+r;case"[object Array]":for(var o,a="[",c=0,u=r.length;u>c;)o=t.stringify(r[c]),a+=(c++?",":"")+("undefined"==typeof o?"null":o);return a+"]";case"[object Object]":var o,a="{",c=0;for(var l in r)r.hasOwnProperty(l)&&(o=t.stringify(r[l]),"undefined"!=typeof o&&(a+=(c++?",":"")+'"'+l+'":'+o));return a+"}";default:return e}}}(jQuery),function(t){t.decl({block:"i-request_type_ajax",baseBlock:"i-request"},{onSetMod:{js:function(){this.__base(),this._requestNumber=this._number=this._preventNumber=this._retryCount=0}},_get:function(t,e,n,i){this._number++,this._requestNumber++,this._retryCount=i.retryCount,this.__base.apply(this,arguments)},_do:function(t,e,n,i){var s=this;if(s._number>s._preventNumber){var r=arguments,o={data:i.data?$.extend({},i.data,t):t},a=s._wrapCallback(function(n,r,o){s._onSuccess(s._buildCacheKey(t,i),t,n[0],i),s._allowCallback(r,o)&&e.apply(i.callbackCtx,n)}),c=s._wrapCallback(function(t,e,o){s._allowCallback(e,o)&&(s._retryCount-->0?setTimeout(function(){s._do.apply(s,r)},i.retryInterval):n&&n.apply(i.callbackCtx,t))});$.each(["url","dataType","timeout","type","jsonp","jsonpCallback"].concat(i.paramsToSettings||[]),function(t,e){o[e]=i[e]}),$.ajax(o).done(a).fail(c)}},_wrapCallback:function(t){var e=this._requestNumber,n=this._number;return function(i){null!==i&&t(arguments,e,n)}},_allowCallback:function(t,e){return e>this._preventNumber&&this._requestNumber===t},_buildCacheKey:function(t,e){return"string"==typeof t?t:this.__base(t)+e.url},abort:function(){this._preventNumber=++this._number},preventCallbacks:function(){this.abort()},getDefaultParams:function(){return $.extend(this.__base(),{cache:!0,type:"GET",dataType:"jsonp",timeout:2e4,retryCount:0,retryInterval:2e3})}})}(BEM),BEM.decl("i-request_type_ajax",{onSetMod:{js:function(){this.__base.apply(this,arguments),this.cacheIrrelevantParams=["yu","uinfo","viewport","rpt","_","pos"]}},getDefaultParams:function(){return _.extend(this.__base.apply(this,arguments),{timeout:3e5})},_get:function(t,e,n,i){if(this.params.timeout){var s,r=this._buildCacheKey(t,i),o=this.__self._cache,a=o[i.cacheGroup];i.cache&&a&&r in a.data&&(s=a.timestamps[r],(new Date).getTime()-s>this.params.timeout&&(delete a.timestamps[r],delete a.data[r],a.keys.splice(a.keys.indexOf(r),1)))}this.__base.apply(this,arguments)},_buildCacheKey:function(t,e){if("string"==typeof t)return t;for(var n=$.extend(!0,{},t),i=this.cacheIrrelevantParams,s=0,r=i.length;r>s;s++)i[s]in n&&delete n[i[s]];return void 0===n.p&&(n.p=1),$.param(n)+e.url
},putToCache:function(t,e){var n=this._buildCacheKey(e,t),i=this.__self._cache,s=i[t.cacheGroup]||(i[t.cacheGroup]={keys:[],data:{},timestamps:{}});this.__base.apply(this,arguments),s.keys.length>=t.cacheSize&&delete s.timestamps[s.keys[0]],s.timestamps[n]=(new Date).getTime()}}),BEM.DOM.decl("b-page",{_onUserScroll:function(){this._htmlBody.stop(),this.stopScrollTracking()},startScrollTracking:function(){this.isScrolling=!0,this.bindToWin("DOMMouseScroll mousewheel",$.throttle(this._onUserScroll.bind(this),100))},stopScrollTracking:function(){this.isScrolling=!1,this.unbindFromWin("DOMMouseScroll mousewheel",$.throttle(this._onUserScroll.bind(this),100))},scrollTo:function(t,e,n){n||(n=0);var i=t instanceof jQuery?t.offset().top-this._headerHeight-n-20:t;return e?this.isScrolling||(this.startScrollTracking(),this._htmlBody.animate({scrollTop:i},e,this.stopScrollTracking.bind(this))):window.scrollTo(0,i),this}}),BEM.DOM.decl("b-page",{bindEvents:function(){return this.__base.apply(this,arguments),this._location.on("b-page_type_index",this._onPageIndex,this),this},_onPageIndex:function(t,e){this.checkCacheKey()&&this.loadIndex(e)},loadIndex:function(t){return this.load({type:"index",url:BEM.blocks["i-global"].param("router").index,params:t.params}),this}}),BEM.DOM.decl("b-page",{_onPageIndex:function(){this.__self.preventFocus=!0,this.__base.apply(this,arguments),this.afterCurrentEvent(function(){this.__self.preventFocus=!1}),this.cbirIntent&&this.cbirIntent.prepareInputForIndex()}}),BEM.DOM.decl("b-page",{onSetMod:{js:function(){this.params.shouldUpdateFilters=!BEM.blocks["i-global"].param("hasHistoryAPI"),this.__base.apply(this,arguments)}},bindEvents:function(){return this.__base.apply(this,arguments),this._location.on("b-page_type_search",this._onPageSearch,this),this},_onPageSearch:function(t,e){this.checkCacheKey()&&this.loadSearch(e)},getBlocks:function(){var t=[{name:"search:ajax",callback:function(t){this.trigger("search:input:update",t)}}];return this.params.shouldUpdateFilters&&t.push({name:"advanced-search__filters",callback:this._onAdvancedSearchData}),t},loadSearch:function(t){return this.load({type:"search",url:t.path||BEM.blocks["i-global"].param("router").search,params:t.params,blocks:this.getBlocks()}),this},_onAdvancedSearchData:function(t){this.trigger("filters:update",t)}}),BEM.DOM.decl({block:"b-page",modName:"type",modVal:"search"},{preview:function(t){this._pane.load(t)}}),BEM.DOM.decl("b-page",{onSetMod:{js:function(){this.__base.apply(this,arguments),this.params.shouldUpdateFilters=!0}},getBlocks:function(){var t=this.__base.apply(this,arguments);return t.push({name:"preview__isWallpaper",callback:function(t){this.trigger("preview:update",t.params.isWallpaper)}}),t.push({name:"related2",callback:function(t){this.trigger("related2:update",t)}}),t},_onAdvancedSearchData:function(t){_.isEmpty(t.params.filters)||this._advancedSearch||(this._advancedSearch=this.findBlockInside("advanced-search")),this.__base.apply(this,arguments)},_onPageSearch:function(){this.__base.apply(this,arguments),this.cbirIntent&&this.cbirIntent.prepareInputForSearch()}}),function(t){var e=t.event.special.leftclick={setup:function(){t(this).bind("click",e.handler)},teardown:function(){t(this).unbind("click",e.handler)},handler:function(e){e.button||(e.type="leftclick",t.event.dispatch.apply(this,arguments),e.type="click")}}}(jQuery),function(t){var e=t.event.special.leftclick.handler;t.event.special.leftclick.handler=function(t){return 2===t.which||t.metaKey||t.ctrlKey?!0:void e.apply(this,arguments)}}(jQuery),function(t){var e,n=Object.prototype.hasOwnProperty,i=BEM.DOM,s=function(t){try{return t.activeElement}catch(e){}};BEM.DOM.decl("popup",{getDefaultParams:function(){var t={left:15,right:15,top:15,bottom:15};return{directions:[{to:"bottom",axis:"center",tail:{axis:"center"}},{to:"top",axis:"center",tail:{axis:"center"}},{to:"right",axis:"middle",tail:{axis:"middle"}},{to:"left",axis:"middle",tail:{axis:"middle"}}],tail:{width:24.04,height:12.02,offset:t},duration:150}},onSetMod:{js:function(){this._cache={},this._viewport=i.win,this._scope=i.scope,this._channel=BEM.channel("popups"),this._inContainer=!1,this._isParentFixed=!1,this._owner=null,this._userPosition=null,this._parent=null,this._childs=[],this._isShown=!1,this._isHiding=!1,this._positions={},this._currPos={},this._visibilityFactor=null,this._direction=!1,this._directions={};var t=this.getDefaultParams(),e=this.params,n=this._repackDirParams(t.directions),s=e.generateDirections?this._generateDirections:e.directions,r=this._repackDirParams(s);e.tail&&(this.params.tail=this._mergeParams(t.tail,e.tail)),this._order=r.keys.map(function(t){var e=r.directions[t],i=n.directions[t];return i||(i=n.directions[e.to]),this._directions[t]=this._mergeParams(i,e,{tail:this._tailParamsHook}),t},this)},visibility:{visible:function(){this._onShown()},"":function(){this._onHidden()}}},show:function(e){var n;if(e instanceof BEM)n=e.domElem.eq(0);else if(e instanceof t)n=e;else if(!e)return;if(n){this._owner&&n[0]!==this._owner[0]&&this.delMod("visibility"),this._owner=n;var i=this._findParent(n);i&&this.setParent(i)}else this._userPosition=e;return this.setMod("visibility","outside").repaint()},hide:function(){if(this._isHiding)return this;if(this._isShown&&(this._isHiding=!0,this._childs.forEach(function(t){t.hide()}),this.hasMod("animate","yes")&&!this.hasMod("fade-out","no"))){var t=this;return this.beforeHide(function(){t.domElem&&t.delMod("visibility")}),this}return this.delMod("visibility")},toggle:function(t){return this._isShown&&!this._isHiding?this.hide():this.show(t||this._owner)},repaint:function(){this._moveToContainer();var t=this._pickDirection();return this.setMod("to",t.to)._show(this._positions[t.key],this._tailPos&&this._tailPos[t.key]),this},repaintShadowIfNeeded:function(){return this},getCurrPos:function(){return this._currPos},getCurrDirection:function(){return this._direction},setContent:function(t){return i.update(this.elem("content"),t),this._resetDefault(),this._isShown&&this.repaint(),this},isShown:function(){return this._isShown},setParent:function(t){return this._parent=t,this._isParentFixed=t.hasMod("position","fixed"),t.addChild(this),this},addChild:function(t){for(var e=this._childs,n=e.length,i=0;n>i;i++)if(e[i]._uniqId===t._uniqId)return;t.on("hide",function(){this.removeChild(t)},this),e.push(t)},removeChild:function(t){for(var e=this._childs,n=e.length,i=0;n>i;i++)if(e[i]._uniqId===t._uniqId)return void e.splice(i,1)},setSize:function(t){return t&&(this._resetDefault(),this.domElem.css(t),this._isShown&&!this._isHiding&&this.repaint()),this},_show:function(t,e){return this._currPos=t,e&&this.elem("tail").removeAttr("style").css(e),this.domElem.css(t),(!this._isShown||this._isHiding)&&this.hasMod("animate","yes")&&!this.hasMod("fade-in","no")&&this.afterShow(),this._isHiding=!1,this.setMod("visibility","visible"),this},_onShown:function(){this.bindToDoc("keydown",function(t){27===t.which&&0===this._childs.length&&this.hide()}),this._attachRepaintOnResize(),this._bindFocusEvents(),this._attachUnder(),this._isShown=!0,this.hasMod("autoclosable","yes")&&this.afterCurrentEvent(function(){this._enableAutoclosable()}),this.hasMod("adaptive","yes")&&this._enableAdaptive(),this._channel.on("hide",this.hide,this),this.trigger("show")},_onHidden:function(){this.unbindFromDoc("keydown"),this._detachRepaintOnResize(),this._unbindFocusEvents(),this._detachUnder(),this.hasMod("autoclosable","yes")&&this._disableAutoclosable(),this.hasMod("adaptive","yes")&&this._disableAdaptive(),this._cache={},this._isShown=!1,this._isHiding=!1,this._channel.un("hide"),this._returnFocus(),this.trigger("hide")},_attachRepaintOnResize:function(){window.attachEvent&&this.domElem[0].attachEvent("onresize",this.__self._enforcePageRepaint)},_detachRepaintOnResize:function(){window.detachEvent&&this.domElem[0].detachEvent("onresize",this.__self._enforcePageRepaint)},_bindFocusEvents:function(){this._lastFocused=t(s(document)||this._scope);var e=this.__self._getFocusable(this.elem("content"));return this._firstFocusable=e.first(),this._lastFocusable=e.last(),this._skipReturnFocus=!1,0===this._firstFocusable.length?void(this._skipReturnFocus=!0):void this.bindTo(this._lastFocused,"keydown",this._onLastFocusedKeyDown).bindTo(this._firstFocusable,"keydown",this._onFirstFocusableKeyDown).bindTo(this._lastFocusable,"keydown",this._onLastFocusableKeyDown)},_unbindFocusEvents:function(){this.unbindFrom(this._firstFocusable,"keydown"),this.unbindFrom(this._lastFocusable,"keydown"),this.unbindFrom(this._lastFocused,"keydown")},_onLastFocusedKeyDown:function(t){t.ctrlKey||t.altKey||t.metaKey||9===t.which&&(t.preventDefault(),this[t.shiftKey?"_lastFocusable":"_firstFocusable"].focus())},_onFirstFocusableKeyDown:function(t){t.ctrlKey||t.altKey||t.metaKey||t.shiftKey&&9===t.which&&(t.preventDefault(),this._lastFocused.focus())},_onLastFocusableKeyDown:function(t){t.shiftKey||t.ctrlKey||t.altKey||t.metaKey||9===t.which&&(t.preventDefault(),this._lastFocused.focus())},_returnFocus:function(){var t=(this._parent||{})._skipReturnFocus||this._skipReturnFocus;t||this._lastFocused.focus()},_mergeParams:function(t,e,i){var s={};return i||(i={}),t&&"object"==typeof t&&Object.keys(t).forEach(function(e){s[e]=t[e]}),Object.keys(e).forEach(function(r){var o=n.call(i,r)?i[r].call(this,t[r],e[r]):e[r];s[r]=!o||"object"!=typeof o||Array.isArray(o)?o:t[r]?this._mergeParams(t[r],o,i):o},this),s},_tailParamsHook:function(t,e){return e.offset||(e.offset=this.params.tail.offset),"number"==typeof e.offset?{offset:{left:e.offset,top:e.offset}}:e},_generateDirections:function(){if(e)return e;for(var t=[["bottom","top"],["left","right"]],n=[["center","left","right"],["middle","top","bottom"]],i=n,s=t.length,r=[],o=0;s>o;o++)for(var a=t[o],c=a.length,u=0;c>u;u++)for(var l=n[o],h=l.length,d=0;h>d;d++)for(var p=i[o],f=p.length,m=0;f>m;m++)r.push({direction:a[u],axis:l[d],tail:{axis:p[m]}});return e=r,r},_repackDirParams:function(e){var n={},i=[];return("string"==typeof e||t.isPlainObject(e))&&(e=[e]),i=e.map(function(t){if("string"==typeof t){var e=t.split("-");t={to:e[0],tail:{}},e[1]&&(t.axis=e[1]),e[2]&&(t.tail.axis=e[2])}var i=t.to;return n[i]||(n[i]=t),t.axis&&(i+="-"+t.axis),t.key=i,n[i]=t,i},this),{directions:n,keys:i}},setViewport:function(t){return this._viewport=t,this},_pickDirection:function(){var t,e=this._order,n=this.hasMod("adaptive","yes")?e.length:1;for(this._visibilityFactor=0,t=0;n>t;t++){var i=e[t],s=this._directions[i];this._resetPos(i)._pushPos(i,this._calcPos(s))._pushPos(i,this._calcOffsets(s)),this._hasTail()&&this._resetTailPos(i)._pushTailPos(i,this._calcTailPos(s))._pushTailPos(i,this._calcTailOffset(s))._pushPos(i,this._calcOffsetByTail(s)),this._pushPos(i,this._getParentOffset());var r=this._calcVisibilityFactor(s);if((r>this._visibilityFactor||!this._direction)&&(this._visibilityFactor=r,this._direction=this._directions[i],this.size=this.getPlacingSize(),100===r))break}return this._direction},_getParentOffset:function(){var t=this.domElem.offsetParent().offset();return t.left*=-1,t.top*=-1,t},_calcPos:function(t){this._calcPlacingSize(t);var e=this.getOwnerPos(),i=this.getOwnerSize(),s=this.getPlacingSize(),r=t.axis,o=this.params.position||{},a={};switch(t.to){case"bottom":a={top:n.call(o,"top")?o.top:e.top+i.height,left:n.call(o,"left")?o.left:this._calcLeft(r)};break;case"top":a={top:n.call(o,"top")?o.top:e.top-s.height,left:n.call(o,"left")?o.left:this._calcLeft(r)};break;case"left":a={top:n.call(o,"top")?o.top:this._calcTop(r),left:n.call(o,"left")?o.left:e.left-s.width};break;case"right":a={top:n.call(o,"top")?o.top:this._calcTop(r),left:n.call(o,"left")?o.left:e.left+i.width}}return a},_calcTop:function(t){var e=0,n=this.getPlacingSize(),i=this.getOwnerPos(),s=this.getOwnerSize();return"top"===t?e+=i.top:"middle"===t?e+=i.top+s.height/2-n.height/2:"bottom"===t&&(e+=i.top+s.height-n.height),e},_calcLeft:function(t){var e=0,n=this.getPlacingSize(),i=this.getOwnerPos(),s=this.getOwnerSize();return"left"===t?e+=i.left:"center"===t?e+=i.left+s.width/2-n.width/2:"right"===t&&(e+=i.left+s.width-n.width),e},getPlacingSize:function(){return this.getPopupSize()},_calcOffsets:function(t){var e,n=this._cache.offset||(this._cache.offset={}),i=t.key,s=t.offset;if(n[i])return n[i];if(!s)return!1;if(e={left:0,top:0},"number"==typeof s)switch(i){case"left":e.left+=s;break;case"right":e.left-=s;break;case"top":e.top+=s;break;case"bottom":e.top-=s}else s.left&&(e.left+=s.left),s.right&&(e.left-=s.right),s.top&&(e.top+=s.top),s.bottom&&(e.top-=s.bottom);return n[i]=e,e},_hasTail:function(){return 0!==this.elem("tail").length},_moveToContainer:function(t){if(t)this._inContainer=!1;else{if(this._isShown)return;t=this._parent?this._parent.domElem:this._scope}this.domElem.appendTo(t),this._inContainer=!0},_resetPos:function(t){return t?this._positions[t]=null:this._positions={},this},_pushPosTo:function(t,e,n){n!==!1&&("string"==typeof e?this._sum(t[e]||(t[e]={}),n):(n=e,Object.keys(t).forEach(function(e){this._sum(t[e],n)},this)))},_pushPos:function(t,e){return this._pushPosTo(this._positions,t,e),this},_sum:function(t,e){Object.keys(e).forEach(function(n){t[n]=(t[n]||0)+e[n]})},_getSizeOf:function(t){return{height:t.outerHeight(),width:t.outerWidth()}},getOwnerSize:function(){return this._owner?this._cache.ownerSize||(this._cache.ownerSize=this._getSizeOf(this._owner)):{height:0,width:0}},getPopupSize:function(){return this._getSizeOf(this.domElem)},_getPosOf:function(t){return t.offset()||{left:0,top:0}},getOwnerPos:function(){var t;return this._owner&&(t=this._getPosOf(this._owner),"pageYOffset"in window&&(t.top-=window.pageYOffset-(document.documentElement.scrollTop||document.body.scrollTop),t.left-=window.pageXOffset-(document.documentElement.scrollLeft||document.body.scrollLeft))),t||this._userPosition},_calcVisibilityFactor:function(t){var e,n,i=this._viewport,s=this._getSizeOf(i),r=this.getPopupSize(),o=this._positions[t.key],a=this._parent&&this._isParentFixed?this._parent.domElem.offset():{top:0,left:0},c=this.hasMod("position","fixed")?{top:0,left:0}:{top:i.scrollTop(),left:i.scrollLeft()},u=o.top+a.top-c.top,l=o.left+a.left-c.left,h=l+r.width-s.width,d=u+r.height-s.height,p={height:r.height,width:r.width},f=100;return d>0&&(p.height-=d),0>u&&(p.height+=u),0>l&&(p.width+=l),h>0&&(p.width-=h),p.height<0||p.width<0?f=0:(n=Math.abs(p.height*p.width),e=r.height*r.width,e!==n&&(f=n/e*100)),f},_findParent:function(t){return this.findBlockOutside(t,"popup")},destruct:function(){return this._childs.forEach(function(t){BEM.DOM.destruct(t.domElem)}),this.setMod("fade-out","no"),this.hide(),this.__base.apply(this,arguments)},_resetDefault:function(){},_calcPlacingSize:function(){}},{live:function(){this.liveBindTo("close","leftclick tap",function(){this.hide()})},_getFocusable:function(e){var n=t.data(e,"popup-getFocusable-id");n||(n=t.identify(),t.data(e,"popup-getFocusable-id",n)),n='*[data-popup-getFocusable-id="'+n+'"]';var i="a[href], link, ";return Object(t.browser).opera&&t.browser.version<13&&(i=""),e.find(i+'*[tabindex], button, input:not([type="hidden"]), textarea, select, menuitem').filter(function(){var e=t(this),i=!0;return parseInt(e.prop("tabindex"),10)<0||"hidden"===e.css("visibility")?!1:(t(this).parentsUntil(n).each(function(){var e=t(this);return"none"===e.css("display")?i=!1:void 0}),i)})},_enforcePageRepaint:function(){document.body.className+=""}})}(jQuery),BEM.DOM.decl("popup",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this.findBlockOn("share-dropdown")&&(this._isParentFixed=!0)}}}}),BEM.DOM.decl("popup",{onSetMod:{js:function(){this.__base.apply(this,arguments),BEM.blocks["i-global"].param("mobile")&&this.setMod("fade-out","no")},visibility:{visible:function(){this.__base.apply(this,arguments),BEM.blocks["i-keyrouter"].on("esc",this._onEsc,this),BEM.blocks["b-page"].on("touchmove",this._onTouchMove,this)},"":function(){this.__base.apply(this,arguments),BEM.blocks["i-keyrouter"].un("esc",this._onEsc,this),BEM.blocks["b-page"].un("touchmove",this._onTouchMove,this)}}},_onEsc:function(){this.hide()},_onTouchMove:function(t){$(t.target).closest(".popup").length||this.hide()},_pushPos:function(t,e){var n=e.top,i=e.left;return n&&"string"!=typeof n&&(e.top=~~n),i&&(e.left=~~i),this.__base.apply(this,arguments)}}),BEM.DOM.decl("popup",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this.findBlockOn("sizes-popup")&&(this._isParentFixed=!0)}},visibility:{visible:function(){this.__base.apply(this,arguments),this.bindToDoc("dragover",this.hide)},"":function(){this.__base.apply(this,arguments),this.unbindFromDoc("dragover",this.hide)}}}}),BEM.DOM.decl("popup",{onSetMod:{autoclosable:{yes:function(){this._enableAutoclosable()},"":function(){this._disableAutoclosable()}}},_enableAutoclosable:function(){var t=this._under;this.hasMod(t,"type","paranja")&&(t.is("iframe")&&(t=$([t[0].contentWindow,t[0].contentWindow.document])),this.bindTo(t,"leftclick tap",function(t){t.stopPropagation(),this.hide()}),this.bindTo(t,"mousedown",function(){this._skipReturnFocus=!0})),this.bindToDoc("leftclick tap",function(t){if(!this._isRelatedNode($(t.target))){var e=$.Event("outside-click");this.trigger(e,t),e.isDefaultPrevented()||this.hide()}}),this.bindToDoc("mousedown",function(){this._skipReturnFocus=!0})},_disableAutoclosable:function(){this.hasMod(this._under,"type","paranja")&&this.unbindFrom(this._under,"leftclick tap mousedown"),this.unbindFromDoc("leftclick tap mousedown")},_isRelatedNode:function(t){var e=this.containsDomElem(t);if(e||(e=Boolean(this._owner)&&this.containsDomElem.call({domElem:this._owner},t)),e)return!0;var n,i=this._childs.length;for(n=0;i>n;n++)if(this.containsDomElem.call({domElem:this._childs[n].domElem},t))return!0;return!1}}),BEM.DOM.decl({block:"popup",modName:"adaptive",modVal:"yes"},{onSetMod:{adaptive:{yes:function(){this._enableAdaptive()},no:function(){this._disableAdaptive()}},"watch-scroll":{yes:function(){this._watchScroll()},no:function(){this._unwatchScroll()}}},_enableAdaptive:function(){this.afterCurrentEvent(function(){this.domElem&&this.bindToWin("resize",this.onResize)}),this._watchScroll()},_disableAdaptive:function(){this.unbindFromWin("resize")._unwatchScroll()},getScrollEvents:function(){return["scroll"]},_watchScroll:function(){this._owner&&!this.hasMod("watch-scroll","no")&&this.bindTo(this._owner.parents().add(this._viewport),this.getScrollEvents().join(" "),this.onScroll,this)},_unwatchScroll:function(){this._owner&&this.unbindFromDomElem(this._owner.parents().add(this._viewport),this.getScrollEvents().join(" "))},onResize:function(){this._cache={},this._isShown&&!this._isHiding&&this.repaint()},onScroll:function(){this._cache={},this._isShown&&!this._isHiding&&this.repaint()},destruct:function(){this._disableAdaptive(),this.__base.apply(this,arguments)}}),BEM.DOM.decl({block:"popup",modName:"animate",modVal:"yes"},{afterShow:function(){var t=this.getCurrDirection();if(t){var e=t.to,n=this.getCurrPos(),i={opacity:1,top:n.top,left:n.left},s={opacity:0,top:n.top,left:n.left};"bottom"===e?s.top+=10:"top"===e?s.top-=10:"left"===e?s.left-=10:"right"===e&&(s.left+=10),this.domElem.stop(!0).css(s).animate(i,this.params.duration)}},beforeHide:function(t){var e=this.getCurrDirection();if(!e)return t();var n=e.to,i=this.getCurrPos(),s=this.domElem,r={top:i.top,left:i.left,opacity:0};return"bottom"===n?r.top+=10:"top"===n?r.top-=10:"left"===n?r.left-=10:"right"===n&&(r.left+=10),s.stop(!0,!0).animate(r,this.params.duration,function(){t(),s.css("opacity","")})}}),function(){var t=[];BEM.DOM.decl("popup",{onSetMod:{js:function(){this.__base.call(this);var t=this.findElem("under").first();this._underClassAttr=t.attr("class"),this.isDivEnough()?this._under=t:(t.remove(),this._under=null),this._underInPool=!1}},isDivEnough:function(){return!1},_createUnder:function(){return $('<iframe frameBorder="0" tabindex="-1" src="about:blank"/>')},_getUnder:function(){if(this._under)return this._under;var e=t.pop();return e&&(this._underInPool=!1),this._under=e||this._createUnder()},_attachUnder:function(){var t=this._under=this._getUnder();t.attr("class",this._underClassAttr),this.hasMod(t,"type","paranja")?t.detach().insertBefore(this.domElem):t.prependTo(this.domElem)},_detachUnder:function(){var e=this._under;t.push(e.detach()),this._under=null,this._underInPool=!0},destruct:function(){return this._underInPool&&t.pop(),this._under&&this._under.remove(),this.__base.apply(this,arguments)}})}(),BEM.DOM.decl("popup",{isDivEnough:function(){return BEM.blocks["i-global"].param("mobile")}}),BEM.DOM.decl({block:"popup",modName:"position",modVal:"fixed"},{addChild:function(t){this.__base.apply(this,arguments),t.setMod("watch-scroll","no")},_onFirstFocusableKeyDown:function(t){t.ctrlKey||t.altKey||t.metaKey||t.shiftKey&&9===t.which&&(t.preventDefault(),this._lastFocusable.focus())},_onLastFocusableKeyDown:function(t){t.shiftKey||t.ctrlKey||t.altKey||t.metaKey||9===t.which&&(t.preventDefault(),this._firstFocusable.focus())}}),BEM.DOM.decl({block:"popup",modName:"position",modVal:"fixed"},{getOwnerPos:function(){var t=this.__base.apply(this,arguments);if(this._owner){var e=this._viewport;t.top-=e.scrollTop(),t.left-=e.scrollLeft()}return t}}),BEM.DOM.decl("nps",{getDefaultParams:function(){return{timeout:{show:1e4,hide:5e3}}},onSetMod:{js:function(){var t,e=this.params;this.cookie=BEM.blocks["i-cookie"].get(),this.isEqual=this.hasMod("equal","yes"),e.save&&this.cookie.yp(this.hasMod("cbir","yes")?"cnps":"nps",[e.rand,e.status].join(":"),e.expires),this.isClosed()||(this.findBlocks().bindEvents(),t=this.page.getMod("type"),this.hasMod("cbir","yes")?this.isCbirPages("b-page_type_"+t)&&this.show():"search"===t||"seed"===t?this.show():this.location.on("b-page_type_search",this.show,this))},hidden:{yes:function(){this.isClosed()||this.afterCurrentEvent(function(){this.popup.hide()})},"":function(){this.isClosed()||this.hasMod("search","yes")&&this._disable||this.hasMod("cbir","yes")&&this._disable||(this.hasMod("cbir","yes")&&this.isEqual&&this.searchPopup&&(this.searchPopup._disable=!0),this.hasMod("search","yes")&&this.isEqual&&this.cbirPopup&&(this.cbirPopup._disable=!0),this.afterCurrentEvent(function(){this.popup.show(this.popupAnchor)}))}},layout:{view:function(){this.hide()},"":function(){this.show()}}},findBlocks:function(){return this.popupAnchor=this.findBlockOutside("b-page").elem("content"),this.location=BEM.blocks.location.getInstance(),this.popup=this.findBlockOn("popup"),this.list=this.findBlockInside("radio-button"),this.button=this.findBlockInside("button"),this.question=this.elem("text"),this.page=this.findBlockOutside("b-page"),this.cbirPopup=this.page.findBlockInside({block:"nps",modName:"cbir",modVal:"yes"}),this.searchPopup=this.page.findBlockInside({block:"nps",modName:"search",modVal:"yes"}),this},bindEvents:function(){return this.button.on("click",this._onSendClick,this),this.popup.on("hide",this._onPopupHidden,this),this.list.on("change",this._onRadioChange,this),this.location.on("change",this._onPageChange,this),this},destruct:function(){this.__base.apply(this,arguments),this.button.un("click",this._onSendClick,this),this.popup.un("hide",this._onPopupHidden,this),this.list.un("change",this._onRadioChange,this),this.location.un("change",this._onPageChange,this)},_onPageChange:function(t,e){"b-page_type_search"===e.block?this.show():this.hide()},_onRadioChange:function(t,e){this.enableButton(),this.value=e},_onPopupHidden:function(){if(this.hasMod("hidden","yes"))return!1;this.hide();var t=this.getMod("type");return this.hasMod("minimized","yes")?(this.saveStatus("close"),this.hasMod("thanks","yes")||w(null,["/image/new",this.hasMod("cbir","yes")?"cbir":"serp",t,"close"].join("/"))):(this.minimizeNPS(),w(null,["/image/new",this.hasMod("cbir","yes")?"cbir":"serp",t,"small"].join("/")),this.show()),!1},_onSendClick:function(){var t=this.getMod("type");this.hasMod("minimized","yes")?(this.maximizeNPS(),this._isShown&&this.popup.repaint(),w(null,["/image/new",this.hasMod("cbir","yes")?"cbir":"serp",t,"normal"].join("/"))):(w(null,["/image/new",this.hasMod("cbir","yes")?"cbir":"serp",t,"result","p"+this.value].join("/")),this.showThanks())},hide:function(){return this.setMod("hidden","yes")},show:function(){return this.isClosed()?void 0:(this._isShown?this.delMod("hidden"):this.startPopupTimer(),this)},disableButton:function(){return this.button.delMod("focused").setMod("theme","normal").setMod("disabled","yes"),this},enableButton:function(){return this.button.setMod("theme","action").delMod("disabled"),this},initPopup:function(){var t=this.page.getMod("type");return this.hasMod("search","yes")&&"search"!==t?"":this.hasMod("cbir","yes")&&!this.isCbirPages("b-page_type_"+t)?"":(this._isShown=!0,this.hasMod("layout","view")||this.show().countShow(),void(this.hasMod("minimized","yes")?this.minimizeNPS():this.maximizeNPS()))},startPopupTimer:function(){this.location.un("b-page_type_search",this.show,this),setTimeout(this.changeThis(function(){this.initPopup(),this.popup.domElem.css({bottom:-this.domElem.height()+"px"}).animate({bottom:0})}),this.params.timeout.show)},countShow:function(){return this.params.save&&w(null,["/image/new",this.hasMod("cbir","yes")?"cbir":"serp",this.getMod("type"),"show"].join("/")),this},minimizeNPS:function(){var t=this.params.i18n;return this.setMod("minimized","yes").setButtonText(t.answer).setQuestion(t.invite).enableButton().saveStatus("min")},maximizeNPS:function(){var t=this.params.i18n;return this.setMod("minimized","no").setButtonText(t.send).setQuestion(t.question).saveStatus("max"),this.value||this.disableButton(),this},showThanks:function(){var t=this.params;this.popup.hide().setMod("animate","yes"),this.setMod(this.elem("button"),"hidden","yes").setMod("minimized","yes").setMod("thanks","yes").saveStatus("close").setQuestion(t.i18n.thankyou).show(),setTimeout(this.changeThis(this.hide),t.timeout.hide)},setQuestion:function(t){return this.question.text(t),this},setButtonText:function(t){return this.button.elem("text").text(t),this},isClosed:function(){return"close"===this.params.status},saveStatus:function(t){return this.cookie.yp(this.hasMod("cbir","yes")?"cnps":"nps",[this.params.rand,t].join(":")),this.params.status=t,this}}),BEM.DOM.decl({block:"nps",modName:"cbir",modVal:"yes"},{isCbirPages:function(t){var e=["b-page_type_search-by-image","b-page_type_similar","b-page_type_copy"];return _.contains(e,t)},_onPageChange:function(t,e){this.isCbirPages(e.block)?this.show():this.hide()}}),function(){var t;BEM.decl("i-cookie",{defaultExpire:new Date+604800,getDefaultParams:function(){return{yp:{expires:new Date("Tue Jan 1 00:00:00 2038"),domain:".yandex."+BEM.blocks["i-global"].param("tld"),path:"/"}}},ypRead:function(){for(var t,e=$.cookie("yp"),n=e?e.split("#"):[],i=new Date/1e3,s={},r=0,o=n.length;o>r;r++)t=n[r].split("."),t[0]>i&&(s[t[1]]={value:t[2],expires:t[0]});return s},ypWrite:function(t){for(var e=[],n=0,i=Object.keys(t),s=i.length;s>n;n++)e.push([t[i[n]].expires,i[n],t[i[n]].value].join("."));$.cookie("yp",e.join("#"),this.params.yp)},yp:function(t,e,n){var i=this.ypRead(),s=i[t];return 1===arguments.length?s&&s.value:(s||(s={}),s.value=e,s.expires=n||s.expires||this.defaultExpires,i[t]=s,this.ypWrite(i))}},{get:function(){return t||(t=BEM.create("i-cookie"))}})}(),BEM.DOM.decl("button",{onSetMod:{js:function(){var t=this.isDisabled(),e=this.domElem;(this._href=e.attr("href"))&&t&&e.removeAttr("href")},disabled:function(t,e){var n="yes"===e,i=this.domElem;this._href&&(n?i.removeAttr("href"):i.attr("href",this._href)),this.afterCurrentEvent(function(){i.attr("disabled",n)})},pressed:function(t,e){return this.isDisabled()?!1:void this.trigger("yes"===e?"press":"release")}},isDisabled:function(){return this.hasMod("disabled","yes")},url:function(t){return"undefined"==typeof t?this._href:(this._href=t,this.isDisabled()||this.domElem.attr("href",t),this)},_onClick:function(t){this.isDisabled()?t.preventDefault():this.afterCurrentEvent(function(){this.trigger("click")})}},{live:function(){this.liveBindTo("leftclick tap",function(t){this._onClick(t)})}}),BEM.DOM.decl("button",{onSetMod:{js:function(){this.__base.apply(this,arguments)},focused:{yes:function(){return this.isDisabled()?!1:(this.bindToWin("unload",function(){this.delMod("focused")}).bindTo("keydown",this._onKeyDown),this._isControlFocused()||this._getControl().focus(),void this.afterCurrentEvent(function(){this.trigger("focus")}))},"":function(){this.unbindFromWin("unload").unbindFrom("keydown"),this._isControlFocused()&&this._getControl().blur(),this.afterCurrentEvent(function(){this.trigger("blur")})}},disabled:function(t,e){this.__base.apply(this,arguments),"yes"===e&&this.domElem.keyup()},hovered:function(t,e){return this.isDisabled()?!1:void(""===e&&this.delMod("pressed"))},pressed:function(){return this.isDisabled()||this.setMod("focused","yes"),this.__base.apply(this,arguments)}},_getControl:function(){return this.elem("control").length&&this.elem("control")||this.domElem},_isControlFocused:function(){try{return this.containsDomElem($(this.__self.doc[0].activeElement))}catch(t){return!1}},_onKeyDown:function(t){var e=t.keyCode;13!==e&&32!==e||this._keyDowned||(this._keyDowned=!0,this.setMod("pressed","yes").bindTo("keyup",function(){this.delMod("pressed").unbindFrom("keyup"),delete this._keyDowned,32===e&&this.domElem.attr("href")&&(document.location=this.domElem.attr("href"))}))},destruct:function(){this.delMod("focused"),this.__base.apply(this,arguments)}},{live:function(){this.__base.apply(this,arguments);var t={mouseover:{name:"hovered",val:"yes"},mouseout:{name:"hovered"},mousedown:{name:"pressed",val:"yes"},mouseup:{name:"pressed"},focusin:{name:"focused",val:"yes"},focusout:{name:"focused"}},e=$.browser.msie&&"8.0"===$.browser.version;this.liveBindTo("mouseover mouseout mouseup focusin focusout",function(n){var i=t[n.type];this.setMod(i.name,i.val||""),!e||this._href||"mouseup"!==n.type&&"mouseout"!==n.type||this.domElem.height()}).liveBindTo("mousedown",function(e){var n=t[e.type];1===e.which&&this.setMod(n.name,n.val||"")})}}),BEM.DOM.decl("button",{_keyDowned:!0}),function(){function t(){s=!0,setTimeout(setTimeout.bind(window,e))}function e(){s=!1}function n(){i.toggleClass("pointerfocus",s)}if(window.addEventListener){var i=$(document.documentElement),s=!1;addEventListener("mousedown",t,!0),addEventListener("mouseup",t,!0),addEventListener("click",t,!0),addEventListener("onfocusin"in window?"focusin":"focus",n,!0)}}(),function(t,e){t.DOM.decl("radiobox",{onSetMod:{js:function(){var t=this;t._val=t.findElem(t.elem("radio","checked","yes"),"control").val(),t.elem("control").each(function(e,n){var i=[];if(t._isControlFocused($(n))&&i.push("focused"),n.checked&&i.push("checked"),i[0]){var s=t.__self._getRadioByElem($(n));i.forEach(function(e){t.setMod(s,e,"yes")})}})},disabled:{yes:function(){this.setMod(this.elem("radio"),"disabled","yes")},"":function(){this.delMod(this.elem("radio"),"disabled")}}},onElemSetMod:{radio:{focused:{yes:function(t){this.delMod(this.elem("radio","focused","yes"),"focused");var e=this.findElem(t,"control");this._isControlFocused(e)||e.focus(),this.afterCurrentEvent(function(){this.trigger("focus",{current:t})})},"":function(t){this.afterCurrentEvent(function(){this.trigger("blur",{prev:t})})}},checked:{yes:function(t){this._val=this.findElem(t,"control").prop("checked",!0).val();var e=this.elem("radio","checked","yes");this.delMod(e,"checked"),this.trigger("change",{current:t,prev:e})}},hovered:function(t){return!this.isDisabled(t)},disabled:function(t,e,n){t.find(this.buildSelector("control")).prop("disabled","yes"===n)}}},_isControlFocused:function(t){try{return t[0]===this.__self.doc[0].activeElement}catch(e){return!1}},isDisabled:function(t){return this.hasMod(t,"disabled","yes")},val:function(t){if("undefined"==typeof t)return this._val;var e=this;
return this.elem("control").each(function(n,i){return i.value===t?(e.setMod(e.__self._getRadioByElem($(i)),"checked","yes"),!1):void 0}),e},name:function(t){var e=this.elem("control");return arguments.length?(e.attr("name",t),this):e.attr("name")},getCurrent:function(){return this.findElem("radio","checked","yes")},uncheckAll:function(){var t=this.elem("radio","checked","yes");return this.delMod(t,"checked").findElem(t,"control").prop("checked",!1),this._val=e,this.trigger("change",{current:e,prev:t}),this},_onLeftClick:function(t){this.isDisabled(t.data.domElem)||this.setMod(t.data.domElem,"focused","yes")},_onChange:function(t){this.setMod(this.__self._getRadioByElem(t.data.domElem),"checked","yes")}},{live:function(){this.liveBindTo("radio","leftclick tap",function(t){this._onLeftClick(t)}).liveBindTo("control","change",function(t){this._onChange(t)}).liveBindTo("radio","mouseover mouseout",function(t){this.setMod(t.data.domElem,"hovered","mouseover"===t.type?"yes":"")}).liveBindTo("control","focusin focusout",function(t){this.setMod(this.__self._getRadioByElem(t.data.domElem),"focused","focusin"===t.type?"yes":"")})},_getRadioByElem:function(t){return t.closest(this.buildSelector("radio"))}})}(BEM),function(t){t.DOM.decl({block:"radio-button",baseBlock:"radiobox"},{onElemSetMod:{radio:{checked:function(t,e,n){this.__base.apply(this,arguments),this.setMod(t,"pressed",n)},"next-for-pressed":{yes:function(){this.delMod(this.elem("radio","next-for-pressed","yes"),"next-for-pressed")}},pressed:{yes:function(t){this.delMod(this.elem("radio"),"pressed").setMod(t.next(),"next-for-pressed","yes")},"":function(t){this.delMod(t.next(),"next-for-pressed")}}}},_onMouseDown:function(t){var e=t.data.domElem;this.isDisabled(e)||this.hasMod(e,"checked","yes")||(this.setMod(e,"pressed","yes"),this.bindToDoc("mouseup touchend",function(t){this.afterCurrentEvent(function(){var n=this.findElem(e,"control");n.prop("checked")||(e.find(t.target).add(e).length?n.trigger("change").focus():this.delMod(e,"pressed").setMod(this.elem("radio","checked","yes"),"pressed","yes"))}),this.unbindFromDoc("mouseup touchend")}))}},{live:function(){var t=this.__base.apply(this,arguments);return this.liveBindTo("radio","mousedown",function(t){this._onMouseDown(t)}),t}})}(BEM),BEM.DOM.decl("radiobox",null,{live:function(){return this.__base.apply(this,arguments),this.liveBindTo("radio","click",function(t){this._onLeftClick(t),this._onChange(t)}),!1}}),BEM.DOM.decl({block:"radio-button",modName:"breadcrumbs",modVal:"yes"},{_onMouseEvent:function(t){var e=t.type,n=t.data.domElem,i=this.extractElemIndex(n),s=this.elem("radio").length;switch(e){case"mouseover":this.setElemsMod(s,"active","").setElemsMod(s,"checked","").setElemsMod(i,"hovered","yes").setMod(n,"checked","yes").setHint(this.extractHint(n)||this.params.hint);break;case"mouseout":this.selectedIndex||this.setActive(this.selectedIndex),this.setElemsMod(i,"hovered","").setElemsMod(s,"active","").setElemsMod(s,"checked","").setElemsMod(this.selectedIndex,"active","yes").setMod(this.selectedElem,"checked","yes").setHint(this.selectedElem&&this.extractHint(this.selectedElem)||this.params.hint);break;case"click":this.selectedIndex=i,this.selectedElem=n,this.setActive(i).setElemsMod(i,"hovered","").setMod(n,"checked","yes").setHint(this.extractHint(n)||this.params.hint),this.trigger("change",i)}},onElemSetMod:{radio:{checked:{yes:function(){this.delMod(this.elem("radio","checked","yes"),"checked")}}}},extractElemIndex:function(t){return this.elem("radio").index(t)+1},setElemsMod:function(t,e,n){return t&&this.setMod(this.elem("radio").slice(0,t),e,n),this},setActive:function(t){return this.setElemsMod(t,"active","yes")},setHint:function(t){return this.elem("hint").text(t||""),this},extractHint:function(t){return this.elemParams(t).hint}},{live:function(){this.__base.apply(this,arguments),this.liveBindTo("radio","click mouseover mouseout",function(t){this._onMouseEvent(t)})}}),BEM.DOM.decl("timing",{onSetMod:{js:function(){this.data={},this.visibilityState={visible:1,hidden:2,prerender:3}[this.getVisibilityState()],this.send()}},send:function(){this.getData().then(this.changeThis(function(t){this._send(this.buildCounterParams(this.normalizeMetrics(this.buildMetrics(t))))}))},_send:function(t){t&&(document.createElement("IMG").src=[this.getClickUrl(),this._serializeParams(t),"*"].join("/"))},getData:function(){var t=this._timing=(window.performance||{}).timing;if(!t||!t.navigationStart||t.navigationStart<+new Date-18e5)return $.Deferred().reject().promise();var e=this.data;return $.when.apply($,this.getDataList()).pipe(function(){return e})},buildMetrics:function(){var t=this._timing,e={1036:[t.domainLookupStart,t.navigationStart],1037:[t.domainLookupEnd,t.domainLookupStart],1038:[t.connectEnd,t.connectStart],1039:[t.responseStart,t.connectEnd],1040:[t.responseEnd,t.responseStart],1040.906:[t.responseEnd,t.domainLookupStart],1310.1309:[t.domContentLoadedEventEnd,t.domContentLoadedEventStart],1310.1007:[t.domContentLoadedEventStart,t.responseStart]},n=this.data.firstPaintTime;n&&n>0&&(e[1041]=[n,t.responseStart],e[1041.906]=[n,t.domainLookupStart]);var i=t.secureConnectionStart;i&&i>0&&(e[1383]=[t.requestStart,i]);var s=window.performance.navigation;return s&&(s.redirectCount&&(e[1384.1385]=s.redirectCount),(1==s.type||2==s.type)&&(e[770.76]=s.type)),this.visibilityState&&(e[1484]=this.visibilityState),e},normalizeMetrics:function(t){var e=this._timing.navigationStart;return $.each(t,function(n,i){if($.isArray(i)){if(i[0]<i[1]||i[1]<e)return t=!1;t[n]=i=i[0]-i[1]}return 0>i?t=!1:void 0}),t},buildCounterParams:function(t){if(t){var e=this.getCounterParams();return e.vars=$.extend(t,this.params.vars),e.vars[1042]=encodeURIComponent(navigator.userAgent),e}},getDataList:function(){if(2==this.visibilityState||3==this.visibilityState)return[];var t,e;this._timing.msFirstPaint&&(t=this._timing,e="msFirstPaint"),this.withLoadTimes(function(n){t=n,e="firstPaintTime"});var n=this,i=[];return t&&i.push(this.promiseProperty(t,e).then(function(t){"firstPaintTime"===e&&(t*=1e3),n.data.firstPaintTime=Math.floor(t)})),i},promiseProperty:function(t,e,n){var i=this.channel("sys"),s=$.Deferred(),r=function(){var i=$.isFunction(t)?t():t;return i&&i[e]?void((n?n(i[e]):i[e]>0)&&s.resolve(i[e],i)):s.reject("Property does not exist")};return i.on("tick",r),s.always(function(){i.un("tick",r)}),s.promise()},withLoadTimes:function(t){var e=(window.chrome||{}).loadTimes;return $.isFunction(e)&&t&&t.call(this,e),this},getCounterParams:function(){return{dtype:"stred",pid:1,cid:72202,path:"690.1033"}},getVisibilityState:function(){return document.visibilityState||document.webkitVisibilityState||document.msVisibilityState},getClickUrl:function(){var t=this.params.clckHost;if(!t){var e=location.hostname.match(/^(?:[-\w]+\.)*(yandex(?:.[a-z]+)+)$/i);t=(e?e[1]:"yandex.ru")+"/clck"}return"//"+t+"/click"},_flatten:function(t,e){var n=[];return e=e||"=",$.each(t,function(t,i){n.push(t+e+i)}),n},_serializeParams:function(t){var e=this;return $.each(t,function(n,i){$.isPlainObject(i)&&(t[n]=e._flatten(i).join(","))}),this._flatten(t).join("/")}}),BEM.DOM.decl("timing",{speedParams:{1036:"Время ожидания начала DNS lookup (wait)",1037:"DNS lookup (dns)",1038:"TCP handshake (tcp)",1383:"Время установки HTTPS подключения (ssl)",1039:"Время до получения первого байта (ttfb)",1040:"Время скачивания HTML (html)",1040.906:"Время от DNS Lookup до окончания скачивания HTML (html-total)",1310.1007:"Время скачивания и парсинга html (dom-loaded)",1310.1309:"Время подготовки DOM (применение стилей) DOMContentLoaded (dom-init)",1041:"Время от начала скачивания HTML до первой отрисовки (ttfp)",1041.906:"Время от DNS Lookup до первой отрисовки (ttfp-total)",628.1309:"Время инициализации блоков i-bem (js-init)"},restParams:{1384.1385:"Происходил ли redirect (redirect-count)",770.76:"Способ перехода на страницу (nav-type)",143:"Страница (page)",1042:"User-agent (ua)"},buildCounterParams:function(){var t=this.__base.apply(this,arguments),e=encodeURIComponent(BEM.blocks["i-global"].param("serpid")||this.params.reqid);if(t)return t.reqid=e,t.serpid=e,t},getDataList:function(){var t=this.__base.apply(this,arguments);if(this._isBemProfilerEnabled()){var e=$.Deferred();setTimeout(function(){e.resolve(BEM.profiler("__total").time)},4e3),e.then(function(t){this.data.ibemInitTime=t}.bind(this)),t.push(e)}return t},buildMetrics:function(t){var e=this.__base.apply(this,arguments);return this._isBemProfilerEnabled()&&(e[628.1309]=t.ibemInitTime),e},_isBemProfilerEnabled:function(){return _.isFunction(BEM.profiler)},_send:function(t){if(BEM.blocks["i-global"].param("counterDebug")){var e=_.cloneDeep(t).vars;console.info("RUM speed:"),console.table(_.map(e,function(t,e){return this.speedParams[e]?{Blockstat:e,"Характеристика":this.speedParams[e],"Значение, мс":t}:void 0},this)),console.info("RUM etc.:"),console.table(_.map(e,function(t,e){return this.restParams[e]?{Blockstat:e,"Характеристика":this.restParams[e],"Значение":t}:void 0},this))}this.__base.apply(this,arguments)}}),BEM.DOM.decl("ajax-perf",{errors:{UNKNOWN_ERROR:-1,SERVER_TIMEOUT:1,CLIENT_TIMEOUT:2,ABORT:3,PARSE_ERROR:4,JS_ERROR:5,HTTP_ERROR:6,HANDLED_ERROR:7},onSetMod:{js:function(){this._requests={},this._stateChange=0,this._bindEvents()}},_bindEvents:function(){var t=this;BEM.blocks.history.getInstance().on("statechange",function(){t._stateChange=+new Date}),BEM.channel("main").on("updateStart",function(){t._render=+new Date}).on("updateStop",function(){t._render&&(t._render=+new Date-t._render)}),this.bindToDoc({ajaxSend:this._onSend,ajaxError:this._onError,ajaxSuccess:this._onSuccess,ajaxComplete:this._onComplete})},_getRequestData:function(t){return this._requests[$.identify(t)]},_onSend:function(t,e,n){this.filterRequest(n)&&(this._requests[$.identify(e)]={ajaxSend:+new Date,stateChange:this._stateChange})},_onSuccess:function(t,e,n,i){if(i&&i.error){var s=this._getRequestData(e);s&&(s.ajaxError=+new Date,s.ajaxErrorType=this.errors.HANDLED_ERROR)}},_onError:function(t,e,n,i){var s=this._getRequestData(e);s&&(s.ajaxError=+new Date,s.ajaxErrorType=this._getErrorType(e,i))},_onComplete:function(t,e,n){var i=this._getRequestData(e);if(i){i.ajaxComplete=+new Date;var s=this._buildMetrics(i),r=n.url;this._hasResourceTiming()&&!i.ajaxError?this.afterCurrentEvent(function(){s=$.extend(s,this._buildMetricsForUrl(r)),this._send(s,r)}):this._send(s,r),delete this._requests[$.identify(e)]}},_getErrorType:function(t,e){var n=this.errors;if(0===t.status&&"timeout"===t.statusText)return n.SERVER_TIMEOUT;switch(e){case"timeout":return n.CLIENT_TIMEOUT;case"canceled":case"abort":return n.ABORT;case"parsererror":return n.PARSE_ERROR;default:if(e instanceof Error)return n.JS_ERROR}return 200!==t.status&&304!==t.status?n.HTTP_ERROR:n.UNKNOWN_ERROR},filterRequest:function(t){var e=BEM.blocks.uri.parse(t.url),n=e.queryParams;return 0===e.path().indexOf("/yandsearch")&&n.callback&&!(n.rpt||n.filter)},_hasResourceTiming:function(){return!window.externalHost&&window.performance&&$.isFunction(window.performance.getEntriesByName)},_buildMetrics:function(t){var e={1201.906:(t.ajaxError||t.ajaxComplete)-t.ajaxSend};return t.ajaxError&&(e["1201.1030"]=t.ajaxErrorType),t.stateChange&&(e[1201.789]=t.ajaxSend-t.stateChange),this._render&&(e["1201.1310"]=this._render,this._render=0),e},_buildMetricsForUrl:function(t){t=this._getFullUrl(t);var e,n={},i=performance.getEntriesByName(t);return i.length&&(i=i[0],e=i.domainLookupStart-i.fetchStart,i.connectEnd===i.fetchStart&&(e=i.requestStart-i.connectEnd),n={1036:e,1037:i.domainLookupEnd-i.domainLookupStart,1038:i.connectEnd-i.connectStart,1039:i.responseStart-i.connectEnd,1040:i.responseEnd-i.responseStart,1040.906:i.responseEnd-i.domainLookupStart}),n},_getFullUrl:function(t){return t.indexOf("//")<0&&(t=location.protocol+"//"+location.host+location.pathname+t),t},getClickUrl:function(){var t=this.params.clckHost;if(!t){var e=location.hostname.match(/^(?:[-\w]+\.)*(yandex(?:.[a-z]+)+)$/i);t=(e?e[1]:"yandex.ru")+"/clck"}return"//"+t+"/click"},getCounterParams:function(){return{reqid:encodeURIComponent(BEM.blocks["i-global"].param("reqid")),dtype:"stred",pid:1,cid:72202,path:"690.1201"}},buildCounterParams:function(t){var e=this.getCounterParams();return e.vars=$.extend(t,this.params.vars),e.vars[1042]=encodeURIComponent(navigator.userAgent),e},_send:function(t,e){if(t=this._normalizeMetrics(t)){t=this.buildCounterParams(t);var n=[this.getClickUrl(),this._serializeParams(t),"*"].join("/");t.vars["1201.1030"]&&(n+=encodeURIComponent(e)),document.createElement("IMG").src=n}},_normalizeMetrics:function(t){return $.each(t,function(e,n){return isNaN(n)||0>n?t=!1:void(t&&(t[e]=parseInt(n,10)))}),t},_flatten:function(t,e,n){return e=e||"=",$.map(t,function(t,n){return n+e+t}).join(n||",")},_serializeParams:function(t){t=$.extend({},t);var e=this;return $.each(t,function(n,i){$.isPlainObject(i)&&(t[n]=e._flatten(i))}),this._flatten(t,"=","/")}}),BEM.DOM.decl("ajax-perf",{_getFullUrl:function(t){return t.indexOf("//")<0&&(t=location.protocol+"//"+location.host+t),t},filterRequest:function(t){var e=t&&t.url,n=BEM.blocks.location.getInstance(),i=BEM.blocks.uri,s={url:e,path:i.getPath(i.clearHashSymbol(e)),params:i.parseParams(e)};return"b-page_type_search"===n.detectBlock(s)&&e.indexOf("serp-list_infinite_yes")>-1},buildCounterParams:function(){var t=this.__base.apply(this,arguments);return t.reqid=encodeURIComponent(this.__self._reqid),t.serpid=encodeURIComponent(BEM.blocks["i-global"].param("serpid")),t},_send:function(t){BEM.blocks.counter.debug("ajax-perf",this._normalizeMetrics(t)),this.__base.apply(this,arguments)}},{setReqid:function(t){this._reqid=t}}),BEM.DOM.decl("more",{onSetMod:{js:function(){this.__base.apply(this,arguments),this._spin=this.findBlockInside("spinner")||this.findBlockInside("spin"),this._button=this.findBlockInside("button"),this.bindEvents()},loading:{yes:function(){this.hideButton(),this._spin.setMod("progress","yes")},"":function(){this._spin.delMod("progress")}},disabled:{yes:function(){this.hideButton()}}},bindEvents:function(){return this.on("click",this._onClick),this},_onButtonClick:function(t){t.preventDefault(),this.trigger("click")},_onClick:function(){this.setMod("loading","yes")},showButton:function(){return this._spin.hasMod("progress")&&this._spin.delMod("progress"),this.delMod(this.elem("button"),"hidden"),this},hideButton:function(){return this.setMod(this.elem("button"),"hidden","yes"),this},url:function(t){return"undefined"!=typeof t?(this.elem("button").attr("href",t),this.params.url=t,this):this.elem("button").attr("href")}}),BEM.DOM.decl("more",{onSetMod:{js:function(){this.__base.apply(this,arguments),BEM.blocks["serp-controller"].on("listOut",this._onListOut,this)}},destruct:function(){this.__base.apply(this,arguments),BEM.blocks["serp-controller"].un("listOut",this._onListOut,this)},_onListOut:function(t,e){var n=this.hasMod("direction","next");"left"!==e&&"up"!==e||n||this.trigger("click"),"right"!==e&&"down"!==e||!n||this.trigger("click")},bindEvents:function(){return this.__base.apply(this,arguments),this.bindTo("button","click",this._onButtonClick),this}}),BEM.DOM.decl("more",{onSetMod:{js:function(){this.__base.apply(this,arguments),BEM.blocks["pane2-controller"].on("listOut",this._onListOut,this)}},destruct:function(){BEM.blocks["pane2-controller"].un("listOut",this._onListOut,this),this.__base.apply(this,arguments)}}),BEM.DOM.decl({name:"button",modName:"pseudo",modVal:"yes"},{_onClick:function(t){this.__base.apply(this,arguments),this._href&&t.preventDefault()}}),BEM.DOM.decl({block:"more",modName:"direction",modVal:"next"},{onSetMod:{js:function(){this.__base.apply(this,arguments),BEM.blocks["i-keyrouter"].on("special:right pagedown space",this._onLoadNextPage,this)}},destruct:function(){this.__base.apply(this,arguments),BEM.blocks["i-keyrouter"].un("special:right, pagedown space",this._onLoadNextPage,this)},_onLoadNextPage:function(){this._isEndOfPage()&&this.trigger("click")},_isEndOfPage:function(){return window.pageYOffset+window.innerHeight>=this.__self.doc.height()}}),BEM.DOM.decl({block:"more",modName:"direction",modVal:"next"},{onSetMod:{js:function(){this.__base.apply(this,arguments),BEM.blocks["b-page"].on("scroll",this._onScroll,this)}},destruct:function(){this.__base.apply(this,arguments),BEM.blocks["b-page"].un("scroll",this._onScroll,this)},_onScroll:function(){if(this.hasMod("loading","yes")){var t,e=window.pageYOffset+window.innerHeight,n=this.__self.doc.height(),i=this._spin.hasMod("position","fixed"),s=160;e>n||(t=this.domElem.offset().top,e-t>=s?i||this.setSpinPosition("fixed"):i&&this.setSpinPosition(""))}},_onClick:function(){this.hasMod("last","yes")&&this.setSpinPosition(""),this.__base.apply(this,arguments)},setSpinPosition:function(t){var e="";"fixed"===t&&(e=this.domElem.offset().left+this.domElem.width()/2),this._spin.domElem.css("left",e),this._spin.setMod("position",t)}}),BEM.DOM.decl("serp-controller",{_viewParams:[],onSetMod:{js:function(){this.__self.instance=this,this.findBlocks()._setPageMod().syncState()},infinite:{"":function(){this.disableInfiniteLoad()}}},destruct:function(){this.__self.instance=null,this.unbindEvents(),this.__base.apply(this,arguments)},findBlocks:function(){return this.page=this.findBlockOutside("b-page"),this.header=this.page.findBlockInside("header"),this.layout=this.page.findBlockInside("page-layout"),this.footer=this.page.findBlockInside("footer"),this.location=BEM.blocks.location.getInstance(),this},bindEvents:function(){return BEM.blocks.more.on("click",this._onMoreClick,this),BEM.blocks["b-page"].on("change",this._onPageChanged,this).on("resize",this._onPageResized,this).on("contentLoaded",this._onContentLoaded,this),BEM.blocks["serp-item"].on(this.domElem,"clicked",this._onItemClicked,this),this},unbindEvents:function(){return BEM.blocks.more.un("click",this._onMoreClick,this),BEM.blocks["b-page"].un("change",this._onPageChanged).un("resize",this._onPageResized).un("contentLoaded",this._onContentLoaded),BEM.blocks["serp-item"].un(this.domElem,"clicked",this._onItemClicked,this),this},_onPageChanged:function(){this._setPageMod().syncState(),c&&BEM.blocks["ajax-perf"].setReqid(c.getReqId()),this.__base.apply(this,arguments)},_setPageMod:function(){return this.setMod("page",this.page.getMod("type")),this},_onPageResized:function(){},_onMoreClick:function(t){var e=t.block.getMod("direction");this.hasMod("loading","yes")||(this.load(e),"prev"===e&&this.location.change({url:t.block.params.url,history:!1,trigger:!1}))},syncState:function(){this.unbindEvents().bindEvents(),this.competitors=this.page.findBlockInside("competitors"),this.loadInitialItem(),this.__base.apply(this,arguments)},showFooter:function(){return this.footer&&this.footer.show(),this.toggleCompetitors(),this},toggleCompetitors:function(){return BEM.blocks["i-global"].param("isPumpkin")?this:(this.competitors&&this.competitors.domElem&&this.competitors.setMod("visibility",BEM.blocks["i-global"].param("query")?"":"hidden"),this)},hideFooter:function(t){return this.footer&&(t?this.footer.transparent():this.footer.hide()),this.competitors&&this.competitors.setMod("visibility",t?"transparent":"hidden"),this},findMore:function(t){var e="_more"+t,n=this[e];return n&&n.domElem||(this[e]=this.page.findBlockInside({block:"more",modName:"direction",modVal:t})),this[e]},checkListOut:function(t){var e=t.params.pos,n=this.changeThis(this.getStraightItem||this.getNearItem),i=n(t,1),s=!!this.getItemByPos(+e+5).length;return i&&s||this.trigger("listOut","right"),this},addReqId:function(t){return t&&(t.params.reqid=c.getReqId(t.domElem)||!1),this},delViewParams:function(t){return this.location.change({url:BEM.blocks.uri.delParams(location.href,t||this._viewParams),trigger:!1,history:!1}),this}},{get:function(){return this.instance}}),BEM.DOM.decl("serp-controller",{syncState:function(){this.__base.apply(this,arguments);var t=this.findBlockInside("navigation");"search"===this.getMod("page")&&t&&t.reflow()}}),BEM.DOM.decl("serp-controller",{onSetMod:{loading:{yes:function(){this.trigger("loading")}},js:function(){this.__base.apply(this,arguments),this.params.cacheMore&&this.setMod("cached-more","yes"),this._setPageMod()}},syncState:function(){return this.hasMod("page","search")&&(this.relatedBottom=this.findBlockInside({block:"related",modName:"position",modVal:"bottom"})),this.__base.apply(this,arguments)},_setPageMod:function(){var t="similar"===this.page.getMod("type"),e=this._viewParams.indexOf("rpt");return t?(e>-1&&this._viewParams.splice(e,1),this.setMod("page","search")):(-1===e&&this._viewParams.push("rpt"),this.setMod("page",this.page.getMod("type")))},showFooter:function(){return this.hasMod("page","search")&&this.relatedBottom&&this.relatedBottom.show(),this.__base.apply(this,arguments)},hideFooter:function(){return this.hasMod("page","search")&&this.relatedBottom&&this.relatedBottom.hide(),this.__base.apply(this,arguments)},_getSerpList:function(){return this._serpList||(this._serpList=this.findBlockInside("serp-list"))},_getPane2Api:function(){return this._pane2api||(this._pane2api=this.findBlockInside("pane2-api"))},getScrollPagesCount:function(){return this.params.count}}),BEM.DOM.decl("serp-controller",{_req:{},destruct:function(){this._clearRequestStack(),this.__base.apply(this,arguments)},_clearRequestStack:function(){return _.forOwn(this._req,function(t){t.abort()}),this._req={},this},syncState:function(){this._clearRequestStack(),this.delMod("loading"),this.__base.apply(this,arguments)},getRequest:function(t,e){var n={url:BEM.blocks.uri.getPath(t),ctx:this,cache:!0};return _.assign(n,e),BEM.create("i-request_type_bem",n)},load:function(t,e){this._loadPage(t,e)&&this._setLoading(t)},_setLoading:function(t){return this.setMod("loading","yes").findMore(t).setMod("loading","yes")},_loadPage:function(t,e){var n=this.params[t+"PageUrl"],i=BEM.blocks.uri.getFlatParams(n);return n?(e=_.assign(e||{},{direction:t}),_.assign(i,this.__self.getUrlRequestParams()),this._sendRequest(i,e),!0):!1},_sendRequest:function(t,e){var n=this.getRequest(this.params[e.direction+"PageUrl"],e);this._req[t.p]=n,this.setRequestBlocks(n,e),n.get(t,this._onAjaxSuccess)},_onAjaxSuccess:$.noop,setRequestBlocks:function(t,e){var n=this,i=e.direction;return t.block("serp-controller",function(t){n._onSerpControllerLoaded(t,i)}).block("serp-list_infinite_yes",function(t){n._onListLoaded(t,i)}).block("more_direction_"+i,this._onMoreDataLoaded),this},_onSerpControllerLoaded:function(t,e){this.params[e+"PageUrl"]=t.params[e+"PageUrl"]},_onContentLoaded:function(){var t=this.findMore("next"),e=t&&t.params.visible;e||this.afterCurrentEvent(this.showFooter)},_onListLoaded:$.noop,_onMoreDataLoaded:function(t){var e=t.params.direction,n=this.findMore(e),i=t.params.visible;n&&(this.delMod("loading"),n.url(t.params.url).delMod("loading").setMod("disabled",i?"":"yes").setMod("hidden",i?"":"yes"),this["_onMoreDataLoaded"+e](t,n))},_onMoreDataLoadednext:function(t,e){var n=t.params.visible,i=this.getListCount()%this.params.count===0;e.setMod("last",i?"yes":"no"),this.hideFooter(),i&&n&&(e.showButton(),this.showFooter()),n||this.showFooter()},_onMoreDataLoadedprev:function(t,e){t.params.visible&&e.showButton()}},{getUrlRequestParams:function(){return{serpid:BEM.blocks["i-global"].param("serpid")}}}),BEM.DOM.decl("serp-controller",{setRequestBlocks:function(t){return this.__base.apply(this,arguments),t.block("gallery__items:ajax",this._onGalleryLoaded),this},_onListLoaded:function(t,e){this.__base.apply(this,arguments),this._getSerpList()&&this._getSerpList().addSerpItems(t,e)},_onGalleryLoaded:function(t){window.inNextFrame(function(){this.trigger("galleryLoaded",t)},this)},_onContentLoaded:function(){this.__base.apply(this,arguments),this._serpList=void 0,this.setMod("height",this._isFullHeightAllowed()?"full":"")},_isFullHeightAllowed:function(){var t=this.hasMod("page","search"),e=this.findMore("next"),n=e&&e.params.visible;return!BEM.blocks["i-global"].param("showRelevance")&&!BEM.blocks["i-global"].param("mobile")&&!BEM.blocks["i-global"].param("isOldBrowser")&&t&&n}},{getUrlRequestParams:function(){var t=this.__base.apply(this,arguments);return _.assign(t,{uinfo:BEM.blocks["i-userinfo"].get().getUserInfo()})}}),BEM.DOM.decl("serp-controller",{deviation:5,itemSelector:".serp-item",getBlockByDirection:function(t){var e,n=this.getCurrentItem(),i=n&&n.params.pos;if(n)return i>=0&&"left"===t?e=this.getNearItem(n,-1):"right"===t&&(e=this.getNearItem(n,1)),e&&e.length?e.bem("serp-item"):void 0},getNearItem:function(t,e){return this.getNearItemBySibling(t,e)||this.getNearItemByIdx(t,e)||this.getNearItemByPos(t,e)},getNearItemBySibling:function(t,e){var n=t.domElem[e>0?"next":"prev"](this.itemSelector);return n.length&&n},getNearItemByPos:function(t,e){for(var n=[],i=t.params.pos,s=i;0===n.length&&Math.abs(i-s)<this.deviation;)s+=e,n=this.getItemByPos(s);return n.length&&n},getNearItemByIdx:function(t,e){var n=t.domElem.index(this.itemSelector)+e,i=n>=0?$(this.itemSelector).eq(n):$([]);return i.length&&i},getStraightItem:function(t,e){var n,i,s,r,o,a,c,u,l=t.domElem,h=l.offset(),d=0,p=0;for(0===h.left&&(l=this.getVisibleNearItem(l,-1),h=l.offset()),i=~~(h.left+l.width()/2),s=h.top,r=this.getVisibleNearItem(l,e),o=r&&r.offset();r&&30>=d&&(d++,!(o.top!==s&&(s=o.top,p++,p>2)));){if(a=i-o.left,c=o.left+r.width()-i,u=Math.min(Math.abs(a),Math.abs(c)),a>=0&&c>=0||7>u){n=r;break}r=this.getVisibleNearItem(r,e),o=r&&r.offset()}return n},getVisibleNearItem:function(t,e){for(var n=this.getNearItem(t.bem("serp-item"),e);n&&n.hasClass("serp-item_extra_yes");)n=this.getNearItem(n.bem("serp-item"),e);return n},getItemByPos:function(t){return $(".serp-item_pos_"+t+":eq(0)")},getItemById:function(t){var e=$("#"+t);return e.length?e.bem("serp-item"):void 0},selectItem:function(t){return t.setMod("selected","yes"),this},getCurrentItem:function(){return BEM.blocks["serp-item"].getCurrent()},getPrevItem:function(){return BEM.blocks["serp-item"].getPrev()},selectCurrentItem:function(){var t=this.getCurrentItem();return t&&this.selectItem(t),this},unselectCurrentItem:function(){return BEM.blocks["serp-item"].delSelected(),this}}),BEM.DOM.decl("serp-controller",{getDefaultParams:function(){var t=this.__base.apply(this,arguments);return t.blinkTime=1e3,t},loadInitialItem:function(){},blinkCurrentItem:function(){var t=this.getCurrentItem(),e=this.params.isDarkParanja;return t&&(t.setMod("blink",e?"dark":"light"),setTimeout(function(){t&&t.domElem&&t.delMod("blink")},this.params.blinkTime)),this}}),BEM.DOM.decl({block:"serp-controller",modName:"infinite",modVal:"yes"},{offset:{"default":700,serp:700,view:2e3},syncState:function(){return this.__base.apply(this,arguments),this.updateInfiniteLoadState(!0),this},unbindEvents:function(){return this.__base.apply(this,arguments),this.disableInfiniteLoad(),this},enableInfiniteLoad:function(){var t=this.findMore("next");t&&t.setMod("disabled","yes"),BEM.blocks["b-page"].on("scroll resize",this.tryLoad,this)},disableInfiniteLoad:function(){var t=this.findMore("next");t&&t.delMod("disabled"),BEM.blocks["b-page"].un("scroll resize",this.tryLoad,this)},updateInfiniteLoadState:function(){this.needMore()?(new window.rafQueue).add(this.enableInfiniteLoad,this).add(this.tryLoad,this).run():(new window.rafQueue).add(this.disableInfiniteLoad,this).add(this.toggleCompetitors,this).run()},getListCount:function(){return this.findElem("list").length},_onMoreDataLoaded:function(t){this.__base.apply(this,arguments),"next"===t.params.direction&&this.updateInfiniteLoadState()},tryLoad:function(){(new window.rafQueue).add(function(){!this.hasMod("loading","yes")&&this._isEndOfPage()&&(this.disableInfiniteLoad(),this.load("next"))}.bind(this)).run()},_isEndOfPage:function(){var t,e,n=window.pageYOffset+window.innerHeight,i=this.findMore("next");return i?(t=i.domElem.offset().top,e=this.offset[this.layout.getMod("layout")||"default"],n+e>=t):!1},needMore:function(){return this.getListCount()%this.params.count!==0}}),BEM.DOM.decl({block:"serp-controller",modName:"infinite",modVal:"yes"},{getListCount:function(){var t=this._getSerpList();return t?t.getPagesCount():0},_isEndOfPage:function(){return this.page.hasMod("fullscreen","yes")?!1:this.__base.apply(this,arguments)},needMore:function(){return this.page.hasMod("fullscreen","yes")?!0:this.hasMod("page","index")?!1:this.__base.apply(this,arguments)}}),BEM.DOM.decl({block:"serp-controller",modName:"page",modVal:"index"},{syncState:function(){return this.showFooter(),this.__base.apply(this,arguments)},_onItemClicked:function(t,e){this.location.change({block:"b-page_type_search",url:e.params.detail_url},t)}}),BEM.DOM.decl({block:"serp-controller",modName:"page",modVal:"search"},{syncState:function(){return this.__self._removedThumbs&&this.__self._removedThumbs.empty(),this.__self._removedGalleryThumbs&&this.__self._removedGalleryThumbs.empty(),this.__base.apply(this,arguments)},getLastPage:function(){return this._getSerpList().getLastPageNumber()}}),BEM.DOM.decl("navigation-controller",{onSetMod:{js:function(){this.__self.instance=this,this.serp=this.findBlockOn("serp-controller"),this.page=this.findBlockOutside("b-page"),this.bindEvents()}},bindEvents:function(){},goTo:function(t,e,n){var i=this.serp.getBlockByDirection(t);return i?(i.click(n||"keyboard",t),e&&this.hasMod("scrollable","yes")&&this.scroll(t),!0):(this.serp.trigger("listOut",t),!1)}},{get:function(){return this.instance}}),BEM.DOM.decl("navigation-controller",{ROW_HEIGHT:BEM.blocks["i-global"].getFlag("thumb_size")||190,scroll:function(t){return"left"===t||"up"===t?this.tryScrollTop():("right"===t||"down"===t)&&this.tryScrollBottom(),this},tryScrollBottom:function(){var t=this.__self.win,e=t.height(),n=t.scrollTop()+e,i=this.getOffset(),s=i+this.ROW_HEIGHT,r=n-s;(r<this.ROW_HEIGHT||r>e)&&this.page.scrollTo(s+this.ROW_HEIGHT-e,200)},tryScrollTop:function(){var t=this.__self.win,e=this.getOffset(),n=this.page._headerHeight+9,i=e-t.scrollTop();(i<this.ROW_HEIGHT||i>t.height())&&this.page.scrollTo(e-this.ROW_HEIGHT-n,200)},getOffset:function(){var t=BEM.blocks["serp-item"].getCurrent();return t?t.domElem.offset().top:0}}),function(){for(var t=0,e=["ms","moz","webkit","o"],n=0;n<e.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[e[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[n]+"CancelAnimationFrame"]||window[e[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e){var n=+new Date,i=Math.max(0,16-(n-t)),s=setTimeout(function(){e(n+i)},i);return t=n+i,s}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)}),window.rafQueue=function(){var t=[];this.add=function(e,n){return _.isArray(e)||(e=[e]),e.forEach(function(e){var i;_.isPlainObject(e)&&(e=e.fn,i=e.ctx),t.push({fn:e,ctx:i||n})}.bind(this)),this},this.run=function(){var e,n=window.requestAnimationFrame,i=function(){0!==t.length&&(e=t.shift(),e.ctx?e.fn.call(e.ctx):e.fn(),n(i))};n(function(){n(i)})}},window.inNextFrame=function(t,e){window.requestAnimationFrame(function(){window.requestAnimationFrame(function(){e?t.call(e):t()})})}}(),BEM.DOM.decl({block:"serp-controller",modName:"navigation",modVal:"yes"},{extraScroll:0,isInitialScrollDone:!1,findBlocks:function(){return this.navigation=this.findBlockOn("navigation-controller"),this.__base.apply(this,arguments)},bindEvents:function(){return this.params.item&&this.params.item.selected&&this.bindToWin("load scroll",this.initialScroll),this.__base.apply(this,arguments)},initialScroll:function(){this.isInitialScrollDone||this.initialScrollToSelected(),this.unbindFromWin("load scroll",this.initialScroll),this.location.un("b-page_type_search",this.initialScroll,this),this.isInitialScrollDone=!0},needScrollTo:function(t){return _.isFunction(this.isViewLayout)&&this.isViewLayout()||t.offset().top>.7*this.__self.win.height()
},initialScrollToSelected:function(){var t,e,n=this.getCurrentItem();n&&(t=n.domElem,e=this.needScrollTo(t)?t:this.__self.win.scrollTop(),this.page.scrollTo(e,950,this.extraScroll))}}),BEM.DOM.decl({block:"serp-controller",modName:"navigation",modVal:"yes"},{extraScroll:150,initialScroll:function(){"wiz"===BEM.blocks.uri.getParamValue("source")&&(this.isInitialScrollDone=!0),this._getPane2Api().isOpened&&(this.isInitialScrollDone=!0),this.__base.apply(this,arguments)},needMore:function(){return this.hasMod("page","search-by-image")?!0:this.__base.apply(this,arguments)}}),BEM.DOM.decl("serp-controller",{bindEvents:function(){this.__base.apply(this,arguments),BEM.blocks["b-page"].on("scroll",this._onScroll,this),this._enablePointerEventsDebounced=$.debounce(this._enablePointerEvents,300,this)},destruct:function(){this.__base.apply(this,arguments),BEM.blocks["b-page"].un("scroll",this._onScroll,this)},_needPointerEventsSwitching:function(){return!BEM.blocks["i-global"].param("mobile")&&BEM.blocks["i-ua"].isPointerEventsAvailable()},_onScroll:function(){this._needPointerEventsSwitching()&&(this.hasMod(this._getContent(),"pointer-events","none")||this._disablePointerEvents(),this._enablePointerEventsDebounced())},_disablePointerEvents:function(){this.setMod(this._getContent(),"pointer-events","none")},_enablePointerEvents:function(){this.delMod(this._getContent(),"pointer-events")},_getContent:function(){return this._content||(this._content=this.findElem("content"))},_onPageChanged:function(){this.__base.apply(this,arguments),this._content=void 0}}),BEM.DOM.decl("serp-controller",{delayRemoveUinfo:3e3,onSetMod:{js:function(){this.__base.apply(this,arguments),BEM.blocks.uri.parseParams().uinfo&&(BEM.blocks["i-ua"].ie>=10?setTimeout(this.removeParams.bind(this),this.delayRemoveUinfo):this.removeParams())}},removeParams:function(){this.delViewParams("uinfo")}}),BEM.DOM.decl("serp-controller",{syncState:function(){return this.params.hoverTime>0&&(clearInterval(this._sendHoverInterval),this._sendHoverInterval=setInterval(this.sendHoverStats.bind(this),this.params.hoverTime)),this.__base.apply(this,arguments)},sendHoverStats:function(){_.isEmpty(BEM.blocks["serp-item"].hovered)||(c.hit({dtype:"iweb",path:"/image/new/serp/hover",serpid:BEM.blocks["i-global"].param("serpid"),vars:"858,-info="+JSON.stringify(BEM.blocks["serp-item"].hovered)}),BEM.blocks["serp-item"].hovered={})}}),BEM.DOM.decl("serp-controller",{bindEvents:function(){return BEM.blocks["pane2-api"].on("pane:close",this._onPane2Close,this),this.__base.apply(this,arguments)},unbindEvents:function(){return BEM.blocks["pane2-api"].un("pane:close",this._onPane2Close,this),this.__base.apply(this,arguments)},_onPane2Close:function(){this.unselectCurrentItem(),this.blinkCurrentItem()}}),BEM.DOM.decl({block:"serp-controller",modName:"page",modVal:"search-by-image"},{_nextDupsUrlChanged:!1,_onMoreClick:function(){this.load()},_onOtherSitesLoaded:function(t){this.findBlockInside("other-sites").loadSites(t),"undefined"==typeof this._pagesCount&&(this._pagesCount=0),this._pagesCount++},_onMoreDataLoaded:function(t){var e=!(t.params.visible&&this.params.nextPageUrl||this._nextDupsUrlChanged);e&&this.params.nextPageUrlCBIR&&(t.params.visible=!0,this._nextDupsUrlChanged=!0,this.params.nextPageUrl=this.params.nextPageUrlCBIR),this.__base.apply(this,arguments)},needMore:function(){return 2!==this._pagesCount?this.__base.apply(this,arguments):!1},syncState:function(){this._pagesCount=0,this.__base.apply(this,arguments);var t=this.findBlockInside("navigation");"search-by-image"===this.getMod("page")&&t&&t.reflow(),this._nextDupsUrlChanged=!1,this.delMod("loading")},load:function(){var t,e=this.params.nextPageUrl;return e||this._nextDupsUrlChanged||(this._nextDupsUrlChanged=!0,e=this.params.nextPageUrl=this.params.nextPageUrlCBIR),e?(this._setLoading("next"),t=this.getRequest(e).block("other-sites__items",this._onOtherSitesLoaded).block("serp-controller",function(t){this.params.nextPageUrl=t.params.nextPageUrl}).block("more_direction_next",this._onMoreDataLoaded),t.get(BEM.blocks["i-url-controller"].mergePassedUrlParams(BEM.blocks["serp-controller"].getUrlRequestParams(),BEM.blocks.uri.getFlatParams(e))),this):void 0}}),BEM.DOM.decl({block:"serp-controller",modName:"prefetch",modVal:"yes"},{onSetMod:{js:function(){this.__base.apply(this,arguments),"search"===BEM.blocks["i-global"].param("page")&&this._loadPage("next",{cacheRequest:!0})}},_clearRequestStack:function(){return _.forOwn(this._req,function(t){t.reject()}),this._req={},this},setRequestBlocks:function(t,e){return e.cacheRequest?(t.block("serp-controller",$.noop).block("serp-list_infinite_yes",$.noop).block("more_direction_"+e.direction,$.noop).block("gallery__items:ajax",$.noop),this):this.__base.apply(this,arguments)},_onSerpControllerLoaded:function(t,e){this.__base.apply(this,[t,e]),this._loadPage(e,{cacheRequest:!0})},_loadPage:function(t,e){var n=this.params[t+"PageUrl"],i=BEM.blocks.uri.getFlatParams(n),s=i.p;if(!n)return!1;if(e=_.assign(e||{},{direction:t}),_.assign(i,this.__self.getUrlRequestParams(e.direction)),this._req[s]&&e&&e.cacheRequest)return!0;if(this._req[s]){var r=this;return this._req[s].done(function(){return r._sendRequest(i,e)}),!0}return this._sendRequest(i,e),!0},_sendRequest:function(t,e){var n=$.Deferred(),i=this.getRequest(this.params[e.direction+"PageUrl"],e);this._req[t.p]=n,this.setRequestBlocks(i,e),i.get(t,this._onAjaxSuccess.bind(this,n))},_onAjaxSuccess:function(t){t.resolve&&t.resolve()}}),BEM.DOM.decl({block:"serp-controller",modName:"height",modVal:"full"},{onSetMod:{height:{"":function(){this._removeEmptySpace()}}},_emptySpaceAdded:!1,_addSpace:function(){var t=this._getSerpList();if(t){var e=t.domElem.height()/t.getPagesCount(),n=t.getCurrentPageNumber(),i=t.getLastPageNumber()-n,s=Math.min(i,this.params.count);0!==n&&s--,this.layout.setHeight(this.layout.getHeight()+e*s)}},enableInfiniteLoad:function(){this.__base.apply(this,arguments),!this._emptySpaceAdded&&this._isFullHeightAllowed()&&(window.inNextFrame(this._addSpace,this),this._emptySpaceAdded=!0)},disableInfiniteLoad:function(){this.__base.apply(this,arguments),this.needMore()&&this._getSerpList()&&!this._getSerpList().isCurrentPageLast()||this._removeEmptySpace()},_removeEmptySpace:function(){this.layout.setDefaultHeight(),this._emptySpaceAdded=!1}}),BEM.DOM.decl("serp-list",{onSetMod:{js:function(){this.__base.apply(this,arguments),BEM.blocks["ajax-perf"].setReqid(this.params.reqid)}}}),BEM.DOM.decl("serp-list",{onSetMod:{js:function(){this.totalPages=1,this.thumbRows=[],this.justifier=BEM.blocks.justifier,window.Ya.Images.thumbRows&&!this.isCurrentPageLast()?(this.setThumbRows(window.Ya.Images.thumbRows),delete window.Ya.Images.thumbRows):this.fitAllItems(),this._removeDuplicates(this.domElem),this._countLoadedRows(),BEM.blocks["b-page"].on("resize",this._onPageResize,this)}},destruct:function(){this.__base.apply(this,arguments),BEM.blocks["b-page"].un("resize",this._onPageResize,this)},addSerpItems:function(t,e){this.params.pageNum=t.params.pageNum,this.params.lastPage=t.params.lastPage;var n=$(t.html),i=this.getLastRowItems();return this.thumbRows.pop(),this._removeDuplicates(n),"next"===e?(this.fitAddedItems(n.prepend(i)),BEM.DOM.append(this.domElem,n.contents())):(BEM.DOM.prepend(this.domElem,n.contents()),this.fitAllItems()),this.onPageAfterAlign(),this},appendIncutElem:function(t){return this.domElem.append(t),this},prependIncutElem:function(t){return this.domElem.prepend(t),this}},{getUrls:function(){return _($(".serp-item_type_search")).map(function(t){return BEM.blocks["serp-item"].getUrls($(t))}).flatten().value()}}),BEM.DOM.decl("serp-item",{onSetMod:{selected:{yes:function(){this.delMod("hovered"),this.__self.delSelected()}}},saveCurrent:function(){return this.__self.prev=this.__self.getCurrent(),this.__self.setCurrent(this),this}},{getCurrent:function(){return this.current&&!this.current._isDestructing?this.current:void 0},getPrev:function(){return this.prev&&!this.prev._isDestructing?this.prev:void 0},setCurrent:function(t){this.current=t},clearCurrent:function(){this.setCurrent(null)},delSelected:function(){return this.getCurrent()&&(this.getCurrent().delMod("selected"),$.browser.msie&&$.browser.version<="8.0"&&window.focus()),this},current:null,prev:null}),BEM.DOM.decl("serp-item",{onSetMod:{js:function(){$.browser.msie&&$.browser.version<="8.0"&&window.focus(),BEM.blocks["i-global"].param("mobile")||this.bindTo("mousemove",this._onMouseMove).bindTo("mouseleave",this._onMouseLeave)},hovered:{yes:function(){return this.canHover()}}},canHover:function(){return!this.hasMod("selected","yes")},_onClick:function(t){BEM.blocks["i-global"].param("isPumpkin")&&"index"===BEM.blocks["i-global"].param("page")||(this.click("mouse"),t.preventDefault())},_onMouseMove:function(){this.setMod("hovered","yes")},_onMouseLeave:function(){this.delMod("hovered")},click:function(t,e){return this.eventSource=t,this.eventParams=e,this.setMod("selected","yes").saveCurrent().trigger("clicked",this),this}},{live:function(){this.__base.apply(this,arguments),this.liveInitOnEvent("mousemove")},getParams:function(t){var e=$("#"+t).data("bem");return e?e["serp-item"]:void 0}}),BEM.DOM.decl("serp-item",{_hoverTimer:null,_onMouseMove:function(){if(null===this.__self.hoverStartTime&&(this.__self.hoverStartTime=Date.now()),!this.hasMod("hovered","yes")&&!this._hoverTimer){var t=BEM.blocks["i-global"].param("lags"),e=t&&t.show,n=this.__base,i=arguments;e?this._hoverTimer=setTimeout(function(){n.apply(this,i)}.bind(this),e):n.apply(this,i)}},_onMouseLeave:function(){if(this.__base.apply(this,arguments),this.__self.hoverStartTime){var t=+this.getMod("pos");this.__self.hovered[t]=(this.__self.hovered[t]||0)+Date.now()-this.__self.hoverStartTime,this.__self.hoverStartTime=null}clearTimeout(this._hoverTimer),this._hoverTimer=null},click:function(){var t=BEM.blocks["i-global"].param("lags"),e=t&&t.show,n=this.__base,i=arguments;e?setTimeout(function(){n.apply(this,i)}.bind(this),e):n.apply(this,i)},getSeries:function(){return this.findBlockOutside("serp-group")}},{hovered:{},hoverStartTime:null,getUrls:function(t){var e=t.params||t.data("bem")["serp-item"],n=[e.img_href,e.fitSize.url],i=_.clone(e.dups);return i.push.apply(i,e.preview),_(i).map(function(t){n.push(t.url)}),_.uniq(n)}}),BEM.DOM.decl("complain",{},{live:function(){this.liveInitOnEvent("click"),this.liveBindTo("leftclick tap",function(){this.trigger("click")},this)}}),function(){var t=12,e=150;BEM.DOM.decl({block:"serp-item",modName:"type",modVal:"search"},{onSetMod:{js:function(){this.__base.apply(this,arguments),BEM.blocks.complain.on(this.domElem,"click",this._onComplainClick,this)},hovered:{yes:function(){if(this.__base.apply(this,arguments)===!1)return!1;var n=this.domElem,i=this.findElem("snippet"),s=Math.max(n.width(),e);i.css({paddingTop:n.height()+t,width:s}),0!==n.position().left&&i.css("margin-left",this._calculateMargin(s,n))}},blink:function(t,e){this.__self.canUseCSSAnimation||("light"===e?this.domElem.css("opacity","0.2"):this.domElem.animate({opacity:"1"},{duration:500}))},selected:{yes:function(){this.__base.apply(this,arguments),this.trigger("viewed")}}},destruct:function(){BEM.blocks.complain.un(this.domElem,"click",this._onComplainClick,this),this.__base.apply(this,arguments)},_onComplainClick:function(){BEM.blocks.feedback.showPopup(this)},_calculateMargin:function(e,n){return BEM.blocks["i-global"].getFlag("images_no_left_nav")&&this._isFirstImageInRow(n,n.prev())?-t:this._calculateMarginWithDivider(e,n,n.next())},_calculateMarginWithDivider:function(e,n,i){var s=n.width(),r=this._isLastImageInRow(e,n,i)?1:2;return-Math.floor(t+(e-s)/r)},canHover:function(){return this.__base.apply(this,arguments)&&!BEM.blocks["i-global"].getFlag("imgs_no_polaroid")},_isLastImageInRow:function(e,n,i){var s=n.offset(),r=!(i.length&&s.top===i.offset().top),o=s.left+e+t>this.__self.doc.width();return r&&o},_isFirstImageInRow:function(t,e){return!e.length||t.offset().top!==e.offset().top}},{live:function(){this.__base.apply(this,arguments),this.liveBindTo("link","leftclick tap",function(t){return 2===t.which||t.metaKey||t.ctrlKey?!0:void this._onClick(t)}),this.canUseCSSAnimation=BEM.blocks["i-ua"].canUseCSSAnimation()}})}(),BEM.DOM.decl("serp-mark",{onSetMod:{js:function(){this.findBlocks().bindEvents().setState(),this.parentItem.hasMod("selected","yes")&&this._onViewed(this.params.parentId)}},findBlocks:function(){return this.localStorage=BEM.blocks.localstorage.getInstance(),this.popup=this.findBlockInside("popup"),this.parentItem=this.findBlockOutside("serp-item")||this.findBlockOutside("serp-group"),this},bindEvents:function(){return this.parentItem.on("viewed",this._onViewed,this),this.afterCurrentEvent(function(){this.bindTo("mouseover mouseout",this._onMouseMove,this)}),this},destruct:function(){this.__base.apply(this,arguments),this.parentItem.un("viewed",this._onViewed,this)},_onViewed:function(){var t=this.localStorage.get("_viewedImages")||{},e=_.size(t);this.setContent(BEM.I18N("serp-mark","Просмотрено только что")).show(),e>=2e3&&(t=this.truncateViewList(t,1900)),t[this.params.parentId]=+new Date,this.localStorage.set("_viewedImages",t)},truncateViewList:function(t,e){var n=_.takeRight(_.sortBy(t),e);return _.transform(t,function(t,e,i){-1!==_.indexOf(n,e)&&(t[i]=e)})},_onMouseMove:function(t){"mouseover"===t.type?this.popup.show(this.domElem):this.popup.hide()},setState:function(){var t=this.localStorage.get("_viewedImages"),e=this.params.parentId;_.has(t,e)?this.pickMessage(t[e]):this.setContent(BEM.I18N("serp-mark","Просмотрено только что"))},pickMessage:function(t){var e,n=new Date,i=this.calculateAge(t,n),s={0:BEM.I18N("serp-mark","Просмотрено сегодня"),1:BEM.I18N("serp-mark","Просмотрено вчера"),2:BEM.I18N("serp-mark","Просмотрено позавчера"),7:BEM.I18N("serp-mark","Просмотрено неделю назад"),14:BEM.I18N("serp-mark","Просмотрено 2 недели назад")},r={1:BEM.I18N("serp-mark","Просмотрено в понедельник"),2:BEM.I18N("serp-mark","Просмотрено во вторник"),3:BEM.I18N("serp-mark","Просмотрено в среду"),4:BEM.I18N("serp-mark","Просмотрено в четверг"),5:BEM.I18N("serp-mark","Просмотрено в пятницу"),6:BEM.I18N("serp-mark","Просмотрено в субботу"),7:BEM.I18N("serp-mark","Просмотрено в воскресенье")};s[i]&&(e=(n-t)/1e3>600?s[i]:BEM.I18N("serp-mark","Просмотрено только что")),i>2&&7>i&&(e=r[this.getWeekDay(i,n)]),i>7&&14>i?e=BEM.I18N("serp-mark","Просмотрено больше недели назад"):i>14&&21>i?e=BEM.I18N("serp-mark","Просмотрено больше 2 недель назад"):i>=21&&29>i?e=BEM.I18N("serp-mark","Просмотрено больше 3 недель назад"):i>=29&&40>i&&(e=BEM.I18N("serp-mark","Просмотрено месяц назад")),i>=40&&(e=BEM.I18N("serp-mark","Просмотрено давно")),this.setContent(e).show()},calculateAge:function(t,e){var n=(e-t)/1e3,i=~~(n/86400),s=~~(n%86400),r=3600*e.getHours()+60*e.getMinutes()+e.getSeconds();return s>r&&i++,i},getWeekDay:function(t,e){var n=e.getDay()-t;return 1>n?7+n:n},setContent:function(t){return this.popup.elem("content").text(t),this},show:function(){this.setMod("visible","yes")}}),BEM.decl("localstorage",{onSetMod:{js:{inited:function(){this._service=BEM.blocks["i-global"].param("id"),this._enabled=!1;try{if("localStorage"in window){var t="test"+ +new Date;localStorage.setItem(t,t),localStorage.removeItem(t),this._enabled=!0,this._convertDeprecatedData()}}catch(e){}}}},_convertDeprecatedData:function(){var t=JSON.parse(localStorage.getItem(this._service));t&&(_.forOwn(t,function(t,e){this.set(e,t)},this),localStorage.removeItem(this._service))},get:function(t){try{if(this._enabled)return JSON.parse(localStorage.getItem(this._getItemName(t)))}catch(e){}return null},set:function(t,e){try{if(this._enabled)return localStorage.setItem(this._getItemName(t),JSON.stringify(e)),!0}catch(n){}return!1},del:function(t){try{this._enabled&&localStorage.removeItem(this._getItemName(t))}catch(e){}},_getItemName:function(t){return this._service+"."+t}},{getInstance:function(){return this.instance||(this.instance=BEM.create("localstorage"))}}),BEM.DOM.decl({block:"serp-list",modName:"rum",modVal:"yes"},{_loadedThumbs:{},_serpItemImgSelector:".serp-item__thumb",_rumThumbCounterPath:void 0,onSetMod:{js:function(){this.MAX_RESULTS=450,this.__base.apply(this,arguments),this._isResourceTimingAPIAvaliable()&&this.setupSpeedTest()}},_isResourceTimingAPIAvaliable:function(){return window.performance&&(window.performance.getEntries||window.performance.webkitGetEntries)},setupSpeedTest:function(){var t=window.performance,e=t.setResourceTimingBufferSize?"setResourceTimingBufferSize":"webkitSetResourceTimingBufferSize";return t[e]&&t[e](this.MAX_RESULTS),this},bindToImages:function(t){var e=t.length,n=function(){--e||this.allImagesLoadedHandler(t)}.bind(this);return t.each(function(){return this.complete?void n():void $(this).bind("load",n)}),this},getEntriesName:function(){return window.performance.getEntries?"getEntries":"webkitGetEntries"},getConnectionType:function(){var t=navigator.connection||navigator.mozConnection||navigator.webkitConnection;return t&&t.type},getImagesTimings:function(t){for(var e,n,i,s,r,o,a,c=this.getEntriesName(),u=window.performance[c](),l=this.getConnectionType(),h=[],d=0,p=u.length;p>d;d++)o=u[d],a=o.name,t[a]&&!this._loadedThumbs[a]&&(s=~a.indexOf("http://")?"http":"https",i=a.replace(".yandex.net","").replace(s+"://","").split("/"),r=o.startTime,n=o.responseStart||r,e=[~~r,~~(o.redirectEnd-o.redirectStart),~~(o.domainLookupEnd-o.domainLookupStart),Math.max(~~(o.domainLookupStart-o.fetchStart),0),~~(o.connectEnd-(o.secureConnectionStart||o.connectStart)),~~(o.responseStart-o.requestStart),~~(o.responseEnd-n),~~o.duration,s,encodeURIComponent(i[0]),encodeURIComponent(i[1])],l&&e.push(l),h.push(e.join(";")),this._loadedThumbs[a]=e);return h},allImagesLoadedHandler:function(t){var e,n,i={};t.each(function(){n=this.src,/^https?\:/.test(n)||(n=window.location.protocol+n),i[this.src]=1}),e=this.getImagesTimings(i),e.length&&this.sendStats(e)},sendStats:function(t){var e=window.location.protocol+"//yandex.ru/clck/click/dtype=iweb/path="+this._rumThumbCounterPath+"/serpid="+BEM.blocks["i-global"].param("serpid")+"/vars=1045,-info="+t.join("!")+"/*"+encodeURIComponent(location.href);(new Image).src=e,BEM.blocks.counter.debug("thumbs load timings",e)}}),BEM.DOM.decl({block:"serp-list",modName:"rum",modVal:"yes"},{_rumThumbCounterPath:"8.228.1045",onPageAfterAlign:function(){this.__base.apply(this,arguments),this.bindToImages(this.domElem.find(this._serpItemImgSelector))}}),BEM.DOM.decl({block:"serp-list",modName:"unique",modVal:"yes"},{_removeDuplicates:function(t){this._uniqIds||(this._uniqIds={});var e=this._uniqIds;_.forEach(t.find(".serp-item"),function(t){e[t.id]?$(t).hasClass("serp-item_series_yes")?$(t).closest(".serp-group").remove():$(t).remove():e[t.id]=!0})}}),BEM.DOM.decl("serp-list",{_onPageResize:function(){this._resetContainerWidth().fitAllItems()},fitAllItems:function(){return this.hasMod("justifier","yes")&&this.setThumbRows(this.justifier.fitImages({container:this.domElem[0],containerWidth:this._getContainerWidth(),showDangling:this.isCurrentPageLast()})),this},fitAddedItems:function(t){return this.addThumbRows(this.justifier.fitImages({container:t.get(0),containerWidth:this._getContainerWidth(),showDangling:this.isCurrentPageLast()})),this},onPageAfterAlign:function(){this.totalPages++,this.trigger("loaded",{serpList:this,totalPages:this.totalPages}),this.__base.apply(this,arguments)},_countLoadedRows:function(){c.cpHitDelayed({pid:40,cid:72687,path:"image.new.serp.list.loaded",vars:"1341,-info="+_.pluck(this.thumbRows,"length").join("-")})},setThumbRows:function(t){this.thumbRows=t},addThumbRows:function(t){this.thumbRows=this.thumbRows.concat(t)},_getContainerWidth:function(){return this._containerWidth||(this._containerWidth=this.domElem.parent().width()),this._containerWidth},_resetContainerWidth:function(){return delete this._containerWidth,this},getLastThumbOfRow:function(t){return $(document.getElementById(_.last(this.thumbRows[t])))},isRowVisible:function(t){return"inline-block"===this.getLastThumbOfRow(t).css("display")},getLastRowItems:function(){return _.map(_.last(this.thumbRows),function(t){return document.getElementById(t)})},getThumbRow:function(t){for(var e,n=0,i=0;i<this.thumbRows.length;i++)for(e=0;e<this.thumbRows[i].length;e++)if(n++,n===t)return i},getPagesCount:function(){return this.totalPages},getCurrentPageNumber:function(){return this.params.pageNum},getLastPageNumber:function(){return this.params.lastPage},getIds:function(){return _.flatten(this.thumbRows)},isCurrentPageLast:function(){return this.params.pageNum===this.params.lastPage}}),BEM.DOM.decl("serp-group",{onSetMod:{js:function(){BEM.blocks["i-global"].param("mobile")||this.bindTo("mousemove",this._onMouseMove).bindTo("mouseleave",this._onMouseLeave),BEM.blocks.complain.on(this.domElem,"click",this._onComplainClick,this)},hovered:{yes:function(){return this.canHover()?void this.elem("url").width(this.elem("container").width()):!1}},selected:{yes:function(){this.trigger("viewed")}}},destruct:function(){BEM.blocks.complain.un(this.domElem,"click",this._onComplainClick,this),this.__base.apply(this,arguments)},_onComplainClick:function(){BEM.blocks.feedback.showPopup(this)},canHover:function(){return!(this.hasMod("selected","yes")||"view"===this.__self.layout)},_onMouseMove:function(){this.setMod("hovered","yes")},_onMouseLeave:function(){this.delMod("hovered")},getItemByIndex:function(t){return this.findBlocksInside("serp-item")[t]}},{current:null,getCurrent:BEM.blocks["serp-item"].getCurrent,setCurrent:BEM.blocks["serp-item"].setCurrent,clearCurrent:BEM.blocks["serp-item"].clearCurrent,delSelected:BEM.blocks["serp-item"].delSelected,getUrls:function(t){var e=[];return t.domElem.find(".serp-item").each(function(t,n){e.push(BEM.blocks["serp-item"].getUrls($(n)).join(";"))}),e},live:function(){this.__base.apply(this,arguments),this.liveInitOnEvent("mousemove")}}),BEM.DOM.decl("fluider",{rowsThumbsCount:[],onSetMod:{js:function(){this.__self._instances.push(this),BEM.blocks["b-page"].on("resize",this._onPageResize,this),BEM.blocks["serp-controller"].on("align",this._onPageAlign,this),this.hasMod("similar","yes")||this.setMargin(),this.afterCurrentEvent(this.align)}},getDefaultParams:function(){return{minItemWidth:75,maxLineWidth:750,forceRowTruncate:!1}},destruct:function(){BEM.blocks["b-page"].un("resize",this._onPageResize,this),BEM.blocks["serp-controller"].un("align",this._onPageAlign,this),this.__base.apply(this,arguments)},_onPageResize:function(){this._aligned=!1,!this._progress&&this.isEnabled()&&(this._progress=!0,this.align(),this._progress=!1)},_onPageAlign:function(){this._aligned||this._onPageResize()},setMargin:function(){this.params.margin||(this.params.margin=8,BEM.blocks["i-global"].param("isOldBrowser")&&(this.params.margin+=2))},getCurrentItem:function(){return this.items.eq(this.currentItem)},getItems:function(){return this.items||(this.items=this.elem("item")),this},align:function(){return this.trigger("align"),this.isEnabled()?(this.getItems().processAlign(),this._aligned=!0,this.trigger("aligned"),this):this},processAlign:function(){return this.getMaxWidth().buildMatrix(),this},getMaxWidth:function(){return this.maxWidth=this.domElem.width()||this.params.maxLineWidth,this},buildMatrix:function(){var t=[];for(this.listLength=this.items.length,this.currentItem=0;this.currentItem<this.listLength;)t.push(this.buildRow());return this.rowsThumbsCount=_.map(t,function(t){return t.items.length}),this},buildRow:function(){var t=this.createRow();return this.tryTruncateRow(t),t},getRowsThumbsCount:function(t){return this.rowsThumbsCount.slice(0,t).join("-")},createRow:function(){for(var t={items:[],width:0};!this.isEnoughItems(t);)this.pushCurrentItem(t);return t.width+=this.params.margin,t},isEnoughItems:function(t){return this.currentItem>=this.listLength||t.width>=this.maxWidth&&!this.isSeriesContinues(t.items)},isSeriesContinues:function(t){return this.isThumbsInSameSeries(this.getLastItem(t),this.getCurrentItem())},pushCurrentItem:function(t){var e=this.getCurrentItem();this.currentItem++,e.hasClass("serp-item_extra_yes")||(t.width+=this.getItemMargin(t.items,e),t.width+=Math.max(this.getThumbWidth(e),this.params.minItemWidth),t.items.push(e))},tryTruncateRow:function(t){var e=t.width-this.maxWidth;(t.items.length&&e>0||this.params.forceRowTruncate)&&this.truncateRow(t.items,this.getRowOverage(t,e))},getItemMargin:function(t,e){var n=0;return this.isRegularImage(e)?n+=this.params.margin:this.isThumbsInSameSeries(this.getLastItem(t),e)||(n+=this.params.margin),n},isRegularImage:function(t){return t?!t.hasClass("serp-item_series_yes"):!0},truncateRow:function(t,e){for(var n=0,i=t.length;i>n;n++)this.truncateAndCenterItem(t[n],e[n]>0?e[n]:0)},truncateAndCenterItem:function(t,e){this.truncateItem(t,e).centerThumb(t,e)},getRowOverage:function(t,e){var n=this.getOverage(t,e),i=n.overage,s=n.width,r=n.cut;return this.getExtraOverage(r,e,s,i)},getOverage:function(t,e){var n,i=[],s=[],r=0,o=t.items.length;for(n=0;o>n;n++)s[n]=this.getThumbWidth(t.items[n]),i[n]=Math.floor(s[n]/t.width*e),s[n]-i[n]<this.params.minItemWidth&&(i[n]=Math.max(s[n]-this.params.minItemWidth,0)),r+=i[n];return{overage:i,width:s,cut:r}},getExtraOverage:function(t,e,n,i){for(var s=e-t,r=i.length;s>0&&!this.isThumbsSmall(n,i);)for(var o=0;r>o&&(n[o]-i[o]>this.params.minItemWidth&&(s--,i[o]+=1),!(0>=s||this.isThumbsSmall(n,i)));o++);return i},isEnabled:function(){return this.__self.enabled},getItemIndex:function(t){return this.items.index(t)},getItemThumb:function(t){var e=this.getItemIndex(t);return this.thumbs||(this.thumbs=[]),this.thumbs[e]||(this.thumbs[e]=t.find("img:first"))},getThumbWidth:function(t){var e=this.getItemIndex(t);return this.thumbsWidths||(this.thumbsWidths=[]),this.thumbsWidths[e]||(this.thumbsWidths[e]=this.getItemThumb(t).width())},getItemWidth:function(t){return t.width()},truncateItem:function(t,e){return t.width(this.getThumbWidth(t,!0)-e),this},centerThumb:function(t,e){return e||(e=this.getThumbWidth(t,!0)-this.getItemWidth(t)),this.getItemThumb(t).css("margin-left",-Math.floor(e/2)),this},isThumbsInSameSeries:function(t,e){return t&&t.hasClass("serp-item_series_yes")&&$.contains(t.parent()[0],e[0])},isThumbsSmall:function(t,e){return _.all(t,function(n,i){return t[i]-e[i]<=this.params.minItemWidth},this)},getLastItem:function(t){return t.length&&t[t.length-1]}},{enabled:!0,_instances:[],align:function(){this._instances.forEach(function(t){t.align()})}}),BEM.decl("justifier",{},{fitImages:function(t){return window.Ya.Images.fitImages(t)}}),BEM.DOM.decl("b-501px",{getDefaultParams:function(){return{preloadCount:3,imagesCount:7,popupTimeout:300,_lineHeight:17}},onSetMod:{js:function(){this.__base.apply(this,arguments),this.findBlocks().bindEvents().fillData().countImageShow()._onResize(),this.params.hasNext||this.setDownloadText().setDownloadURL()}},findBlocks:function(){return this.page=this.findBlockOutside("b-page"),this._indexPage=BEM.blocks["i-global"].param("router").index,this.slider=this.findBlockInside("b-501px-slider"),this._description=this.elem("description"),this},bindEvents:function(){return BEM.blocks.button.on(this.elem("download"),"click",this._onDownloadClick,this),BEM.blocks["b-page"].on("resize",this._onResize,this),this.bindTo("back","click",this._onBackClick),this.bindTo("info-button","click",this._countCaptionAuthorOpen),this.on("download",this._onDownload).bindTo("download","mousedown",this._onDownloadMousedown).bindTo("download-me","mousedown",this._onDownloadMousedown).bindTo("download-me","touchstart",function(){this._tapTimer=setTimeout(this.__self._longTap.bind(this),400)}).bindTo("download-me","touchend",function(){clearTimeout(this._tapTimer)}),this},destruct:function(){BEM.blocks.button.un(this.elem("download"),"click",this._onDownloadClick,this),BEM.blocks["b-page"].un("resize",this._onResize,this),this.__base.apply(this,arguments)},getDownloadButton:function(){return this._downloadButton||(this._downloadButton=this.findBlockInside("right","button"))},_onDownload:function(){this._hasDownloadSRC||this.setDownloadSRC()},_onDownloadMousedown:function(t){2===t.button&&this.trigger("download")},_onBackClick:function(){this.moveToToday()},getAppropriateSize:function(){var t=BEM.blocks["i-userinfo"].get(),e=_.map(this._today.sizes,function(e){return e.ratio=t.getRatio(e),e});return t.findAppropriateResolution(t.extendedScreenSize(),e)},makeDownloadUrl:function(){var t=BEM.blocks["i-global"].param("router").todayImageProxy,e=BEM.blocks.uri.buildRelativeUrl(t,this.getDownloadParams()),n=BEM.blocks.uri.parse(e);return n.host(location.hostname),n.build()},getDownloadParams:function(){var t=this.getAppropriateSize(),e=this.__self.getTimeParam(),n={size:t.width+"x"+t.height};return e&&(n.time=e),n},setDownloadSRC:function(){this.elem("download-me").attr("src",this.makeDownloadUrl()),this._hasDownloadSRC=!0},setDownloadURL:function(){return this.getDownloadButton().url(this.makeDownloadUrl()),this},setDownloadText:function(){var t=this.getAppropriateSize();return this.elem("download-resolution").text(t.width+"x"+t.height),this},setSearchURL:function(){return this.getSearchButton().url(this.getCurrentSlide().snippet.link),this},fillData:function(){var t=this.params;return this._today=t.today,this._previous=t.previous,this},getCurrentSlide:function(){return this._currentSlide>=0?this._previous[this._currentSlide]:this._today},isControlsHidden:function(){return this.hasMod("hidden-controls","yes")},updateFooter:function(t){var e=t.snippet,n=t.author,i=this.hasMod("today","yes"),s=this._isDescriptionFitNeeded();return this.elem("description").text(e.description),this.elem("name").text(e.title),this.elem("info-button").attr("href",n.link),this.elem("caption-author").html(n.linkText),this.setSearchURL(),!i&&s?this._fitDescription(e.description):i&&this._isDescriptionFitted&&this._unFitDescription(),this},_isDescriptionFitNeeded:function(){return this.__self.win.innerHeight()<790&&!this.__self.isPortraitOrientation()},_getMaxDescriptionHeight:_.memoize(function(){var t=~~(this.elem("center-wrapper")[0].getBoundingClientRect().bottom-this.elem("slider-main")[0].getBoundingClientRect().bottom-40);return this.__self.win.innerHeight()<=600&&(t-=this.params._lineHeight),t-t%this.params._lineHeight}),_fitDescription:function(t){var e=this._description.get(0).scrollHeight,n=this._getMaxDescriptionHeight();if(e>n&&!this._isDescriptionFitted&&(this._description.height(n),this._isDescriptionFitted=!0,this.setMod(this.elem("center"),"mode","cutted")),n>=e&&(this._description.height(""),this._isDescriptionFitted=!1,this.delMod(this.elem("center"),"mode")),this._isDescriptionFitted){var i=60*(n/this.params._lineHeight);t.length>i&&this._description.text(this.__self.cutText(t,i))}return this},_unFitDescription:function(){return this._isDescriptionFitted=!1,this.delMod(this.elem("center"),"mode")._description.height(""),this},_onResize:function(){window.Ya.fit501pxImage(),this.trigger("resize")},hideControls:function(){return this.setMod("hidden-controls","yes")},showControls:function(){return this.delMod("hidden-controls")}},{_longTap:function(){this.trigger("download")}}),function(t){t.decl("i-userinfo",{resolutions:[{width:240,height:320,ratio:{width:3,height:4}},{width:320,height:480,ratio:{width:2,height:3}},{width:480,height:800,ratio:{width:3,height:5}},{width:640,height:960,ratio:{width:2,height:3}},{width:600,height:1024,ratio:{width:3,height:5}},{width:768,height:1024,ratio:{width:3,height:4}},{width:1920,height:1080,ratio:{width:16,height:9}},{width:1680,height:1050,ratio:{width:16,height:10}},{width:1600,height:900,ratio:{width:16,height:9}},{width:1440,height:900,ratio:{width:16,height:10}},{width:1280,height:1024,ratio:{width:5,height:4}},{width:1366,height:768,ratio:{width:16,height:9}},{width:1280,height:800,ratio:{width:16,height:10}},{width:1152,height:864,ratio:{width:4,height:3}},{width:1024,height:768,ratio:{width:4,height:3}},{width:1200,height:800,ratio:{width:3,height:2}},{width:1280,height:720,ratio:{width:16,height:9}},{width:1280,height:768,ratio:{width:5,height:3}},{width:1280,height:960,ratio:{width:4,height:3}},{width:1366,height:768,ratio:{width:16,height:9}},{width:1400,height:1050,ratio:{width:4,height:3}},{width:1600,height:1200,ratio:{width:4,height:3}},{width:1680,height:945,ratio:{width:16,height:9}},{width:1920,height:1200,ratio:{width:16,height:10}},{width:2048,height:1152,ratio:{width:16,height:9}},{width:2048,height:1536,ratio:{width:4,height:3}},{width:2560,height:1440,ratio:{width:16,height:9}},{width:2560,height:1600,ratio:{width:16,height:10}}],getScreenSize:function(t){var e=this.getDefaultResolution(this.getDeviceInfo(t));
if(!t)return e;var n=t.userInfo||{},i={width:n.sw||e.width,height:n.sh||e.height};return _.extend(i,{ratio:this.getRatio(i)})},getWindowSize:function(t){var e,n=this.getDefaultResolution(this.getDeviceInfo(t));return t?(e=t.userInfo||{},{width:e.ww||n.width,height:e.wh||n.height}):n},getScreenResolution:function(t){var e=this.getScreenSize(t),n=this.getPixelDensity(t);return{width:~~(e.width*n),height:~~(e.height*n)}},getDeviceInfo:function(t){return{isTablet:t.isTablet,isMobile:t.isMobile,iOS7:t.iOS7,iOS:t.iOS,wp:t.isWindowsPhone}},getDefaultResolution:function(t){var e={width:1366,height:768};return t?(t.isTablet?e={width:1024,height:768}:t.isMobile&&(e={width:640,height:960}),e):e},getRatio:function(t){return{1.25:{width:5,height:4},1.33:{width:4,height:3},1.56:{width:3,height:2},1.6:{width:16,height:10},1.66:{width:5,height:3},1.77:{width:16,height:9},1:{width:1,height:1},.6:{width:3,height:5},.66:{width:2,height:3},.67:{width:2,height:3},.75:{width:3,height:4},.58:{width:3,height:5},.56:{width:9,height:16}}[this.calcRatio(t)]||{width:16,height:9}},getPixelDensity:function(t){return+(t.userInfo||{}).pd||1},isRetinaDisplay:function(t){return this.getPixelDensity(t)>1.5},parseResolution:function(t){var e=t.split("x");return{width:parseInt(e[0],10),height:parseInt(e[1],10)}},extendedScreenSize:function(t){var e=this.getDeviceInfo(t),n=this.getScreenResolution(t),i=n.width,s=n.height,r=e.isTablet,o=e.isMobile,a=e.iOS7,c=e.iOS,u=e.wp;return r&&a?i=s=2448:o&&a?(i=1040,s=1536):o&&!c&&!u||r?i=s=Math.max(i,s):c&&!a&&(i=640,s=1136),{width:i,height:s}},findAppropriateResolution:function(t,e,n){var i;return e||(e=this.resolutions),i=_.map(e,function(e){return this.calcResolutionDelta(e,t)},this),i.sort(this.compare),n?_.pluck(i,"resolution").slice(0,n):i[0].resolution},compare:function(t,e){var n=Math.abs(t.square),i=Math.abs(e.square);return t.ratio===e.ratio?t.square>=0&&e.square>=0?t.square<=e.square?-1:1:Math.min(n,i)<1e5?i>n?-1:1:t.square>e.square?-1:1:n*t.ratio<i*e.ratio?-1:1},calcResolutionDelta:function(t,e){var n=t.ratio||t;return{ratio:Math.abs(this.calcRatio(n)-this.calcRatio(e)),square:this.calcSquare(t)-this.calcSquare(e),resolution:t}},calcRatio:function(t){return Math.floor((t.width||t.w)/(t.height||t.h)*100)/100},calcSquare:function(t){return(t.width||t.w)*(t.height||t.h)}})}("undefined"!=typeof BEMPRIV?BEMPRIV:BEM),BEM.decl("i-userinfo",{getDefaultParams:function(){return{separator:"-"}},getScreenSize:function(){var t,e=this.getDeviceInfo(),n=window.screen,i={width:n.width,height:n.height,ratio:this.getRatio(n)};return e&&e.isTablet&&i.width<i.height&&(t=i.width,i.width=i.height,i.height=t),i},getDeviceInfo:function(){var t,e,n=BEM.blocks["i-global"],i=BEM.blocks["i-ua"];return i.ios&&(t=i.ios.match(/([0-9]+)/g),e=t&&t[0]),{isTablet:n.param("tablet"),isMobile:n.param("mobile"),iOS:i.ios,iOS7:parseInt(i.ios,10)>=7,wp:i.wp}},getUserInfo:function(){var t=this.params.separator,e=this.getScreenSize(),n=this.getWindowSize();return[["sw",e.width].join(t),["sh",e.height].join(t),["ww",n.width].join(t),["wh",n.height].join(t),["pd",this.getPixelDensity()].join(t),["wp",this.getWP()].join(t)].join(t)},getWindowSize:function(){return{width:window.innerWidth,height:window.innerHeight}},getPixelDensity:function(){return BEM.DOM.win[0].devicePixelRatio||1},getWP:function(){var t=this.getScreenInfo();return t.ratio.width+"x"+t.ratio.height+"_"+t.width+"x"+t.height},getScreenInfo:function(){if(this._screen)return this._screen;var t=this.getScreenResolution(),e=this.findAppropriateResolution(t);return this._screen={width:e.width,height:e.height,ratio:e.ratio},this._screen}},{_instance:null,get:function(){return this._instance||(this._instance=BEM.create("i-userinfo"))}}),BEM.DOM.decl("b-501px",{},{isPortraitOrientation:function(){return window.innerHeight>window.innerWidth},humanDownloadDate:function(t){var e=new Date(this.getTimestamp(t)),n=new Date(this.getTime());return 1===Math.floor((n-e)/864e5)?BEM.I18N("b-501px_spok_yes","Эту картинку можно было скачать вчера"):BEM.I18N("b-501px_spok_yes","Эту картинку можно было скачать {date}",{context:"Эту картинку можно было скачать <20 мая>",date:BEM.blocks.date.getHumanDate(e,n)})},getTimestamp:function(t){var e=t.split("-");return+new Date(e[0],e[1]-1,e[2])},getTime:function(){var t=this.getTimeParam();return BEM.blocks["i-global"].param("isYandexNet")&&t?this.getTimestamp(t.replace(/([0-9]{4})([0-9]{2})([0-9]{2})/,"$1-$2-$3")):Date.now()},getTimeParam:_.memoize(function(){var t=BEM.blocks.uri.parse(location.href).getParam("time");return t&&t.toString()}),formatDate:function(t){var e=new Date(t),n=e.getDate(),i=e.getMonth()+1;return[e.getFullYear(),(10>i?"0":"")+i,(10>n?"0":"")+n].join("-")},cutText:function(t,e){var n,i=t.lastIndexOf(" ",e),s=t.lastIndexOf(".",e)+1;return n=25>i-s?t.slice(0,s):t.slice(0,i)+this._getMoreSymbol()},_getMoreSymbol:_.memoize(function(){return/com/.test(BEM.blocks["i-global"].param("tld"))?' "…"':" «…»"})}),BEM.DOM.decl({block:"b-501px",modName:"counter",modVal:"yes"},{_onDownloadClick:function(){this.__base.apply(this,arguments),cp({pid:40,cid:72623,path:"px500.download.click"},{href:this.makeDownloadUrl()}),this.countMetrikaGoal()},_onDownload:function(){this.__base.apply(this,arguments),cp({pid:40,cid:72623,path:"px500.download.imgclickright"},{href:this.makeDownloadUrl()}),this.countMetrikaGoal()},countMetrikaGoal:function(){_.includes(["ru","ua","com.tr"],BEM.blocks["i-global"].param("tld"))&&BEM.blocks["b-statcounter"].goal({goal:"download",params:{query:{morda:"download"}}})},_countCaptionAuthorOpen:function(){return cp({pid:40,cid:72623,path:"px500.title.click"}),this},_onBackClick:function(){this.__base.apply(this,arguments),cp({pid:40,cid:72623,path:"px500.back.click"})},countImageShow:function(){var t,e=this.getCurrentImage().date;return e&&(t="355,-info="+e.replace(/-/g,"")),cp(this.hasMod("today","yes")?{pid:40,cid:72623,path:"px500.main.show",vars:t}:{pid:40,cid:72623,path:"px500.previous.show",vars:t}),this}}),BEM.DOM.decl({block:"b-501px",modName:"preload",modVal:"yes"},{getPreloader:function(){return this._preloader||(this._preloader=BEM.create({block:"i-preloader",mods:{batch:"yes","reload-on-error":"yes"}}))},batchPreload:function(){return this.getPreloader().setImages(this.getPreloadImages()).batchLoad(),this},getPreloadImages:function(){for(var t,e=this._currentSlide,n=this.params.preloadCount,i=this.params.previousSizes,s=e-n,r=this._previous.slice(0>s?0:s,e+n),o=this._today.slide||{},a=[],c=0,u=r.length;u>c;c++)t=r[c],t.slide.preview&&a.push([{width:i.preview.width,height:i.preview.height,url:t.slide.preview}]),t.slide.back&&a.push([{width:i.back.width,height:i.back.height,url:t.slide.back}]);return 0>s&&o.appropriate&&a.push([o.appropriate]),a}}),BEM.DOM.decl({block:"b-501px",modName:"popup",modVal:"yes"},{onSetMod:{js:function(){this.__base.apply(this,arguments),this._popups={}}},findBlocks:function(){return this.__base.apply(this,arguments)},bindEvents:function(){return this.__base.apply(this,arguments),BEM.blocks["b-501px-popup"].on("closed",this._onPopupClose,this),BEM.blocks.button.on(this.elem("caption-icon"),"click",this._onInfoButtonClick,this),this},destruct:function(){BEM.blocks["b-501px-popup"].un("closed",this._onPopupClose,this),BEM.blocks.button.un(this.elem("caption-icon"),"click",this._onInfoButtonClick,this),this.__base.apply(this,arguments)},_onPopupClose:function(){this.showControls()},_onInfoButtonClick:function(){this._openPopup("info").hideControls(),cp({pid:40,cid:72623,path:"px500.info.click"})},_openPopup:function(t){return this._getPopup(t).open(),this},_getPopup:function(t){return this._popups[t]||(this._popups[t]=this.findBlockInside({block:"b-501px-popup",modName:"type",modVal:t}))}}),BEM.DOM.decl({block:"b-501px",modName:"initialize",modVal:"yes"},{_blinkArrowDelay:300,_showControlsDelay:200,_animationTimeout:500,onSetMod:{js:function(){this.__base.apply(this,arguments),this.initSliderData().initSlider()}},destruct:function(){this.dfdCanceled(!0),this.__base.apply(this,arguments)},initSliderData:function(){return this._currentSlide=-1,this.params.hasNext&&(this._previous.unshift(this._today),this._currentSlide++),this},initSlider:function(){return this.dfdCanceled(!1),this.params.hasNext?this.initPreviousPicture():this.initDailyPicture(),this},dfdCanceled:function(t){return"undefined"!=typeof t&&(this._dfdCanceled=t),this._dfdCanceled},initDailyPicture:function(){return this._loadBluredBackground().then(this._loadBackground.bind(this)).then(this._hideParanja.bind(this)).then(this._enableSlider.bind(this)).then(this._blinkPrevArrow.bind(this)).done(this._initDone.bind(this)),this},initPreviousPicture:function(){return this._loadBluredBackground().then(this._loadPreview.bind(this)).then(this._loadNextSlides.bind(this)).then(this._loadPrevImage.bind(this)).then(this._loadNextImage.bind(this)).then(this._enableSlider.bind(this)).done(this._initDone.bind(this)),this},_loadBackground:function(){return this.preloadSingleImage(this._today.slide.appropriate).then(this._setBackground.bind(this))},_setBackground:function(t){this.dfdCanceled()||this.changeSliderBackground(t.url,t.focus)},_hideParanja:function(){var t=$.Deferred(),e=this;return this.dfdCanceled()?t.reject():(this.slider.hideParanja(),setTimeout(function(){e.dfdCanceled()?t.reject():t.resolve()},this._animationTimeout),t.promise())},_showControls:function(){var t=$.Deferred(),e=this;return this.slider.updateLayoutSize().updatePreviewSizes().updatePreviews(),setTimeout(function(){return e.dfdCanceled()?void t.reject():(e.showControls().checkForLastSlide(),void t.resolve())},this._showControlsDelay),t.promise()},_blinkPrevArrow:function(){var t=$.Deferred(),e=this;return setTimeout(function(){return e.dfdCanceled()?void t.reject():(e.slider.blinkPrevArrow(),void t.resolve())},this._blinkArrowDelay),t.promise()},_enableSlider:function(){return this.dfdCanceled()||this.enableSlider(),this._showControls()},_loadBluredBackground:function(){return this.preloadSingleImage(this.getBackgroundImage(this._today.slide.back)).then(this._setBackground.bind(this))},_setBluredBackground:function(){var t=$.Deferred();return this.dfdCanceled()?t.reject():(this.changeSliderBackground(this._today.slide.back),t.resolve())},_loadPreview:function(){return this.preloadSingleImage(this.getPreviewImage(this.getSlide(this._currentSlide).preview)).then(this._setCurrentPreview.bind(this))},_setCurrentPreview:function(){this.dfdCanceled()||this.changePreview("current",this.getSlide(this._currentSlide))},_loadNextSlides:function(){var t=$.Deferred(),e=this;return this.dfdCanceled()?t.reject():(this.load(this.getNextSlidesDate(),this.getFirstImageDate()).done(function(n){return e.dfdCanceled()?void t.reject():(e._addLoadedImages(n),void t.resolve())}),t.promise())},_loadPrevImage:function(){var t=this.getSlide(this._currentSlide+1)||{};return this.preloadSingleImage(this.getPreviewImage(t.preview)).then(this._setPrevSlide.bind(this))},_setPrevSlide:function(){this.dfdCanceled()||this.changePreview("prev",this.getSlide(this._currentSlide+1))},_loadNextImage:function(){var t=this.getSlide(this._currentSlide-1);return this.preloadSingleImage(this.getPreviewImage(t.preview)).then(this._setNextSlide.bind(this))},_setNextSlide:function(){this.dfdCanceled()||this.changePreview("next",this.getSlide(this._currentSlide-1))},_initDone:function(){this.delMod("initialize")},enableSlider:function(){this.slider.enableMove().hideSpinner(),this.updateSlider()},preloadSingleImage:function(t){var e=$.Deferred(),n=function i(){this.getPreloader().un("success error",i,this),this.dfdCanceled()?e.reject():e.resolve(t)};return this.dfdCanceled()?e.reject():t&&t.url?(this.getPreloader().on("success error",n,this).setImages([[t]]).batchLoad(),e.promise()):e.resolve()}}),BEM.DOM.decl({block:"b-501px",modName:"slider",modVal:"yes"},{findBlocks:function(){return this.__base.apply(this,arguments),this.uinfo=BEM.blocks["i-userinfo"].get(),this.location=BEM.blocks.location.getInstance(),this},bindEvents:function(){return this.__base.apply(this,arguments),this.slider.on("preview-disabled",this._onSliderToday,this).on("start",this._onSliderStart,this).on("next",this._onSliderNext,this).on("prev",this._onSliderPrev,this),BEM.blocks["i-keyrouter"].on("left up",this._onKeyPrev,this).on("right down",this._onKeyNext,this),this},destruct:function(){this.slider.un("preview-disabled",this._onSliderToday,this).un("start",this._onSliderStart,this).un("next",this._onSliderNext,this).un("prev",this._onSliderPrev,this),BEM.blocks["i-keyrouter"].un("left up",this._onKeyPrev,this).un("right down",this._onKeyNext,this),this.__base.apply(this,arguments)},_onKeyPrev:function(){this.isControlsHidden()||(this.slider.slide("prev"),cp({pid:40,cid:72623,path:"px500.previous.prev.click"}))},_onKeyNext:function(){this.isControlsHidden()||(this.slider.slide("next"),cp({pid:40,cid:72623,path:"px500.previous.next.click"}))},_onSliderNext:function(){this.updateURL().updateSlider("next").countImageShow()},_onSliderPrev:function(){this.updateURL().updateSlider("prev").countImageShow()},_onSliderToday:function(t,e){this.setMod("today",e),"yes"===e&&this.setDownloadText().setDownloadURL()},moveToToday:function(){var t=this.__self.formatDate(Date.now());this.load(t).done(this.onLoadToday.bind(this))},onLoadToday:function(t){this.updateState(t),this._currentSlide=0,this.slider.slide("next"),this._previous=t.params.images},_onSliderStart:function(t,e){"next"===e?this._currentSlide--:this._currentSlide++,this.isPreviousImage()?this.slider.enablePreview():this.slider.disablePreview()},_onDataLoaded:function(t){this.updateState(t)},updateState:function(t){this._addLoadedImages(t),this.slider.setImages(this.getState()).enableMove(),this.checkForLastSlide()},_addLoadedImages:function(t){var e=t.params,n=e.today,i=e.images;return this.params.hasPrev=e.hasPrev,this.params.hasNext&&(this.params.hasNext=e.hasNext),n?(this._today=n,this.addImages(i,this._today)):this.addImages(i,this._previous[0]),this},updateSlider:function(t){return this.isPreviousImage()||this.slider.disablePreview(),this.updateSliderImages().updatePage().checkData(t).batchPreload()},updateSliderImages:function(){return this.slider.setImages(this.getState()),this},checkData:function(t){var e=this._currentSlide,n=this.params.preloadCount;return"next"===t?this._previous[e-n]||this.tryLoad(!0):this._previous[e+n]||this.tryLoad(),this},changeSliderBackground:function(t,e){return this.slider.setBackground("next",t,e).moveBackground("next"),this},changePreview:function(t,e){return e&&this.slider.setPreview(t,e).showPreview(t),this},getPreviewImage:function(t){var e=this.params.previousSizes.preview;return{width:e.width,height:e.height,url:t}},getBackgroundImage:function(t){var e=this.params.previousSizes.back;return{width:e.width,height:e.height,url:t}},getCurrentImage:function(){var t=this._currentSlide;return t>=0?this._previous[t]:this._today},isPreviousImage:function(){return this._currentSlide>=0},updatePage:function(){return this.checkForLastSlide().updateFooter(this.getCurrentSlide()),this},checkForLastSlide:function(){return this._currentSlide===this._previous.length-1?this.slider.disableArrow("prev"):this.slider.enableArrow("prev"),this},updateURL:function(){var t=this.getCurrentSlide();return this.location.change({url:BEM.blocks.uri.buildRelativeUrl(this._indexPage,{d:t.hash_date}),trigger:!1,history:!1}),this.trigger("updateUrl"),this},isNextImages:function(t,e){return this.__self.getTimestamp(t[0].date)>=this.__self.getTimestamp(e.date)},getNextSlidesDate:function(){var t=this.__self.getTimestamp(this._previous[0].date),e=this.__self.getTime(),n=t+864e5*(this.params.imagesCount+1);return n>e&&(n=e),this.__self.formatDate(n)},getPrevSlidesDate:function(){var t=this._previous;return t[t.length-1].date},hasMore:function(t){return this.params.hasNext&&t||this.params.hasPrev&&!t},tryLoad:function(t){if(!this.hasMore(t))return this;var e,n;return t?(n=this.getNextSlidesDate(),e=this.getFirstImageDate()):n=this.getPrevSlidesDate(),this.load(n,e).done(this._onDataLoaded),this},getFirstImageDate:function(){return this._previous[0].date},load:function(t,e){var n=$.Deferred();return BEM.create("i-request_type_bem",{url:this._indexPage,ctx:this}).block("b-501px__data",n.resolve,{date:e}).get({date:t,uinfo:this.uinfo.getUserInfo(),time:this.__self.getTimeParam()}),n.promise()},addImages:function(t,e){return _.isEmpty(t)?this:(this.isNextImages(t,e)?(this._previous=t.concat(this._previous),this._currentSlide+=t.length):this._previous=this._previous.concat(t),this)},getState:function(){var t=this._currentSlide;return{prevprev:this.getSlide(t+2),prev:this.getSlide(t+1),current:this.getSlide(t),next:this.getSlide(t-1),nextnext:this.getSlide(t-2)}},getSlide:function(t){var e=-1===t?this._today:this._previous[t],n=e&&e.slide,i=n&&n.appropriate;return n?{back:i?i.url:n.back,preview:n.preview,focus:i?i.focus:void 0,alt:[e.snippet.title,e.author.name].join(", ")}:{}}}),BEM.DOM.decl({block:"b-501px",modName:"wizard",modVal:"yes"},{bindEvents:function(){if(this.__base.apply(this,arguments),this.bindTo("search","leftclick tap",this._onWizardClick),BEM.blocks["b-501px-wizard"].on("click",this._onWizardClick,this),BEM.blocks.location.on("change",this.hidePopup,this),!this.page.hasMod("mobile","yes")){var t=this._getWizard();BEM.blocks.button.on(this.elem("search"),"hovered",this._onSearchHovered,this),this._getWizardPopup().on("hovered",this._onPopupHovered,this).on("hide",t.hide,t)}return this},destruct:function(){if(BEM.blocks.location.un("change",this.hidePopup,this),!this.page.hasMod("mobile","yes")){var t=this._getWizard();BEM.blocks.button.un(this.elem("search"),"hovered",this._onSearchHovered,this),this._getWizardPopup().un("hovered",this._onPopupHovered,this).un("hide",t.hide,t)}BEM.blocks["b-501px-wizard"].un("click",this._onWizardClick,this),this.clearPopupTimer(),this.__base.apply(this,arguments)},_onWizardClick:function(t){this.countWizardClick().hidePopup(),t.preventDefault()},_onSearchHovered:function(t,e){this.togglePopup(e)},_onPopupHovered:function(t,e){this.togglePopup(e)},_getWizard:function(){return this._wizard||(this._wizard=this.findBlockInside("b-501px-wizard"))},_getWizardPopup:function(){return this._wizardPopup||(this._wizardPopup=this.findBlockInside({block:"popup",modName:"wizard",modVal:"yes"}))},getSearchButton:function(){return this._searchButton||(this._searchButton=this.findBlockInside("search","button"))},countWizardClick:function(){return cp(this.hasMod("today","yes")?{pid:40,cid:72623,path:"px500.main.wizard.click"}:{pid:40,cid:72623,path:"px500.previous.wizard.click"}),BEM.blocks["b-statcounter"].hit({params:{query:{morda:"daily"}}}),_.includes(["ru","ua","com.tr"],BEM.blocks["i-global"].param("tld"))&&BEM.blocks["b-statcounter"].goal({goal:"wizard",params:{query:{morda:"daily"}}}),this},togglePopup:function(t){return"yes"===t?this.showPopup():this.hidePopup(),this},showPopup:function(){var t=this._getWizard();this.clearPopupTimer(),t.isVisible()||(this.checkWizard(),this._getWizardPopup().show(this.elem("search")),t.align().show())},hidePopup:function(){return this.popupTimer=setTimeout(function(){this._getWizardPopup().hide()}.bind(this),this.params.popupTimeout),this},clearPopupTimer:function(){this.popupTimer&&clearTimeout(this.popupTimer)},updateWizard:function(){return this._getWizard().updateLink(this.getCurrentWizardLink()).load(),this},getCurrentWizardLink:function(){return this.getCurrentSlide().snippet.link},checkWizard:function(){return this._getWizard().isLoaded()||this.updateWizard(),this},updateSlider:function(){return this._getWizard().updateLink(this.getCurrentWizardLink()),this.__base.apply(this,arguments)}}),BEM.DOM.decl({block:"button",modName:"triggerable",modVal:"yes"},{onSetMod:{hovered:function(t,e){this.__base.apply(this,arguments),this.trigger("hovered",e)}}}),BEM.DOM.decl({block:"popup",modName:"hoverable",modVal:"yes"},{onSetMod:{hovered:function(t,e){this.__base.apply(this,arguments),this.trigger("hovered",e)}}},{live:function(){this.__base.apply(this,arguments),this.liveBindTo("mouseover mouseout",function(t){this.setMod("hovered","mouseover"===t.type?"yes":"")})}}),BEM.DOM.decl("b-501px-info",{onSetMod:{js:function(){this.actualizeImages()}},actualizeImages:function(){this.addSourceToImages(BEM.blocks["i-userinfo"].get().isRetinaDisplay()?this.getRetinaImages():this.getBasicImages())},addSourceToImages:function(t){var e=this.params.path;this.elem("image").each(function(n){$(this).attr("src",e+t[n])})},getBasicImages:function(){return this._basicImages||(this._basicImages=this.getImages("basic"))},getRetinaImages:function(){return this._retinaImages||(this._retinaImages=this.getImages("retina"))},getImages:function(t){return _.map(this.params.images,function(e){return e[t]})}},{live:!0}),BEM.DOM.decl("b-501px-info",{},{live:function(){this.liveInitOnBlockEvent("opened","b-501px-popup")}}),BEM.DOM.decl("b-501px-popup",{_popupWrapperMarginBottom:58,onSetMod:{js:function(){this.bindEvents()}},bindEvents:function(){return this.__self.on("close",this.close,this),this.bindTo("leftclick tap",this.close).bindTo("close","leftclick tap",this._onCloseClick).bindTo("content","leftclick tap",this._onContentClick),this.hasMod("scrollable","yes")&&(this.bindTo("touchstart",this._onTouchStart).bindTo("touchmove",this._onTouchMove),this.hasMod("centering","yes")&&BEM.blocks["b-page"].on("resize",this._setPopupPosition,this)),BEM.blocks["i-keyrouter"].on("esc",this.close,this),this},destruct:function(){this.__self.un("close",this.close,this),BEM.blocks["i-keyrouter"].un("esc",this.close,this),this.hasMod("centering","yes")&&BEM.blocks["b-page"].un("resize",this._setPopupPosition,this),this.__base.apply(this,arguments)},_onContentClick:function(t){t.stopPropagation()},_onTouchStart:function(t){this._scrollStartPos=this.domElem.scrollTop()+t.originalEvent.touches[0].pageY},_onTouchMove:function(t){this.domElem.scrollTop(this._scrollStartPos-t.originalEvent.touches[0].pageY),t.preventDefault()},_onCloseClick:function(){this.close().trigger("closed-by-cross")},_setPopupPosition:function(){return this.elem("content").css({transform:"translateY("+this._calcPopupTop()+"px)"}),this},_calcPopupTop:function(){var t=this._getContentHeight(),e=this._getPopupHeight();return t>e?~~((t-e)/2):0},_getContentHeight:function(){return this.domElem.height()-this._popupWrapperMarginBottom},_getPopupHeight:function(){return this._popupHeight||(this._popupHeight=this.elem("content").height())},open:function(){return this.hasMod("centering","yes")&&this._setPopupPosition(),this.setMod("visibility","visible").trigger("opened")},close:function(){return this.isVisible()&&(this.setMod("visibility","hidden"),$.browser.msie&&~~$.browser.version<=9?this._close():this.domElem.one(BEM.blocks["i-ua"].getTransitionEndEvent(),this._close.bind(this))),this},isVisible:function(){return this.hasMod("visibility","visible")},setPosition:function(t){return this.setMod("position",t)},clearPosition:function(){return this.delMod("position")},_close:function(){return this.delMod("visibility").trigger("closed")}},{live:!0}),BEM.DOM.decl("b-501px-slider",{_animationTime:600,onSetMod:{js:function(){this.bindEvents()},"preview-disabled":{yes:function(t,e){this.disableArrow("next").hideParanja().trigger(t,e)},"":function(t,e){this.enableArrow("next").showParanja().trigger(t,e)}}},setImages:function(t){return _.forOwn(t,this.setImage,this),this},setImage:function(t,e){return t?(this.setPreview(e,t).showPreview(e),void("prevprev"!==e&&"nextnext"!==e&&t.back&&this.setBackground(e,t.back,t.focus))):void this.hidePreview(e)},isMoveDisabled:function(t){return this.hasMod("animation","yes")||this.hasMod("disable-move","yes")||this.hasMod(this.elem("arrow","dir",t),"hidden","yes")},slide:function(t){return this.isMoveDisabled(t)?this:(this.setMod("animation","yes").trigger("start",t).slidePreviews(t).moveBackground(t).trigger(t),setTimeout(this.onAnimationEnd.bind(this),this._animationTime),this)},onAnimationEnd:function(){this.delMod("animation").delMod(this.elem("preview","animation","no"),"animation")},showParanja:function(){return this.setMod(this.elem("paranja"),"visible","yes")},hideParanja:function(){return this.delMod(this.elem("paranja"),"visible")},hideSpinner:function(){return this.findBlockInside("spinner").delMod("progress"),this}}),BEM.DOM.decl("b-501px-slider",{setBackground:function(t,e,n){var i=this.elem("background","pos",t),s="url("+e+")";return i.css("background-image")===s?this:(i.css({"background-image":s,"background-position":n?n.left+"% "+n.top+"%":""}),this)},moveBackground:function(t){var e="next"===t,n=this.elem("background","pos","current"),i=this.elem("background","pos","next"),s=this.elem("background","pos","prev");return this.setMod(n,"pos",e?"prev":"next").setMod(i,"pos",e?"current":"prev").setMod(s,"pos",e?"next":"current")}}),BEM.DOM.decl("b-501px-slider",{_positions:["prevprev","prev","current","next","nextnext"],_minArrowHeight:100,_maxArrowHeight:300,_prevNextOffset:50,onSetMod:{js:function(){this.__base.apply(this,arguments),this.findPreviews().updateLayoutSize().updatePreviewSizes()}},bindEvents:function(){return this.__base.apply(this,arguments),BEM.blocks["b-501px"].on("resize",this._onPageResize,this),this},destruct:function(){BEM.blocks["b-501px"].un("resize",this._onPageResize,this),this.__base.apply(this,arguments)},_onPageResize:function(){this.updateLayoutSize().updatePreviewSizes().updatePreviews()},updatePreviewSizes:function(){return this._previewSizes={current:this.calcPreviewSize("current"),other:this.calcPreviewSize()},this},updateLayoutSize:function(){return this._layoutSize={width:this.getLayoutWidth(),height:this.getLayoutHeight()},this},findPreviews:function(){var t=this.elem("preview");return this._previewsState=[{preview:t.eq(0)},{preview:t.eq(1)},{preview:t.eq(2)},{preview:t.eq(3)},{preview:t.eq(4)}],this},disablePreview:function(){return this.setMod("preview-disabled","yes")},enablePreview:function(){return this.delMod("preview-disabled")},isPreviewDisabled:function(){return this.hasMod("preview-disabled","yes")},setPreview:function(t,e){var n=this.getThumb(t);return n.attr("src")!==e.preview&&n.attr({src:e.preview||"",alt:e.alt||""}),this},getThumb:function(t){return this.findElem(this.getPreview(t),"thumb")},updatePreviews:function(){this.fillBaseTransform(),this.setArrowsHeight(this.getPreviewSize().height);for(var t=0,e=this._previewsState.length;e>t;t++)this.updateTransform(this.getPreviewPos(t));return this.changePreviewsMods()},setNewState:function(t,e){var n=this.getPreviewIndex(t);return this._previewsState[n].transform=e,this},getPreviewIndex:function(t){return this._positions.indexOf(t)},getPreviewPos:function(t){return this._positions[t]},getPreview:function(t){return this.getState(t).preview},getState:function(t){return this._previewsState[this.getPreviewIndex(t)]},moveLastPreview:function(t){var e=t+t,n="next"===t?"prevprev":"nextnext",i=this.getTransform(n);return i.translate.x=this.getTransform(e).translate.x-this.getXInc(t),this.disableAnimation(e).setNewState(n,i).updateTransform(n),this},getPreviewHeight:function(t){var e=this.getLayoutHeight(),n="current"===t?this.params.maxSize.height:this._maxArrowHeight;return Math.max(this._minArrowHeight,Math.min(e,n))},getPreviewWidth:function(t){var e=this.getLayoutWidth()-150,n=this.params.maxSize,i=n.width;return"current"===t?Math.min(e,i):this._maxArrowHeight/n.height*i},getPreviewSize:function(t){return"current"!==t||this.isPreviewDisabled()?this._previewSizes.other:this._previewSizes.current},getLayoutHeight:function(){return this.elem("main").height()},getLayoutWidth:function(){return this.elem("main").width()},getLayoutSize:function(){return this._layoutSize},slidePreviews:function(t){return"next"===t?this.rotateStateNext():this.rotateStatePrev(),this.moveLastPreview(t).slideList(t).updatePreviews()},changePreviewsMods:function(){return this.clearPositionMod().setPositionMod("current").setPositionMod("next").setPositionMod("prev")},clearPositionMod:function(){return this.delMod(this.elem("preview"),"pos")},setPositionMod:function(t){return this.setMod(this.getPreview(t),"pos",t)},disableAnimation:function(t){return this.setMod(this.getPreview(t),"animation","no")},hidePreview:function(t){return this.setMod(this.getPreview(t),"hidden","yes")},showPreview:function(t){return this.delMod(this.getPreview(t),"hidden")},rotateStateNext:function(){var t=this._previewsState;return t.push(t.shift()),this},rotateStatePrev:function(){var t=this._previewsState;return t.unshift(t.pop()),this}}),BEM.DOM.decl("b-501px-slider",{onSetMod:{"disable-move":{"":function(){this.updatePreviews()}}},bindEvents:function(){var t=BEM.blocks["i-global"].param("mobile")?"touchstart":"leftclick";return this.__base.apply(this,arguments),this.bindTo("arrow",t,this._onArrowClick),this},destruct:function(){clearTimeout(this._blinkTimer),this.__base.apply(this,arguments)},_onArrowClick:function(t){var e=this._extractElem(t),n=this.getMod(e,"dir");this.slide(n),cp({pid:40,cid:72623,path:"px500.previous."+n+".click"}),BEM.blocks["b-501px-popup"].trigger("close")},_extractElem:function(t){return t.data.domElem},enableMove:function(){return this.delMod("disable-move")},disableArrow:function(t){return this.setMod(this.elem("arrow","dir",t),"hidden","yes")},enableArrow:function(t){return this.delMod(this.elem("arrow","dir",t),"hidden")},blinkPrevArrow:function(){return this._blinkTimer=setTimeout(this.unblinkPrevArrow.bind(this),2500),this.setMod(this.elem("arrow","dir","prev"),"blinking","yes")},unblinkPrevArrow:function(){this.delMod(this.elem("arrow","dir","prev"),"blinking")},setArrowsHeight:function(t){return this.elem("arrow").css({height:t,"margin-top":-~~(t/2)}),this}}),BEM.DOM.decl("b-501px-slider",{_listOffsetX:0,slideList:function(t){return this._listOffsetX+=this.getXInc(t),this.setTransform(this.elem("list"),{x:this._listOffsetX})}}),BEM.DOM.decl({block:"b-501px-slider",modName:"transform",modVal:"yes"},{getXInc:function(t){var e=(this.getLayoutWidth()+this.calcPreviewSize().width)/2-this._prevNextOffset;return("next"===t?-1:1)*e},getTransform:function(t){return this.getState(t).transform},calcPreviewSize:function(t){var e=this.getPreviewHeight(t),n=this.getPreviewWidth(t),i=this.params.maxSize,s=this.calcPreviewScale(n,e);return{width:Math.round(i.width*s),height:Math.round(i.height*s),scale:s}},calcPreviewScale:function(t,e){var n=this.params.maxSize;return Math.min(e/n.height,t/n.width).toFixed(2)},fillBaseTransform:function(){for(var t,e=this.getLayoutSize(),n=0,i=this._previewsState.length;i>n;n++)t=this.getPreviewPos(n),this.setNewState(t,this.calcTransform(t,this.getPreviewSize(t),e));return this},calcTransformX:function(t,e,n){var i=-(1-e.scale)*this.params.maxSize.width/2,s=this.isPreviewDisabled(),r=this._prevNextOffset,o=n.width,a=e.width,c=i-this._listOffsetX;switch(t){case"prevprev":c+=-o/2-1.5*a+2*r;break;case"prev":c+=-a+(s?0:r);break;case"current":c+=s?o:(o-a)/2;break;case"next":c+=o-(s?0:r);break;case"nextnext":c+=1.5*o+a/2-2*r}return Math.round(c)},calcTransformY:function(t,e){var n=-(1-t.scale)*this.params.maxSize.height/2;return Math.round(n+(e.height-t.height)/2)},calcTransform:function(t,e,n){return{translate:{x:this.calcTransformX(t,e,n),y:this.calcTransformY(e,n)},scale:e.scale}},updateTransform:function(t){var e=this.getState(t),n=e.transform;return this.setTransform(e.preview,n.translate,n.scale)},setTransform:function(t,e,n){var i="translate("+[e.x+"px",(e.y||0)+"px"].join()+")";return n&&(i+="scale("+n+")"),t.css({transform:i}),this}}),BEM.DOM.decl("b-501px-wizard",{onSetMod:{js:function(){this.spin=this.findBlockInside("spinner")},loading:function(t,e){this.spin.setMod("progress","yes"===e?"yes":"")}},_onClick:function(){this.trigger("click")},_onLoad:function(t){this.update(t.html).setMod("loaded","yes").delMod("loading").findElem("images").attr("href",this._link)
},load:function(){return this.setMod("loading","yes"),this._load(this._link)},updateLink:function(t){return this._link!==t&&this.setLink(t).clearContent().dropFluider().delMod("loaded").tryReload(),this},dropFluider:function(){return delete this.fluider,this},tryReload:function(){return this.isVisible()&&this.load(),this},setLink:function(t){return this._link=t,this},clearContent:function(){return BEM.DOM.destruct(this.elem("content"),!0),this},update:function(t){return BEM.DOM.update(this.elem("content"),t),this.bindTo("images","click",this._onClick),this},isLoaded:function(){return this.hasMod("loaded","yes")},isVisible:function(){return this.hasMod("visibility","visible")},align:function(){return this.fluider||(this.fluider=this.findBlockInside("fluider")),this.afterCurrentEvent(function(){this.fluider&&this.fluider.align()}),this},show:function(){return this.setMod("visibility","visible")},hide:function(){return this.setMod("visibility","hidden")},_load:function(t){var e=BEM.blocks.uri,n=e.getPath(t)+"?"+e.parse(t).uriParts.query;return BEM.create("i-request_type_bem",{url:n,ctx:this}).block("b-501px-wizard__images",this._onLoad).get({type:"search",params:{uinfo:BEM.blocks["i-userinfo"].get().getUserInfo()}}),this}}),BEM.decl("date",{},{shortHumanDate:function(t){var e=t.getDate();return[BEM.I18N("date","{day} января",{day:e}),BEM.I18N("date","{day} февраля",{day:e}),BEM.I18N("date","{day} марта",{day:e}),BEM.I18N("date","{day} апреля",{day:e}),BEM.I18N("date","{day} мая",{day:e}),BEM.I18N("date","{day} июня",{day:e}),BEM.I18N("date","{day} июля",{day:e}),BEM.I18N("date","{day} августа",{day:e}),BEM.I18N("date","{day} сентября",{day:e}),BEM.I18N("date","{day} октября",{day:e}),BEM.I18N("date","{day} ноября",{day:e}),BEM.I18N("date","{day} декабря",{day:e})][t.getMonth()]},fullHumanDate:function(t){var e=t.getDate(),n=t.getFullYear();return[BEM.I18N("date","{day} января {year} г.",{day:e,year:n}),BEM.I18N("date","{day} февраля {year} г.",{day:e,year:n}),BEM.I18N("date","{day} марта {year} г.",{day:e,year:n}),BEM.I18N("date","{day} апреля {year} г.",{day:e,year:n}),BEM.I18N("date","{day} мая {year} г.",{day:e,year:n}),BEM.I18N("date","{day} июня {year} г.",{day:e,year:n}),BEM.I18N("date","{day} июля {year} г.",{day:e,year:n}),BEM.I18N("date","{day} августа {year} г.",{day:e,year:n}),BEM.I18N("date","{day} сентября {year} г.",{day:e,year:n}),BEM.I18N("date","{day} октября {year} г.",{day:e,year:n}),BEM.I18N("date","{day} ноября {year} г.",{day:e,year:n}),BEM.I18N("date","{day} декабря {year} г.",{day:e,year:n})][t.getMonth()]},getRelativeDate:function(t,e){switch(e||(e=new Date),Math.floor((e-t)/864e5)){case 0:return BEM.I18N("date","Сегодня");case 1:return BEM.I18N("date","Вчера");default:return this.getHumanDate(t,e)}},getHumanDate:function(t,e){return e||(e=new Date),e.getFullYear()===t.getFullYear()?this.shortHumanDate(t):this.fullHumanDate(t)}}),BEM.HTML.decl("b-icon",{onBlock:function(t){var e,n={src:"//yastatic.net/lego/_/La6qi18Z8LwgnZdsAr1qy1GwCwo.gif",alt:""},i=t.params(),s=["alt","width","height"];for(i.url&&(n.src=i.url);e=s.shift();)i[e]&&(n[e]=i[e]);t.tag("img").attrs(n)}}),BEM.decl("i-preloader",{onSetMod:{js:function(){this.__self._history||(this.__self._history=$("<div />",{"class":"i-preloader__history"}).appendTo("body"))}},load:function(t){return t&&t.length?(this.stop(),this.duplicates=t.slice(0),this.preload(this.getNextDuplicate()),this):this},getSuccessfulDup:function(t){for(var e=0,n=t.length;n>e;e++)if("complete"===this.getState(t[e]))return t[e]},preload:function(t){switch(this.image=t,this.getState(t)){case"error":this._onError(t);break;case"complete":this._onSuccess(t);break;default:this.startLoad(t)}},startLoad:function(t){return this.loadImage(t)},loadImage:function(t){return this.setState(t,"loading"),this._loader=this.createLoader(t),this._loader&&this._loader.complete&&this._loader.width>0&&this._loader.height>0&&this._onLoad(this._loader,t),this},stop:function(){return this.destroyLoader()},createLoader:function(t){var e=new Image,n=this;return e.onload=function(){n._onLoad(this,t)},e.onerror=function(){n._onError(this,t)},e.src=t.url,e},destroyLoader:function(){return this._loader&&(this._loader.onload=this._loader.onerror=null,this._loader=null),this},_onLoad:function(t,e){t=this.toObject(t,e),e&&!this._isSizeMatch(t,this.toObject(e))?(this._onError(t,e),this.trigger("wrongsize",t.url)):this._onSuccess(t)},_onSuccess:function(t){this.stop(),"complete"!==this.getState(t)&&this.setState(t,"complete").saveImage(t),this.trigger("success",t)},_onError:function(t,e){t=this.toObject(t,e),"loading"===this.getState(t)&&(this.setState(t,"error"),this.stop(),this.trigger("notfound",t.url)),this.duplicates&&this.duplicates.length?this.preload(this.getNextDuplicate()):this.hasMod("batch","yes")||this.trigger("error",t)},_isSizeMatch:function(t,e){return t.width===e.width||t.height===e.height},setState:function(t,e){return this.__self._state[t.url]=e,this},getState:function(t){return this.__self._state[t.url]},saveImage:function(t){return this.__self._history.append('<img src="'+t.url+'" />'),this},getNextDuplicate:function(){return this.toObject(this.duplicates.shift())},toObject:function(t,e){return{url:t.url||t.src,origin:e&&e.url,width:+t.width,height:+t.height}}},{_state:{},_history:null}),BEM.decl("i-preloader",{onSetMod:{js:function(){this.__base.apply(this,arguments),this.on("wrongsize",this._onWrongSize).on("notfound",this._onNotFound)}},_onWrongSize:function(t,e){errcnt({src:e},72681)},_onNotFound:function(t,e){errcnt({src:e},2055)}}),BEM.decl({block:"i-preloader",modName:"reload-on-error",modVal:"yes"},{getDefaultParams:function(){return _.extend(this.__base.apply(this,arguments),{triesCount:2,tryTimeout:100})},_onError:function(t,e){t=this.toObject(t,e);var n=t.origin||t.url,i=this.__self._errorsCount[n]||0;i<this.params.triesCount?setTimeout(this.preload.bind(this,t),this.params.tryTimeout):this.__base.apply(this,arguments),this.__self._errorsCount[n]=i+1}},{_errorsCount:{}}),BEM.DOM.decl("b-501px-metrika",{onSetMod:{js:function(){if(!(location.hash.indexOf("search")>=0)){var t=$.cookie("mfrom");t||(t=this.params.source,this._setCookie(t)),this._hitVisit(t)._removeUTM()}}},_hitVisit:function(t){var e=window.Ya&&Ya.Metrika,n=window.yandex_metrika_callbacks||(window.yandex_metrika_callbacks=[]),i=this.params.counter,s=function(){new Ya.Metrika({id:i,params:{from:t}})};return e?s():(BEM.blocks["b-statcounter__metrika"].loadMetrika(),n.push(s)),this},_removeUTM:function(){return BEM.blocks.location.getInstance().change({url:BEM.blocks.uri.delParams(["utm_source","utm_campaign"]),history:!1,trigger:!1}),this},_setCookie:function(t){return $.cookie("mfrom",t,{expires:3650,path:BEM.blocks["i-global"].param("router").index}),this}}),BEM.DOM.decl("direct",{_load:function(t,e){this.__self.load(this._onLoad.bind(this,t,e))},_onLoad:function(t,e){window.yandex_context_callbacks||(window.yandex_context_callbacks=[]),window.yandex_context_callbacks.push(this._update.bind(this,t,e))}},{LOADER_URL:"//an.yandex.ru/system/context.js",load:function(t){t(),$.getScript(this.LOADER_URL,function(){this._isLoaded=!0}.bind(this))}}),BEM.DOM.decl("direct",{update:function(t,e){window.Ya&&window.Ya.Direct&&this.__self._isLoaded||this._load(t,e),this._update(t,e)},transparent:function(){this.setMod("visibility","transparent")},hide:function(){return this.setMod("visibility","hidden")},show:function(){return this.delMod("visibility")}}),BEM.DOM.decl("direct",{onSetMod:{js:function(){this.__base.apply(this,arguments),this.directCallback=this._onDirectLoaded.bind(this)}},_onDirectLoaded:function(){return BEM.blocks["i-global"].param("isPornoQuery")?void this.hide():void(this.isExists()?this.show():this.hide())},handleExistDirect:function(t){var e=setInterval(function(){this.isExists()&&(this.directCallback(),clearInterval(e),t&&t.apply(this))}.bind(this),50)},_render:function(t,e,n){return this.ctx.Ya.Context&&this.ctx.Ya.Context.AdvManager.render({blockId:n||this.params.directId,renderTo:e,async:!0,onRender:this.directCallback.bind(this),grab:BEM.blocks["i-global__utils"].base64Encode("t"+t)},this.directCallback.bind(this)),this}},{_status:"not exists",load:function(t){t(),"not exists"===this._status&&$.getScript(this.LOADER_URL).done(function(){this._isLoaded=!0,this._status="loaded"}.bind(this)).fail(function(){this._status="error"}.bind(this)),this._status="loading"},canShowMoreAds:function(){return window.innerWidth>1300}}),BEM.DOM.decl({block:"direct",modName:"type",modVal:"stripe"},{onSetMod:{js:function(){this.__base.apply(this,arguments),this.settings={stat_id:this.params.statId,ad_format:"direct",type:"row",limit:1,no_sitelinks:!0,favicon:!0,font_size:1,title_font_size:2,title_color:"22c",text_color:"000",url_color:"070",hover_color:"c00",bg_color:"fff1bc",linksUnderline:!1}}},_update:function(t,e){var n=e?this.params.altDirectId:this.params.directId,i="yandex_ad_stripe_frame";return this.settings.grab=this.params.context||e?encodeURIComponent(t):BEM.blocks["i-global__utils"].base64Encode("t"+t),this.ctx.Ya.Direct.insertInto(n,i,this.settings,function(){setTimeout(function(){this.params.altDirectId?this._update(t,!0):this.directCallback()}.bind(this),0)}.bind(this)),this.handleExistDirect(),this}}),BEM.DOM.decl({block:"direct",modName:"type",modVal:"search"},{onSetMod:{js:function(){this.__base.apply(this,arguments),BEM.blocks.footer.on("show",this._onFooterShow,this),BEM.blocks.footer.on("hide",this._onFooterHide,this),BEM.blocks.footer.on("transparent",this._onFooterTransparent,this),BEM.blocks["serp-list"].on("loaded",this._onSerpListLoaded,this)}},destruct:function(){BEM.blocks.footer.un("show",this._onFooterShow,this),BEM.blocks.footer.un("hide",this._onFooterHide,this),BEM.blocks.footer.un("transparent",this._onFooterTransparent,this),BEM.blocks["serp-list"].un("loaded",this._onSerpListLoaded,this),this.__base.apply(this,arguments)},show:function(){return this.isExists()&&(this.__base.apply(this,arguments),this.hasMod("target","iframe")&&this.updateFrameHeight()),this},_onFooterShow:function(){this.show()},_onFooterHide:function(){this.hide()},_onFooterTransparent:function(){this.transparent()},_onSerpListLoaded:function(t,e){e.totalPages%this.params.pagesCount===this.params.initAfterPage&&this.update()},_update:function(){if(this.hasMod("target","page"))return this.__base.apply(this,arguments);var t=BEM.blocks["i-global"].param("query"),e={stat_id:this.params.statId,grab:BEM.blocks["i-global__utils"].base64Encode("t"+t),ad_format:"direct",type:"horizontal",limit:this.__self.canShowMoreAds()?3:2,no_sitelinks:!1,favicon:!0,font_size:1,title_font_size:2,title_color:"22c",text_color:"000",url_color:"070",hover_color:"f00",linksUnderline:!1};return this.ctx.Ya.Direct.insertInto(this.params.directId,"yandex_ad_search_frame",e),this.handleExistDirect(),this},_onDirectLoaded:function(){}}),BEM.DOM.decl({block:"direct",modName:"type",modVal:"between"},{onSetMod:{js:function(){this.__base.apply(this,arguments),BEM.blocks["serp-list"].on("loaded",this._onSerpListLoaded,this)}},destruct:function(){BEM.blocks["serp-list"].un("loaded",this._onSerpListLoaded,this),this.__base.apply(this,arguments)},_onSerpListLoaded:function(t,e){e.totalPages%3===0&&(e.serpList.appendIncutElem(this.domElem),this.hasMod("target","iframe")&&this.findContainers(),this.update())},_update:function(){if(this.hasMod("target","page"))return this.__base.apply(this,arguments);var t=BEM.blocks["i-global"].param("query"),e={stat_id:this.params.statId,grab:BEM.blocks["i-global__utils"].base64Encode("t"+t),ad_format:"direct",type:"horizontal",limit:this.__self.canShowMoreAds()?3:2,no_sitelinks:!1,favicon:!0,font_size:1,title_font_size:2,title_color:"22c",text_color:"000",url_color:"070",hover_color:"f00",linksUnderline:!1};return this.ctx.Ya.Direct.insertInto(this.params.directId,"yandex_ad_between_frame",e),this.handleExistDirect(this.updateFrameHeight),this}}),BEM.DOM.decl({block:"direct",modName:"type",modVal:"fridge"},{_update:function(t){return this._render(t,"yandex_ad_fridge_frame"),this},_onDirectLoaded:function(){this.domElem.height(this._frame.height()),this.__base.apply(this,arguments)}}),BEM.DOM.decl({block:"direct",modName:"type",modVal:"poster"},{onSetMod:{js:function(){var t=window.innerWidth;t>=950&&1400>=t&&(this.__base.apply(this,arguments),this.update(BEM.blocks["i-global"].param("query")))}},_onDirectLoaded:function(){this.__base.apply(this,arguments);var t=this;this.hasMod("visibility","hidden")||this.findBlockOutside("direct-wrapper").delMod("visibility"),this.domElem.height(this._frame.height()),setTimeout(function(){t.domElem.height(t._frame.height())},500),w(this,"image.new.serp.direct.loaded")},_update:function(t){return this._render(t,"yandex_ad_poster_frame"),this}}),BEM.DOM.decl({block:"direct",modName:"type",modVal:"stripe-over-gallery"},{_update:function(t){return this._render(t,"yandex_ad_stripe-over-gallery_frame"),this}}),BEM.DOM.decl({block:"direct",modName:"target",modVal:"iframe"},{onSetMod:{js:function(){this.__base.apply(this,arguments),this.domElem.on("load",this._onFrameLoaded.bind(this)),this.directNotExistsCounter=0}},destruct:function(){return clearTimeout(this._directLoader),this.__base.apply(this,arguments)},_onFrameLoaded:function(){this.findContainers()},findContainers:function(){return this.setContext().findFrame(),this},setSrc:function(){this.afterCurrentEvent(function(){this.domElem.attr("src",this.params.src),this._hasSrc=!0})},setContext:function(){return this.ctx=this.domElem[0].contentWindow,this},findFrame:function(){if(this.domElem)try{this._frame=this.domElem.contents().find("#yandex_ad_"+this.getMod("type")+"_frame")}catch(t){}return this},update:function(t){if(BEM.blocks["i-global"].param("isPornoQuery"))return void this.hide();if(this.domElem){this._hasSrc||this.setSrc();try{if(!this.ctx||!this.ctx.Ya||!this.ctx.Ya.Direct&&!this.ctx.Ya.Context)return void(this._directLoader=setTimeout(function(){this.update(t)}.bind(this),100));this._update(t)}catch(e){}}},isExists:function(){var t;return this.directNotExistsCounter>10&&(this.findFrame(),this.directNotExistsCounter=0),t=!(!this._frame||!this._frame.length||this._frame.is(":empty")),!t&&this.directNotExistsCounter++,t},updateFrameHeight:function(){if(this._frame&&this._frame.length){var t=this._frame.context.contentWindow.document.body.offsetHeight;this._frame.context.height=t,this.trigger("updateHeight",{height:t})}return this}}),BEM.DOM.decl({block:"direct",modName:"target",modVal:"page"},{onSetMod:{js:function(){this.__base.apply(this,arguments),this.ctx=window}},_update:function(){if(!this.__self._isLoaded)return this;var t=BEM.blocks["i-global"].param("query"),e=this.__self.canShowMoreAds()?this.params.moreDirectId:this.params.directId;return this._render(t,this.domElem[0].id,e),this},isExists:function(){return!this.domElem.is(":empty")}}),BEM.DOM.decl({block:"direct",modName:"update-on-init",modVal:"yes"},{onSetMod:{js:function(){this.__base.apply(this,arguments),this.update()}}}),BEM.DOM.decl("back",{onSetMod:{js:function(){this._isEnabled()&&(this.setMod("visibility","visible"),this.bindTo("click",this._onClick))}},_isEnabled:function(){return window.history&&window.history.length>0},_onClick:function(t){t.preventDefault(),BEM.blocks["b-statcounter"].hit({params:{query:{cbir:"back"}}}),window.history.back()}}),BEM.DOM.decl("related",{show:function(){return this.delMod("visibility")},hide:function(){return this.setMod("visibility","hidden")},_onItemClick:function(t){var e={};e[this.getMod("position")]="p"+this.getItemIndex(t.data.domElem),BEM.blocks["b-statcounter"].hit({params:{query:{related:e}}})},getItemIndex:function(t){return this.elem("item").index(t)}},{live:function(){return this.liveBindTo("item","click",function(t){this._onItemClick(t)}),!1}}),BEM.DOM.decl({block:"related",modName:"position",modVal:"top"},{getDefaultParams:function(){return{pageWidth:this.__self.win.width(),navigationWidth:138}},onSetMod:{js:function(){this.__base.apply(this,arguments),this.hasMod("left-col","no")&&(this.params.navigationWidth=22),this.setCarouselHeight(this.getItemMaxHeight())}},destruct:function(){this.__base.apply(this,arguments)},getItemMaxHeight:function(){for(var t=this.elem("item"),e=$(t[0]).height(),n=1,i=t.length;i>n;n++)$(t[n]).height()>=e&&(e=$(t[n]).height());return e},setCarouselHeight:function(t){0!==t&&this.elem("carousel").css("height",t)}}),BEM.DOM.decl("carousel",{getDefaultParams:function(){return{animationTime:300,offset:null}},onSetMod:{js:function(){this.setScrollMod(),this.bindEvents()},scroll:{left:function(){var t=this.elem("control","side","right");this.hasMod(t,"hovered","yes")&&this.setMod(t,"disable","yes")},right:function(){var t=this.elem("control","side","left");this.hasMod(t,"hovered","yes")&&this.setMod(t,"disable","yes")}}},onElemSetMod:{control:{hovered:{"":function(){this.delMod(this.elem("control"),"disable")}}}},bindEvents:function(){return this.bindTo("item","click",this._onItemClick).bindTo("control","click",this._onControlClick).bindTo("control","dblclick",function(t){t.preventDefault()}).bindTo("wrap","scroll",$.throttle(this._onScroll,50,this)),BEM.blocks["i-global"].param("mobile")||this.bindTo("control","mousemove",this._onMouseMove).bindTo("control","mouseleave",this._onMouseLeave).bindTo("wrap","dragstart",this._onDragStart).bindTo("wrap","mousedown",this._onMouseDown).bindTo("wrap","mousemove",this._onItemMouseMove).bindTo("wrap","mouseup mouseleave",this._onMouseUp),BEM.blocks["b-page"].on("resize",this._onResize,this),this},destruct:function(){this.__base.apply(this,arguments),BEM.blocks["b-page"].un("resize",this._onResize,this)},_onResize:function(){this.setScrollMod()},_onItemClick:function(t){return this.preventClick?(this.preventClick=!1,t.stopImmediatePropagation(),!1):void 0},_onMouseMove:function(t){this.setMod(t.data.domElem,"hovered","yes")},_onMouseLeave:function(){this.delMod(this.elem("control"),"hovered")},_onMouseDown:function(t){this.clicked=!0,this.preventClick=!1,this.startPoint=t.clientX+this.elem("wrap").scrollLeft(),this._mouseDownX=t.clientX,this._mouseDownY=t.clientY},_onDragStart:function(t){t.preventDefault()},_onItemMouseMove:function(t){!this.clicked||t.clientX===this._mouseDownX&&t.clientY===this._mouseDownY||(this.setMod(this.elem("wrap"),"grabbing","yes"),this.elem("wrap").scrollLeft(this.startPoint-t.clientX),this.preventClick=!0)},_onMouseUp:function(){this.delMod(this.elem("wrap"),"grabbing"),this.clicked=!1},_onControlClick:function(t){if(!this.hasMod(this.elem("control"),"disable","yes")){var e=this.getMod(t.data.domElem,"side");this.canScrollTo(e)&&this.move(e)}},_onScroll:function(){this.setScrollMod().checkEndOfList()},setScrollMod:function(){var t,e=this.elem("wrap").scrollLeft(),n=this.elem("wrap")[0].scrollWidth,i=this.elem("wrap").width();return t=0>=n-i?"":0===e?"right":n>e+i?"both":"left",this.setMod("scroll",t)},checkEndOfList:function(){if(!this.params.offset)return this;var t=this.elem("wrap"),e=t.scrollLeft(),n=t[0].scrollWidth,i=t.width();return e<=this.params.offset&&this.trigger("listOut","left"),e+i>n-this.params.offset&&this.trigger("listOut","right"),this},canScrollTo:function(t){var e=this.getMod("scroll");return"both"===e||e===t},move:function(t){var e=this.elem("wrap").scrollLeft(),n=e+this.getOffset(t);this.elem("wrap").animate({scrollLeft:n},this.params.animationTime,this.setScrollMod.bind(this))},getOffset:function(t){return("left"===t?-1:1)*this.params.step},scrollToStart:function(){this.elem("wrap").scrollLeft(0)},setItemsInList:function(t){this.getList().html(t)},appendItemsInList:function(t){this.getList().append(t)},prependItemsInList:function(t){this.getList().prepend(t)},getList:function(){return this.list||(this.list=this.elem("list"))}}),BEM.DOM.decl("carousel",{getDefaultParams:function(){return _.extend(this.__base.apply(this,arguments),this.params,{animationTime:this.hasMod("full-scroll","yes")?400:300})},onSetMod:{js:function(){this.__base.apply(this,arguments),this.scrollToStart(),this.carouselWidth=this.domElem.width(),this.items=this.elem("item")}},_onResize:function(){this.__base.apply(this,arguments),this.carouselWidth=this.domElem.width()},getFullOffset:function(t){var e,n,i,s=this.carouselWidth,r=this.elem("wrap").scrollLeft(),o=40;return n=_.findLast(this.items,function(n){return e=$(n).position().left,"right"===t?r+s>e:"left"===t?r>e:void 0}),i="right"===t?e-o-r:s+r-e-$(n).outerWidth(!0)-o},getOffset:function(t){var e=$(".related").width(),n=this.hasMod("full-scroll","yes")?this.getFullOffset(t):this.params.step,i=Math.floor(e/n),s=this.params.maxItemsNumber,r=this.params.isWideStep?s-i>i?i*n:(s-i)*n:n;return("left"===t?-1:1)*(this.shouldAddExtraScroll(r,t)?1.4*r:r)},shouldAddExtraScroll:function(t,e){var n=this.domElem.width(),i=this.elem("wrap").scrollLeft(),s=this.elem("wrap")[0].scrollWidth;return"right"===e&&.4*t>=s-n-i-t||"left"===e&&.4*t>=i-t?!0:!1},insertAfterThumb:function(t,e){this.getList().find("#gallery-"+e).after(t)},insertBeforeAllThumbs:function(t){this.getList().prepend(t)}}),BEM.DOM.decl("b-501px-popular-themes",{},{live:function(){this.liveBindTo("item","click",function(t){BEM.blocks["b-statcounter"].hit({params:{query:{morda:{popular:{click:"p"+this.getMod(t.data.domElem,"pos")}}}}})})}}),BEM.DOM.decl("categories-index",{onSetMod:{js:function(){BEM.blocks["b-page"].on("scroll",this._onPageScroll,this)}},destruct:function(){this.__base.apply(this,arguments),BEM.blocks["b-page"].un("scroll",this._onPageScroll,this)},_onItemClick:function(t){var e=this.elemParams(t.data.domElem);cp({pid:40,cid:72623,path:"px500.categories.theme."+e.theme+".item."+e.query})},_onButtonClick:function(t){cp({pid:40,cid:72623,path:"px500.categories.theme."+this.elemParams(t.data.domElem).query})},_onPageScroll:function(){var t=BEM.DOM.win,e=270;t.scrollTop()>=t.height()-e&&(cp({pid:40,cid:72623,path:"px500.categories.show"}),BEM.blocks["b-page"].un("scroll",this._onPageScroll,this))}},{live:function(){this.liveBindTo("item","click",function(t){this._onItemClick(t)}),this.liveBindTo("button","click",function(t){this._onButtonClick(t)})}}),BEM.DOM.decl("other-sites",{onSetMod:{js:function(){this._container=this.elem("container")}},loadSites:function(t){BEM.DOM.append(this._container,t.html)}},{live:!0}),BEM.DOM.decl("similar",{onSetMod:{js:function(){!BEM.blocks["i-ua"].hasFlexbox()||window.opera?(this.setMod("flexbox","no"),_.forEach(this.elem("thumb"),function(t){$(t).removeAttr("style").after(" ")}),this.justifyFallbackTimer=setTimeout(function(){this.initMoreLink()}.bind(this),1e3)):this.initMoreLink()}},destruct:function(){this.__base.apply(this,arguments),clearTimeout(this.justifyFallbackTimer)},initMoreLink:function(){for(var t,e,n=this.hasMod("no-results","yes")?3:2,i=130,s=this.elem("thumb"),r=s.length,o=r-1;o>=0;o--)if(e=s[o].offsetTop,e>=i*(n-1)&&i*n>=e){t=s.eq(o),this.setMod(t,"last","yes"),this.findElem(t,"link").append(this.elem("more-link")).attr("href",this.params.moreLink),this.bindTo(t,"click",function(){BEM.blocks["b-statcounter"].hit({params:{query:{cbir:"similar"}}})});break}}}),BEM.DOM.decl("header",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this.bindToWin("resize",$.throttle(this._onResize,150)),this._collapseUserIfNeeded()}}},_onResize:function(){this._collapseUserIfNeeded()},_onUserUpdatesName:function(){this._collapseBreakpoint=null,this._collapseUserIfNeeded()},_collapseUserIfNeeded:function(){var t=this._getUser();t&&t.toggleCollapsed(this._getCollapseBreakpoint()>=this.elem("nav").width())},_getCollapseBreakpoint:function(){return this._collapseBreakpoint||(this._collapseBreakpoint=this._getNavItemsWidth()+this.__self.NAV_ITEMS_GAP),this._collapseBreakpoint},_getNavItemsWidth:function(){var t=0;return this.elem("nav").children().each(function(){t+=$(this).outerWidth(!0)}),t},_getUser:function(){return this._user?this._user._isDestructing&&(this._collapseBreakpoint=null,this._user=this.findBlockInside("user")):(this._user=this.findBlockInside("user"),this._user&&this._user.on("update-name",this._onUserUpdatesName,this)),this._user}},{NAV_ITEMS_GAP:10,live:!1}),BEM.DOM.decl("header",{onSetMod:{js:function(){this.__base.apply(this,arguments),this.__self.instance=this,this.__self.searchBlock=this.findBlockInside("search")||this.findBlockInside("search2"),this._syncState().bindEvents()},type:function(){this.afterCurrentEvent(function(){this.trigger("resize")})}},bindEvents:function(){return this.bindTo(this.elem("action","type","adv"),"pressed",function(){this._getAdvanced(),this.setMod("type","advanced")}),this.bindTo(this.elem("action","type","adv"),"released",function(){this.delMod("type")}),"fixed"!==this.getMod("filters")&&this.params.advPressed&&this.afterCurrentEvent(function(){this.setMod(this.elem("action","type","adv"),"pressed","yes")}),this.bindTo(this.elem("action","type","srv"),"pressed",function(){this.findBlockInside("services-table").updateServicesLink()}),this},_syncState:function(){var t=this.getFiltersCount();return t>0&&this._isFiltersCountHidden()&&(this.params.advPressed=t),this},_getAdvanced:function(){return this._advancedSearch||(this._advancedSearch=this.findBlockInside("advanced-search"))},getHeight:function(){return this.domElem.height()}},{get:function(){return this.instance||(this.instance=$(this.buildSelector()).bem(this.getName()))},getSearch:function(){return this.searchBlock||(this.searchBlock=$(".search").length?$(".search").bem("search"):$(".search2").bem("search2"))}}),BEM.DOM.decl("header",{onSetMod:{js:function(){this.__base.apply(this,arguments),this.bindTo(this.elem("action","type","adv"),"click",function(){w(this,"/image/new/filters/"+(this.hasMod("type","advanced")?"close":"open"))})}}}),BEM.DOM.decl({block:"header",modName:"type",modVal:"advanced"},{getHeight:function(){if(this._height)return this._height;var t=this._getAdvanced();return this._height=this.domElem.height(),t&&(this._height+=t.domElem.height()-1),this._height}}),BEM.DOM.decl("i-services",{getServicePath:function(t){var e=this.params[t],n=encodeURIComponent(BEM.blocks["i-global"].param("searchInputText").trim());return e&&n?e.search+n+(e.params||""):""},getServiceUrl:function(t){return(this.params[t]||{}).baseUrl}}),BEM.DOM.decl("header",{_collapseUserIfNeeded:function(){var t=BEM.blocks["i-global"].getFlag("images_supernova_header")||BEM.blocks["i-global"].getFlag("video_mega_header");t||this.__base.apply(this,arguments)}}),BEM.DOM.decl("header",{getDefaultParams:function(){return{resizableElems:["family","user"]}},onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._boundaryWidths=[],this.findBlocks().reflow()}}},onElemSetMod:{family:{minimized:function(t,e,n){this.filter.setMod("title",n?"hidden":"")}},user:{minimized:function(t,e,n){this.user.setMod("hide-name",n)}}},findBlocks:function(){return this.__base.apply(this,arguments),this.filter=this.findBlockInside("head-filter"),this.user=this.findBlockInside("user"),this.layoutNav=this.elem("nav"),this},bindEvents:function(){return this.__base.apply(this,arguments),BEM.blocks["b-page"].on("resize",this.reflow,this),this},destruct:function(){this.__base.apply(this,arguments),BEM.blocks["b-page"].un("resize",this.reflow,this)},reflow:function(){this.hasMod("fixed","yes")&&this.foldBlocks()},foldBlocks:function(){for(var t,e,n=this._boundaryWidths,i=this.params.resizableElems,s=this.layoutNav.width(),r=i.length,o=0;(t=this.calcElemsWidth())>s&&r>o;)n[o]||(n[o]=t),this.setMod(this.elem(i[o++]),"minimized","yes"),e=!0;if(!e&&s>t)for(o=n.length+1;o--;)n[o]<s&&this.delMod(this.elem(i[o]),"minimized");return this},calcElemsWidth:function(){for(var t=this.layoutNav.children(),e=10,n=0,i=t.length;i>n;n++)e+=t.eq(n).outerWidth(!0);return e}}),BEM.DOM.decl("header",{bindEvents:function(){return this.__base.apply(this,arguments),BEM.blocks["advanced-search"].on("countUpdate",this._onCountUpdate,this),this},_onCountUpdate:function(t,e){this.setFiltersCount(e.count)},_isFiltersCountHidden:function(){return this.hasMod(this.getFiltersCountElem(),"hidden","yes")},setFiltersCount:function(t){return this.getFiltersCountElem().text(t),this.setMod(this.getFiltersCountElem(),"hidden",t?"":"yes")},getFiltersCount:function(){return+this.getFiltersCountElem().text()},getFiltersCountElem:function(){return this._filtersCount||(this._filtersCount=this.elem("filters-count"))}}),function(t){var e=t.event.special.outsideclick={add:function(n){t(document).on("click."+n.guid,e.handler.bind(this))},remove:function(e){t(document).off("click."+e.guid)},handler:function(e){t.contains(this,e.target)||(e.type="outsideclick",t.event.dispatch.apply(this,arguments),e.type="click")}}}(jQuery),function(t,e){var n=t.browser.opera&&t.browser.version<13;e.DOM.decl("header",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._openedSlide=null}}},onElemSetMod:{action:{pressed:{"":function(t){this.elemParams(t).releaseByDocumentScroll&&this.unbindFromWin("scroll"),this._openedSlide&&(this._openedSlide.unbindFromDoc("click"),this._openedSlide=null),this.unbindFromWin("closeUnder"),t.attr({"aria-pressed":!1,"aria-expanded":!1}),t.trigger("released")},yes:function(t,e){var n=this;n.delMod(this.elem("action"),e).bindToWin("closeUnder",function(){n.delMod(t,e)}),n.elemParams(t).releaseByHeaderOutsideClick&&n.afterCurrentEvent(function(){if(n.domElem){var e=n._openedSlide=n._getOpenedSlide(t);e&&n._slideOnClick(e,t)}}),n.elemParams(t).releaseByDocumentScroll&&this.bindToWin("scroll",function(){n._onScroll(t)}),t.attr({"aria-pressed":!0,"aria-expanded":!0}),t.trigger("pressed")}}}},_getOpenedSlide:function(t){var e,n=this.buildSelector("action","type",this.getMod(t,"type"));return this.findBlocksInside("slide").some(function(t){return t.params.rel&&t.params.rel[0].elem===n?(e=t,!0):void 0}),e},_onScroll:function(t){this.delMod(t,"pressed")},_slideOnClick:function(e,n){var i=this;e.bindToDoc("click",function(s){var r=t(s.target);e.containsDomElem(r)||r.is(i.elem("main"))||r.is(i.elem("action-i"))||i.delMod(n,"pressed")})},_onActionClick:function(t){t.preventDefault(),n&&t.stopPropagation(),this.toggleMod(t.data.domElem,"pressed","yes","")},_onActionKeyup:function(t){(!n&&13===t.keyCode||32===t.keyCode)&&(t.preventDefault(),this.toggleMod(t.data.domElem,"pressed","yes",""))},destruct:function(){this._openedSlide&&(this._openedSlide.unbindFromDoc("click"),this._openedSlide=null),this.__base.apply(this,arguments)}},{live:function(){return this.liveBindTo("action","leftclick tap",function(t){this._onActionClick(t)}).liveBindTo("action","keyup",function(t){t.shiftKey||t.ctrlKey||t.altKey||this._onActionKeyup(t)}),this.__base.apply(this,arguments)}})}(jQuery,BEM),BEM.DOM.decl("header",{onElemSetMod:{action:{pressed:{yes:function(t){this.__base.apply(this,arguments),this.hasMod(t,"type","srv")&&this.bindToDoc("keydown",function(e){e.shiftKey||e.ctrlKey||e.altKey||27===e.keyCode&&this.delMod(t,"pressed","yes")})},"":function(t){this.__base.apply(this,arguments),this.hasMod(t,"type","srv")&&this.unbindFromDoc("keydown")}}}}}),BEM.DOM.decl("user",{onSetMod:{js:function(){this.__base.apply(this,arguments);var t=this.findBlockOn("enter","button");if(null!==t){var e=this.domElem.prop("tabindex");this.domElem.attr({tabindex:-1,role:"group"}).removeAttr("aria-haspopup aria-expanded"),t.domElem.attr("tabindex",e),this._domik=BEM.create("domik_type_popup",{mods:this.params.domikMods,js:this.params.domikJs,hidden:this.findBlockInside({block:"domik",modName:"type",modVal:"hidden"})}),t.bindTo("leftclick tap",function(t){t.preventDefault(),this._domik.open()}.bind(this))}}},destruct:function(){this._domik&&this._domik.destruct(),this.__base.apply(this,arguments)}}),BEM.decl("domik_type_popup",{destruct:function(){this._form&&this._form.destruct(),this._popup&&this._popup.destruct(),this.__base.apply(this,arguments)},create:function(){if(this._created)return this;var t,e,n=this.__self,i=n._buildTypePopup(this._uniqId,this.params.mods,this.params.js),s=$(BEMHTML.apply(i)),r=this.params.hidden;
if(BEM.DOM.append(BEM.DOM.scope,s),e=this._popup=s.bem("popup"),t=this._form=this._popup.findBlockInside("auth"),r){var o=r.domElem;t.getUsernameBlock().val(o.find("input[name=login]").change().val()),t.getPasswordBlock().val(o.find("input[name=passwd]").change().val()),delete this.params.hidden,r.destruct()}return this._created=!0,this},open:function(){var t=this;return BEM.blocks["i-global"].param("login")?this:(this._created||this.create(),this.close(),this._popup.show(),this.afterCurrentEvent(function(){t._form.getUsernameBlock().setMod("focused","yes"),t._form.redraw()}),this)},close:function(){return this._popup.hide(),this},isOpened:function(){return this._popup&&this._popup.isShown()||!1},getFormBlock:function(){return this._form}},{_buildTypePopup:function(t,e,n){var i=(n||{}).explain;return{block:"popup",mix:[{block:"domik",elem:"popup"}],mods:{type:"modal",position:"fixed","body-scroll":"no",theme:"ffffff"},underMods:{type:"paranja"},content:{elem:"content",content:{block:"domik",js:$.extend({_uniqId:t},n),mods:$.extend({type:"popup"},e),content:[i?{elem:"explain",content:i}:"",{block:"auth",mods:{content:"auto"}}]}}}}}),BEM.decl("domik_type_popup",{open:function(){var t=this;return BEM.blocks["i-global"].param("login")?this:(this._created||this.create(),this.close(),this._popup.show(),this.afterCurrentEvent(function(){!BEM.blocks["i-global"].param("tablet")&&t._form.getUsernameBlock().setMod("focused","yes"),t._form.redraw()}),this)}}),BEM.DOM.decl({block:"popup",modName:"type",modVal:"modal"},{getDefaultParams:function(){var t=this.__base();return t.top="50%",t.left="50%",t},_isPercentVal:function(t){return"string"==typeof t&&t.indexOf("%")>0},show:function(t){return this._moveToContainer(),this.setMod("visibility","outside").setMod("adaptive","no"),this.repaint(t),this},repaint:function(t){this._moveToContainer(),t||(t={left:this.params.left,top:this.params.top});var e=this.getPopupSize();return this._isPercentVal(t.left)&&!t.marginLeft&&(t.marginLeft=e.width/(-100/parseInt(t.left,10))),this._isPercentVal(t.top)&&!t.marginTop&&(t.marginTop=e.height/(-100/parseInt(t.top,10))),this._show(t),this}}),function(){var t={};BEM.DOM.decl({block:"popup",modName:"body-scroll",modVal:"no"},{onSetMod:{visibility:function(){return this.afterCurrentEvent(function(){this.domElem&&this.hasMod("visibility","visible")?t[this.params.uniqId]=!0:delete t[this.params.uniqId],this._manageScopeOverflow()}),this.__base()}},destruct:function(){var e=this.params.uniqId;t[e]&&(delete t[e],this._manageScopeOverflow()),this.__base.apply(this,arguments)},_enableScroll:function(){return this._scope.css({overflow:""}),this},_disableScroll:function(){return this._scope.css({overflow:"hidden"}),this},_manageScopeOverflow:function(){var e=Object.keys(t).length;0===e?this._enableScroll():1===e&&this._disableScroll()}})}(),function(){function t(t,e,n,i){var s=t.__self,r=i.checkEmpty;return[function(){return r&&0===e.length?[t._username,"fill-input"]:!0},function(){return r&&0===n.length?[t._password,"fill-input"]:!0},function(){return/[а-яА-ЯёЁ]/.test(n)?[t._password,"wrong-keyboard-layout"]:!0},function(){return s._isUsernameValid(e,!r)?!0:[t._username,"wrong-characters"]},function(){return s._isPasswordValid(n)?!0:[t._password,"wrong-characters"]},function(){return n&&n===e?[t._password,"wrong-password"]:!0}]}BEM.DOM.decl("auth",{onSetMod:{js:{inited:function(){this._username=this.findBlockInside("username","input").on("change",this._onInputChange,this),this._password=this.findBlockInside("password","input").on("change",this._onInputChange,this),this._button=this.findBlockInside("button","button"),this._error=null,this._errorOwner=null,this.bindTo("submit",this._onBeforeSubmit),this.redraw()}}},destruct:function(){this._error&&this._error.destruct(),this.__base.apply(this,arguments)},_checkInput:function(e){var n=this,i=t(n,n._username.val(),n._password.val(),{checkEmpty:e}),s=i.every(function(t){var e=t();return Array.isArray(e)?(n.showError(e[0],BEM.I18N("auth",e[1])),e[0].elem("control").attr("aria-invalid",!0),!1):!0});return s&&(this.hideError(),this._username.elem("control").removeAttr("aria-invalid"),this._password.elem("control").removeAttr("aria-invalid")),s},_onInputChange:function(){this._checkInput(!1)},enableButton:function(){return this._button.delMod("disabled"),this},disableButton:function(){return this._button.setMod("disabled","yes"),this},_onBeforeSubmit:function(t){return this._username.val(this._username.val().trim()),this._checkInput(!0)?(this._onSubmit(t),void this.trigger("submit",t)):!1},_onSubmit:function(){if(this.disableButton(),this.elem("retpath").val(this.__self._getRetpath()),!this._timestamp){var t=this.__self._timestampName;this._timestamp=$('<input type="hidden" name="'+t+'"/>').appendTo(this.domElem)}this._timestamp.val(+new Date);var e=this.domElem.attr("action");e&&this.domElem.attr("action",e.replace(/^(https?:)?/,"https:"))},_getError:function(){if(this._error)return this._error;var t=$(BEMHTML.apply(this.__self._buildError()));return BEM.DOM.append(this.domElem,t),this._error=this.findBlockOn(t,"popup"),this._errorMsg=this.findElem(t,"error"),this._error.on("hide",function(){this._errorOwner=null},this),this._error},showError:function(t,e){var n=this._getError();return this._curErrorMsg!==e&&(this._errorMsg.text(e),this._curErrorMsg=e),this._errorOwner!==t&&(this._errorOwner=t,n.hide().show(t)),this},hideError:function(){return this._error&&this._error.hide(),this},getUsernameBlock:function(){return this._username},getPasswordBlock:function(){return this._password},getHaunterBlock:function(){return this._haunter||(this._haunter=this.findBlockInside("haunter","checkbox")),this._haunter},submit:function(){return this.domElem.submit(),this},redraw:function(){var t,e=this.__self;return this._onInputChange(),t=this.findBlockInside("register","button"),t&&t.url(e._getRegisterURL()),t=this.findBlockInside("remember","button"),t&&t.url(e._getRememberURL()),this}},{_fromName:"from",_retpathName:"retpath",_timestampName:"timestamp",_isUsernameValid:function(t,e){return this._isUsernameEmailValid(t)||this._isUsernameLoginValid(t)||this._isUsernamePhoneValid(t,e)},_isUsernameEmailValid:function(t){return/^\s*[^@\s]+@[^@\s]+\s*$/.test(t)},_isUsernameLoginValid:function(t){return/^\s*[-а-яА-ЯёЁA-Za-z0-9.]+\s*$/.test(t)},_isUsernamePhoneValid:function(t,e){return e?(t=t.trim(),t=t.replace(/-\)/,"+)"),t=t.replace(/(\d)-/g,"$1"),t=t.replace(/\((\d+)\)/,"$1"),t=t.replace(/(^|\d+)\(/,"$1"),t=t.replace(/^\+/,""),/^\d*$/.test(t)):/^\+?[-0-9]*(?:\([-0-9]+\))?[-0-9]+$/.test(t)},_isPasswordValid:function(t){return!/[^\-a-zA-Z0-9`!@#$%^&*()_=+\[\]{};:"\|\\,.<>\/?]/.test(t)},_getRetpath:function(){return BEM.blocks["i-global"].param("retpath")},_getPassportURL:function(t){var e=BEM.blocks["i-global"],n=e.param("passport-host"),i=e.param("passport-msg"),s=this._getRetpath();return[n,"/passport?mode=",t,i?"&"+this._fromName+"="+encodeURIComponent(i):"",s?"&"+this._retpathName+"="+encodeURIComponent(s):""].join("")},_getRegisterURL:function(){return this._getPassportURL("register")},_getRememberURL:function(){return this._getPassportURL("restore")},_buildError:function(){return{block:"popup",mods:{autoclosable:"no"},js:{directions:["right","left"]},attrs:{role:"alert","aria-live":"assertive","aria-atomic":!0},content:[{elem:"tail"},{elem:"content",mix:[{block:"auth",elem:"error"}]}]}}})}(),BEM.DOM.decl("auth",{onSetMod:{js:{inited:function(){var t=this;t.__base.apply(t,arguments);var e=document.createElement("b");e.innerHTML="<!--[if IE 9]><i></i><![endif]-->",1===e.getElementsByTagName("i").length&&t._username.elem("control").add(t._password.elem("control")).keydown(function(e){return 13===e.which?(t.submit(),!1):void 0})}}}}),BEM.DOM.decl("auth",{},{_getRetpath:function(){var t=BEM.blocks.location.getInstance().getState().url;return t+(-1!==t.indexOf("?")?"&":"?")+"rnd="+ +new Date}}),BEM.DOM.decl("popup",{onSetMod:{js:function(){this.__base(),this._tailPos={}}},_calcTailPos:function(t){var e=t.to,n=this._positions[t.key],i=t.tail.axis,s={};return"top"===e||"bottom"===e?s.left=this._calcTailLeft(i,n):("left"===e||"right"===e)&&(s.top=this._calcTailTop(i,n)),s},_calcTailTop:function(t,e){var n=0,i=this.getOwnerSize(),s=this.getOwnerPos(),r=this.params.tail.width,o=this.getPopupSize(),a=o.height,c=s.top-e.top,u=e.top+o.height-(s.top+i.height);return c>0&&(n+=c,a-=c),u>0&&(a-=u),"middle"===t?(a-=r,n+=a/2):"bottom"===t&&(a-=r,n+=a),0>n&&(n=0),n},_calcTailLeft:function(t,e){var n=0,i=this.getOwnerSize(),s=this.getOwnerPos(),r=this.params.tail.width,o=this.getPopupSize(),a=s.left-e.left,c=o.width,u=e.left+o.width-(s.left+i.width);return a>0&&(n+=a,c-=a),u>0&&(c-=u),"center"===t?(c-=r,n+=c/2):"right"===t&&(c-=r,n+=c),n},_calcOffsetByTail:function(t){var e=this.params.tail,n=e.height,i={};switch(t.to){case"top":i={top:-n};break;case"bottom":i={top:n};break;case"right":i={left:n};break;case"left":i={left:-n}}return i},_calcTailOffset:function(t){var e={},n=t.to,i=t.tail,s=i.offset,r=i.axis;return s?("top"===n||"bottom"===n?(e.left=0,"left"===r?e.left+=s.left:"center"===r?(s.left&&(e.left+=s.left),s.right&&(e.left-=s.right)):"right"===r&&(e.left-=s.right)):("left"===n||"right"===n)&&(e.top=0,"top"===r?e.top+=s.top:"middle"===r?(s.top&&(e.top+=s.top),s.bottom&&(e.top-=s.bottom)):"bottom"===r&&(e.top-=s.bottom)),e):!1},_resetTailPos:function(t){return t?this._tailPos[t]=null:this._tailPos={},this},_pushTailPos:function(t,e){return this._pushPosTo(this._tailPos,t,e),this}}),function(){function t(){}var e=BEM.DOM,n=28;e.decl("auth",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._socialDropdown=null,this._initSocialProviders()}}},destruct:function(){var t=this._socialDropdown;t&&t.domElem&&t.desruct(),this.__base.apply(this,arguments)},_initSocialProviders:function(){var t=BEM.blocks["i-global"],e=t.param("social-providers"),n=this;if(e)n._createSocial(e);else{var i=t.param("social-host");if(!i)return;n._getSocialProviders(i,function(t){n._createSocial(t)})}},_getSocialProviders:function(t,e){var i=this.elem("social");i.css("height",n),$.getJSON(this.__self._getProvidersURL(t),function(t){i.css("height",""),e(t.providers)})},_createSocial:function(t){return t.length?(e.update(this.elem("social"),BEMHTML.apply(this.__self._buildSocial(t,this._uniqId))),void(this._socialDropdown=this.findBlockInside("social","dropdown"))):(this.elem("social").remove(),void this.dropElemCache("social"))},_onSocialClick:function(e){e.preventDefault();var n=BEM.blocks["i-global"];this._socialDropdown&&this._socialDropdown.hide(),BEM.blocks["social-broker"].start(function(){n.param("retpath")&&top.location.href!==n.param("retpath")?top.location.href=n.param("retpath"):top.location.reload()},t,{provider:this.elemParams(e.data.domElem).provider})}},{live:function(){return this.__base.apply(this,arguments),this.liveBindTo("social-link","leftclick tap",function(t){this._onSocialClick(t)}).liveBindTo("social-link","keyup",function(t){t.shiftKey||t.ctrlKey||t.altKey||t.metaKey||32===t.keyCode&&this._onSocialClick(t)}),!1},_getProvidersURL:function(t){return t+"/providers2.jsonp?callback=?"},_buildSocial:function(t,e){var n,i,s=[];if(t=t.filter(function(t){return t.enabled}),n=t.filter(function(t){return t.primary}).map(function(t){return{block:"auth",elem:"social-link",js:{provider:t.code},mix:[{elem:"social-icon",elemMods:{code:t.code}}],title:t.display_name}}),s=s.concat(n),i=t.map(function(t){return{block:"auth",elem:"social-link",js:{provider:t.code},title:t.display_name,content:[{elem:"social-icon",elemMods:{code:t.code}},t.display_name]}}),n.length<t.length){var r=BEM.I18N("auth","more");s.push({block:"dropdown",js:!0,content:[{block:"button",mods:{pseudo:"yes",theme:"pseudo",size:"s"},mix:[{block:"dropdown",elem:"switcher"}],attrs:{title:r,"aria-label":r},content:"· · ·"},{elem:"popup",content:{block:"auth",elem:"social-popup",mix:[{block:"auth",js:{uniqId:e}}],content:i}}]})}return s}})}(),BEM.decl("social-broker",{_windowWidth:500,_windowHeight:280,onSetMod:{js:{inited:function(){this._window=null,this._timer=0}}},start:function(t,e,n){var i,s,r,o,a=this;if(this._cleanup(),this._onSuccess=t,this._onFailure=e,n=$.extend({},a._getDefaultParams(),n),i=n.startUrl+"?",o=n.popupName,delete n.startUrl,delete n.popupName,s=n.display,r=n.retpath,s&&"popup"!==s)n.retpath=n.retnopopup||n.retpath||window.location.href,delete n.retnopopup;else{var c="ddom="+(n.ddom||(location.hostname===document.domain?"":document.domain));n.retpath+=(r.match("#")?"&":"#")+c}return i+=Object.keys(n).reduce(function(t,e){return t.push(encodeURIComponent(e)+"="+encodeURIComponent(n[e])),t},[]).join("&"),s&&"popup"!==s?void this._navigate(i):(this._window=window.open(i,o,a._getPopupParams()),void(this._window&&(this._window.focus(),clearInterval(this._timer),this._timer=setInterval(function(){a.isClosed()&&(clearInterval(a._timer),a.onFailure({status:"error"}))},500))))},isClosed:function(){if(!this._window)return!0;try{return this._window.closed}catch(t){return!0}},_navigate:function(t){window.location.href=t},_getDefaultParams:function(){var t=BEM.blocks["i-global"],e=t.param("id");return{startUrl:t.param("social-startUrl")||t.param("social-host")+"/broker/start",retpath:t.param("social-retpath")||[location.protocol,"//",location.host,t.param("lego-path"),"/blocks-common/i-social/closer/i-social__closer.html"].join(""),retnopopup:t.param("social-retnopopup")||!1,consumer:e||"morda",popupName:"social_"+(e||"morda"),action_if_anonymous:"authorize",result_location:"fragment"}},_getPositionedParams:function(t,e,n,i){return["scrollbars=yes, resizable=1, menubar=0, toolbar=0, status=0, location=0, directories=0",", left=",e,", top=",t,", width=",n,", height=",i].join("")},_getPopupParams:function(){var t,e,n=this._windowWidth,i=this._windowHeight;return window.opera?(t=(screen.availWidth-n)/2,e=(screen.availHeight-i)/2):(t=(window.innerWidth-n)/2,e=(window.innerHeight-i)/2),t=Math.round(t),e=Math.round(e),this._getPositionedParams(e,t,n,i)},_cleanup:function(){clearInterval(this._timer),this.isClosed()||this._window.close(),this._window=null},onSuccess:function(t){this._cleanup(),this._onSuccess&&this._onSuccess(t)},onFailure:function(t){this._cleanup(),this._onFailure&&this._onFailure(t)}},{start:function(){this._current&&this._current.destruct(),this._current=BEM.create("social-broker"),Lego.block["i-social"]={broker:this._current},this._current.start.apply(this._current,arguments)},onSuccess:function(){this._current.onSuccess.apply(this._current,arguments)},onFailure:function(){this._current.onFailure.apply(this._current,arguments)}}),BEM.DOM.decl("dropdown",{onSetMod:{js:function(){var t=this,e=t.params,n=t._popup=t.findBlockOn(t.elem(e.popupElem),"popup").on("show",function(){t.setMod("action","open").trigger("show")}).on("hide",function(){t.setMod("action","closed").trigger("hide")});e.popupMethods.map(function(e){t[e]=n[e].bind(n)});var i=t.params.switcherBlock,s=t.elem("switcher");i&&(t._switcher=t.findBlockOn(s,i).domElem),s.attr({"aria-haspopup":!0,"aria-expanded":!1})},action:function(t,e){this.elem("switcher").attr("aria-expanded","open"===e)}},getPopup:function(){return this._popup},getDefaultParams:function(){return{popupElem:"popup",popupMethods:["toggle","show","hide","setContent"]}},destruct:function(){this._popup&&this._popup.domElem&&this._popup.destruct(),this.__base.apply(this,arguments)},_toggle:function(){this._popup.toggle(this._switcher)},_onSwitcherClick:function(){this._switcher||(this._switcher=this.elem("switcher")),this._toggle()},_onSwitcherKeyUp:function(t){if(!(t.shiftKey||t.ctrlKey||t.altKey||t.metaKey)){var e=this.elem("switcher")[0].tagName.toLowerCase();"button"!==e&&("a"!==e&&13===t.which||32===t.which)&&(t.preventDefault(),this.params.switcherBlock||this._toggle())}}},{live:function(){this.liveBindTo("switcher","leftclick tap",function(t){this._onSwitcherClick(t)}).liveBindTo("switcher","keyup",function(t){this._onSwitcherKeyUp(t)})}}),BEM.DOM.decl("input",{onSetMod:{js:function(){this._val=this.elem("control").val()},disabled:function(t,e){this.elem("control").attr("disabled","yes"===e)},focused:function(t,e){if(this.hasMod("disabled","yes"))return!1;var n="yes"===e;n?this._focused||this._focus():this._focused&&this._blur(),this.afterCurrentEvent(function(){this.trigger(n?"focus":"blur")})}},isDisabled:function(){return this.hasMod("disabled","yes")},val:function(t,e){if("undefined"==typeof t)return this._val;t=null===t?"":t.toString();var n=this.elem("control");return n.val()!==t&&n.val(t),this._val=t,this.trigger("change",e),this},name:function(t){var e=this.elem("control");return arguments.length?(e.attr("name",t),this):e.attr("name")},getSelectionEnd:function(){var t=this.elem("control")[0],e=0;if("number"==typeof t.selectionEnd)e=t.selectionEnd;else{var n=document.selection.createRange();if(n&&n.parentElement()===t){var i=t.value.length,s=t.createTextRange();s.moveToBookmark(n.getBookmark());var r=t.createTextRange();r.collapse(!1),e=s.compareEndPoints("EndToEnd",r)>-1?i:-s.moveEnd("character",-i)}}return e},_onFocus:function(){return this._focused=!0,this.setMod("focused","yes")},_onBlur:function(){return this._returnFocus?(this.afterCurrentEvent(function(){this._focus()}),this):this.hasMod(this.elem("clear"),"pressed")?this:(this._focused=!1,this.delMod("focused"))},_focus:function(){return this.hasMod("disabled","yes")?!1:void this.elem("control").focus()},_blur:function(){this._returnFocus=!1,this.elem("control").blur()},destruct:function(){this._blur(),this.__base.apply(this,arguments)}},{live:function(){this.liveBindTo("control","focusin focusout",function(t){this["focusin"===t.type?"_onFocus":"_onBlur"](t)})}}),function(){var t,e=[],n=function(){e.forEach(function(t){t.val(t.elem("control").val())})},i=function(t){try{return t.activeElement}catch(e){}};BEM.DOM.decl("input",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._instanceIndex=e.push(this)-1;var s=this.elem("control"),r=i(this.__self.doc[0]),o=this.params.autoFocus&&(!r||!$(r).is("input, textarea"));(r===s[0]||o)&&(this.setMod("focused","yes")._focused=!0),t||(t=this.channel("sys").on({tick:n,idle:function(){t.un("tick",n)},wakeup:function(){t.on("tick",n)}})),this.params.shortcut&&this.bindToDoc("keydown",function(t){t.ctrlKey&&38===t.which&&!$(t.target).is("input, textarea")&&this.setMod("focused","yes")})}}},val:function(t,e){var n="undefined"!=typeof t,i=this.elem("control");return t=n?null===t?"":t.toString():i.val(),this._val!==t&&(this._val=t,i.val()!==t&&i.val(t),this.trigger("change",e)),n?this:t},_focus:function(){var t=this.elem("control")[0];if(t.createTextRange&&!t.selectionStart){var e=t.createTextRange();e.move("character",t.value.length),e.select()}else t.focus()},destruct:function(){this.__base.apply(this,arguments),this.params.shortcut&&this.unbindFromDoc("keydown"),e.splice(this._instanceIndex,1),e.slice(this._instanceIndex).forEach(function(t){t._instanceIndex--})}},{})}(),BEM.DOM.decl("input",{onSetMod:{js:function(){this.__base.apply(this,arguments),this.bindTo(this.domElem,"keypress",this._onKeyPress)}},_onKeyPress:function(t){this.trigger("keypress",t)},setFocus:function(){return this.setMod("focused","yes")}}),function(){var t,e=0,n=!1,i=0,s=BEM.channel("sys"),r=50;BEM.decl("i-system",{},{start:function(){$(document).bind("mousemove keydown",function(){i=0,n&&(n=!1,s.trigger("wakeup"))}),this._tick()},_tick:function(){var o=this;s.trigger("tick",{counter:e++}),!n&&(i+=r)>3e3&&(n=!0,s.trigger("idle")),t=setTimeout(function(){o._tick()},r)}}).start()}(),BEM.DOM.decl("input",{onSetMod:{js:function(){this.__base.apply(this,arguments),this.on("change",this._updateClear)._updateClear()}},_onBoxClear:function(){this.hasMod("clear","visibility","visible")||this.hasMod("disabled","yes")||this.setMod("focused","yes")},_onClearClick:function(){return this.trigger("clear"),this.removeInsets&&this.removeInsets(),this.clearInput({source:"clear"})._focus()},clearInput:function(t){return this.val("",t),this},_updateClear:function(){return this.toggleMod(this.elem("clear"),"visibility","visible","",!!this._val)}},{live:function(){this.__base.apply(this,arguments),this.liveBindTo("clear","mousedown",function(t){1===t.which&&this.setMod(this.elem("clear"),"pressed","yes")}).liveBindTo("clear","leftclick tap",function(){this.delMod(this.elem("clear"),"pressed"),this._onClearClick()}).liveBindTo("box","leftclick tap",function(){this._onBoxClear()})}}),BEM.DOM.decl("input",{_onBoxClear:function(){BEM.blocks["b-page"].preventFocus||this.__base.apply(this,arguments)}}),BEM.DOM.decl("input",{onSetMod:{js:function(){if(this.__base.apply(this,arguments),this.elem("found").length){var t=this.elem("control");$("<span/>",{"class":this.buildSelector("query-holder").slice(1)}).css({"font-family":t.css("font-family"),"font-size":t.css("font-size")}).text(this.val()).appendTo(this.domElem),this._controlQueryLeftOffset=parseInt(t.css("padding-left"),10)+(parseInt(t.css("border-left-width"),10)||0),this.on("change",this._toggleVisibility).bindToWin("resize",$.throttle(this._onWindowResize,100,this)).setPosition()}}},_toggleVisibility:function(){var t=this.val()===this.elem("query-holder").text()&&this.textWidth<this.inputWidth&&!!this.elem("found").html();this.toggleMod(this.elem("found"),"visibility","visible","",t)},setPosition:function(){var t=this.elem("control"),e=this.elem("found"),n=t.offset().left-this.domElem.offset().left+this._controlQueryLeftOffset+this.elem("query-holder").width();this.inputWidth=t.width(),this.textWidth=e.width()+n,e.css({left:n}),this._toggleVisibility()},_onWindowResize:function(){this.inputWidth=this.elem("control").width(),this._toggleVisibility()},setFound:function(t,e){this.elem("found").html(t),this.elem("query-holder").html(e),this.setPosition()}}),BEM.DOM.decl("input",{onSetMod:{js:function(){this.__base.apply(this,arguments),this.bindTo("found","mousedown",function(){this.setMod("focused","yes")})}}}),BEM.DOM.decl("input",{onSetMod:{js:function(){this.__base.apply(this,arguments),BEM.blocks.header.on("input:resize",this._onWindowResize,this)}},destruct:function(){this.__base.apply(this,arguments),BEM.blocks.header.un("input:resize",this._onWindowResize,this)}}),BEM.DOM.decl({block:"input",modName:"found",modVal:"yes"},{onSetMod:{js:function(){this.__base.apply(this,arguments),this._setLabelAjax(),BEM.blocks.search.on("search:found:update",this._onFoundUpdate,this)}},destruct:function(){this.__base.apply(this,arguments),BEM.blocks.search.un("search:found:update",this._onFoundUpdate,this)},_onFoundUpdate:function(t,e){this.params.foundNum=e.foundNum,this.setFound(e.foundValue,BEM.blocks["i-common__string"].escapeHTML(e.text))},_setLabelAjax:function(){var t=this.findBlockInside("service"),e=t&&this.findBlockInside("link");!BEM.blocks["i-global"].param("isPumpkin")&&e&&e.setMod("ajax","yes")}}),BEM.DOM.decl({block:"input",modName:"cbir",modVal:"yes"},{onSetMod:{js:function(){this.__base.apply(this,arguments),this.findBlocks().bindEvents(),this.cbirIntent.isVisible()&&this.disableInput()}},findBlocks:function(){return this.cbirIntent=BEM.blocks.header.getSearch().findBlockInside("cbir-intent"),this},bindEvents:function(){return this.__base.apply(this,arguments),this.bindTo(this.domElem,"keypress",this._onKeyPress),BEM.blocks["cbir-intent"].on("enableInput",this._onEnableInput,this).on("disableInput",this._onDisableInput,this).on("inputFocus",this._onInputFocus,this),BEM.blocks["cbir-panel"].on("inputFocus",this._onInputFocus,this),this},destruct:function(){this.__base.apply(this,arguments),BEM.blocks["cbir-intent"].un("enableInput",this._onEnableInput,this).un("disableInput",this._onDisableInput,this).un("inputFocus",this._onInputFocus,this),BEM.blocks["cbir-panel"].un("inputFocus",this._onInputFocus,this)},disableInput:function(){this.elem("control").attr("disabled",!0),this.delMod(this.elem("clear"),"visibility"),this.setMod(this.elem("box"),"cbir","yes"),this.val("")},_onDisableInput:function(){this.disableInput()},_onEnableInput:function(){this.elem("control").attr("disabled",!1),this.elem("control").val()&&this.setMod(this.elem("clear"),"visibility","visible"),this.delMod(this.elem("box"),"cbir")},_onInputFocus:function(){this.setFocus()}}),BEM.DOM.decl("input",{onSetMod:{js:function(){this.__base.apply(this,arguments),(this._hasHint=Boolean(this.elem("hint")[0]))&&this.on("change",this._updateHint)._updateHint()},focused:function(){return this.__base.apply(this,arguments)===!1?!1:void(this._hasHint&&this._updateHint())}},_updateHint:function(){this.toggleMod(this.elem("hint"),"visibility","visible",!this.val())}}),BEM.DOM.decl("checkbox",{onSetMod:{js:function(){this.setMod("checked",this.elem("control").prop("checked")?"yes":""),this._isControlFocused()&&this.setMod("focused","yes")},focused:{yes:function(){return this.isDisabled()?!1:(this._isControlFocused()||this.elem("control").focus(),this.setMod(this.elem("box"),"focused","yes"),void this.afterCurrentEvent(function(){this.trigger("focus")}))},"":function(){this._isControlFocused()&&this.elem("control").blur(),this.delMod(this.elem("box"),"focused"),this.afterCurrentEvent(function(){this.trigger("blur")})}},checked:function(t,e){return this.isDisabled()?!1:(this.elem("control").prop("checked","yes"===e),this.afterCurrentEvent(function(){this.trigger("change",{checked:"yes"===e})}),void this.setMod(this.elem("box"),"checked",e))},disabled:function(t,e){this.elem("control").prop("disabled","yes"===e)}},isDisabled:function(){return this.hasMod("disabled","yes")},isChecked:function(){return this.hasMod("checked","yes")},toggle:function(){this.toggleMod("checked","yes","")},val:function(t){var e=this.elem("control");return"undefined"==typeof t?e.val():(e.val(t),this)},name:function(t){var e=this.elem("control");return arguments.length?(e.attr("name",t),this):e.attr("name")},_onClick:function(){this.isDisabled()||this.setMod("focused","yes")},_onChange:function(t){t.target.checked?this.setMod("checked","yes"):this.delMod("checked")},_onFocusInFocusOut:function(t){this.setMod("focused","focusin"===t.type?"yes":"")},_onMouseOverMouseOut:function(t){this.isDisabled()||this.setMod("hovered","mouseover"===t.type?"yes":"")},_isControlFocused:function(){try{return this.containsDomElem($(this.__self.doc[0].activeElement))}catch(t){return!1}}},{live:function(){this.liveBindTo("leftclick tap",function(t){this._onClick(t)}).liveBindTo("control","change",function(t){this._onChange(t)}).liveBindTo("control","focusin focusout",function(t){this._onFocusInFocusOut(t)}).liveBindTo("mouseover mouseout",function(t){this._onMouseOverMouseOut(t)})}}),BEM.DOM.decl("user",{redraw:function(){return this}},{getLogoutUrl:function(){var t=BEM.blocks["i-global"],e=t.param("retpath"),n=t.param("yandexuid");return[t.param("passport-host"),"/passport?mode=logout",n?"&yu="+n:"",e?"&retpath="+encodeURIComponent(e):""].join("")}}),BEM.decl("i-common__string",{},{cleverSubstring:function(){var t="…";return function(e,n,i){return e.length>n+i?e.substring(0,n-1)+t:e}}(),escapeHTML:function(){var t={"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"};return function(e){return String(e).replace(/&(?!\w+;)|[<>"']/g,function(e){return t[e]||e})}}(),escapeRegExp:function(t){return t.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")},highlight:function(t,e){if(!$.isArray(e))return t;var n,i=[],s=0,r=e.sort(function(t,e){return t[0]-e[0]}),o=[],a="?",c=~t.indexOf(a),u=function(){for(var e,n=/\&#\d+;/gi;e=n.exec(t);)o.push(e[0]),t=t.replace(e[0],a)},l=function(t){if(c)return t;for(;~t.indexOf(a)&&o.length;)t=t.replace(a,o[0]),o.shift();return t};return!c&&u(),r.forEach(function(e){n=s>e[0]?s:e[0],i.push({tag:"span",elem:"span",content:l(t.slice(s,n))}),i.push({tag:"em",elem:"em",content:l(t.slice(n,s=e[1]))})},this),i.push({tag:"span",elem:"span",content:l(t.slice(s))}),i}}),BEM.DOM.decl("user",{onSetMod:{js:{inited:function(){if(this.__base.apply(this,arguments),this.elem("name").length){var t=this,e=t.elemParams("name");e.isUglyUserName&&BEM.blocks["i-user-services"].get(function(n){var i=BEM.blocks["i-common__string"].cleverSubstring,s=BEM.blocks["i-common__string"].escapeHTML,r=Object(n.displayName).name||n.login,o=i(r,e.maxLength,e.maxLengthRelative);o=s(o),o='<span class="user__first-letter">'+o.charAt(0)+"</span>"+o.slice(1),t.elem("name").html(o),t.trigger("update-name")})}}}},toggleCollapsed:function(t){return this.toggleMod("hide-name","yes","",t)}}),BEM.DOM.decl("user",{_setUsernameVisibility:$.noop}),BEM.decl("i-user-services",{},{get:function(t){this._data?t(this._data):this._get(t)},getApiUrl:function(){return BEM.blocks["i-global"].param("pass-host")+"/services?callback=?"},_callbacks:[],_get:function(t){var e=this;e._callbacks.push(t),1===e._callbacks.length&&$.getJSON(e.getApiUrl(),{locale:BEM.blocks["i-global"].param("lang"),login:"yes","current-login":BEM.blocks["i-global"].param("login"),yu:$.cookie("yandexuid")},function(t){e._data=t,$.each(e._callbacks,function(){this(t)}),e._callbacks.length=0})}}),BEM.DOM.decl("user",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._isRetina=BEM.blocks["i-ua"].hiDpi,this._isRetina&&this.updateIcon()}}},_getIconPath:function(){var t=this.params.avatarHost,e=this.params.uid||BEM.blocks["i-global"].param("uid"),n=this._getIconSize(),i=(this._isRetina?"/islands-retina-":"/islands-")+n;return[t,"/get-yapic/",e,i,"?rnd=",+new Date].join("")},_setIconBackground:function(t){var e=this.elem("icon");e&&e.css("background-image","url("+t+")")},updateIcon:function(){this._setIconBackground(this._getIconPath())},getDefaultParams:function(){return{avatarHost:"//avatars.yandex.net"}}}),BEM.DOM.decl("user",{_getIconSize:function(){return"middle"}}),BEM.DOM.decl("ticker",{onSetMod:{js:{inited:function(){this._count=this.params.count}}},show:function(){return this.setMod("state","normal")},hide:function(){return this.setMod("state","empty")},val:function(t){if(!arguments.length)return this._count;var e=this.params.maxCount;return this._count=t,this.elem("value").attr("title",t).text(t>e?e+"+":t),t?this.show():this.hide(),this}}),BEM.DOM.decl({block:"user",modName:"menu",modVal:"yes"},{onSetMod:{js:function(){this.__base.apply(this,arguments);var t=60;this._dropdown=this.findBlockOutside("dropdown-menu")||0,this._dropdown&&this._dropdown.on("show",function(){this.bindToWin("scroll",$.throttle(this._hide,t,this)).redraw().domElem.attr("aria-expanded",!0)}.bind(this)).on("hide",function(){this.unbindFromWin("scroll").domElem.attr("aria-expanded",!1)}.bind(this))}},_hide:function(){this._dropdown&&this._dropdown.hide()},_onClick:function(t){t.preventDefault(),this.__base.apply(this,arguments),this._dropdown&&this._dropdown.toggle(this.elem(this.elem("icon").length?"icon":"name"))},redraw:function(){if(this.__base.apply(this,arguments),!this._dropdown)return this;var t=this.__self.getLogoutUrl();return this._dropdown._popup.findBlockInside("user").elem("logout").attr("href",t),this},destruct:function(){this._dropdown&&this._dropdown.domElem&&this._dropdown.destruct(),this.__base.apply(this,arguments)}},{live:function(){return this.__base.apply(this,arguments),this.liveBindTo("leftclick tap",function(t){this._onClick(t)}).liveBindTo("keyup",function(t){t.shiftKey||t.ctrlKey||t.altKey||t.metaKey||32===t.which&&this.domElem.click()}),!1}}),BEM.DOM.decl({block:"user",modName:"menu",modVal:"yes"},{_onClick:function(){this.__base.apply(this,arguments),BEM.blocks["i-global"].setParams({retpath:BEM.blocks.location.getInstance().getState().url}),this.redraw()}}),BEM.DOM.decl({block:"dropdown-menu",baseBlock:"dropdown"}),BEM.DOM.decl("i-menu",{onElemSetMod:{item:{state:{current:function(t,e,n,i){if("disabled"==i)return!1;var s=this.elem("item","state","current");this.delMod(s,"state").trigger("current",{prev:s,current:t})}}}},onItemSelectorClick:function(t){var e=this._getItemByEvent(t);this.setMod(e,"state","current")
},_getItemByEvent:function(t){return t.data.domElem.closest(this.buildSelector("item"))}},{live:function(){this.liveBindTo("item-selector","leftclick tap",function(t){this.onItemSelectorClick(t)})}}),BEM.DOM.decl({block:"b-menu-vert",baseBlock:"i-menu"}),BEM.DOM.decl({name:"b-menu-horiz",baseBlock:"i-menu"}),BEM.DOM.decl("user-menu-update",{onSetMod:{js:{inited:function(){var t=this;t.updateInformer(t.onUpdateSuccess,t.onUpdateError)}}},updateInformer:function(t,e){var n=this;n._getExporter().get({key:$.cookie("yandexuid")},function(n){n.unread?t.apply(this,arguments):e&&e.call(this)},e)},onUpdateSuccess:function(t){var e=parseInt(t.unread,10)||0,n=this.params.unreadMax;e&&n&&e>n&&(e=n+"+");var i=e?e+" ":"";BEM.DOM.update(this.domElem,i+BEM.I18N("user","letter",{count:e}))},onUpdateError:function(){},_getExporter:function(){return this._exporter||(this._exporter=BEM.create("i-request_type_ajax",{url:this.__self.getExportApiUrl(),cache:!1,callbackCtx:this}))},getDefaultParams:function(){return{unreadMax:99}}},{getExportApiUrl:function(){return BEM.blocks["i-global"].param("export-host")+"/for/unread.xml?callback=?"}}),function(t,e){var n=function(t){try{return t.activeElement}catch(e){}},i=t.browser,s=i.opera&&i.version<13;e.DOM.decl("slide",{onSetMod:{js:{inited:function(){var e=this;t(e.params.rel).each(function(){t(this.elem||e.domElem).on(this.event,e[this.method].bind(e))})}},state:{open:function(){this.afterCurrentEvent(function(){this._bindFocusEvents()}),this.domElem.attr("aria-hidden",!1).trigger("open")},close:function(){this._unbindFocusEvents(),this._returnFocus(),this.domElem.attr("aria-hidden",!0).trigger("close")}}},open:function(){var t=this;this.setMod("state","open"),this._resize(t._getSlideParams())},close:function(){var t=this;this.setMod("state","close"),this._resize(t._getSlideParams())},_bindFocusEvents:function(){this._lastFocused=t(n(document)||e.DOM.scope);var i=this.__self._getFocusable(this.domElem);return this._firstFocusable=i.first(),this._lastFocusable=i.last(),0===this._firstFocusable.length?void(this._skipReturnFocus=!0):(this.bindTo(this._lastFocused,"keydown",this._onLastFocusedKeyDown).bindTo(this._firstFocusable,"keydown",this._onFirstFocusableKeyDown).bindTo(this._lastFocusable,"keydown",this._onLastFocusableKeyDown),this._skipReturnFocus=!1,void this.bindToDoc("mousedown.returnFocus",function(){this._skipReturnFocus=!0}))},_unbindFocusEvents:function(){this.unbindFromDoc("mousedown.returnFocus"),this.unbindFrom(this._firstFocusable,"keydown"),this.unbindFrom(this._lastFocusable,"keydown"),this.unbindFrom(this._lastFocused,"keydown")},_onLastFocusedKeyDown:function(t){t.ctrlKey||t.altKey||t.metaKey||9===t.which&&(t.preventDefault(),this[t.shiftKey?"_lastFocusable":"_firstFocusable"].focus())},_onFirstFocusableKeyDown:function(t){t.ctrlKey||t.altKey||t.metaKey||t.shiftKey&&9===t.which&&(t.preventDefault(),this._lastFocused.focus())},_onLastFocusableKeyDown:function(t){t.shiftKey||t.ctrlKey||t.altKey||t.metaKey||9===t.which&&(t.preventDefault(),this._lastFocused.focus())},_returnFocus:function(){this._skipReturnFocus||this.afterCurrentEvent(function(){this._lastFocused.focus()})},_resize:function(t){this._body=this._body||this.findBlockOutside("b-page");var e=this,n=this.domElem,i=t.dur,s=this.hasMod("state","open"),r="right"===t.dir,o={},a={};s?(r&&this._body.setMod("overflow","hidden"),o[t.sizeType]=t.sizeVal,o[t.dir]=-t.sizeVal,a[t.dir]=0,n.css(o).css("visibility","visible").stop().animate(a,i,function(){r&&e._body.delMod("overflow")})):(r&&this._body.setMod("overflow","hidden"),o[t.sizeType]="",o[t.dir]="",a[t.dir]=-t.sizeVal,n.stop().animate(a,i,function(){n.css("visibility","hidden").css(o),r&&e._body.delMod("overflow")}))},_getSlideParams:function r(){if(!r[this._uniqId]){var e=0,n={t:{meth:"outerHeight",sizeType:"height",direction:"top"},r:{meth:"outerWidth",sizeType:"width",direction:"right"},b:{meth:"outerHeight",sizeType:"height",direction:"bottom"},l:{meth:"outerWidth",sizeType:"width",direction:"left"}}[this.getMod("dir")],i=this.getMod("dur");this.domElem.children().each(function(){e+=t(this)[n.meth](!0)}),r[this._uniqId]={sizeType:n.sizeType,sizeVal:e,dir:n.direction,dur:+i}}return r[this._uniqId]}},{live:!1,_getFocusable:function(e){var n=t.data(e,"slide-getFocusable-id");n||(n=t.identify(),t.data(e,"slide-getFocusable-id",n)),n='*[data-slide-getFocusable-id="'+n+'"]';var i=s?"":"a[href], link, ";return e.find(i+'*[tabindex], button, input:not([type="hidden"]), textarea, select, menuitem').filter(function(){var e=t(this),i=!0;return parseInt(e.prop("tabindex"),10)<0||"hidden"===e.css("visibility")?!1:(t(this).parentsUntil(n).each(function(){var e=t(this);return"none"===e.css("display")?i=!1:void 0}),i)})}})}(jQuery,BEM),BEM.DOM.decl("slide",{onSetMod:{state:{open:function(){this.__base.apply(this,arguments),this.trigger("open")},close:function(){this.__base.apply(this,arguments),this.trigger("close")}}},_getSlideParams:function(){var t=this.__base.apply(this,arguments),e=0;return this.hasMod("type","advanced")?(this.domElem.children().each(function(){e+=$(this).outerHeight(!0)}),t.sizeVal=e,t):t}}),BEM.DOM.decl("advanced-search",{onSetMod:{js:function(){this._vals=[],this.findBlocks().bindEvents()}},findBlocks:function(){return this.page=this.findBlockOutside("b-page"),this.dropdowns=this.findBlocksInside({block:"dropdown",modName:"advanced",modVal:"yes"}),this.checkboxes=this.findBlocksInside({block:"check-button",modName:"advanced",modVal:"yes"}),this.filters=this.dropdowns.concat(this.checkboxes),this._resetButton=this.elem("action","type","reset"),this},_onTouchMove:function(){this.dropdowns.forEach(function(t){t.hide()})},bindEvents:function(){return BEM.blocks["b-page"].on("filters:update",this.updateFilters,this),BEM.blocks["b-page"].on("touchmove",this._onTouchMove,this),this.bindTo(this.domElem,"submit",this._onSubmit),this.filters.forEach(this._initSearchControl.bind(this)),this.afterCurrentEvent(function(){this.filters.forEach(function(t){t.on("change",this.submit,this)},this),this._updateResetButton()}),this.dropdowns.forEach(function(t){t.on("change",this._onDropdownItemChange,this)},this),this.bindTo(this._resetButton,"click",this._onResetClick),this.page.on("change",this._onPageChange,this),this},unbindEvents:function(){return BEM.blocks["b-page"].un("filters:update",this.updateFilters,this),BEM.blocks["b-page"].un("touchmove",this._onTouchMove,this),this.afterCurrentEvent(function(){this.filters.forEach(function(t){t.un("change",this.submit,this)},this),this._updateResetButton()}),this.dropdowns.forEach(function(t){t.un("change",this._onDropdownItemChange,this)},this),this.page.un("change",this._onPageChange,this),this},destruct:function(){this.unbindEvents()},_onSubmit:function(){return this.submit(),!1},_onResetClick:function(){this.reset()},_initSearchControl:function(t,e){this._vals.push(t.val()),t.on("change silentChange",function(t){this._vals[e]=t.block.val(),this._updateResetButton()},this)},_onDropdownItemChange:function(t){var e=t.block;t.target.hide(),e.setMod("applied",e.val()?"yes":"")},updateFilters:function(t,e){var n=e.params.filters;_.isEmpty(n)||(_.forEach(this.dropdowns,function(t){this.updateDropdown(t,n)},this),_.forEach(this.checkboxes,function(t){this.updateCheckButton(t,n)},this))},updateDropdown:function(t,e){t._control.val(e[t.params.name]||""),t.trigger("silentChange")},updateCheckButton:function(t,e){e[t.params.name]&&t.setMod("checked","yes")},_onPageChange:function(t,e){"search"===e.type||this.reset()},isDefaultState:function(){return!this._vals.some(_.identity)},submit:$.debounce(function(){if(this.page.hasMod("type","search")){var t=this.page.findBlockInside("search")||this.page.findBlockInside("search2");t.domElem.submit()}},50),reset:function(){this.isDefaultState()||(this._disableCounters(),this.controlsToReset().forEach(function(t){t.reset()}),this.findBlocksInside("input").forEach(function(t){t.val("")}),this.submit(),this.afterCurrentEvent(function(){this._updateResetButton()}),this._enableCounters())},controlsToReset:function(){return this.filters},_updateResetButton:function(){this._updateSelectedCounter(),this.setMod(this._resetButton,"hidden",this.isDefaultState()?"yes":"")},_updateSelectedCounter:function(){var t=this._vals.filter(function(t){return t&&""!==t});this.trigger("countUpdate",{count:t.length})},_enableCounters:function(){this.filters.forEach(function(t){t.enableCounters()})},_disableCounters:function(){this.filters.forEach(function(t){t.disableCounters()})},getParams:function(){return this.domElem.serialize().replace(/&?[^&?]+=(?=(?:&|$))/g,"").replace(/^&/,"")}},{live:!0}),BEM.DOM.decl("advanced-search",{onSetMod:{js:function(){this.params.disabled||(this.__base.apply(this,arguments),this._initSearchControl(this.site,this._vals.length))}},findBlocks:function(){return this.__base.apply(this,arguments),this.site=this.findBlockInside("custom-site"),this.size=this.findBlockInside("custom-size"),this.sizesDropdown=this.findBlockInside({block:"dropdown",modName:"custom-size",modVal:"yes"}),this.wallpaperButton=this.findBlockInside({block:"check-button",modName:"wallpaper",modVal:"yes"}),this},bindEvents:function(){return this.__base.apply(this,arguments),this.site.on("change",this.submit,this),this.afterCurrentEvent(function(){this.wallpaperButton.bindTo("click",this._onWallpaperClick.bind(this)),this.wallpaperButton.on("change",this._onWallpaperChange,this)}),this},destruct:function(){this.site.un("change",this.submit,this),this.wallpaperButton.un("change",this._onWallpaperChange,this),this.__base.apply(this,arguments)},_onWallpaperClick:function(){this._isWallpaperChangedByUser=!0},_onWallpaperChange:function(){this.wallpaperButton.isChecked()?(this.wallpaperButton.delMod("excluded"),this.resolveConflicts(this.wallpaperButton)):(this.wallpaperButton.setMod("excluded","yes"),this._isWallpaperChangedByUser&&this.wallpaperButton.val({wp:"off"}),this._isWallpaperChangedByUser=!1)},_onDropdownItemChange:function(t){this.__base.apply(this,arguments);var e=t.block;e.hasMod("type","color-picker")&&this.updateColorThumb(e,e.val()),e.val()&&this.resolveConflicts(e)},_onPageChange:function(){this.__base.apply(this,arguments),this._isWallpaperChangedByUser=!1},_onResetClick:function(){this._isWallpaperChangedByUser=!0,this.reset(),BEM.blocks["b-statcounter"].hit({params:{query:{filter:{reset:"yes"}}}})},updateFilters:function(t,e){var n=e.params.filters;_.isEmpty(n)||BEM.blocks["i-global"].param("isPumpkin")||(this._submitDisabled=!0,this.__base.apply(this,arguments),this.afterCurrentEvent(function(){this._submitDisabled=!1,this.trigger("show")}),n.site&&(this.site.findBlockInside("input").val(n.site),this.site.setMod("applied","yes").trigger("silentChange")),"eq"===n.isize&&this.size.updateSizes(n.iw,n.ih))},isWallpaper:function(t){return t&&t.isize&&"wallpaper"===t.isize},updateDropdown:function(t,e){var n="isize"===t.params.name?!this.isWallpaper(e):!0;n&&this.__base.apply(this,arguments)},updateCheckButton:function(t,e){var n="isize"===t.params.name?this.isWallpaper(e):!0;n&&this.__base.apply(this,arguments)},submit:function(){if(!this._submitDisabled){var t=this.site.searchedSite;this.site.val()!==t&&this.site.input.val(t),"search"===BEM.blocks["i-global"].param("page")&&(BEM.blocks.header.getSearch().submitByFilters=!0),this.__base.apply(this,arguments)}},resolveConflicts:function(t){var e=t.params.name,n=this.isWallpaper(t.params.values);return"isize"===e&&n&&(this.sizesDropdown.disableCounters(),this.sizesDropdown.reset(),this.sizesDropdown.enableCounters()),"isize"!==e||t._isCustom||n||this.wallpaperButton.reset(),this},controlsToReset:function(){var t=_.extend([],this.__base.apply(this,arguments));return t.push(this.site),this.wallpaperButton.hasMod("excluded","yes")?_.without(t,this.wallpaperButton):t},updateColorThumb:function(t,e){t.setMod("color-thumb",e&&e[0]?e[0].val:"none")}},{live:!1,getHeight:function(){return 28}}),BEM.DOM.decl({block:"check-button",baseBlock:"checkbox"},{onSetMod:{js:function(){this.__base.apply(this,arguments),this.elem("control").attr({role:"button","aria-labelledby":this.elem("text").attr("id"),"aria-pressed":this.hasMod("checked","yes")}),this.bindTo("keyup",function(t){t.shiftKey||t.ctrlKey||t.altKey||13===t.which&&this.elem("control").click()})},checked:function(t,e){if(this.__base.apply(this,arguments)===!1)return!1;var n="yes"===e;this.elem("control").attr("aria-pressed",n)},pressed:function(){return this.isDisabled()?!1:void 0}},_onMouseDown:function(){this.setMod("pressed","yes"),this.bindToDoc("mouseup touchend",function(){this.delMod("pressed"),this.unbindFromDoc("mouseup touchend")})}},{live:function(){var t=this.__base.apply(this,arguments);return this.liveBindTo("mousedown touchstart",function(t){this._onMouseDown(t)}),t}}),BEM.DOM.decl({block:"check-button",modName:"advanced",modVal:"yes"},{onSetMod:{js:function(){this.__base.apply(this,arguments),this.bindEvents().initButton()}},bindEvents:function(){return this.on("change",this._onAdvancedClick),this},_onAdvancedClick:function(){this.delMod("focused")},_generateHidden:function(t,e){return BEMHTML.apply({block:"check-button",mods:{advanced:"yes"},elem:"hidden-value",tag:"input",attrs:{type:"hidden",name:t,value:e}})},initButton:function(){this.on("change",function(t){this._buttonProcess(t.target.val())},this),this._buttonProcess(this.val())},_buttonProcess:function(t){this.params.generateHidden&&(this.findElem("hidden-value").remove(),t!==this.params.defaultValue?this.val(t):this.trigger("reset"))},val:function(t){if(t)for(var e=Object.keys(t),n=0,i=e.length;i>n;n++)this.domElem.append(this._generateHidden(e[n],t[e[n]]));return this.isChecked()?this.params.values:""},reset:function(){this.findElem("hidden-value").remove(),this.delMod("checked"),this.trigger("reset")},enableCounters:function(){this._countersDisabled=!1},disableCounters:function(){this._countersDisabled=!0},getDefaultParams:function(){return $.extend(this.__base.apply(this,arguments),{generateHidden:!0})}}),BEM.DOM.decl({block:"check-button",modName:"advanced",modVal:"yes"},{_onChange:function(){if(this.__base.apply(this,arguments),!this._countersDisabled){var t=this.params.name,e={ifreshness:"fresh"},n={ifreshness:"week",isize:"wallpaper"},i=this.val()?n[t]:"any",s={};s[e[t]||t]=i,BEM.blocks["b-statcounter"].hit({params:{query:{filter:s}}})}}}),BEM.DOM.decl({block:"dropdown",modName:"advanced",modVal:"yes"},{onSetMod:{js:function(){this.__base.apply(this,arguments),this._popup=this.findBlockInside("popup"),this._button=this.findBlockInside("button"),this._buttonText=this.findElem(this._button.domElem,"switcher-text"),0===this._buttonText.length&&(this._buttonText=this._button.elem("text")),this._buttonDefaultTitle=this._buttonText.text(),this._buttonIcon=this.findElem(this._button.domElem,"icon"),this._initControl(),this._afterInit()}},_initControl:function(){this._control=this.findBlockInside("radiobox"),this._control.on("change",function(t,e){this._radioboxProcess(e.current,t.target.val(),this._control.name()),this.trigger("change")},this)},_afterInit:function(){this._radioboxProcess(this._control.getCurrent(),this._control.val(),this._control.name())},_buildHidden:function(t,e){return BEMHTML.apply({block:"dropdown",mods:{advanced:"yes"},elem:"hidden-value",name:e,value:t})},_radioboxProcess:function(t,e){var n=this.findElem(t,"text").text(),i=+e!==this.params.defaultValue?n:this._buttonDefaultTitle;this._buttonText.empty().append(i),this.params.withIcons&&this.setMod(this._buttonIcon,"type",this.params.withIcons[e]),this._generateHidden()},_generateHidden:function(){if(this.params.generateHidden&&!this.findBlockInside("popup")){this.findElem("hidden-value").remove();var t=this._control.val();t!==this.params.defaultValue&&this.domElem.append(this._buildHidden(t,this._control.name()))}},val:function(){return this._control.val()!==this.params.defaultValue?[{name:this.params.name,val:this._control.val()}]:void 0},reset:function(){this.findElem("hidden-value").remove(),"undefined"!=typeof this.params.defaultValue&&this._control.val(this.params.defaultValue)},getDefaultParams:function(){return _.assign(this.__base.apply(this,arguments),{generateHidden:!0})},enableCounters:function(){this._countersDisabled=!1},disableCounters:function(){this._countersDisabled=!0}}),BEM.DOM.decl({block:"dropdown",modName:"advanced",modVal:"yes"},{onSetMod:{js:function(){this.__base.apply(this,arguments),this.afterCurrentEvent(function(){this.on("change",this._onChange,this)})}},_onChange:function(t){if(!this._countersDisabled){var e=t.block,n=e.val(),i=e.params.name,s={itype:"format",icolor:"color"},r={};r[s[i]||i]=n&&n[0]?n[0].val:"any",BEM.blocks["b-statcounter"].hit({params:{query:{filter:r}}})}}}),function(t){"use strict";t.ajaxPrefilter(function(t){return"iframe"===t.type.toLowerCase()?"iframe":void 0}),t.ajaxTransport("iframe",function(e,n){var i,s,r=t(e.file),o="iframe-"+t.now(),a=t("<form></form>").hide().attr({action:e.url,target:o}),c=function(){s&&s.replaceWith(r),a.remove(),i.attr("src","javascript:false;").remove()};return e.dataTypes.shift(),t.each(n.data||{},function(e,n){t("<input />").attr({type:"hidden",name:e,value:n}).appendTo(a)}),r.length&&(s=r.after(r.clone().prop("disabled",!0)).next(),a.attr({enctype:"multipart/form-data",method:"POST"}),a.append(r)),{send:function(e,n){i=t("<iframe></iframe>").hide().attr({name:o,id:o,src:"javascript:false;"}),i.one("load",function(){i.bind("load",function(){try{var t=this.contentWindow?this.contentWindow.document:this.contentDocument?this.contentDocument:this.document,e=t.documentElement?t.documentElement:t.body;n(200,e.innerHTML)}catch(i){n(500)}setTimeout(function(){c()},42)}),a[0].submit()}),t("body").append(a,i)},abort:function(){null!==i&&(i.unbind("load").attr("src","javascript:false;"),c())}}})}(jQuery),BEM.DOM.decl("advanced-search",{findBlocks:function(){return this.__base.apply(this,arguments),this.backButton=this.findBlockInside(this.elem("back"),"button"),this},bindEvents:function(){return this.__base.apply(this,arguments),this.backButton&&BEM.blocks["b-page"].on("search:input:update",this._onSearchUpdate,this),this},unbindEvents:function(){return this.__base.apply(this,arguments),this.backButton&&BEM.blocks["b-page"].un("search:input:update",this._onSearchUpdate,this),this},_onSearchUpdate:function(t,e){var n=BEM.blocks.uri.setParam(this.backButton.url(),"text",e.params.text);this.backButton.url(n)}}),BEM.DOM.decl({block:"dropdown",modName:"custom-size",modVal:"yes"},{onSetMod:{js:function(){this.__base.apply(this,arguments);var t=BEM.blocks["i-global"].param("mobile");this.afterCurrentEvent(function(){BEM.blocks["custom-size"].on("change",this._onCustomChange,this).on("reset",this._onCustomReset,this)}),t||this._popup.on("show",this._onPopupShow,this),t&&this.bindTo("size-input","blur",this._popupKeyboardHideFix)}},destruct:function(){this.__base.apply(this,arguments),BEM.blocks["custom-size"].un("change",this._onCustomChange,this).un("reset",this._onCustomReset,this)},_popupKeyboardHideFix:function(){this.afterCurrentEvent(function(){window.scrollTo(0,0)})},_onPopupShow:function(){this.getCustomSize().focus()},_onCustomChange:function(){this._isCustom=!0,this.getAdvancedSearch().submit(),this._popup.hide(),this.trigger("silentChange")},_onCustomReset:function(){this._isCustom=!1,this.trigger("silentChange")},val:function(){return this._isCustom?this.getCustomSize().selected:this.__base.apply(this,arguments)},_radioboxReset:function(){this.__base.apply(this,arguments),this.getCustomSize().reset()},getCustomSize:function(){return this._customSize||(this._customSize=this.findBlockOn("custom-size")),this._customSize},getAdvancedSearch:function(){return this._advancedSearch||(this._advancedSearch=$(".advanced-search").bem("advanced-search")),this._advancedSearch}}),BEM.DOM.decl("custom-site",{onSetMod:{js:function(){this.findBlocks().bindEvents(),this.searchedSite=this.input.val()}},findBlocks:function(){return this.input=this.findBlockInside("input"),this.button=this.findBlockInside("button"),this.popup=this.findBlockInside("popup"),this},bindEvents:function(){return this.button.on("click",this.trySubmit,this),this.input.on("change",this._onInputUpdate,this),this.input.on("focus",this._onFocus,this),this.input.on("blur",this._onBlur,this),this.input.bindTo("keypress",this.changeThis(this._onKeyPress)),this},destruct:function(){this.__base.apply(this,arguments),this.button.un("click",this.trySubmit,this),this.input.un("change",this._onInputUpdate,this),this.input.un("focus",this._onFocus,this),this.input.un("blur",this._onBlur,this)},_onKeyPress:function(t){13===t.which&&this.trySubmit()},trySubmit:function(){var t=this.input.val(),e=this.checkVal(t),n=""===t;this.setMod("applied",e&&!n?"yes":"").hideError(),e||n?this.submit(t):this.showError()},_onFocus:function(){this.delMod("applied")},_onBlur:function(){this.button.hasMod("pressed","yes")||(this.setMod("applied",""===this.searchedSite?"":"yes"),""===this.input.val()&&""!==this.searchedSite&&this.input.val(this.searchedSite))},_onInputUpdate:function(){this.input.hasMod("invalid")&&this.hideError()},checkVal:function(t){var e=new RegExp("^(?:(?:https?|ftp)://)?(?:(?:(?:xn--)?(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:xn--)?(:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:xn--)?(?:[a-z\\u00a1-\\uffff]{2,})))(?::\\d{2,5})?(?:/[^\\s]*)?");return t.match(e)},showError:function(){return this.popup.show(this.domElem),this.input.setMod("invalid","yes"),this},hideError:function(){return this.popup.hide(this.domElem),this.input.delMod("invalid"),this},val:function(){return this.input.val()},submit:function(t){BEM.blocks["b-statcounter"].hit({params:{query:{filter:{site:t?"on":"any"}}}}),this.searchedSite=t,this.input.findElem("control").blur(),this.trigger("change")},reset:function(){this.hideError().delMod("applied").input.val(""),this.searchedSite="",this.trigger("change")}}),BEM.DOM.decl("custom-size",{onSetMod:{js:function(){var t=this.params.values;this.findBlocks().bindEvents(),this.select(t.iw,t.ih),this.setHints()}},findBlocks:function(){return this.dropdown=this.findBlockOn("dropdown"),this.radiobox=this.dropdown.findBlockInside("radiobox"),this.switcher=this.dropdown.findBlockOn(this.dropdown.elem("switcher"),"button"),this.inputs=this.findBlocksInside("input"),this.button=this.findBlockOn(this.elem("button"),"button"),this.message=this.elem("message"),this},bindEvents:function(){return this.button.on("click",this.trySubmit,this),this.dropdown.on("change",this.reset,this),_.forEach(this.inputs,function(t){t.on("change",this._onInputUpdate,this).bindTo("keypress",this.changeThis(this._onKeyPress))},this),this},destruct:function(){this.button.un("click",this.trySubmit,this),this.dropdown.un("change",this.reset,this),_.forEach(this.inputs,function(t){t.un("change",this._onInputUpdate,this)},this),this.__base.apply(this,arguments)},_onKeyPress:function(t){13===t.which&&this.trySubmit()},trySubmit:function(){var t=this.getVals(),e=this.checkVal(t.width),n=this.checkVal(t.height);this.hideError(),e&&n?this.select(t.width,t.height):this.showError(e,n)},_onInputUpdate:function(){_.forEach(this.inputs,function(t){t.hasMod("invalid")&&this.hideError()},this)},select:function(t,e){return t&&e?(this.removeVals().setCustomValues().setText(t,e).trigger("change"),this):this},setCustomValues:function(){for(var t=[{name:"isize",val:"eq"}],e=this.getVals(),n={isize:this.params.values.isize,iw:e.width,ih:e.height},i=Object.keys(n),s=0,r=i.length;r>s;s++)this.dropdown.domElem.append(this._generateHidden(i[s],n[i[s]]));return this.selected=t,this},removeVals:function(){return this.radiobox.val("custom"),this.dropdown.findElem("hidden-value").remove(),this},reset:function(){return"custom"===this.radiobox.val()?this:(this.selected=!1,this.setVals(),this.hideError().trigger("reset"),this.dropdown.val()||this.dropdown.delMod("applied"),this)},_generateHidden:function(t,e){return BEMHTML.apply({block:"dropdown",mods:{advanced:"yes"},elem:"hidden-value",tag:"input",attrs:{type:"hidden",name:t,value:e}})},showError:function(t,e){return this.highlightInvalidFields(t,e),this.setMod(this.message,"hidden",""),this},hideError:function(){return this.highlightInvalidFields(!0,!0),this.setMod(this.message,"hidden","yes"),this},highlightInvalidFields:function(t,e){return this.inputs[0].setMod("invalid",t?"":"yes"),this.inputs[1].setMod("invalid",e?"":"yes"),this},checkVal:function(t){return/^[0-9]+$/.test(t)&&+t>0},setText:function(t,e){return this.switcher.elem("text").text(t+"x"+e),this},getVals:function(){return{width:this.inputs[0].val(),height:this.inputs[1].val()}},setVals:function(t,e){return this.inputs[0].val(t||""),this.inputs[1].val(e||""),this},setHints:function(){var t=BEM.blocks["i-userinfo"].get().getScreenSize();this.inputs[0].elem("hint").text(t.width),this.inputs[1].elem("hint").text(t.height)},updateSizes:function(t,e){this.setVals(t,e).select(t,e)},focus:function(){this.inputs[0].elem("control").focus()}},{live:!0}),BEM.DOM.decl("wallpaper",{onSetMod:{js:function(){this.checkButton=this.findBlockOn("check-button"),this.params.text=this.checkButton.elem("text").text(),this.setResolution()}},setResolution:function(){var t=this.checkButton,e=BEM.blocks["i-userinfo"].get(),n=e.getScreenInfo();return t.elem("text").text(this.params.text+" "+n.width+"×"+n.height),t.params.values.wp="wh"+e.getWP(),this}}),BEM.DOM.decl("paranja",{onSetMod:{js:function(){var t=this;$(t.params.rel).each(function(){$(this.elem||t.domElem).on(this.event,t[this.method].bind(t))}),this.bindTo("leftclick tap",function(){this.trigger("click")})},state:{open:function(){this.trigger("open")},close:function(){this.trigger("close")}}},open:function(){this.setMod("state","open")},close:function(){this.setMod("state","close")}},{live:!1}),BEM.DOM.decl("paranja",{setTheme:function(t){return this.setMod("theme",t)},delTheme:function(){return this.delMod("theme")}}),BEM.DOM.decl("services-table",{onSetMod:{js:function(){this._globalServices=this.findBlockOutside("i-services"),this._services=this.findBlocksInside("service")}},updateServicesLink:function(){var t=this;$.each(this._services,function(){var e=t._globalServices.getServicePath(this.getMod("name")),n=this.elem("url"),i=n.attr("href"),s=BEM.blocks.uri.parse(i.replace(/#.*$/,"")).getRoot();s=t._globalServices.getServiceUrl(this.getMod("name"))||s,n.attr("href",s.replace(/\/$/,"")+e)})}},{live:!0}),BEM.DOM.decl("search",{_onInputChange:function(){BEM.blocks["i-global"].setParams({searchInputText:_.escape(this._input.val())})},reset:function(){return this._input.val("",{suggest:!1}),this},focus:function(){var t=this._suggest.params.onFocus;return this._suggest.params.onFocus=!1,this._input.elem("control").focus(),this.afterCurrentEvent(function(){this._suggest.params.onFocus=t},this),this}}),BEM.DOM.decl("search",{onSetMod:{js:function(){this.findBlocks().bindEvents()._initServiceLabel()}},_initServiceLabel:function(){return this.afterCurrentEvent(function(){var t=this._input.findBlockInside("service");t&&t.elem("url").attr("href",BEM.blocks["i-global"].param("router").index)}),this},findBlocks:function(){return this._location=BEM.blocks.location.getInstance(),this._input=this.findBlockInside("input"),this._suggest=this.findBlockInside("suggest2"),this},bindEvents:function(){return this._location.on("change",this._onChange,this),this._suggest&&this._suggest.on("select",this._onSuggestSelect,this),this._input.on("change",this._onInputChange,this),BEM.blocks["b-page"].on("search:input:update",this.updateSearchPage,this),BEM.blocks["i-global"].param("isPumpkin")||this.bindTo("submit",this._onSubmit),this},_onSuggestSelect:function(t){this._location.change({url:this._buildUrl()},t),t.preventDefault()},_onSubmit:function(t){this.submit(t),t.preventDefault()},submit:function(t){var e=BEM.blocks["i-global"].getFlag("suggest_context_redirect"),n=BEM.blocks["i-global"].param("tld");e&&"ru"===n?this._checkRedirectURL(t,e):this._ajaxSubmit(t)},_ajaxSubmit:function(t){this._location.change({url:this._buildUrl()},t)},_checkRedirectURL:function(t,e){var n=BEM.blocks["i-global"].param("id"),i=this._input.val(),s="images"===n?40:197,r="images"===n?72863:72894,o=2===e?"control-":"",a=this;$.ajax({url:"//yandex.ru/suggest/suggest-redir",data:{current:n,part:i,lr:BEM.blocks["i-global"].param("lr")},dataType:"json",context:this,cache:!1}).then(function(t,e,n){var i=_.get(t,"redirect_info.url"),s=$.Deferred();return i?s.resolve(i):s.reject(n,"no"),s.promise()}).then(function(c){cp({pid:s,cid:r,path:o+"yes",text:i,service:n},{href:c}),2===e?a._ajaxSubmit(t):location.href=c},function(e,c){cp({pid:s,cid:r,path:o+c,text:i,service:n}),a._ajaxSubmit(t)})},_buildUrl:function(){var t=this.getAdvancedSearch();return this.domElem.attr("action")+"?"+this.domElem.serialize()+(t?"&"+t.getParams():"")},_onChange:function(t,e){switch(this.__self.win.scrollTop(0),e.block){case"b-page_type_index":case"b-page_type_favorites":this.updateIndexPage(t,e);break;case"b-page_type_search":this.updateSearchPage(t,e)}},updateIndexPage:function(){this.reset().focus()},updateSearchPage:function(t,e){this.fill(e.params.text),"search:input:update"===t.type&&this.updateFound(e.params),this._input._updateClear(),this._input.delMod("focused")},val:function(){return this._input.val()},fill:function(t){return _.isArray(t)&&(t=t[0]),BEM.blocks["i-global"].param("isPumpkin")&&this._input&&this._input.val(t),this._suggest&&this._suggest.params["suggest2-input"]&&this._suggest.params["suggest2-input"].valWithoutSuggest(t),this},updateFound:function(t){return this.trigger("search:found:update",t),this},getAdvancedSearch:function(){if(!this._advancedSearch){var t=$(".advanced-search");this._advancedSearch=!_.isEmpty(t)&&t.bem("advanced-search")}return this._advancedSearch}}),BEM.DOM.decl("search",{bindEvents:function(){return this.__base.apply(this,arguments),this.bindTo("label","leftclick tap",this._onLabelClick),this},countSubmit:function(){return this.submitByFilters?void(this.submitByFilters=!1):this.submitBySuggest?void(this.submitBySuggest=!1):void("index"===BEM.blocks["i-global"].param("page")?(_.includes(["ru","ua","com.tr"],BEM.blocks["i-global"].param("tld"))&&BEM.blocks["b-statcounter"].goal({goal:"button",params:{query:{morda:"submit"}}}),BEM.blocks["b-statcounter"].hit({params:{query:{morda:"submit"}}})):BEM.blocks["b-statcounter"].hit({params:{query:{reform:"submit"}}}))},_onSuggestSelect:function(t){return BEM.blocks["i-global"].param("isPumpkin")?(this._location.change({url:this._buildUrl(),reload:!0},t),void t.preventDefault()):(this.__base.apply(this,arguments),this.submitBySuggest=!0,void BEM.blocks["b-statcounter"].hit({params:{query:"index"===BEM.blocks["i-global"].param("page")?{morda:"suggest"}:{reform:"suggest"}}}))},_onLabelClick:function(){BEM.blocks["b-statcounter"].hit({params:{query:{reform:"label"}}})},updateIndexPage:function(){this.reset()},updateCopyPages:function(){this.fill("")}}),BEM.decl("i-statface",{onSetMod:{js:function(){this._data={},this._needSend=!1,this.hasMod("send","manual")||$(window).unload(this.changeThis(this.send))}},set:function(t,e){this._needSend=!0;var n=this._data;return"object"==typeof t?$.each(t,function(t,e){n[t]=e}):n[t]=e,this},reset:function(){var t=this;return arguments[0]?$.each(arguments,function(e,n){delete t._data[n]}):this._data={},$.isEmptyObject(this._data)&&(this._needSend=!1),this},serialize:function(){var t=this;return $.map(t.params.keys,function(e){return t._data[e]}).join(".")+(t.params.customKeys?$.map(t.params.customKeys,function(e){var n=t._data[e];return"/"+e+"="+(void 0===n?"":n)}).join(""):"")},send:function(t){if(this._needSend){var e=this.params,n=["//",e.host,"/",e.path,"/dtype=stred","/pid=",e.pid,"/cid=",e.cid,"/cts=",(new Date).getTime(),"/path=",this.serialize(),"/*data=",encodeURIComponent("url="+encodeURIComponent(e.url))].join("");"click"===e.path?document.createElement("IMG").src=n:$.ajax({type:"GET",url:n,data:null,complete:t||$.noop,dataType:"script",timeout:500}),this._needSend=!1
}return this},getDefaultParams:function(){return{host:"clck.yandex.ru",path:"jclck",url:location.href}}}),BEM.decl("i-statface",{onSetMod:{js:function(){this.__base.apply(this,arguments),this.params.customKeys.push("u","reqid")}},sendCounter:function(t){this.set({u:(new Date).getTime(),reqid:BEM.blocks["i-global"].param("serpid")}).send(t).reset()},getDefaultParams:function(){return $.extend(this.__base(),{pid:this.projectId,host:BEM.blocks["i-global"].param("click-host"),customKeys:[]})}}),BEM.decl("i-statface",{projectId:40}),BEM.DOM.decl("suggest2",{onSetMod:{js:{inited:function(){this.params.form||this.findBlockOutside("suggest2-form"),this._lastSubmitTime=0,this._lastBlurTime=0,this._clear()}}},_bodyHandler:function(t){if(!this._isDestructing){var e=$(t.target),n=this.containsDomElem(e)||this.params.form.containsDomElem(e);n||(this._freezeInputFocus=!1)}},getDefaultParams:function(){return{submitBySelect:!1,updateOnEnterByKeyboard:!0,onFocus:"request",requestOnEmptyInput:!1,abortQueries:!1,sequentialQueriesTimeout:!1}},destruct:function(){this.unbindAllEvents(),this.__base.apply(this,arguments)},init:function(){var t=this;return t.params.form.on("submit",function(e,n){t._lastSubmitTime=(new Date).getTime(),t._isActualSearchCGIParams?t._isActualSearchCGIParams=!1:"suggest2-counter"!==n.data.block&&n.data.prevent!==!1&&this.removeHiddenInputs(),t._clear(),t._popup.hide()}),t._input=t.params["suggest2-input"],t._popup=t.params["suggest2-popup"],t._inputValue=t._input.val(),t._model=t.initModel(),t._view=t.initView(),t._counter=t.initCounter(),t._model.on({response:this.setItems,reject:function(e,n){2===n.code&&(t._popup.hide(),t._clear())}},t),t.bindToDoc("click tap leftclick",t._bodyHandler),t.bindEvents(),t},initModel:function(){return BEM.create("suggest2-model",this.params)},getModel:function(){return this._model},initView:function(t,e){return BEM.create({block:"suggest2-view",mods:t||{}},e||{})},getView:function(){return this._view},initCounter:function(){return this.params.counter?this.params.counter.initValues().bindEvents():void 0},getCounter:function(){return this._counter},setDataConverter:function(t){return this.getModel().getProvider().convert=t,this},setRequestData:function(t){return this.getModel().getProvider().getRequestData=t,this},setRequestUrl:function(t){return this.getModel().getProvider().getRequestUrl=t,this},setOwner:function(t){return this._popup.owner(t),this},bindEvents:function(){var t=this;return t._input.bindEvents({change:t._onChange,focus:t._onFocus,blur:t._onBlur},t),t._popup.on({preshow:function(){t.trigger("preshow")},show:function(){t._onShow()},hide:function(e,n){t._onHide(n)}}),t.params.form&&t.params.form.on("button-press",t._onSearchButtonMousedown,t),BEM.blocks["suggest2-item"].on(t.domElem,{"link-click":function(e,n){t._counter&&"_self"===$(n.$e.target).attr("target")&&n.$e.preventDefault()}}),t},_onShow:function(){this.trigger("show")},_onHide:function(t){this.trigger("hide",t)},_onSearchButtonMousedown:function(){this._input.realVal(this._input.val()),this._popup.hide()},unbindAllEvents:function(){var t=this;return t.unbindFromDoc("click tap leftclick"),t._input.unbindAllEvents(),t.params.form.un("submit"),t._model.un("response").un("reject"),t._popup.un("preshow").un("show").un("hide"),t.params.form&&t.params.form.un("button-press",t._onSearchButtonMousedown,t),t},setItems:function(t,e){var n=this,i=e.data.items||[];return n._isFormSubmitDurinQuery()||!i.length?(n._popup.hide(),n._clear()):this.params.sequentialQueriesTimeout||n._input.val()===e.val?(n._text=e.val,n._pos=e.pos,n._meta=e.data.meta||{},n._popup.show(n._view.html(i,n._meta)).width(n.getPopupWidth()),n._items=n.findBlocksInside("suggest2-item"),n._clearItems().trigger("update",{val:n._text,pos:n._pos,items:n._items}),n):n._clear()},getItems:function(){return this._items||[]},isBlur:function(){return this._isBlur&&!this._isMouseDown},getPopupWidth:function(){},getInputWidth:function(){return 0},isNeedSubmitFormOnSelectItem:function(t){return this.params.submitBySelect&&"link"!==t.getMod("interact")},_isFormSubmitDurinQuery:function(){return this._lastSubmitTime?(this._model.filterRequestsByVal(this._input.realVal()),this._model.isTimeInRequestInterval(this._lastSubmitTime)):!1},_onChange:function(t,e){this._inputValue!==this._input.val()&&(this._inputValue=this._input.val(),this._doRequest(e))},_doRequest:function(t){this._model.request(this._input.realVal(this._input.val()),this._input.getCaretPosition(),t)},_onFocus:function(){!this._popup.isShown()&&this._isBlur&&this.params.onFocus&&this._isLastBlurTimeLater(50)&&(this.getItems().length&&this._input.val()===this._text?(this._clearItems(),this._popup.show()):this._isMouseDown||"request"!==this.params.onFocus||this._doRequest())},_onBlur:function(){this._isBlur?(this._clear(),this._popup.hide()):this._freezeInputFocus?(this._clear(),this._input.focus()):this._isMouseDown&&this._input.focus(),this._lastBlurTime=(new Date).getTime(),this._isBlur=!0},_getItemIndex:function(t){return this.getItems().indexOf(t)},_clear:function(){return this._isBlur=!0,this._freezeInputFocus=!1,this._clearItems()},_clearItems:function(){return this._isMouseDown=!1,this._enterItemIndex=-1,this._unselectItems()},_isLastBlurTimeLater:function(t){return(new Date).getTime()-this._lastBlurTime>t},_unselectItems:function(t){var e=t?[].slice.call(arguments):this.getItems();return e.forEach(function(t){t.onLeave()}),this},_onSelectItem:function(t,e){var n=this,i=n._getItemIndex(t),s=t.onSelect(e),r=t.valOnSelect();return n._text=n._input.realVal(r),n._isBlur=!0,n._freezeInputFocus=!1,n._setSearchCGIParams(t),n.trigger("select",{val:n._text,pos:n._pos,item:t,meta:n._meta,itemIndex:i,byKeyboard:e,callbackOnSelect:s}),r!==!1&&(n._items=[],this.isNeedSubmitFormOnSelectItem(t)&&n.params.form.submit()),i},_isActualSearchCGIParams:!1,_setSearchCGIParams:function(t){this.params.form.removeHiddenInputs(),t.params.searchCGI&&(this._isActualSearchCGIParams=!0,this.params.form.appendHiddenInputs(t.params.searchCGI.map(function(t){return{name:t[0],value:t[1]}})))},_onDownItem:function(){this._isBlur=!1,this._isMouseDown=!0}}),BEM.DOM.decl("suggest2",{getInputLeft:function(){return 0},getInputWidth:function(){return 0},getContainerWidth:function(){return 0},getMetrics:function(){var t=this.getInputLeft(),e=this.getInputWidth(),n=this.getContainerWidth()-t;return{marginLeft:t,minWidth:e>=n?n:e,maxWidth:n}},adjustView:function(){return{}}}),BEM.DOM.decl("suggest2",{bindEvents:function(){var t=this;return t._input.bindEvents({keydown:t._onKeyDown,keyup:t._onKeyUp,keypress:t._onKeyPress,mousedown:function(){t._input.isFocused()&&t._onFocus()}},t),BEM.blocks["suggest2-item"].on(t.domElem,{mouseover:function(e){t._onEnterItem(e.block,!1)},mouseout:function(e,n){var i=e.block.domElem[0];i===n.relatedTarget||$.contains(i,n.relatedTarget)||t._onLeaveItem(e.block,!1)},mousedown:function(){t._onDownItem()},leftclick:function(e){t._onSelectItem(e.block,!1)}}),t.__base.apply(t,arguments)},_onKeyDown:function(t){var e=this.__self.keyboard,n=t.which;!this._popup.isShown()||n!==e.up&&n!==e.down||(t.preventDefault(),this._enterByKeyboard(n))},_onKeyUp:function(t){var e=this.__self.keyboard;if((t.which===e.left||t.which===e.right)&&(this.trigger("change-cursor-pos"),this._model.request(this._input.realVal(this._input.val()),this._input.getCaretPosition())),t.which===e.right&&~this._enterItemIndex&&this._enterItemByKeyboard){var n=this._items[this._enterItemIndex];n&&this.trigger("ahead",{item:n,val:"link"===n.getMod("interact")?n.elem("text").text():n.val()})}},_onKeyPress:function(t){if(t.which===this.__self.keyboard.enter&&~this._enterItemIndex&&this._enterItemByKeyboard){var e=this._items[this._enterItemIndex];e&&(t.preventDefault(),this._onSelectItem(e,!0))}},_enterByKeyboard:function(t){var e=t-39,n=this._items.length,i=this._enterItemIndex+e;return-1===i||i===n?(this._enterItemIndex=i,this._unselectItems(this._items[i]),this.trigger("out",{val:this._text,byKeyboard:!0})):(0>i?i=n-1:i>=n&&(i=0),void this._onEnterItem(this._items[i],!0))},_onEnterItem:function(t,e){this._enterItemIndex=this._getItemIndex(t),this._enterItemByKeyboard=e,this._unselectItems(),t.onEnter(e)},_onLeaveItem:function(t){this._clearItems()._unselectItems(t)}},{keyboard:{enter:13,left:37,up:38,right:39,down:40},live:function(){this.liveBindTo("mousedown",function(){this._onDownItem()})}}),BEM.decl("suggest2-model",{onSetMod:{js:{inited:function(){this._requests=[]}}},destruct:function(){this._provider&&this._provider.destruct(),this.__base.apply(this,arguments)},getProvider:function(){return this._provider?this._provider:(this._provider=this.setProvider(this.params),this._provider)},setProvider:function(t){return this._provider=BEM.create("suggest2-provider",t),this._provider},getCancelRequestConditions:function(){return[{block:"suggest2",show:!1},{block:"suggest2",event:"select"},{block:"suggest2-item",event:"select"},{block:"suggest2",event:"out"},{block:"suggest2-item",show:!1},{block:"suggest2-popup",event:"hide"},{suggest:!1},{source:"sample"}]},request:function(t,e,n){var i=this,s={val:t,caretPosition:e,data:n};i._requests.push(s);var r=i._isNeedRequest(t,n);return r.need?(s.requestTime=(new Date).getTime(),i.trigger("request",{val:t,pos:e}),i.getProvider().get(t,e,function(t,e,n){s.responseTime=(new Date).getTime(),i._onResponse(t,e,n);var r=i._requests[i._requests.length-1];i.params.sequentialQueriesTimeout&&r.val!==t&&i.request(r.val,r.caretPosition,r.data)}),i):i.trigger("reject",{val:t,pos:e,code:r.code,reason:r.reason||{}})},isTimeInRequestInterval:function(t){for(var e=this._requests.length-1;e>=0;e--)if(t>this._requests[e].requestTime&&t<this._requests[e].responseTime)return!0;return!1},filterRequestsByVal:function(t){this._requests=this._requests.filter(function(e){return e.val===t})},_isNeedRequest:function(t,e){if(""===t&&!this.params.requestOnEmptyInput)return{need:!1,code:2};var n;if(this.params.sequentialQueriesTimeout)for(n=this._requests.length-1;n>=0;n--){var i=this._requests[n];if(void 0===i.responseTime&&(new Date).getTime()-i.requestTime<this.params.sequentialQueriesTimeout)return{need:!1,code:3,reason:{request:i}}}if(!e)return{need:!0};var s,r=this.getCancelRequestConditions();t:for(n=0;n<r.length;n++){s=r[n];for(var o in s)if(s.hasOwnProperty(o)&&s[o]!==e[o])continue t;return{need:!1,code:1,reason:{condition:s}}}return{need:!0}},_onResponse:function(t,e,n){this.trigger("response",{val:t,pos:e,data:n})}}),BEM.DOM.decl("suggest2-detect",{onSetMod:{js:{inited:function(){this.bindToDoc("keydown",function(t){this.__self._pressedKeyCode=t.which},this).bindToDoc("keyup",function(){this.__self._pressedKeyCode=null},this),this.__self.isSupportInlineSVG()||this.setMod("inlinesvg","no")}}}},{_pressedKeyCode:null,isPressedEscape:function(){return 27===this._pressedKeyCode},_isSupportInlineSVG:null,isSupportInlineSVG:function(){if(null!==this._isSupportInlineSVG)return this._isSupportInlineSVG;var t=document.createElement("div");return t.innerHTML="<svg/>",this._isSupportInlineSVG="http://www.w3.org/2000/svg"===(t.firstChild&&t.firstChild.namespaceURI),this._isSupportInlineSVG}}),function(t){if(t.support.cors||!t.ajaxTransport||!window.XDomainRequest)return t;var e=/^(https?:)?\/\//i,n=/^get|post$/i,i=new RegExp("^(//|"+location.protocol+")","i");return t.ajaxTransport("* text html json",function(s,r){if(s.crossDomain&&s.async&&n.test(s.type)&&e.test(s.url)&&i.test(s.url)){var o=null;return{send:function(e,n){var i="",a=(r.dataType||"").toLowerCase();o=new XDomainRequest,/^\d+$/.test(r.timeout)&&(o.timeout=r.timeout),o.ontimeout=function(){n(500,"timeout")},o.onload=function(){var e="Content-Length: "+o.responseText.length+"\r\nContent-Type: "+o.contentType,i={code:200,message:"success"},s={text:o.responseText};try{if("html"===a||/text\/html/i.test(o.contentType))s.html=o.responseText;else if("json"===a||"text"!==a&&/\/json/i.test(o.contentType))try{s.json=t.parseJSON(o.responseText)}catch(r){i.code=500,i.message="parseerror"}}catch(c){throw c}finally{n(i.code,i.message,s,e)}},o.onprogress=function(){},o.onerror=function(){n(500,"error",{text:o.responseText})},r.data&&(i="string"===t.type(r.data)?r.data:t.param(r.data)),o.open(s.type,s.url),o.send(i)},abort:function(){o&&o.abort()}}}}),t}(jQuery),BEM.decl("suggest2-provider",{getDefaultParams:function(){return{cache:!1,type:"GET",dataType:"jsonp",timeout:2e3}},_lastQuery:null,get:function(t,e,n){var i=this,s=this.params.abortQueries,r=function(){n.call(i,t,e,i.convert(i._lastData))};return i._lastText===t?this._lastQuery.always(r):(i._lastText=t,s&&null!==this._lastQuery&&this._lastQuery.abort(),void(this._lastQuery=$.ajax(i._extendParamsData(i.getRequestData(t,e))).done(function(t){i._lastData=t,s&&r()}).fail(function(){i._lastData=[]}).always(function(){s||r()})))},convert:function(t){return{orig:t[0],items:t[1],meta:t[2]}},getRequestData:function(t,e){var n={};return BEM.blocks["suggest2-detect"].isSupportInlineSVG()&&(n.svg=1),$.extend({part:t,pos:e},n)},getRequestUrl:function(){return this.params.url},_extendParamsData:function(t){return this.params.url=this.getRequestUrl(),this.params.data=$.extend(this.params.data||{},t),this.params},_lastText:void 0,_lastData:[]}),BEM.decl("suggest2-provider",{getRequestData:function(){return $.extend(this.__base.apply(this,arguments),{"prev-query":BEM.blocks["i-global"].param("query")})}}),BEM.decl("suggest2-view",{html:function(t,e){return BEMHTML.apply(this.build(t,e))},build:function(t,e){return{block:"suggest2",elem:"content",mods:{theme:"normal"},content:this.buildItems(t,e)}},buildItems:function(t){return t.reduce(function(t,e){return t.push(this.buildItem(e)),t}.bind(this),[])},buildItem:function(t){var e=this.__self._getPrefs(t),n=this.__self._getType(t,e),i="html"===n||"bemjson"===n?{}:{type:n};return this._getItemByType(t,e,n,{text:{elem:"text",content:this.__self._highlight(this.__self._getText(t,e),e)},mods:i,js:e.js||{},props:{},content:[]})},_getItemByType:function(t,e,n,i){var s=i.text,r=i.mods,o=i.js,a=i.props,c=i.content;if(e.pers&&(r.personal="yes"),"fact"===n)c.push(s,{elem:"bullet"},{elem:"fact",content:t[2]});else if("weather"===n)c.push(s,{elem:"icon",elemMods:{weather:t[3]}},{elem:"fact",content:t[2]});else if("traffic"===n)c.push(s,{elem:"icon",elemMods:{traffic:t[3]}},{elem:"fact",content:t[2]});else if("nav"===n)o.val=t[1],r.interact="link",a.url=this.__self._resolveUrl(t[4]),c.push({elem:"text",content:t[3]},{elem:"bullet"},{elem:"fact",content:t[2]});else if("icon"===n){var u={};e.icon.forEach(function(t,e,n){Array.isArray(t)?u[t[0]]=t[1]:0===e&&(u[t]=n[e+1])}),c.push(s,$.extend({elem:"icon",elemMods:{size:"s"}},u)),e.fact&&c.push({elem:"fact",content:e.fact})}else"html"===n?(o.val=t[1],c.push(e.body)):"bemjson"===n?(o.val=t[1],c=c.concat(e.bemjson)):c.push(s);return e.url&&(r.interact="link",a.url=this.__self._resolveUrl(e.url),e.target&&(a.target=e.target)),e.search_cgi&&(o.searchCGI=e.search_cgi),$.extend({block:"suggest2-item",mods:r,js:o,content:c},a)}},{_getPrefs:function(t){if(!Array.isArray(t))return{};var e=t[t.length-1];return $.isPlainObject(e)?e:{}},_getType:function(t,e){var n=Array.isArray(t)?t[0]||"text":"text";return"icon"!==n||e.icon?n:"text"},_getText:function(t){return Array.isArray(t)?t[1]:t},_highlight:function(t,e){if(!e.hl)return t;var n,i=e.hl.sort(function(t,e){return t[0]-e[0]}).filter(function(t){return t[0]>=0}),s=[],r=0;return i.length?(i.forEach(function(e){n=r>e[0]?r:e[0],s.push(t.slice(r,n)),s.push({elem:"highlight",content:t.slice(n,r=e[1])})},this),s.push(t.slice(r)),s.filter(function(t){return!!t})):t},_resolveUrl:function(t){return(/[\/]{2}/.test(t)?"":"http://")+t}}),BEM.decl("suggest2-view",{},{_getGroupType:function(t,e){return t.pers?"nah":~["nav"].indexOf(e)?e:"text"},_getTextLabel:function(t){return BEM.I18N("suggest2",t)}}),BEM.decl("suggest2-view",{},{_getTextLabel:function(t){return"text"===t?BEM.blocks["i-global"].param("serviceName"):BEM.I18N("suggest2",t)}}),BEM.decl("suggest2-popup",{onSetMod:{js:{inited:function(){this._popup=this.params.popup,this.bindSuggestEvents()}}},show:function(){throw new Error("Этот метод должен быть переопределен в модификаторе _for")},hide:function(){throw new Error("Этот метод должен быть переопределен в модификаторе _for")},setContent:function(t){return this._popup.setContent(t),this},isShown:function(){throw new Error("Этот метод должен быть переопределен в модификаторе _for")},owner:function(t){return t?(this.params.owner=t,this):this.params.owner},get:function(){return this._popup},width:function(t){return void 0===t?this._popup.domElem.outerWidth():(this._popup.domElem.outerWidth(t),this)},destruct:function(){this._popup&&(this.unbindAllEvents(),this.__base.apply(this,arguments))},bindSuggestEvents:function(){return this.params.suggest.on({select:this._onSuggestSelect,update:this._onSuggestUpdate},this),this},_onSuggestSelect:function(t,e){this.hide(e)},_onSuggestUpdate:function(t,e){e.items.length||this.hide({response:"empty"})},unbindAllEvents:function(){return this.params.suggest.un("select").un("update"),this}}),BEM.decl("suggest2-input",{onSetMod:{js:{inited:function(){var t=this;t._input=t.params.input,t.disableBrowserAutocomplete(),t.realVal(t.val()),t.bindEvents({change:function(e,n){t._onChange(e,n)},clear:$.throttle(function(e,n){t._onClear(e,n)},300)}),t.bindSuggestEvents()}}},_onChange:function(t,e){this.trigger("change",e)},_onClear:function(t,e){this.trigger("clear",e)},destruct:function(){this.unbindAllEvents(),this.__base.apply(this,arguments)},get:function(){return this._input},isFocused:function(){return this._input.hasMod("focused")},focus:function(){return this._input.setMod("focused","yes"),this},blur:function(){return this._input.delMod("focused"),this},getControl:function(){return this._input.elem("control")},val:function(){return this._input.val.apply(this._input,arguments)},valWithoutSuggest:function(t,e){return this._input.val.call(this._input,t,$.extend(e,{suggest:!1}))},realVal:function(t){return void 0===t?this._realVal:("string"==typeof t&&(this._realVal=t),this._realVal)},width:function(){return this._input.domElem.width()},getCaretPosition:function(){var t,e=this.getControl()[0],n=this.val().length;return document.selection?(t=document.selection.createRange(),t.moveStart("character",-n),t.text.length):"number"==typeof e.selectionStart?e.selectionStart:n},moveCaretToEnd:function(){var t=this.getControl()[0],e=t.value.length;if("undefined"!=typeof t.createTextRange){var n=t.createTextRange();n.collapse(!1),n.select()}else"number"==typeof t.selectionStart&&(t.scrollLeft=999999,t.setSelectionRange(e,e));return this},disableBrowserAutocomplete:function(){var t=this._input.hasMod("focused");t&&this._input.delMod("focused"),this.getControl().attr({autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false","aria-autocomplete":"list"}),t&&this._input.setMod("focused","yes")},_bindedEventsNames:[],bindEvents:function(t,e){return Object.keys(t).forEach(function(n){-1===this._bindedEventsNames.indexOf(n)&&this._bindedEventsNames.push(n),this._eventsFilter(n).on(n,t[n].bind(e||this))},this),this},bindSuggestEvents:function(){var t=this.params.suggest;return t.on({out:function(t,e){this.a11yDeactive(),this._changeValueByEvent(t,e)}},this),BEM.blocks["suggest2-item"].on(t.domElem,{tpah:this._onSuggestItemTpah,select:this._onSuggestItemSelect,enter:this._onSuggestItemEnter},this),this},_onSuggestItemTpah:function(t,e){this._changeValueByEvent(t,e),this.moveCaretToEnd()},_onSuggestItemSelect:function(t,e){"link"!==t.block.getMod("interact")&&(this._changeValueByEvent(t,e),this.moveCaretToEnd())},_onSuggestItemEnter:function(t,e){this.a11yActive(e.id),e.byKeyboard&&this.params.updateOnEnterByKeyboard&&(this._changeValueByEvent(t,e),this.moveCaretToEnd())},unbindAllEvents:function(){return this._input.domElem&&this._bindedEventsNames.forEach(function(t){var e=this._eventsFilter(t);e[e instanceof BEM.DOM?"un":"off"](t)},this),this._bindedEventsNames=[],this.params.suggest.un("out"),this},a11yActive:function(t){this.getControl().attr("aria-activedescendant",t)},a11yDeactive:function(){this.getControl().removeAttr("aria-activedescendant")},_eventsFilter:function(t){return~["blur","focus","change","clear"].indexOf(t)?this._input:this.getControl()},_changeValueByEvent:function(t,e){var n=e&&void 0!==e.val?e.val:this.realVal();this.val(n,$.extend({block:t.block.__self.getName(),event:t.type},e))}}),BEM.decl("suggest2-input",{onSetMod:{js:{inited:function(){var t=this;t.__base.apply(this,arguments),t.bindEvents({keydown:function(e){t._onKeyDown(e)}},t)}}},_onKeyDown:function(t){t.which===this.params.suggest.__self.keyboard.enter&&this.trigger("enter")}}),BEM.DOM.decl("suggest2-item",{val:function(){if(void 0!==this.params.val)return this.params.val;var t=this.elem("text");return(t.length?t:this.domElem).text()},valOnSelect:function(){return this.val()},valOnEnter:function(){return this.val()},valOnLeave:function(){return this.val()},onEnter:function(t){return this.setMod("selected","yes").triggerEvent("enter",{val:this.valOnEnter(),byKeyboard:t})},onLeave:function(t){return this.delMod("selected").triggerEvent("leave",{val:this.valOnLeave(),byKeyboard:t})},onSelect:function(t){this.triggerEvent("select",{val:this.valOnSelect(),byKeyboard:t})},triggerEvent:function(t,e){return this.trigger(t,{val:e.val,id:this.domElem.attr("id"),show:!1,byKeyboard:e.byKeyboard})}}),BEM.DOM.decl("suggest2-item",{},{live:function(){this.__base.apply(this,arguments),this.liveBindTo("mouseover mouseout mousedown leftclick",function(t){this.trigger(t.type,t)}).liveBindTo("link","leftclick",function(t){this.trigger("link-click",{$e:t})})}}),BEM.DOM.decl({block:"suggest2-item",modName:"interact",modVal:"link"},{onSelect:function(t){var e=this;e.__base.apply(e,arguments);var n=e.elem("link");return t||"_self"===n.attr("target")?function(){e._locationChange(n.attr("href"))}:void 0},_locationChange:function(t){window.location=t},valOnSelect:function(){return!1}}),BEM.decl({block:"suggest2-popup",modName:"for",modVal:"popup"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._popup.on("hide",function(){BEM.blocks["suggest2-detect"].isPressedEscape()&&this.trigger("hide",{})},this)}}},show:function(t){return this._popup.domElem?(t&&this._popup.setContent(t),this.isShown()?this:(this.trigger("preshow"),this._popup.show(this.params.owner),this.trigger("show"),this)):this},hide:function(t){return this.isShown()&&(this._popup.hide(),this.trigger("hide",t||{})),this},isShown:function(){return this._popup?this._popup.isShown():!1}}),BEM.DOM.decl({block:"suggest2",modName:"theme",modVal:"large"},{init:function(){this.__base.apply(this,arguments),this.adjustView()},initView:function(t,e){return t=t||{},this.__base($.extend(t,{theme:"large",group:t.group||this.getMod("group")||"type"}),e)},adjustView:function(){this.__base.apply(this,arguments);var t=this.getMetrics();this._view.setMarginLeft(t.marginLeft),this._view.setMinWidth(t.minWidth),this._view.setMaxWidth(t.maxWidth)},getInputLeft:function(){var t=this._input.get().findElem("control"),e=t.offset(),n=t[0];if(!n)return 0;var i=n.currentStyle?n.currentStyle:window.getComputedStyle(n),s=parseInt(i.borderLeftWidth,10)||0,r=parseInt(i.paddingLeft,10)||0;return e.left+s+r},getInputWidth:function(){return this._input.get().domElem.outerWidth()},getContainerWidth:function(){return BEM.DOM.scope.width()}}),BEM.DOM.decl({block:"suggest2",modName:"theme",modVal:"large"},{getInputWidth:function(){return this._input.get().elem("control").outerWidth()+32}}),BEM.decl({block:"suggest2-view",modName:"theme",modVal:"large"},{build:function(){var t=this.__base.apply(this,arguments);return t.mods.theme="large",t}}),BEM.decl({block:"suggest2-view",modName:"theme",modVal:"large"},{getMinWidth:function(){return this._minWidth||0},getMaxWidth:function(){return this._maxWidth||0},setMinWidth:function(t){return this._minWidth=t,this},setMaxWidth:function(t){return this._maxWidth=t,this},getMarginLeft:function(){return this._marginLeft},setMarginLeft:function(t){return this._marginLeft=t,this},build:function(){var t=this.__base.apply(this,arguments),e=["min-width:"+this.getMinWidth()+"px;"],n=this.getMaxWidth();n&&e.push("max-width:"+n+"px;");var i=this.getMarginLeft();return i&&e.push("margin-left:"+i+"px;"),t.attrs={style:e.join(" ")},t}}),BEM.decl({block:"suggest2-view",modName:"group",modVal:"type"},{buildItems:function(t){var e,n;return t.reduce(function(t,i){var s=this.__self._getPrefs(i),r=this.__self._getType(i,s),o=this.__self._getGroupType(s,r);return e!==o&&(e=o,n=[],t.push({block:"suggest2",elem:"group",content:[{elem:"title",content:this.__self._getTextLabel(e)},{elem:"items",content:n}]})),n.push(this.buildItem(i)),t}.bind(this),[])}}),BEM.DOM.decl({block:"suggest2",modName:"group",modVal:"label"},{initView:function(t,e){return this.__base($.extend(t||{},{group:"label"}),$.extend(e||{},{label:this.params.label}))}}),BEM.decl({block:"suggest2-view",modName:"group",modVal:"label"},{buildItems:function(t){var e,n;return t.reduce(function(t,i,s){var r=this.__self._getPrefs(i).label||"";if(e!==r){e=r,n=[];var o;o=r?r:0===s?"":this.params.label||this.__self._getTextLabel("text"),t.push({block:"suggest2",elem:"group",content:[{elem:"title",content:o},{elem:"items",content:n}]})}return n.push(this.buildItem(i)),t}.bind(this),[])}}),BEM.DOM.decl("suggest2-form",{onSetMod:{js:{inited:function(){this._isReady=!1,this._nodes=this.initNodes()}}},getDefaultParams:function(){return{inputName:"input",buttonName:"button",popupName:"popup"}},destruct:function(){this._nodes.forEach(function(t){t.suggest.domElem&&BEM.DOM.destruct(t.suggest.domElem),this.unbindFormEvents(t),t.counter&&t.counter.destruct(),t.proxies.input.destruct(),t.proxies.popup.destruct()},this),this.__base.apply(this,arguments)},getOwner:function(){},isReady:function(){return this._isReady},initNodes:function(){var t=this.getNodes();return t.forEach(function(t){t.suggest.init()}),this._isReady=!0,this.trigger("ready",{nodes:t}),t},getNodes:function(){return this.getNodeList().map(function(t){var e=t.suggest,n=e.params;return n.input=t.input,n.button=t.button,n.form=this,t.proxies={},t.proxies.popup=n["suggest2-popup"]=BEM.create({block:"suggest2-popup",mods:{"for":this.params.popupName}},{suggest:e,popup:e.findBlockOn(this.params.popupName),owner:this.getOwner(t)||n.input}),t.proxies.input=n["suggest2-input"]=BEM.create("suggest2-input",{suggest:e,input:n.input,updateOnEnterByKeyboard:n.updateOnEnterByKeyboard}),t.counter&&(t.counter.params.suggest=e,t.counter.params.form=this,n.counter=t.counter),this.bindFormEvents(t),t},this)},bindFormEvents:function(t){var e=this;return t.button&&t.button.bindTo("click press",function(t){e._onButtonClick(t)}),e.bindTo("submit",function(t,n){e.onSubmit(t,n)}),e},_onButtonClick:function(t){this.trigger("button-click",t)},unbindFormEvents:function(t){var e=this;return t.button&&t.button.un("click press"),e.unbindFrom("submit"),e},submit:function(t){return this.domElem.trigger("submit",t||{}),this},onSubmit:function(t,e){t.data=e||{},this.trigger("submit",t)},getNodeList:function(){var t=this,e=[];return t.elem("node").each(function(n,i){var s=$(i),r=t.findBlockInside(s,"suggest2"),o={input:t.findElem(s,"input"),button:t.findElem(s,"button")};e.push({node:s,suggest:r,counter:t.findBlockOn("suggest2-counter"),input:t.findBlockOn(o.input,t.params.inputName),button:t.findBlockOn(o.button,t.params.buttonName),popup:r.findBlockOn(t.params.popupName)})}),e},appendHiddenInputs:function(t){return BEM.DOM.append(this.domElem,BEMHTML.apply(t.map(function(t){return{block:this.__self.getName(),elem:"hidden-input",tag:"input",attrs:{type:"hidden",name:t.name,value:t.value}}},this))),this},removeHiddenInputs:function(){return BEM.DOM.destruct(this.findElem(this.domElem,"hidden-input")),this}}),BEM.DOM.decl("suggest2-form",{getOwner:function(){var t=BEM.blocks["i-global"].getFlag("images_supernova_header")||BEM.blocks["i-global"].getFlag("video_mega_header");if(t)return this.__base.apply(this,arguments);var e=this.findBlockOutside("header"),n=e.elem("wrapper");return n[0]&&n||e}}),BEM.DOM.decl("suggest2-counter",{onSetMod:{js:{inited:function(){this.clear()}}},destruct:function(){this.unbindAllEvents()},getDefaultParams:function(){return{submitBySelect:!1,suggestReqID:!1,preventSubmit:!0,host:"//yandex.ru",path:"clck/jclck",dataUrl:"http://ya.ru",params:{},timeout:300}},metaProps:{exprt:"exprt",r:"region",log:"log"},clear:function(){var t=this;return t._params={user_input:"",text:""},t._times=[],t._renderTimes=[],t._requestTime=0,t._renderTime=0,t._path={service:t.params.service,state:"not_shown",index:0,personal:"nah_not_shown",submit:""},t._ratio={len:0,queryLen:0,actionsCount:0},t._firstChange=0,t._lastChange=0,t._sinceChange={first:0,last:0},t._selectedText="",t._session=0,t._reqID=0,t._meta={},t._afterSendAjaxCallback,t},submit:function(t){var e=this,n=e.params.suggest.params["suggest2-input"],i=n.val();e._params.text=i,e._params.pos=n.getCaretPosition(),e._selectedText&&e._selectedText!==e._params.text&&(e._path.state="edit"),e.params.suggestReqID&&e.attachReqID(),e.sendAjax(e.getUrl(),$.extend({submitForm:!0,afterSendAjaxCallback:function(){}},t)),e.trigger("submit",e._getSubmitEventData()).clear(),e._params.prev_query=i},_getSubmitEventData:function(){var t=this;return{path:t._path,times:t._times,render_times:t._renderTimes,prev_query:t._params.prev_query,user_input:t._params.user_input,text:t._params.text,pos:t._params.pos,ratio:t._ratio,since_first_change:t._sinceChange.first,since_last_change:t._sinceChange.last,session:t._session,suggest_reqid:t._reqID,meta:t._meta,url:t.getUrl()}},sendAjax:function(t,e){return $.ajax({type:"GET",url:t,dataType:"script",timeout:this.params.timeout,cache:!0}).always(this._sendAjaxAlways.bind(this,e)),this},afterSendAjax:function(t){return this._afterSendAjaxCallback=t,this},getUrl:function(){return this.params.host+["/",this.params.path].concat(this._getUrlParams()).join("/").replace(/(\/+)/g,"/")},_sendAjaxAlways:function(t){this.params.preventSubmit&&t.submitForm&&this.params.form.submit({block:this.__self.getName(),prevent:!1}),t.afterSendAjaxCallback(),this._afterSendAjaxCallback&&this._afterSendAjaxCallback()},_getUrlParams:function(){var t=this;return this._getParamsList().concat(t._getData()).reduce(function(e,n){return e.concat(t._getParams(n))},[]).concat(["/"])},_getParamsList:function(){var t=this;return[t.params.params,t._getPath(),t._params,t._getRatio(),t._getSinceChange(),t._getSession(),{suggest_reqid:t._reqID}]},initValues:function(){return this._params.prev_query=this.params.suggest.params["suggest2-input"].val(),this},attachReqID:function(){this._reqID=this.__self._generateReqID(),this.params.form.appendHiddenInputs([{name:"suggest_reqid",value:this._reqID}])},bindEvents:function(){var t=this,e=t.params,n=e.suggest,i=e.form,s=n.getModel(),r=n.params["suggest2-input"],o=n.params["suggest2-popup"];return i.on({"button-click":t._onFormButtonClick,submit:t._onFormSubmit},t),s.on({request:t._onModelRequest,response:t._onModelResponse},t),r.on({change:t._onInputChange,enter:t._onInputEnter},t),o.on({show:t._onPopupShow,hide:t._onPopupHide},t),BEM.blocks["suggest2-item"].on(n.domElem,"enter",t._onSuggestItemEnter,t),n.on({update:t._onSuggestUpdate,select:t._onSuggestSelect},t),t},_onFormButtonClick:function(){"keyboard"!==this._path.submit&&(this._path.submit="button_by_mouse")},_onFormSubmit:function(t,e){e.data.block!==this.__self.getName()&&e.data.prevent!==!1&&(this.params.preventSubmit&&(e.stopImmediatePropagation(),e.preventDefault()),this.submit())},_onModelRequest:function(){this._requestTime=new Date},_onModelResponse:function(t,e){e.data.items&&(this._path.personal=this._hasPersonal(e.data.items)?"nah_not_used":"nah_not_shown",this._meta=e.data.meta||{},this._addTime(new Date-this._requestTime),this._renderTime=new Date,this._setMetaProps(e))
},_onInputChange:function(t,e){e&&"clear"!==e.source||(this._params.user_input=t.block.val(),this[this._firstChange?"_lastChange":"_firstChange"]=new Date),this._ratio.actionsCount++},_onInputEnter:function(){this._path.submit="keyboard"},_onPopupShow:function(){this._path.state="not_used"},_onPopupHide:function(t,e){"empty"===e.response&&(this._path.state="not_shown")},_onSuggestItemEnter:function(t,e){e.byKeyboard&&this.params.suggest.params.updateOnEnterByKeyboard&&(this._selectedText=e.val,this._path.state="suggest")},_onSuggestUpdate:function(){this._addRenderTime(new Date-this._renderTime)},_onSuggestSelect:function(t,e){var n=this;n._path.state=e.byKeyboard?"keyboard":"mouse",n._path.index=e.itemIndex+1,n._selectedText=e.val,e.item.hasMod("personal")&&(n._path.personal="nah_used"),n.params.submitBySelect&&(n._path.submit=e.byKeyboard?"keyboard":"click_by_mouse",n._params.pos=e.pos,n._params.text=this._selectedText),n.params.suggest.isNeedSubmitFormOnSelectItem(e.item)||n.submit({submitForm:!1,afterSendAjaxCallback:e.callbackOnSelect})},unbindAllEvents:function(){var t=this.params,e=t.suggest,n=t.form;return n.un("button-click").un("submit"),e.getModel().un("request").un("response"),e.params["suggest2-input"].un("change").un("enter"),e.params["suggest2-popup"].un("show").un("hide"),e.un("select"),this},_hasPersonal:function(t){return t.some(function(t){return 1===BEM.blocks["suggest2-view"]._getPrefs(t).pers})},_setMetaProps:function(t){t.data.meta&&Object.keys(this.metaProps).forEach(function(e){this._params[this.metaProps[e]]=t.data.meta[e]||""},this)},_getParams:function(t){return Object.keys(t).reduce(function(e,n){return""===t[n]?e:(e.push(n+"="+encodeURIComponent(t[n]).replace(/%5B/g,"[").replace(/%5D/g,"]").replace(/%2C/g,",")),e)},[])},_getPath:function(){return{path:[this._path.service,this._path.state,"p"+this._path.index,this._path.personal,this._path.submit].join(".")}},_getSession:function(){return this._session=(new Date).getTime()+Math.round(1e4*Math.random()),{session:this._session}},_getSinceChange:function(){return{since_first_change:this._getSinceTime("first"),since_last_change:this._getSinceTime("last")}},_getSinceTime:function(t){var e="_"+t+"Change";return this._sinceChange[t]=this[e]?(new Date).getTime()-this[e]:0,this._sinceChange[t]},_getRatio:function(){return this._ratio.len=this._params.user_input.length,this._ratio.queryLen=this._params.text.length,{ratio:[this._ratio.len,this._ratio.queryLen,this._ratio.actionsCount].join(".")}},_addTime:function(t){return this._times.push(t),this._params.times=this._times.join("."),this},_addRenderTime:function(t){return this._renderTimes.push(t),this._params.render_times=this._renderTimes.join("."),this},_getData:function(){return{"*data":"url="+this.params.dataUrl}}},{_generateReqID:function(){var t=BEM.blocks["i-global"]&&BEM.blocks["i-global"].param("yandexuid")?BEM.blocks["i-global"].param("yandexuid"):this._random(9)+this._random(9);return t+(+new Date).toString().slice(-7)+this._random(7)},_random:function(t){return Math.random().toString().slice(2,Math.min(t,10)+2)}}),BEM.DOM.decl({block:"search",modName:"cbir",modVal:"yes"},{_onSubmit:function(t){this.trigger("search:submit",t),t.preventDefault()},getErrorTargetDomElem:function(){return this.elem("input")}}),BEM.DOM.decl("cbir-logo",{_onClick:function(){this.trigger("showPanel")}},{live:function(){this.liveBindTo("leftclick tap",function(t){this._onClick(t)})}}),function(t){var e=t.browser,n=e.opera&&e.version<12.1?"keypress":"keydown";BEM.DOM.decl("tooltip",{onSetMod:{js:{inited:function(){this._popup=null,this._owner=null}},shown:{yes:function(){if(!this._owner)throw new Error("Owner is unset");this._getPopup().show(this._owner).unbindFromDoc(n)},"":function(){this._getPopup().hide()}}},getOwner:function(){return this._owner},setOwner:function(t){return this._owner=t,this},setContent:function(t){return this._getPopup().setContent(t),this},redraw:function(){return this.hasMod("shown","yes")&&this._getPopup().repaint(),this},destruct:function(){this.delMod("shown"),this.__base.apply(this,arguments)},_getPopup:function(){return this._popup||(this._popup=this.findBlockOn("popup").on("show",this._onPopupShow,this).on("hide",this._onPopupHide,this)),this._popup},_onPopupShow:function(){this.trigger("show")},_onPopupHide:function(){this.delMod("shown").trigger("hide")},_onClick:function(){this.trigger("click").delMod("shown")}},{live:function(){this.liveBindTo("click",function(){this._onClick()})}})}(jQuery),BEM.DOM.decl("tooltip",{onSetMod:{hovered:{yes:function(){this.bindTo("mouseleave",this._onMouseLeave)},"":function(){this.unbindFrom("mouseleave")}}},_onMouseOver:function(){this.setMod("hovered","yes")},_onMouseLeave:function(){this.delMod("hovered")}},{live:function(){return this.liveBindTo("mouseover",function(){this._onMouseOver()}),this.__base.apply(this,arguments)}}),BEM.DOM.decl("tooltip",{show:function(){return this.setMod("shown","yes")},hide:function(){return this.delMod("shown")}}),BEM.DOM.decl("cbir-intent",{onSetMod:{js:function(){this._intentTexts=this.params.texts,this.bindEvents().checkIntent()},loading:{yes:function(){this.setIntentTitle("loading").startSpin()}}},bindEvents:function(){return this.bindTo("close","leftclick",this._onClearClick),BEM.blocks["b-page"].on("cbir-intent:loaded",this.prepareInputForCBIR,this),this},destruct:function(){BEM.blocks["b-page"].un("cbir-intent:loaded",this.prepareInputForCBIR,this),this.__base.apply(this,arguments)},_onClearClick:function(){this.delMod("visibility").enableInput().trigger("focusInput")},checkIntent:function(){var t=this.elem("thumb").attr("data-src");t&&this.bindLoadThumbEvent().setThumbSrc(t).makeIntentLoading(),(this.isVisible()||t)&&this.disableInput()},bindLoadThumbEvent:function(){return this.elem("thumb").one("load",this.makeIntentNormal.bind(this)),this},setThumbSrc:function(t){return this.elem("thumb").attr("src",t),this},isVisible:function(){return this.hasMod("visibility","visible")},startSpin:function(){return this.getSpin().setMod("progress","yes"),this},getSpin:function(){return this._spin||(this._spin=this.findBlockOn(this.elem("spinner"),"spinner"))},setIntentTitle:function(t){var e=this._intentTexts[t];return e&&this.elem("title").text(e),this},stopSpin:function(){return this.getSpin().delMod("progress"),this},makeIntentLoading:function(){var t=this.elem("thumb"),e=!_.isEmpty(t[0])&&t[0].width>0;return this.setMod("visibility","visible"),e||this.setMod("loading","yes").delMod(this.elem("thumb"),"visibility"),this},makeIntentNormal:function(){var t=this.elem("thumb").attr("src");return t?this.setMod(this.elem("thumb"),"visibility","visible").setIntentTitle("loaded").stopSpin():this.delMod("visibility").stopSpin(),this},prepareInputForIndex:function(){return this.delMod("visibility").delMod(this.elem("thumb"),"visibility").enableInput()},disableInput:function(){return this.trigger("disableInput"),this},enableInput:function(){return this.trigger("enableInput"),this},focusInput:function(){return this.trigger("focusInput"),this},prepareInputForCBIR:function(t,e){return _.isEmpty(e.html)?void 0:(this.elem("thumb").attr("src",e.html),this.setMod("visibility","visible").delMod("loading").makeIntentNormal().disableInput())},prepareInputForSearch:function(){return this.clearThumb(),this.delMod(this.elem("thumb"),"visibility").delMod("loading").delMod("visibility").enableInput()},clearThumb:function(){this.elem("thumb").attr("src","")}}),BEM.DOM.decl({block:"search2",baseBlock:"search"}),function(){var t=function(t){var e=t.charCode||t.keyCode||t.which||0,n=t.ctrlKey||t.altKey||t.metaKey,i=e>=48&&57>=e,s=e>=96&&105>=e,r=[e>=65&&90>=e,e>=1025&&1071>=e,0===e,231===e].some(Boolean);return!n&&(i||s||r)};BEM.DOM.decl({name:"input",modName:"autofocus",modVal:"yes"},{onSetMod:{js:function(){this.__base.apply(this,arguments),this.bindToDoc("keydown",this._autoFocusBind)},autofocus:{yes:function(){this.bindToDoc("keydown",this._autoFocusBind)},"":function(){this.unbindFromDoc("keydown")}}},_autoFocusBind:function(e){if(!this.hasMod("focused","yes")){var n;try{n=document.activeElement.tagName.toLowerCase()}catch(e){}if(t(e)&&"input"!==n&&"textarea"!==n){var i=this.elem("control")[0],s=this.val();if(s.length>0&&" "!==s.slice(-1)&&(s+=" ",this.val(s)),i.createTextRange){var r=i.createTextRange();r.collapse(!1),r.select()}else i.selectionStart&&i.setSelectionRange(s.length,s.length);this.setMod("focused","yes")}}}})}(),BEM.DOM.decl({block:"suggest2",modName:"adaptive",modVal:"yes"},{init:function(){this.__base.apply(this,arguments),this._boundResizeHandler=this._resizeHandler.bind(this),this.__self._bindToWinResize(this._boundResizeHandler)},_resizeHandler:function(){this._popup.width(this.getPopupWidth())},destruct:function(){this.__self._unbindFromWinResize(this._boundResizeHandler),this._boundResizeHandler=null,this.__base.apply(this,arguments)}},{_resizeCallbacks:[],_bindToWinResize:function(t){return this._resizeCallbacks.push(t),this},_unbindFromWinResize:function(t){for(var e=0;e<this._resizeCallbacks.length;e++)if(this._resizeCallbacks[e]===t)return this._resizeCallbacks.splice(e,1),this;return this},_getResizeCallback:function(){return $.throttle(function(){var t=arguments;this._resizeCallbacks.forEach(function(e){e.apply(this,t)},this)},300,this)},live:function(){this.__base.apply(this,arguments),this._resizeCallback=this._getResizeCallback(),BEM.DOM.win.on("resize",this._resizeCallback)}}),BEM.DOM.decl({block:"suggest2",modName:"adaptive",modVal:"yes"},{_minWidth:0,_maxWidth:0,_resizeHandler:function(){this.__base.apply(this),this.hasMod("theme","large")&&this.adjustView()},_onShow:function(){this.__base.apply(this),this.hasMod("theme","large")&&this._applyMetricsToContent()},adjustView:function(){this.__base.apply(this,arguments);var t=this.getMetrics(),e=t.minWidth,n=t.maxWidth,i=!1;return e!==this._minWidth&&(this._minWidth=e,i=!0),n!==this._maxWidth&&(this._maxWidth=n,i=!0),i&&this._popup.isShown()&&this._applyMetricsToContent(),t},_applyMetricsToContent:function(){var t=this.findElem("content");this._minWidth&&t.css("min-width",this._minWidth),this._maxWidth&&t.css("max-width",this._maxWidth)}}),BEM.decl({block:"suggest2-popup",modName:"for",modVal:"popup2"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._popup.on("beforeClose",function(){this.afterCurrentEvent(function(){BEM.blocks["suggest2-detect"].isPressedEscape()&&this.trigger("hide",{})})},this)}}},show:function(t){return this._popup.domElem?(t&&this._popup.setContent(t),this.isShown()?this:(this.trigger("preshow"),this._popup.setAnchor(this.params.owner),this._popup.setMod("visible","yes"),this.trigger("show"),this)):this},hide:function(t){return this.isShown()&&(this._popup.delMod("visible"),this.trigger("hide",t||{})),this},isShown:function(){return this._popup?this._popup.hasMod("visible","yes"):!1}}),function(t){var e=1e3;BEM.DOM.decl("popup2",{onSetMod:{js:{inited:function(){this._parentPopup=t,this._zIndex=null,this._zIndexGroupLevel=null,this._isAttachedToScope=!1}},visible:{yes:function(){this.trigger("beforeOpen"),this._isAttachedToScope||(BEM.DOM.scope.append(this.domElem),this._isAttachedToScope=!0),this._captureZIndex()._bindToParentPopup()._bindToPointerPress().bindTo("leftclick tap",this._setPreventHideByClick)},"":function(){this.trigger("beforeClose")._releaseZIndex()._unbindFromParentPopup()._unbindFromPointerPress().unbindFrom("leftclick tap")}}},destruct:function(){this.delMod("visible"),this.__base.apply(this,arguments)},setContent:function(t){return BEM.DOM.update(this.domElem,t),this},_calcZIndexGroupLevel:function(){var t=this.params.zIndexGroupLevel,e=this._getParentPopup();return e&&(t+=e._zIndexGroupLevel),t},_setPreventHideByClick:function(){var t=this;do t._preventHideByClick=!0,t=t._getParentPopup();while(t)},_bindToParentPopup:function(){var t=this._getParentPopup();return t&&t.on("beforeClose",this._onParentPopupClose,this),this},_unbindFromParentPopup:function(){return this._parentPopup&&this._parentPopup.un("beforeClose",this._onParentPopupClose,this),this._parentPopup=t,this},_onParentPopupClose:function(){this.delMod("visible")},_getParentPopup:function(){return this._parentPopup},_captureZIndex:function(){null===this._zIndexGroupLevel&&(this._zIndexGroupLevel=this._calcZIndexGroupLevel());var t=this.__self._visiblePopupsZIndexes,n=this._zIndexGroupLevel,i=t[n],s=this._zIndex;return i||(i=t[n]=[(n+1)*e]),this._zIndex=i[i.length-1]+1,i.push(this._zIndex),this._zIndex!==s&&this.domElem.css("z-index",this._zIndex),this},_releaseZIndex:function(){var t=this.__self._visiblePopupsZIndexes[this._zIndexGroupLevel];return t.splice(t.indexOf(this._zIndex),1),this},_recaptureZIndex:function(){return this._releaseZIndex(),this._zIndexGroupLevel=null,this._captureZIndex()},getDefaultParams:function(){return{zIndexGroupLevel:0}}},{live:!0,_visiblePopupsZIndexes:{}})}(),BEM.DOM.decl("popup2",{_bindToPointerPress:function(){return this.bindTo("mousedown",this._setPreventHideByClick)},_unbindFromPointerPress:function(){return this.unbindFrom("mousedown")}}),BEM.decl("keycodes",{},{BACKSPACE:8,TAB:9,ENTER:13,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,INSERT:41,DELETE:42}),BEM.DOM.decl({block:"popup2",modName:"autoclosable",modVal:"yes"},{onSetMod:{visible:{yes:function(){this.__self._visiblePopupsStack.unshift(this),this.afterCurrentEvent(function(){this.domElem&&this.bindToDoc("leftclick tap",this._onDocClick)}),this.__base.apply(this,arguments)},"":function(){var t=this.__self._visiblePopupsStack;t.splice(t.indexOf(this),1),this.unbindFromDoc("leftclick tap").__base.apply(this,arguments)}}},_onDocClick:function(t){this.hasMod("target","anchor")&&(this._anchor[0]===t.target||this._anchor.find(t.target).length>0)||(this._preventHideByClick?this._preventHideByClick=null:this.delMod("visible"))}},{live:function(){BEM.DOM.doc.on("keydown",this._onDocKeyPress.bind(this))},_visiblePopupsStack:[],_onDocKeyPress:function(t){t.keyCode===BEM.blocks.keycodes.ESC&&this._visiblePopupsStack.length&&this._visiblePopupsStack[0].delMod("visible")}}),BEM.DOM.decl({block:"popup2",modName:"theme",modVal:"normal"},{getDefaultParams:function(){return $.extend(this.__base(),{mainOffset:5,viewportOffset:5})}}),function(t,e){var n=.99,i=["bottom-left","bottom-center","bottom-right","top-left","top-center","top-right","right-top","right-center","right-bottom","left-top","left-center","left-bottom"],s=BEM.DOM.win;BEM.DOM.decl({block:"popup2",modName:"target"},{onSetMod:{js:{inited:function(){this.params.directions.forEach(function(t){if(-1===i.indexOf(t))throw new Error("Can't init popup with \""+t+'" direction. Available directions: '+i.join(", "))}),this.__base.apply(this,arguments),this._lastDrawingCss={left:e,top:e,zIndex:e,display:e}}},visible:{yes:function(){this.__base.apply(this,arguments),this.bindToWin("scroll resize",this._onWinScollAndResize).setMod("outside","yes").redraw().delMod("outside")},"":function(){this.__base.apply(this,arguments),this.unbindFromWin("scroll resize")}}},setContent:function(){return this.__base.apply(this,arguments).redraw()},redraw:function(){if(!this.hasMod("visible","yes")&&!this.hasMod("outside","yes"))return this;var e=this._calcBestDrawingParams();this.setMod("direction",e.direction);var n=this._lastDrawingCss,i=!1;return t.each(this._calcDrawingCss(e),function(t,e){n[t]!==e&&(n[t]=e,i=!0)}),i&&this.domElem.css(n),this},_calcDrawingCss:function(t){return{left:t.left,top:t.top}},calcPossibleDrawingParams:function(){var t=this._calcTargetDimensions(),e=this._calcViewportDimensions(),n=this.params,i=n.mainOffset,s=n.secondaryOffset,r=n.viewportOffset;return this.params.directions.map(function(n){var o={direction:n,width:0,height:0,left:0,top:0};return this._checkMainDirection(n,"bottom")?(o.top=t.top+t.height+i,o.height=e.bottom-o.top-r):this._checkMainDirection(n,"top")?(o.height=t.top-e.top-i-r,o.top=t.top-o.height-i):(this._checkSecondaryDirection(n,"center")?(o.height=e.bottom-e.top-2*r,o.top=t.top+(t.height-o.height)/2):this._checkSecondaryDirection(n,"bottom")?(o.height=t.top+t.height-e.top-s-r,o.top=t.top+t.height-o.height-s):this._checkSecondaryDirection(n,"top")&&(o.top=t.top+s,o.height=e.bottom-o.top-r),this._checkMainDirection(n,"left")?(o.width=t.left-e.left-i-r,o.left=t.left-o.width-i):(o.left=t.left+t.width+i,o.width=e.right-o.left-r)),this._checkSecondaryDirection(n,"right")?(o.width=t.left+t.width-e.left-s-r,o.left=t.left+t.width-o.width-s):this._checkSecondaryDirection(n,"left")?(o.left=t.left+s,o.width=e.right-o.left-r):this._checkSecondaryDirection(n,"center")&&this._checkMainDirection(n,"top","bottom")&&(o.width=e.right-e.left-2*r,o.left=t.left+t.width/2-o.width/2),o},this)},_calcBestDrawingParams:function(){for(var t,e,i,s,r,o,a=this._calcPopupDimensions(),c=this._calcTargetDimensions(),u=this._calcViewportDimensions(),l=this.params.directions,h=l.length,d=0;h>d&&(t=l[d],e=this._calcPos(t,c,a),i=this._calcViewportFactor(e,u,a),(0===d||i>o||!o&&this.hasMod("direction",t))&&(s=t,o=i,r=e),!(o>n));d++);return{direction:s,left:r.left,top:r.top}},_calcPopupDimensions:function(){var t=this.domElem.outerWidth(),e=this.domElem.outerHeight();return{width:t,height:e,area:t*e}},_calcTargetDimensions:function(){},_calcViewportDimensions:function(){var t=s.scrollTop(),e=s.scrollLeft(),n=s.width(),i=s.height();return{top:t,left:e,bottom:t+i,right:e+n}},_calcPos:function(t,e,n){var i={},s=this.params.mainOffset,r=this.params.secondaryOffset;return this._checkMainDirection(t,"bottom")?i.top=e.top+e.height+s:this._checkMainDirection(t,"top")?i.top=e.top-n.height-s:this._checkMainDirection(t,"left")?i.left=e.left-n.width-s:this._checkMainDirection(t,"right")&&(i.left=e.left+e.width+s),this._checkSecondaryDirection(t,"right")?i.left=e.left+e.width-n.width-r:this._checkSecondaryDirection(t,"left")?i.left=e.left+r:this._checkSecondaryDirection(t,"bottom")?i.top=e.top+e.height-n.height-r:this._checkSecondaryDirection(t,"top")?i.top=e.top+r:this._checkSecondaryDirection(t,"center")&&(this._checkMainDirection(t,"top","bottom")?i.left=e.left+e.width/2-n.width/2:this._checkMainDirection(t,"left","right")&&(i.top=e.top+e.height/2-n.height/2)),i},_calcViewportFactor:function(t,e,n){var i=this.params.viewportOffset,s=Math.max(t.left,e.left+i),r=Math.min(t.left+n.width,e.right-i),o=Math.max(t.top,e.top+i),a=Math.min(t.top+n.height,e.bottom-i);return r>s&&a>o?(r-s)*(a-o)/n.area:0},_checkMainDirection:function(t,e,n){return 0===t.indexOf(e)||n&&0===t.indexOf(n)},_checkSecondaryDirection:function(t,e){return t.indexOf("-"+e)>0},_checkDirection:function(t,e){return t.indexOf(e)>=0},_onWinScollAndResize:function(){this.redraw()},getDefaultParams:function(){return t.extend(this.__base.apply(this,arguments),{mainOffset:0,secondaryOffset:0,viewportOffset:0,directions:i})}})}(jQuery),function(t){function e(t,e){return t.addClass("i-bem "+e).bem(e)}var n=100;BEM.DOM.decl({block:"popup2",modName:"target",modVal:"anchor"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._anchor=null,this._anchorParents=null,this._destructor=null,this._isAnchorVisible=void 0,this._updateIsAnchorVisible=t.throttle(this._updateIsAnchorVisible,n,this)}},visible:{yes:function(){if(!this._anchor)throw new Error("Can't show popup without anchor");this._anchorParents=this._anchor.parents(),this._bindToAnchorParents(),this.__base.apply(this,arguments)},"":function(){this.__base.apply(this,arguments),this._unbindFromAnchorParents(),this._anchorParents=null,this._isAnchorVisible=void 0}}},destruct:function(){this._unbindFromDestructor(),this.__base.apply(this,arguments)},setAnchor:function(t){return this._unbindFromAnchorParents()._unbindFromParentPopup()._unbindFromDestructor(),this._anchor=t instanceof BEM.DOM?t.domElem:t,this._destructor=e(this._anchor,"_"+this.__self.getName()+"-destructor"),this._isAnchorVisible=void 0,this._bindToDestructor(),this.hasMod("visible","yes")?(this._anchorParents=this._anchor.parents(),this._recaptureZIndex()._bindToAnchorParents()._bindToParentPopup().redraw()):(this._anchorParents=null,this._zIndexGroupLevel=null),this},_calcTargetDimensions:function(){var t=this._anchor,e=t.offset();return{left:e.left,top:e.top,width:t.outerWidth(),height:t.outerHeight()}},_calcDrawingCss:function(e){return"undefined"==typeof this._isAnchorVisible&&(this._isAnchorVisible=this._calcIsAnchorVisible()),t.extend(this.__base(e),{display:this._isAnchorVisible?"":"none"})},_calcIsAnchorVisible:function(){var e=this._anchor,n=e.offset(),i=n.left,s=n.top,r=i+e.outerWidth(),o=s+e.outerHeight(),a=this.getMod("direction"),c=Math.floor(this._checkDirection(a,"top")?s:o),u=Math.floor(this._checkDirection(a,"left")?i:r),l=!0;return this._anchorParents.each(function(){if("BODY"===this.tagName)return!1;var e=t(this),n=/scroll|hidden|auto/,i=n.test(e.css("overflow-y")),s=n.test(e.css("overflow-x"));if(i||s){var r=e.offset();if(i){var o=Math.floor(r.top);if(o>c||o+e.outerHeight()<c)return l=!1}if(s){var a=Math.floor(r.left);return l=u>=a&&a+e.outerWidth()>=u}}}),l},_calcZIndexGroupLevel:function(){var t=this.__base.apply(this,arguments);return this._destructor.findBlocksOutside("z-index-group").reduce(function(t,e){return t+Number(e.getMod("level"))},t)},_bindToAnchorParents:function(){return this.bindTo(this._anchorParents,"scroll",this._onAnchorParentsScroll)},_unbindFromAnchorParents:function(){return this._anchorParents&&this.unbindFrom(this._anchorParents,"scroll"),this},_onAnchorParentsScroll:function(){this.redraw()._updateIsAnchorVisible()},_onWinScollAndResize:function(){this.__base.apply(this,arguments),this._updateIsAnchorVisible()},_updateIsAnchorVisible:function(){if(this.domElem&&this.hasMod("visible")){var t=this._calcIsAnchorVisible();t!==this._isAnchorVisible&&(this._isAnchorVisible=t,this.redraw())}},_bindToDestructor:function(){return this._destructor.on("destruct",this._onPopupAnchorDestruct,this),this},_unbindFromDestructor:function(){return this._destructor&&this._destructor.un("destruct",this._onPopupAnchorDestruct,this),this},_onPopupAnchorDestruct:function(){this.domElem&&BEM.DOM.destruct(this.domElem)},_getParentPopup:function(){return void 0===this._parentPopup&&(this._parentPopup=this.findBlockOutside(this._anchor,this.__self.getName())),this._parentPopup}});var i=BEM.DOM;i.decl("_popup2-destructor",{destruct:function(){this.trigger("destruct"),this.__base.apply(this,arguments)}})}(jQuery),BEM.DOM.decl({block:"search2",modName:"cbir",modVal:"yes"},{_onSubmit:function(t){this.trigger("search:submit",t),t.preventDefault()},getErrorTargetDomElem:function(){return this.elem("input")}}),BEM.DOM.decl({block:"header",modName:"tableau",modVal:"yes"},{LOGOTABLO_INIT_DELAY:6e3,bindEvents:function(){this.__base.apply(this,arguments),this.bindTo("logo","mouseenter",this._onLogoMouseEnter),setTimeout(this._initTableau.bind(this),this.LOGOTABLO_INIT_DELAY)},_onLogoMouseEnter:function(){this._initTableau()},_initTableau:function(){if(this.unbindFrom("logo","mouseenter",this._onLogoMouseEnter),!this._tableau){var t=this.params.tableau;this._tableau=$.Tableau({serviceId:t.serviceId,headerElem:$(".header"),triggerElem:$(".logo"),device:"desktop",width:370,lang:t.lang,preset:t.preset}),$(this._tableau.getNode()).on("open",this._updateTableauSearchText.bind(this))}},_updateTableauSearchText:function(){this._tableau.setSearchText(_.unescape(BEM.blocks["i-global"].param("searchInputText")))}}),function(t,e){function n(s){if(!s.serviceId)throw new Error("Parameter 'serviceId' is required");if(this.constructor!==n)return new n(s);if(b&&this._addStyle(b),!s.device){if(1!==y.length)throw new Error("Parameter 'device' is required");s.device=y[0]}this._useDeviceSpecificMethods(s.device),this._params=s,this._isOpened=!1,this._isInited=!1,this._handlers=[],this._bindHandler(e(t),"message",i),this._$iframe=this._buildIframe(this._buildUrl(this._params)),this._$tail=this._buildTail(),this._$tableau=this._buildAndAppendTableau(this._params,this._$iframe,this._$tail),s.headerElem&&this._bindWiringHandlers()}function i(t){var e=t.originalEvent.data;if("string"==typeof e&&0===e.indexOf(d)){var n=e.split(":");switch(n[0]){case p:this._isInited=!0,this._isOpened&&this._open(),this._$tableau.trigger("init");break;case m:this._params.height||this._$tableau.height(parseInt(n[1],10)+2*_);break;case f:this.close()}}}var s="https://yastatic.net",r="/tableau/tableau.html",o="tableau",a=o+"_opened",c=o+"_closed",u=o+"_device_",l=o+"__content",h=o+"__tail",d="tableau.",p=d+"ready",f=d+"close",m=d+"height",_=1,g=150,b="",v=!1,y=[],k={};n.prototype.setSearchText=function(t){return this._postMessage({fnName:"updateUrls",fnArgs:[{text:t,serviceId:this._params.serviceId}]}),this},n.prototype._postMessage=function(t){function e(){n.postMessage(i,"*")}var n=this._$iframe[0].contentWindow,i=JSON.stringify(t);this._isInited?e():this._$tableau.on("init",e)},n.prototype.setPos=function(t){return"number"==typeof t.top&&(this._top=t.top),"number"==typeof t.left&&(this._left=t.left),"number"==typeof t.tail&&(this._tail=t.tail),this._isOpened&&this._reposition(),this},n.prototype._reposition=function(){"number"==typeof this._top&&this._$tableau.css("top",this._top-_),"number"==typeof this._left&&this._$tableau.css("left",this._left-_),"number"==typeof this._tail&&this._$tail.css("left",this._tail)},n.prototype.open=function(){var t=this._isOpened;return this._isOpened=!0,!t&&this._isInited&&this._open(),this},n.prototype._open=function(){this._reposition(),this._$tableau.removeClass(c).addClass(a),this._postMessage({fnName:"open"}),this._$tableau.trigger("open")},n.prototype.close=function(){var t=this._isOpened;return this._isOpened=!1,t&&this._isInited&&this._close(),this},n.prototype._close=function(){this._$tableau.removeClass(a);var t=this;setTimeout(function(){t._isOpened||t._$tableau.addClass(c)},g),this._$tableau.trigger("close")},n.prototype.isOpened=function(){return this._isOpened},n.prototype.isInited=function(){return this._isInited},n.prototype.getNode=function(){return this._$tableau[0]},n.prototype.destruct=function(){var t=this;e.when(this._$tableau.trigger("destruct")).done(function(){e.each(t._handlers,function(t,e){e.$node.off(e.event,e.callback)}),t._handlers=[],t._$tableau.remove()})},n.prototype._bindHandler=function(t,n,i){var s=e.proxy(i,this);return t.on(n,s),this._handlers.push({$node:t,event:n,callback:s}),this},n.prototype._buildUrl=function(t){var n={};return e.each(["preset","lang","domain","device","target","serviceId"],function(e,i){var s=t[i];if(s){var r=i.replace(/[A-Z]/g,function(t){return"-"+t.toLowerCase()});n[r]=s}}),s+(t.path||r+"?"+e.param(n))},n.prototype._buildIframe=function(t){return e("<iframe/>",{"class":l,src:t,frameborder:0,allowtransparency:!0})},n.prototype._buildTail=function(){return e("<div/>",{"class":h})},n.prototype._buildAndAppendTableau=function(t,n,i){return e("<div/>",{"class":[o,u+t.device,c].join(" "),css:{width:t.width+2*_,height:t.height&&t.height+2*_,zIndex:t.zIndex}}).append(i).append(n).appendTo("body")},n.prototype._addStyle=function(t){if(!v){var e=document.createElement("style");e.type="text/css",document.getElementsByTagName("head")[0].appendChild(e),e.styleSheet?e.styleSheet.cssText=t:"textContent"in e?e.textContent=t:e.innerHTML=t,v=!0}},n._onDevice=function(t,n){function i(t,i){var s=k[i]||(k[i]={});e.each(n,function(t,e){var n=s[t]||(s[t]=[]);n.push(e)})}"string"==typeof t?(i(0,t),y.push(t)):e.each(t,i)},n.prototype._useDeviceSpecificMethods=function(t){var n=this,i=function(){};e.each(k[t],function(t,s){var r=n[t]?e.proxy(n[t],n):i;e.each(s,function(t,i){r=e.proxy(i,n,r)}),n[t]=r})},e.Tableau=n}(window,jQuery),function(t,e){var n=-2;e._onDevice(["desktop","touch-pad"],{_reposition:function(t){var e=this._params,i=e.headerElem;if(i){var s=e.triggerElem,r=this._$tableau,o=i.offset().top+i.outerHeight()+n,a=s.offset().left-r.offset().left+(s.outerWidth()-this._$tail.outerWidth())/2;this._top=Math.round(o),this._tail=Math.round(a)}t()}})}(jQuery,jQuery.Tableau),function(t,e){function n(){var t=this;this._clearToggleTimer(),this.isOpened()||this._mousePressed||(this._toggleTimer=setTimeout(function(){t.open(),t._toggleTimer=null},a))}function i(t){var e=this;this._clearToggleTimer()||s(t,this._params.triggerElem)||(this._toggleTimer=setTimeout(function(){e.close(),e._toggleTimer=null},a))}function s(t,e){var n=e.offset();return t.clientX>0&&t.clientY>0&&t.pageX<e.outerWidth()+n.left&&t.pageY<e.outerHeight()+n.top}function r(){this.isOpened()||this._clearToggleTimer(),this._mousePressed=!0}function o(){this._mousePressed=!1}var a=300;e._onDevice("desktop",{_bindWiringHandlers:function(e){e(),this._toggleTimer=null,this._mousePressed=!1;var s=this._params.triggerElem,a=t(document.body);this._bindHandler(s,"mousemove",n)._bindHandler(s,"mouseleave",i)._bindHandler(a,"mousedown",r)._bindHandler(a,"mouseup dragend",o)._bindHandler(this._$tableau,"mouseenter mousemove",n)._bindHandler(this._$tableau,"mouseleave",i)}}),e.prototype._clearToggleTimer=function(){return this._toggleTimer?(clearTimeout(this._toggleTimer),this._toggleTimer=null,!0):!1}}(jQuery,jQuery.Tableau),BEM.DOM.decl({block:"header",modName:"tablet",modVal:"yes"},{onSetMod:{js:function(){this.searchInput=this.findBlockInside("input"),this.searchButton=this.findBlockInside("search__button"),this.__base.apply(this,arguments)}},bindEvents:function(){return this.__base.apply(this,arguments),this.bindTo(this.elem("nav-trigger"),"click",this.navExpand),this.searchButton.bindTo("click",this.changeThis(this.navShrink)),this.searchInput.on("focus",this.navShrink,this),this},destruct:function(){this.__base.apply(this,arguments),this.searchInput.un("focus",this.navShrink,this)},navExpand:function(){this.setMod("nav-state","expanded").trigger("input:resize")},navShrink:function(){this.delMod("nav-state").trigger("input:resize")}}),BEM.DOM.decl("cbir-panel",{onSetMod:{js:function(){this.detectDragDrop()&&this.setMod("dragdrop","yes"),this.findBlocks().bindEvents()}},detectDragDrop:function(){var t=$("<div />")[0];return("draggable"in t||"ondragstart"in t&&"ondrop"in t)&&!window.opera&&(!$.browser.msie||$.browser.msie&&_.parseInt($.browser.version)>=10)},findBlocks:function(){return this.file=this.elem("file-input"),this.input=this.findBlockInside({block:"input",modName:"type",modVal:"cbir"}),this},bindEvents:function(){return this.bindTo("find-button","leftclick",this._onFindButtonClick).bindTo(this.file,"change",this._onFileChange).bindTo("input","leftclick",this._onInputBoxClick).bindTo("input","submit",this._onFormSubmit).bindTo("close","leftclick",this._onCloseClick).bindTo("input","keydown",this._onInputChange),BEM.blocks["i-keyrouter"].on("esc",this.hidePanel,this),this.bindToDoc("leftclick",this._onOutsideClick),BEM.blocks["b-page"].on("contentLoaded",this.hidePanel,this),this},destruct:function(){this.__base.apply(this,arguments),BEM.blocks["i-keyrouter"].un("esc",this.hidePanel,this),this.unbindFromDoc("leftclick",this._onOutsideClick),BEM.blocks["b-page"].un("contentLoaded",this.hidePanel,this)},getController:function(){return BEM.blocks["i-cbir-controller"].get()},_onFindButtonClick:function(){this.getController().submit()},_onCloseClick:function(){this.hidePanel()},_onInputBoxClick:function(){this.input.setFocus()},_onFormSubmit:function(t){t.preventDefault(),this.getController().submit()},_onOutsideClick:function(t){this.hasMod("visibility","visible")&&(this.containsDomElem($(t.target))||this.hidePanel())},_onInputChange:function(t){switch(t.keyCode){case 13:this.getController().submit();break;case 27:this.hidePanel()}},_onFileChange:function(t){this.trigger("filechange",t)},showPanel:function(t){var e=this;return this.getController().runCBIRRequest().showParanja(),this.domElem.fadeIn(250,function(){e.setMod("visibility","visible")}),t&&this.input.setFocus(),this},hidePanel:function(){var t=this;return this.getController().cancelCBIRRequest().hideParanja(),this.input.val(""),this.delMod("opened"),this.domElem.fadeOut(250,function(){t.setMod("visibility","hidden")
}),this._isPopupShowedByCode=!1,this.getController().hideError(),this},clearFileInput:function(){return $.browser.msie?setTimeout(function(){this.file.replaceWith(this.file=this.file.clone(!0))}.bind(this),100):this.file.val(""),this},val:function(){return this.input.val()},setThreateningLook:function(){this.setMod(this.elem("input"),"error","yes")},unsetThreateningLook:function(){this.delMod(this.elem("input"),"error")},getErrorTargetDomElem:function(t){return this.elem("url"===t?"input":"dragzone")},isDragSupported:function(){return this.hasMod("dragdrop","yes")}},{live:!0}),BEM.DOM.decl({block:"cbir-panel",modName:"dragdrop",modVal:"yes"},{bindEvents:function(){return this.__base.apply(this,arguments),this.bindToDoc("dragover dragend",this.processDragEvent),this.bindToDomElem(this.elem("dragzone"),{"dragenter dragover dragleave":this._onDrag,drop:this._onDrop}),this._onImageDragStart=this._onImageDragStart.bind(this),this.bindedDragendHack=this.dragendHack.bind(this),$("body").on("dragstart",this._onImageDragStart),this},destruct:function(){this.__base.apply(this,arguments),this.unbindFromDoc("dragover dragend",this.processDragEvent),this.unbindFromDoc({dragover:this._onDragOver,dragend:this._onDragEnd}),$("body").off("dragstart",this._onImageDragStart)},processDragEvent:function(t){switch(t.type){case"dragover":return this.showPanelOnDrag(t);case"dragend":return this.hidePanelAfterDrag(t);case"dragstart":return this.processImageDragStartEvent(t)}},processImageDragStartEvent:function(t){var e,n=t.originalEvent.dataTransfer,i=$(t.target);return i.is("img")||(i=i.find("img:eq(0)")),i.length?(this.hasMod("visibility","visible")&&this.setMod("opened","yes"),void(n&&(e=i.attr("src"),e.indexOf("//")||(e=location.protocol+e),n.setData("text",e)))):!1},_onImageDragStart:function(t){return this.processImageDragStartEvent(t)},_onDrag:function(t){return this.toggleStroke("dragleave"!==t.type),!1},_onDrop:function(t){this._isPopupShowedByCode=!1,this.toggleStroke(!1).uninstallDragendHack(),this.getController().hideError();var e,n,i=t.originalEvent.dataTransfer,s=i.files[0];try{e=i.getData("text"),n=this.extractImageFromHtml(i.getData("text/html"))}catch(r){}return s?this.getController().tryUploadFile(s):n?this.getController().tryUploadURL(n):e&&this.getController().tryUploadURL(e),!1},showPanelOnDrag:function(){this.getController().toggleLayoutPointerEvents(!0),this.hasMod("visibility","visible")||(this._isPopupShowedByCode=!0,this.showPanel().uninstallDragendHack().installDragendHack())},hidePanelAfterDrag:function(t){this.hideUploaderAfterDrag(t)},installDragendHack:function(){return $("body").one("mousemove",this.bindedDragendHack),this},uninstallDragendHack:function(){return $("body").unbind("mousemove",this.bindedDragendHack),this},dragendHack:function(){return setTimeout(function(){this._isPopupShowedByCode&&this.hideUploaderAfterDrag()}.bind(this),42),!1},hideUploaderAfterDrag:function(t){return this.getController().toggleLayoutPointerEvents(!0),this.hasMod("opened","yes")&&"none"===t.originalEvent.dataTransfer.dropEffect?!1:(this.uninstallDragendHack().hidePanel(),this)},toggleStroke:function(t){return this.setMod(this.elem("wrap"),"hover",t?"yes":""),this},extractImageFromHtml:function(t){var e=t.match(/<img.*?src=['"](.+?)['"]/i);return e&&e[1]}}),BEM.DOM.decl("i-cbir-controller",{onSetMod:{js:function(){this.findBlocks().bindEvents()}},findBlocks:function(){return this.cbirPanel=this.findBlockInside("cbir-panel"),this.cbirError=this.findBlockInside("cbir-error"),this.cbirIntent=this.findBlockInside("cbir-intent"),this.search=BEM.blocks.header.getSearch(),this.layout=this.findBlockInside("page-layout"),this.paranja=this.findBlockInside("paranja"),this._location=BEM.blocks.location.getInstance(),this},bindEvents:function(){return BEM.blocks["b-page"].on("change",this._onPageChange,this),BEM.blocks["cbir-logo"].on("showPanel",this._onLogoClick,this),BEM.blocks["cbir-error"].on("showParanja",this.showParanja,this).on("hideParanja",this.hideParanja,this),this},unbindEvents:function(){return BEM.blocks["b-page"].un("change",this._onPageChange,this),BEM.blocks["cbir-logo"].un("showPanel",this._onLogoClick,this),BEM.blocks["cbir-error"].un("showParanja",this.showParanja,this).un("hideParanja",this.hideParanja,this),this},destruct:function(){this.unbindEvents(),this.__base.apply(this,arguments)},_onPageChange:function(){var t=this._location.getState().block,e=["b-page_type_search-by-image","b-page_type_copy","b-page_type_similar"];"b-page_type_search-by-image"===t||this.setCachedUrl(""),_.contains(e,t)||this.clearIntent(),this.toggleLayoutPointerEvents(!0)},_onLogoClick:function(){this.showPanel(!BEM.blocks["i-global"].param("mobile"))},showError:function(t){return this.getRequestStatus()?this.cbirError.showError(t,this.cbirPanel):this.cbirError.showError(t,this.search),this},hideError:function(){return this.cbirError.hideError(),this},showPanel:function(t){return this.cbirPanel.showPanel(t),this},hidePanel:function(){return this.cbirPanel.hidePanel(),this},getRequestStatus:function(){return this.__self.getRequestStatus()},setRequestStatus:function(t){return this.__self.setRequestStatus(!!t),this},cancelCBIRRequest:function(){return this.setRequestStatus(!1),this},runCBIRRequest:function(){return this.setRequestStatus(!0),this},clearIntent:function(){return this.cbirIntent.clearThumb(),this},showLoader:function(){return this.cbirIntent.makeIntentLoading(),this},hideLoader:function(){return this.cbirIntent.makeIntentNormal(),this},showParanja:function(){return this.layout.toggleCBIRMode(!0),this.paranja.setTheme("dark").open(),this},hideParanja:function(){return this.layout.toggleCBIRMode(!1),this.paranja.delTheme().close(),this},toggleLayoutPointerEvents:function(t){return this.layout.togglePointerEvents(t),this}},{live:!0,_instance:null,getRequestStatus:function(){return this.isRequestRunning},setRequestStatus:function(t){this.isRequestRunning=!!t},get:function(){return this._instance||(this._instance=$(this.buildSelector()).bem(this.getName()))}}),BEM.decl("i-cbir-controller",{validateFile:function(t){return this.isValidFile(t)?this.isValidFileSize(t)?!0:(this.showError("size"),!1):(this.showError("format"),!1)},isValidFile:function(t){return t&&/image.*/.test(t.type)},isValidFileSize:function(t){return t.size<=8388608},validateURL:function(t){return t.indexOf("http")&&(t="http://"+t),BEM.blocks.uri.isAcceptable(t)}}),function(){var t;BEM.decl("i-cbir-controller",{setCachedUrl:function(e){t=e},checkCachedUrl:function(e){return t===e}})}(),BEM.decl("i-cbir-controller",{linkBlockName:"b-page_type_search-by-image__link",queryArgs:{rpt:"imageview"},_makeUrl:function(t){return BEM.blocks.uri.buildRelativeUrl(BEM.blocks["i-global"].param("router").search,BEM.blocks["i-url-controller"].mergePassedUrlParams(BEM.blocks["serp-controller"].getUrlRequestParams(),this.queryArgs,t))},uploadFileNormal:function(t){var e=new FormData;return this.setRequestStatus(!0),e.append("upfile",t),e.append("format","json"),e.append("request",JSON.stringify([{block:this.linkBlockName}])),_.forOwn(this.queryArgs,function(t,n){e.append(n,t)}),this.fade(),this.showLoader(),$.ajax({type:"post",url:this._makeUrl(),data:e,dataType:"json",context:this,cache:!1,contentType:!1,processData:!1,success:function(t){var e=_.filter(t.blocks,function(t){return t.name.block===this.linkBlockName}.bind(this))[0].params.url;e?(BEM.blocks["b-statcounter"].hit({params:{query:{cbir:"file"}}}),this.loadCBIRPage(e)):this.showUploadError()},error:function(){this.showUploadError()}}),this},uploadFileFrame:function(t){var e=_.extend({from:"cbirFrame",request:JSON.stringify([{block:this.linkBlockName}])},this.queryArgs);return this.fade(),this.showLoader(),BEM.create("i-request_type_ajax",{url:this._makeUrl(),type:"iframe",dataType:"html",file:t.target,cache:!1,paramsToSettings:["file","cache"],data:e,callbackCtx:this}).get({},function(){this._frameSuccess(arguments[2])},function(){this._frameError()}),this},_frameSuccess:function(t){var e;try{e=$(t.statusText).text()}catch(n){}e?(BEM.blocks["b-statcounter"].hit({params:{query:{cbir:"file"}}}),this.loadCBIRPage(e)):this.showUploadError()},_frameError:function(){this.showUploadError()},uploadURL:function(t){var e=this;-1===t.indexOf("://")&&(t=location.protocol+"//"+t),this.fade().checkImageAccessibility(t).done(function(t){e.setRequestStatus(!0).showLoader().setCachedUrl(t),BEM.blocks["b-statcounter"].hit({params:{query:{cbir:"url"}}}),BEM.blocks.location.getInstance().change({block:"b-page_type_search-by-image",url:BEM.blocks.uri.setParams(_.assign({img_url:t},e.queryArgs))})}).fail(function(){e.showError("url").unfade()})},checkImageAccessibility:function(t){var e,n=$.Deferred(),i=!1,s=new Image;return s.onload=function(){i||(clearTimeout(e),i=!0,n.resolve(t))},s.onerror=function(){i=!0,clearTimeout(e),n.reject()},e=setTimeout(s.onerror,3e5),s.src=t,s.complete&&s.onload(),n.promise()},tryUploadURL:function(t){if(t)if(this.validateURL(t)){if(this.checkCachedUrl(t))return;this.uploadURL(t)}else this.showError("url")},tryUploadFile:function(t){this.validateFile(t)?this.uploadFileNormal(t):this.clearFileInput()}}),BEM.decl("i-cbir-controller",{bindEvents:function(){return this.__base.apply(this,arguments),this.search.on("search:submit",this._onSearchSubmit,this),this},unbindEvents:function(){return this.__base.apply(this,arguments),this.search.un("search:submit",this._onSearchSubmit,this),this},_onSearchSubmit:function(t,e){this.processSubmitEvent(e)},processSubmitEvent:function(t){this.submit()!==!1&&(this.search.submit(t),this.search.countSubmit())},submit:function(){if(this.isCBIRRequest()||this.isExcessSearch()){var t=this.getURL();return""===t||this.tryUploadURL(t),!1}return!0},isCBIRRequest:function(){return this.getRequestStatus()},getURL:function(){return this.getRequestStatus()?this.cbirPanel.val():this.search.val()},isExcessSearch:function(){return""===this.getURL()&&"b-page_type_search-by-image"===this._location.getState().block}}),BEM.decl("i-cbir-controller",{fade:function(){return this.trigger("fade"),this},unfade:function(){return this.trigger("unfade"),this}}),BEM.DOM.decl("i-cbir-controller",{bindEvents:function(){return this.cbirPanel.on("filechange",this._onFileChange,this),this.__base.apply(this,arguments)},unbindEvents:function(){return this.cbirPanel.un("filechange",this._onFileChange,this),this.__base.apply(this,arguments)},_onFileChange:function(t,e){var n=this.getFile(e);-1!==n&&(n?this.tryUploadFile(n):this.uploadFileFrame(e))},getFile:function(t){var e,n,i;if(t){if(t.target&&(n=t.target.files),t.dataTransfer&&(i=t.dataTransfer.files),n)return n.length?n[0]:-1;if(i)return i[0]}else if(e=this.cbirPanel.fileInput,e&&(n=e.get(0).files),n)return n[0]},clearFileInput:function(){return this.cbirPanel.clearFileInput(),this}}),BEM.DOM.decl("i-cbir-controller",{loadCBIRPage:function(t){var e=BEM.blocks["i-global"].param("router").search,n=e+"?"+t,i=BEM.blocks.uri.getParamValue(n,"cbir_id"),s=BEM.blocks.uri.getParamValue("cbir_id");this.clearFileInput().hideLoader(),i!==s?(this.setCachedUrl(""),n=BEM.blocks.uri.delParams(n,"from"),n=BEM.blocks.uri.setParam(n,"rpt","imageview"),this._location.change({block:"b-page_type_search-by-image",url:n})):this.unfade().hidePanel()},showUploadError:function(){this.hideLoader().showError("upload").unfade()}}),BEM.DOM.decl("cbir-error",{onSetMod:{js:function(){this.setTexts().findBlocks().bindEvents(),this.params.searchError&&(this.afterCurrentEvent(this.showSearchError),BEM.blocks.location.getInstance().change({url:BEM.blocks.uri.delParams(["cbirerror"]),history:!1,trigger:!1}))}},findBlocks:function(){return this.popupUser=this.findBlockOn(this.elem("popup","type","user"),"popup"),this.popupSearch=this.findBlockOn(this.elem("popup","type","search"),"popup"),this.popupSearch&&(this.closeSearchErrorButton=this.findBlockOn(this.elem("close-error-button"),"button")),this},bindEvents:function(){this.popupUser.on("hide",this._onUserPopupHide,this),this.popupSearch&&(this.popupSearch.on("hide",this._onSearchPopupHide,this),this.closeSearchErrorButton.on("click",this._onCloseErrorClick,this))},destruct:function(){this.popupUser.un("hide",this._onUserPopupHide,this).destruct(),this.popupSearch&&(this.closeSearchErrorButton.un("click",this._onCloseErrorClick,this),this.popupSearch.un("hide",this._onSearchPopupHide,this).destruct()),this.__base.apply(this,arguments)},setTexts:function(){return this.errorTexts={size:BEM.I18N("cbir-error_spok_yes","Слишком большой файл, попробуйте загрузить другую картинку."),format:BEM.I18N("cbir-error_spok_yes","Неправильный формат загружаемого файла. Попробуйте загрузить файл изображения."),upload:BEM.I18N("cbir-error_spok_yes","Картинка не загрузилась, попробуйте загрузить другую."),url:BEM.I18N("cbir-error_spok_yes","По указанному адресу не смогли найти картинку, попробуйте ввести другой адрес.")},this},_onCloseErrorClick:function(){this.popupSearch.hide()},_onUserPopupHide:function(){this.delMod(this.elem("input"),"error"),this.hidePopupTimeout&&(clearTimeout(this.hidePopupTimeout),this.hidePopupTimeout=null)},_onSearchPopupHide:function(){this.trigger("hideParanja")},hideError:function(){return this.popupUser.hide(),this.popupSearch&&this.popupSearch.hide(),this._lastErrorTager&&(this._lastErrorTager.unsetThreateningLook(),this._lastErrorTager=null),this},showSearchError:function(){return this.popupSearch.show(),this.trigger("showParanja"),this},showError:function(t,e){var n=this.errorTexts[t],i=this;return n?(this.popupUser.elem("error-text").text(n),"url"===t&&e.setThreateningLook&&(this._lastErrorTager=e,e.setThreateningLook()),this.popupUser.show(e.getErrorTargetDomElem(t)),this.hidePopupTimeout=setTimeout(function(){i.hidePopupTimeout=null,i.hideError()},5e3),this):this}}),BEM.DOM.decl("tooltip-owner",{onSetMod:{js:function(){this.findBlocks().bindEvents()}},findBlocks:function(){return this.tooltip=this.findBlockInside("tooltip"),this},bindEvents:function(){return this.bindTo("mouseleave",this._onMouseOut),this},_onMouseOver:function(){this.tooltip.setOwner(this.domElem).show()},_onMouseOut:function(){this.tooltip.hide()},_onClick:function(){this.tooltip.hide()},setContent:function(t){this.tooltip.setContent(t)}},{live:function(){this.liveInitOnEvent("mousemove"),this.liveBindTo("click",function(t){this._onClick(t)}),!BEM.blocks["i-global"].param("mobile")&&this.liveBindTo("mouseover",function(t){this._onMouseOver(t)})}}),BEM.decl("counter",{_dict:{}}),function(){var t={all:"136",any:"146",big:"148",bing:"568",black:"201",blue:"198",bottom:"668",bw:"666",cbir:"1031",ces:"1057",clear:"477",click:"882",clipart:"758",close:"486",color:"169",copy:"1276",copyright:"1305",customize:"178",cyan:"197",demotivator:"760",duplicates:"269",face:"276",facebook:"520",fade:"1059",filters:"618",format:"675",fotki:"174",fresh:"598",fullscreen:"665",gif:"677",google:"66",gray:"733",green:"196",horizontal:"672",image:"8",images:"277",imgclick:"835",index:"629",iorient:"671",isize:"145",jpg:"676",keyboard:"492",large:"157",lineart:"759",list:"436",medium:"149",message:"1304",moderate:"681",more:"75",mouse:"491",navig:"208","new":"228",next:"407",normal:"141",nps:"1056",odnoklassniki:"526",off:"11",on:"10",open:"842",orange:"194",othersize:"924",p0:"85",p1:"86",p10:"95",p11:"96",p12:"97",p13:"98",p14:"99",p15:"100",p16:"101",p17:"102",p18:"103",p19:"104",p2:"87",p20:"105",p3:"88",p4:"89",p5:"90",p6:"91",p7:"92",p8:"93",p9:"94",page:"143",photo:"275",picsearch:"173",pinterest:"1009",play:"331",png:"679",prev:"406",preview:"670",promo:"714",red:"193",related_query:"391",result:"884",results:"241",save:"691",scroll:"768",search:"153","search-by-image":"1277",series:"978",serp:"471",share:"599",show:"487",similar:"469",site:"202",slideshow:"479",small:"150",soo:"65",square:"674",stop:"529",thumb:"184",top:"77",twitter:"521",type:"76",url:"13",user:"538",vertical:"673",violet:"199",visiblefresh:"639",vkontakte:"496",wallpaper:"158",wallpaper_category:"1129",week:"796",white:"200",yellow:"195",video:"231",maps:"23",market:"4",music:"56",loaded:"1007",ads:"991",categories:"1429",px500:"1224",submit:"297",width:"1473",height:"1474",time:"207",hover:"858",abuse:"1436",sticky:"1578",pad:"1667",footer:"295",default_search:"1620",popup_close:"1781",error:"1030",install:"705",inline_home_set:"1918",incut:"1073",behavioral:"1999",context:"60",item:"22",direct:"155"};"undefined"!=typeof BEM&&BEM.decl("counter",{_dict:t}),"undefined"!=typeof exports&&(exports.dict=t)}(),BEM.decl("counter",{HIT_DELAY:200,onSetMod:{js:function(){window.Ya=window.Ya||{},window.Ya.counter=this,window.c=this,window.w=this.w,window.cp=this.cp,window.rc=this.redir}},_getExtParams:$.noop,redir:function(t,e){var n=t.href;e=e.replace(/=8(?=&|$)/,"=0"),t.href=e,setTimeout(function(){t.href=n},500)},w:function(t,e,n){var i=window.Ya.counter;e&&i.hit({path:e,vars:i.getVars(n),dtype:"iweb"},t)},wHitDelayed:function(t,e,n){setTimeout(function(){c.w(t,e,n)},this.HIT_DELAY)},cp:function(t,e){t.path&&(t.dtype="stred",window.Ya.counter.hit(t,e))},cpHitDelayed:function(t,e){setTimeout(function(){c.cp(t,e)},this.HIT_DELAY)},hit:function(t,e){var n=e&&(e.onclick||e.ondblclick),i=this._getExtParams();n&&$.extend(t,n().counter__params),i&&$.extend(t,i),t.path&&(t.path=this.getPath(t.path),this.log(t),this.makeReq(this.getUrl(t,e)))},hitDelayed:function(t,e){setTimeout(function(){c.hit(t,e)},this.HIT_DELAY)},log:function(t){BEM.blocks.counter.debug("counter",{pid:t.pid,cid:t.cid,path:t.path,decoded:this.getHumanText(t.path),vars:t.vars&&t.vars})},makeReq:function(t){$.ajax({url:location.protocol+t,cache:!0,dataType:"script"})},getUrl:function(t,e){var n=$.extend({rnd:this.getRnd(),yuid:this.getUid(),reqid:this.getReqId(e),serpid:t.serpid||this.getSerpId()},t),i=this.stringifyParams(n,"/");return["//",this.getClickHost(),"/jclck/",i,"/*",this.getAsterixData(e)].join("")},getVars:function(t){return"object"==typeof t?this.stringifyParams(t,","):t},getReqId:function(t){var e,n,i=BEM.blocks["i-global"],s=i.param("reqid")||i.param("serpid")||"";return t?(e=$(t).closest(".counter__reqid"),n=e.length?BEM.DOM.extractParams(e[0]).counter__reqid:{},n.reqid||s):s},getSerpId:function(){return BEM.blocks["i-global"].param("serpid")},getRnd:function(){return(new Date).getTime()+Math.round(100*Math.random())},getUid:function(){return BEM.blocks["i-global"].param("yandexuid")},getClickHost:function(){return BEM.blocks["i-global"].param("click-host")},getAsterixData:function(t){return t&&t.href?t.href:location.href},stringifyParams:function(t,e){var n,i=[];return Object.keys(t).forEach(function(e){n=t[e],"undefined"!=typeof n&&""!==n&&i.push(e+"="+n)}),i.join(e||"&")},getPath:function(t){var e="/"===t[0];return e&&this._dict&&this.decodePath(t)||t},decodePath:function(t){var e=t.split("/").slice(1),n=this._dict;return n&&e.length&&e.map(function(t){return n[t]||t}).join(".")},decodeBlockstatKey:function(t){return _.findKey(this._dict,function(e){return e===t})||t},getHumanText:function(t){return"/"+t.split(".").map(this.decodeBlockstatKey.bind(this)).join("/")}},{debug:function(t,e){BEM.blocks["i-global"].param("counterDebug")&&(e=e||"","undefined"!=typeof console&&"function"==typeof console.info&&(console.group("Счётчик "+t),e.pid?console.info("pid:	"+e.pid+",	cid:	"+e.cid+"\npath:	"+e.path+",	decoded:	"+e.decoded+"\nvars:	"+e.vars):console.info("params: ",e),console.groupEnd("Счётчик "+t)),window.mm||(window.mm={}),window.mm.counters||(window.mm.counters=[]),window.mm.counters.push({name:t,params:e}))}}),BEM.create("counter"),BEM.decl("counter",{_getExtParams:function(){var t=BEM.blocks["i-global"],e="images.yandex";switch(t.param("page")){case"index":e="portal."+e;break;case"search-by-image":case"similar":case"copy":e="cbir."+e}return t.param("tablet")?e+="/pad":t.param("mobile")&&(e+="/touch"),{service:"images.yandex",ui:encodeURIComponent(e)}}}),BEM.DOM.decl("footer",{hide:function(){this.setMod("hidden","yes"),this.trigger("hide")},transparent:function(){this.setMod("hidden","yes"),this.trigger("transparent")},show:function(){this.delMod("hidden"),this.trigger("show")}}),BEM.DOM.decl("footer",{onSetMod:{js:function(){this.__base.apply(this,arguments),BEM.blocks["b-page"].on("change",this._onPageChange,this)}},destruct:function(){BEM.blocks["b-page"].un("change",this._onPageChange,this),this.__base.apply(this,arguments)},_onPageChange:function(){BEM.blocks["i-global"].param("mobile")&&!BEM.blocks["i-global"].param("tablet")&&this.updateMobileLink()},updateMobileLink:function(){var t=this.elem("link","mobile","yes"),e=t.attr("href"),n=BEM.blocks.uri.getParamValue(e,"retpath"),i=BEM.blocks.uri.getParamValue("text"),s=BEM.blocks.uri.parse(n),r=_.isEmpty(i)?s.getRoot():s.getRoot()+"/search?text="+encodeURIComponent(i);t.attr("href",BEM.blocks.uri.setParam(e,"retpath",r))}}),BEM.DOM.decl("footer",{_onPageChange:function(t,e){this.__base.apply(this,arguments);var n=this.params.links;this.elem("link","type","help").attr({href:"index"===e.type?n["help-index"]:n.help})}}),BEM.DOM.decl("footer",{onSetMod:{js:function(){this.__base.apply(this,arguments),this.distro=this.findBlockInside("distro"),this.hasMod("distro","yes")&&(this.distroInit(),this._onScroll())}},distroInit:function(){BEM.blocks["b-page"].on("scroll",this._onScroll,this)},destruct:function(){this.__base.apply(this,arguments),BEM.blocks["b-page"].un("scroll",this._onScroll,this)},showDistro:function(){this.setMod("distro","yes"),this.distro.show(),this.trigger("distro","show")},hideDistro:function(){this.delMod("distro"),this.distro.hide()},_onPageChange:function(t,e){this.__base.apply(this,arguments),this.distro&&"ru"===BEM.blocks["i-global"].param("tld")&&("index"===e.type||BEM.blocks["i-global"].getFlag("images_footer_distribution")?(this.distroInit(),this._onScroll()):(this.hideDistro(),this.trigger("distro","hide")))},_onScroll:function(){var t=BEM.DOM.win,e=this.distro.domElem;!this.hasMod("hidden")&&t.scrollTop()+t.height()>=e.offset().top+e.height()&&(this.showDistro(),BEM.blocks["b-page"].un("scroll",this._onScroll,this))}}),BEM.DOM.decl("lang-switcher",{onSetMod:{js:{inited:function(){this.params["secret-key"]&&this.bindTo("lang","mousedown keydown",this._preprocessOpenLink)}}},_preprocessOpenLink:function(t){var e=$(t.currentTarget),n=this.elemParams(e);this.hasMod(e,"selected","yes")||n.url||e.attr("href",this._getUrl(this._getLang(n)))},_getLang:function(t){var e=t.lang;return"gb"===e?"en":e},_getUrl:function(t){return this.params.tune+"/api/lang/v1.1/save.xml?"+$.param({intl:t,sk:this.params["secret-key"],retpath:this.params.retpath||BEM.blocks["i-global"].param("retpath")||window.location.href})}},{live:function(){this.liveInitOnBlockEvent("init","dropdown-menu")}}),BEM.DOM.decl("lang-switcher",{onSetMod:{js:function(){var t=this.findBlockOn("dropdown-menu")._popup.domElem;this.langs=this.findElem(t,"lang")}}},{live:function(){this.liveBindTo("click",function(){this.langs.each(function(){var t=$(this).attr("href"),e=BEM.blocks.uri;t&&$(this).attr("href",e.setParam(t,"retpath",e.clearHashSymbol(location.href)))})})}}),BEM.DOM.decl({name:"link",modName:"pseudo",modVal:"yes"},{_onClick:function(t){t.preventDefault(),this.hasMod("disabled","yes")||this.afterCurrentEvent(function(){this.trigger("click")})},_onKeyUp:function(t){t.shiftKey||t.ctrlKey||t.altKey||(13===t.which||32===t.which)&&(this.hasMod("disabled","yes")||this.afterCurrentEvent(function(){this.trigger("click")}))}},{live:function(){this.__base.apply(this,arguments),this.liveBindTo({modName:"pseudo",modVal:"yes"},"leftclick tap",function(t){this._onClick(t)}).liveBindTo({modName:"pseudo",modVal:"yes"},"keyup",function(t){this._onKeyUp(t)})}}),BEM.DOM.decl("b-statcounter",{onSetMod:{js:function(){this.findElem("metrika").length<1||(this.location=BEM.blocks.location.getInstance().on("change",this._onChange,this),this.__self.on("hit",this.hitMetrika,this),this.__self.on("goal",this.reachGoal,this),this.trigger("hitAndGoalInited"),this.__base.apply(this,arguments))}},destruct:function(){this.__base.apply(this,arguments),this.location.un("change",this._onChange,this),this.__self.un("hit",this.hitMetrika,this),this.__self.un("goal",this.reachGoal,this)},_onChange:function(){this.hitMetrika()},hitMetrika:function(t,e){e||(e={});var n=this.getMetrika();n&&n.hit(e.url||window.location.href,e.title,e.referer,e.params),BEM.blocks.counter.debug("metrika hit",JSON.stringify(e.params))},reachGoal:function(t,e){e||(e={});var n=this.getMetrika();n&&n.reachGoal(e.goal,e.params),BEM.blocks.counter.debug("metrika reachGoal",JSON.stringify(e))},getMetrika:function(){return this._mc||(this._mc=window["yaCounter"+this.elemParams("metrika").id])}},{hit:function(t){this.trigger("hit",t)},goal:function(t){this.trigger("goal",t)}}),BEM.DOM.decl("b-statcounter",{_onChange:$.noop}),function(t){t.decl("b-statcounter__metrika",{onSetMod:{js:function(){this.__self.loadMetrika(),this.addCounter(this.params)}},addCounter:function(t){var e=window.Ya&&Ya.Metrika,n=window.yandex_metrika_callbacks||(window.yandex_metrika_callbacks=[]),i=function(){window["yaCounter"+t.id]=new Ya.Metrika(t)};if(!t.id)throw new Error([BEM.I18N("b-statcounter__metrika","JSERR_incorrectID"),"block: "+this.__self.getName(),"method: addCounter"].join("\n"));e?i():n.push(i)},getDefaultParams:function(){return{enableAll:!0}}},{loadMetrika:function(){var t=window.Ya&&Ya.Metrika,e="https:"===document.location.protocol?"https:":"http:",n="//mc.yandex.ru/metrika/watch.js";!t&&$("script")[0].parentNode.appendChild($("<script>").attr({type:"text/javascript",async:!0,src:e+n})[0]),this.loadMetrika=function(){}}})}(BEM.DOM),BEM.DOM.decl("b-statcounter__metrika",{addCounter:function(t){this.__self.updateFromParam(t),this.__base.apply(this,arguments)}},{updateFromParam:function(t){var e=$.cookie("mfrom");return t.params||(t.params={}),e?t.params.from=e:this._setCookie(t.params.from||"organic"),this},_setCookie:function(t){return $.cookie("mfrom",t,{expires:3650,path:BEM.blocks["i-global"].param("router").index}),this}}),BEM.DOM.decl("page-layout",{_trigger:!0,onSetMod:{page:{search:function(){var t=this.findBlockInside(this.elem("column","type","navigation"),"navigation");t&&t.reflow()}},layout:function(t,e){this._trigger&&this.trigger(t,e),this._trigger=!0}},disableTrigger:function(){return this._trigger=!1,this}}),BEM.DOM.decl("page-layout",{onSetMod:{js:function(){this.__base.apply(this,arguments),BEM.blocks["i-global"].param("tablet")&&this.adjustMinHeight()}},changeHeight:function(t){return this.elem("content-wrapper").css("min-height","+="+t),this},getHeight:function(){return this.elem("content-wrapper").height()},setHeight:function(t){return this.elem("content-wrapper").css("min-height",t),this},setDefaultHeight:function(){return this.elem("content-wrapper").css("min-height",""),this},adjustMinHeight:function(){this.domElem.css("min-height",this.elem("column","type","navigation").outerHeight())}}),BEM.DOM.decl("page-layout",{onSetMod:{js:function(){this.__base.apply(this,arguments),BEM.blocks.footer.on("distro",this._onDistroChange,this)}},destruct:function(){BEM.blocks.footer.un("distro",this._onDistroChange,this),this.__base.apply(this,arguments)},_onDistroChange:function(t,e){"show"===e?this.setMod("distro-footer","yes"):this.delMod("distro-footer")}}),BEM.DOM.decl("page-layout",{toggleCBIRMode:function(t){return this.toggleMod("cbir","visible","",t)},togglePointerEvents:function(t){return this.toggleMod("pointer","","none",t)}}),BEM.DOM.decl("pane2",{getDefaultParams:function(){var t=this.__base.apply(this,arguments)||{};return t.MOUSE_MOVING_TIMEOUT_DELAY=2e3,t.ANIMATION_DURATION=300,t.playTimeoutDelay=4e3,t},onSetMod:{js:function(){this.setMod("flexbox",BEM.blocks["i-ua"].hasFlexbox()?"yes":"no"),this.setMod(this.elem("column","type","info"),"flexbox",BEM.blocks["i-ua"].hasFlexbox()?"yes":"no"),this.findBlocks().bindEvents(),this.playback=this.playback.bind(this)},fullscreen:{yes:function(){this._onThrottledMouseMove=$.throttle(this._onMouseMove,100,this),this.bindTo("mousemove",this._onThrottledMouseMove),this.bindTo("click",this._onPageClick)},no:function(){this.unbindFrom("mousemove"),this.unbindFrom("click")}}},onElemSetMod:{column:{hidden:function(t,e,n){this.hasMod(t,"type","info")&&this.afterCurrentEvent(function(){this.trigger("info:"+("yes"===n?"closed":"opened"))})}}},findBlocks:function(){return this},bindEvents:function(){return BEM.blocks.preview2.on("fullscreen:enter",this._onEnterFullscreen,this),this.on("fullscreen:exit",this._onExitFullscreen,this),screenfull.enabled&&(this.bindToDoc(screenfull.raw.fullscreenchange,this._onFullscreenChange),this.bindToDoc(screenfull.raw.fullscreenerror,this._onFullscreenError)),BEM.blocks["slideshow-switcher"].on("start",this._onSlideshowStart,this),BEM.blocks["slideshow-switcher"].on("stop",this._onSlideshowStop,this),this},unbindEvents:function(){return BEM.blocks.preview2.un("fullscreen:enter",this._onEnterFullscreen,this),this.un("fullscreen:exit",this._onExitFullscreen,this),this},destruct:function(){this.unbindEvents(),this.__base.apply(this,arguments)},_onSlideshowStart:function(){this.playTimeout=setTimeout(this.playback,this.params.playTimeoutDelay)},_onSlideshowStop:function(){clearTimeout(this.playTimeout)},_onFullscreenChange:function(){screenfull.isFullscreen===!1&&window.inNextFrame(function(){this.trigger("fullscreen:exit")}.bind(this))},_onFullscreenError:function(){window.inNextFrame(function(){this.trigger("fullscreen:exit")}.bind(this))},_onMouseMove:function(){this.updateControls()},_onPageClick:function(){this.updateControls()},playback:function(){this.trigger("slideshow:next"),this.playTimeout=setTimeout(this.playback,this.params.playTimeoutDelay)},updateControls:function(){return this.setMod("mouse-moving","yes"),clearTimeout(this.mouseMovingTimeout),this.mouseMovingTimeout=setTimeout(function(){this.delMod("mouse-moving")}.bind(this),this.params.MOUSE_MOVING_TIMEOUT_DELAY),this},isOrientationChanged:function(){return this._isVerticalOrientation!=window.innerHeight>window.innerWidth?(this._isVerticalOrientation=!this._isVerticalOrientation,!0):!1},_onEnterFullscreen:function(){return this.setMod(this.elem("close"),"color","white"),this.setMod("fullscreen","yes"),this.trigger("fullscreen:enter"),this},_onExitFullscreen:function(){return this.getPreview().exitFullscreen(),this.setMod(this.elem("close"),"color",this.params.originCloseColor),this.setMod("fullscreen","no"),this},_onClose:function(){return this.close("mouse"),this},open:function(){return this.isMobile()&&(this._isVerticalOrientation=window.innerHeight>window.innerWidth)?this.hideInfoPanel():this.showInfoPanel(),this.setMod("visibility","visible"),this.domElem.animateRaf([{property:"opacity",from:0,to:1,duration:this.params.ANIMATION_DURATION,timing:"ease"}],function(){this.trigger("open")}.bind(this)),this.hasMod("mobile","yes")&&window.scrollBy(0,1),this},isOpened:function(){return this.hasMod("visibility","visible")},update:function(){return this.getPreview().hideError().load(),BEM.blocks["pane2-api"].frameQueue.add(function(){this._updateSnippet()},this),this},_updateSnippet:function(){return this._getSnippet().update(BEM.blocks["pane2-api"].getItemParams()),this},_getSnippet:function(){return this._snippet||(this._snippet=this.findBlockInside("snippet2"))},close:function(t){return this.hasMod("fullscreen","yes")?this.trigger("fullscreen:exit"):this.domElem.animateRaf([{property:"opacity",from:1,to:0,duration:this.params.ANIMATION_DURATION,timing:"ease"}],function(){this.delMod("visibility"),this.trigger("close",t)}.bind(this)),this},toggleInfoPanel:function(){this.toggleMod(this.elem("column","type","info"),"hidden","yes","")},showInfoPanel:function(){this.delMod(this.elem("column","type","info"),"hidden")},hideInfoPanel:function(){this.setMod(this.elem("column","type","info"),"hidden","yes")},isMobile:function(){return this.hasMod("mobile","yes")},getPreview:function(){return this.preview||(this.preview=this.findBlockOn("preview","preview2"))
}},{live:function(){this.liveBindTo("close","click",function(){this._onClose()}),this.liveBindTo("click",function(t){$(t.target).is(this.domElem)&&this._onClose()})}}),BEM.DOM.decl("pane2",{bindEvents:function(){return this._getShare()&&this._getShareMenu().on("show",this._updateShare,this),BEM.blocks.complain.on(this.elem("complain-button"),"click",this._onComplainClick,this),BEM.blocks["pane2-api"].on("fullscreen:enter",this._onFullscreenEnter,this),BEM.blocks["pane2-api"].on("fullscreen:exit",this._onFullscreenExit,this),this.__base.apply(this,arguments)},unbindEvents:function(){return this._getShare()&&this._getShareMenu().un("show",this._updateShare,this),BEM.blocks.complain.un(this.elem("complain-button"),"click",this._onComplainClick,this),BEM.blocks["pane2-api"].un("fullscreen:enter",this._onFullscreenEnter,this),BEM.blocks["pane2-api"].un("fullscreen:exit",this._onFullscreenExit,this),this.__base.apply(this,arguments)},findBlocks:function(){return this.__base.apply(this,arguments),this._getSearchByImage(),this},_onComplainClick:function(){BEM.blocks.feedback.showPopup(BEM.blocks["pane2-api"].getItem())},_onFullscreenEnter:function(){this.isFullscreen=!0},_onFullscreenExit:function(){this.isFullscreen=!1,this.update()},getRelated:function(){return this.elem("related")[0]&&this.elem("related")[0].outerHTML},_updateMarketState:function(){var t=BEM.blocks["pane2-api"].getItemParams(),e=t.isMarketIncut||t.isDirectIncut;return this.setMod("market",e?"yes":"no"),this._getSizes().setButtonTheme(e?"normal":"action"),this},_updateShare:function(){var t=BEM.blocks["pane2-api"].getItemParams(),e=this._getPage().params.seo.shareTitle.replace(" - "," — "),n=$("<div>",{html:t.snippet.text}).text(),i=BEM.blocks.uri.setParam(BEM.blocks.location.getInstance().getState().url,"ts",+new Date),s=t.thumb.url,r=t.reqid;this._getShare().updateLink("pinterest",{title:e+(n?" – "+n:""),image:s,counterUrl:t.img_href,reqid:r}).updateLink("vkontakte",{description:n,title:e,url:i,image:s,counterUrl:t.img_href,reqid:r}).updateLink("odnoklassniki",{description:n,title:e,url:i,image:s,counterUrl:t.img_href,reqid:r}).updateLink("facebook",{description:n,title:e,url:i,image:s,counterUrl:t.img_href,reqid:r}).updateLink("twitter",{title:e+" #yandeximages",counterUrl:t.img_href,reqid:r})},update:function(){this.__base.apply(this,arguments);var t=this;return this.isFullscreen||BEM.blocks["pane2-api"].frameQueue.add(function(){t._updateSizes()}),this._getSnippet().isShoppingButton()&&this._updateMarketState(),this},updateRelated:function(t){return BEM.DOM.replace(this.findElem("related"),t.html),this},_updateSizes:function(){return this._getSizes()&&this.sizes.update(BEM.blocks["pane2-api"].getItem(),!0),this},_getPage:function(){return this.page||(this.page=this.findBlockOutside("b-page"))},_getSizes:function(){return this.sizes||(this.sizes=this.findBlockInside("sizes"))},_getSearchByImage:function(){return this._searchByImage||(this._searchByImage=this.findBlockInside("search-by-image"))},_getShare:function(){return this._share||(this._share=this.findBlockInside("share-dropdown"))},_getShareMenu:function(){return this._shareMenu||(this._shareMenu=this._getShare().findBlockInside("dropdown-menu"))}}),BEM.DOM.decl({block:"pane2",modName:"scroll-fridge",modVal:"yes"},{bindEvents:function(){return this.bindTo(this.elem("scroll-section"),BEM.blocks["pane2-api"]._getWheelEvent(),this._onFridgeScroll),BEM.blocks["i-ua"].hasFlexbox()||BEM.blocks.snippet2.on("updated",this._onSnippetUpdated,this),this.__base.apply(this,arguments)},unbindEvents:function(){return BEM.blocks["i-ua"].hasFlexbox()||BEM.blocks.snippet2.un("updated",this._onSnippetUpdated,this),this.__base.apply(this,arguments)},_onFridgeScroll:function(t){var e,n,i=t.originalEvent;t.preventDefault(),t.stopImmediatePropagation(),e=i.deltaY||i.detail,e&&(n=this.elem("scroll-section").scrollTop(),this.elem("scroll-section").scrollTop(n+e))},_onSnippetUpdated:function(t){window.inNextFrame(function(){var e=this.elem("column").height()-t.target.domElem.height()-this.elem("buttons").height()-30;this.elem("scroll-section").height(e)},this)}}),BEM.DOM.decl({block:"pane2",modName:"color-position",modVal:"yes"},{getDefaultParams:function(){var t=this.__base.apply(this,arguments)||{};return t.closeButtonColorInversion={white:"black","black-white":"white"},t},onSetMod:{js:function(){this.__base.apply(this,arguments),this.params.originClosePos=this.getMod(this.elem("close"),"pos"),this.params.originCloseColor=this.getMod(this.elem("close"),"color"),this.params.isCloseButtonRight={"paranja-right":!0,"preview-right":!0}[this.params.originClosePos]}},onElemSetMod:{column:{hidden:function(t,e,n){this.__base.apply(this,arguments);var i,s,r=BEM.blocks["i-global"].getFlag("doge_preview_color")||"black-white";"yes"===n?(i=this.params.closeButtonColorInversion[r],s="default"):(i=this.params.originCloseColor,s=this.params.originClosePos),this.setMod(this.elem("close"),"color",i),this.params.isCloseButtonRight&&this.setMod(this.elem("close"),"pos",s)}}}}),BEM.DOM.decl("pane2-api",{isOpened:!1,isFullscreen:!1,isSlideshowActive:!1,_scrollStart:null,destruct:function(){this.unbindEvents(),this.__base.apply(this,arguments)},bindEvents:function(){return BEM.blocks.gallery.on("click",this._onGalleryItemClicked,this),BEM.blocks.preview2.on("thumbClick",this._onThumbClick,this),BEM.blocks.preview2.on("rightClick",this._onRightClick,this),BEM.blocks.preview2.on("arrowClick",this._onArrowClick,this),BEM.blocks.preview2.on("loaded",this._onPreviewLoaded,this),BEM.blocks.preview2.on("error",this._onPreviewError,this),BEM.blocks.snippet2.on("title:click",this._onTitleClick,this),BEM.blocks.snippet2.on("link:click",this._onLinkClick,this),BEM.blocks.snippet2.on("shopping:click",this._onSnippetButtonClick,this),BEM.blocks.carousel.on("listOut",this._onListOut,this),BEM.blocks.pane2.on("open",this._onPaneOpen,this),BEM.blocks.pane2.on("close",this._onPaneClose,this),BEM.blocks.pane2.on("info:opened info:closed",this._onInfoToggle,this),BEM.blocks.pane2.on("fullscreen:enter",this._onFullscreenEnter,this),BEM.blocks.pane2.on("fullscreen:exit",this._onFullscreenExit,this),BEM.blocks.pane2.on("slideshow:next",this._onSlideshowNext,this),BEM.blocks["slideshow-switcher"].on("start",this._onSlideshowStart,this),BEM.blocks["slideshow-switcher"].on("stop",this._onSlideshowStop,this),this.bindToWin(this._getWheelEvent(),this._onMouseWheel),this.bindToWin("resize orientationchange",$.debounce(this._onResize,100,!0,this)),BEM.blocks["i-global"].param("tablet")&&this.bindToWin("touchmove",this._onTouchMove),BEM.blocks["i-keyrouter"].on("space left right up down",this._onKeyNavigation,this).on("esc backspace",this._closeByKeyboard,this).on("o v",this._onKeyPress,this),this},unbindEvents:function(){return BEM.blocks.gallery.un("click",this._onGalleryItemClicked,this),BEM.blocks.preview2.un("thumbClick",this._onThumbClick,this),BEM.blocks.preview2.un("rightClick",this._onRightClick,this),BEM.blocks.preview2.un("arrowClick",this._onArrowClick,this),BEM.blocks.preview2.un("loaded",this._onPreviewLoaded,this),BEM.blocks.preview2.un("error",this._onPreviewError,this),BEM.blocks.snippet2.un("title:click",this._onTitleClick,this),BEM.blocks.snippet2.un("link:click",this._onLinkClick,this),BEM.blocks.snippet2.un("shopping:click",this._onSnippetButtonClick,this),BEM.blocks.carousel.un("listOut",this._onListOut,this),BEM.blocks.pane2.un("open",this._onPaneOpen,this),BEM.blocks.pane2.un("close",this._onPaneClose,this),BEM.blocks.pane2.un("info:opened info:closed",this._onInfoToggle,this),BEM.blocks.pane2.un("fullscreen:enter",this._onFullscreenEnter,this),BEM.blocks.pane2.un("fullscreen:exit",this._onFullscreenExit,this),BEM.blocks.pane2.un("slideshow:next",this._onSlideshowNext,this),BEM.blocks["slideshow-switcher"].un("start",this._onSlideshowStart,this),BEM.blocks["slideshow-switcher"].un("stop",this._onSlideshowStop,this),this.unbindFromWin(this._getWheelEvent(),this._onMouseWheel),this.unbindFromWin("resize orientationchange",$.debounce(this._onResize,100,!0,this)),BEM.blocks["i-global"].param("tablet")&&this.unbindFromWin("touchmove",this._onTouchMove),BEM.blocks["i-keyrouter"].un("space left right up down",this._onKeyNavigation,this).un("esc backspace",this._closeByKeyboard,this).un("o v",this._onKeyPress,this),this},_onFullscreenEnter:function(){this.isFullscreen=!0,this.trigger("fullscreen:enter")},_onFullscreenExit:function(){this.isFullscreen=!1,BEM.blocks["pane2-api"].frameQueue.add(this.selectCurrentItem.bind(this)).run(),this.trigger("fullscreen:exit")},_onSlideshowStart:function(){this.isSlideshowActive=!0,this.trigger("slideshow:start")},_onSlideshowStop:function(){this.isSlideshowActive=!1,this.trigger("slideshow:stop")},_onSlideshowNext:function(){this.trigger("next",{source:"slideshow"})},open:function(t){return this.__self.setItem(t),this.bindEvents(),this.isOpened=!0,this._getPane().open(),this.loadItem(t),this},close:function(t){return this._getPane().close(t),this},loadItem:function(t){this.__self.setItem(t),this.isFullscreen||this.selectCurrentItem(),this.updatePane()},preloadItems:function(t){return this._getPreloader().setImages(t).batchLoad(),this},showItemCaption:function(t){this._getPreview().updateSeriesMeta(t).showCaption()},hideItemCaption:function(){this._getPreview().hideCaption()},showSpin:function(t){this._getGallery().showSpin(this.getDirectionByPageNum(t))},hideSpin:function(t){this._getGallery().hideSpin(this.getDirectionByPageNum(t))},loadGallery:function(t,e){var n,i=this._getGallery();if(!i.needAddList(e))return!1;n=this.getDirectionByPageNum(e),i.hideSpin(n),i.savePageNum(e);var s=i.addList(t,n);return this.isOpened&&"left"===n&&("fast"===this.getMod("carousel")?i.move(i.getCurrentScrollPos()+(i._getItemWidth()+i.params.thumbsMargin)*s):i.scrollToItemByID(this.__self.getItemParams().id)),!0},insertInToGalleryAfterThumb:function(t,e){this._getGallery().insertAfterThumb(t,e)},insertInToGalleryBeforeAllThumbs:function(t){this._getGallery().insertBeforeAllThumbs(t)},getDirectionByPageNum:function(t){return this._getGallery().getDirectionByNum(t)},selectCurrentItem:function(){var t=this.__self.getItemParams();this._getGallery().selectItemByID(t.id)},updatePane:function(){return this._getPane().update(),this},_onResize:function(){var t=this._getPane();t.isMobile()&&t.isOrientationChanged()?t.toggleInfoPanel():this.updatePreviewSize()},_onInfoToggle:function(){this.__self.currentDuplicate&&this.updatePreviewSize()},updatePreviewSize:function(){return this._getPreview().updateWrapperSize().setThumbSize(this.__self.currentDuplicate),this},_onGalleryItemClicked:function(t,e){this.trigger("gallery:click",e)},_onPreviewLoaded:function(t,e){this.trigger("preview:loaded",e)},_onPreviewError:function(){this.trigger("preview:error")},_onArrowClick:function(t,e){this._getGallery().isScrolling()||(this.hasMod(e.data.domElem,"side","right")?this.trigger("next",{source:"arrow"}):this.trigger("prev",{source:"arrow"}))},_onThumbClick:function(){this._getGallery().isScrolling()||this.trigger("thumb:click")},_onRightClick:function(){this.trigger("preview:rightClick")},_onListOut:function(t,e){this._getGallery().isSpinVisible(e)||this.trigger("gallery:listOut",this._getGallery().getPageNumByDirection(e))},_onPaneOpen:function(){this.trigger("pane:open")},_onPaneClose:function(t,e){this.isOpened=!1,this.unbindEvents(),this._getPreview().removeImageParams(),this.trigger("pane:close",e),this._getGallery().delSelected()},_onKeyNavigation:function(t,e){e.preventDefault(),this._getGallery().isScrolling()||("left"===t.type||"up"===t.type?this.trigger("prev",{source:"keyboard"}):this.trigger("next",{source:"keyboard"}))},_onTouchMove:function(t){t.target.classList&&t.target.classList.contains("gallery__item")||t.preventDefault()},_closeByKeyboard:function(t,e){e.stopImmediatePropagation(),this.close("keyboard")},_onKeyPress:function(t){var e=this.__self.getItemParams();switch(t.type){case"o":this._openURL(e.fitSize.url),this.trigger("open:image");break;case"v":this._openURL(e.snippet.url),this.trigger("open:site")}},_onTitleClick:function(t,e){this.trigger("title:click",e)},_onLinkClick:function(t,e){this.trigger("link:click",e)},_onSnippetButtonClick:function(t,e){this.trigger("shopping:click",e)},_openURL:function(t){window.open(t,"_blank")},_onMouseWheel:function(t){if(t.preventDefault(),!(+new Date-this._scrollStart<this._getGallery().params.animationTime)){var e,n=t.originalEvent;this._scrollStart=+new Date,e=n.deltaX||n.deltaY||n.detail,e&&(e>0?this.trigger("next",{source:"scroll"}):this.trigger("prev",{source:"scroll"}))}},_getWheelEvent:function(){return this.__self._getWheelEvent()},_getPreloader:function(){return this._batchPreloader||(this._batchPreloader=BEM.create({block:"i-preloader",mods:{batch:"yes",timeout:"yes","preview-speed":"yes"}})),this._batchPreloader},_getPane:function(){return this.pane||(this.pane=this.findBlockOn("pane2"))},_getPreview:function(){return this.preview||(this.preview=this.findBlockInside("preview2"))},_getGallery:function(){return this.gallery||(this.gallery=this.findBlockInside("gallery"))}},{live:function(){return BEM.blocks.preview2.on("duplicate:loaded",this._onDuplicateLoaded,this),this.frameQueue=new window.rafQueue,!1},currentDuplicate:null,_onDuplicateLoaded:function(t,e){this.currentDuplicate=e},currentItem:null,setItem:function(t){this.currentItem=t},getItem:function(){return this.currentItem},getItemParams:function(){return this.currentItem.params},_getWheelEvent:function(){return this._wheelEvent||(this._wheelEvent="onwheel"in document||document.documentMode>=9?"wheel":"mousewheel")}}),BEM.DOM.decl("i-keyrouter",{onSetMod:{js:function(){this.bindToDoc("keydown",function(t){return this.__self.instance=this,document.activeElement&&/(INPUT|TEXTAREA)/.test(document.activeElement.nodeName)?void 0:this._onKeydown(t)})}},_onKeydown:function(t){switch(t.keyCode){case 37:case 65:case 72:this.__self.isSpecialKey(t)&&this.trigger("left",t);break;case 39:case 68:case 76:this.__self.isSpecialKey(t)&&this.trigger("right",t);break;case 32:this.trigger("space",t);break;case 70:this.trigger("f",t);break;case 79:this.trigger("o",t);break;case 86:this.trigger("v",t);break;case 34:this.trigger("pagedown",t);break;case 33:this.trigger("pageup",t);break;case 13:this.trigger("enter",t);break;case 27:this.trigger("esc",t),t.stopImmediatePropagation();break;case 8:this.trigger("backspace",t);break;case 38:case 87:case 75:this.__self.isSpecialKey(t)&&this.trigger("up",t);break;case 40:case 83:case 74:this.__self.isSpecialKey(t)&&this.trigger("down",t)}return!t.isImmediatePropagationStopped()}},{get:function(){return this.instance},isSpecialKey:function(t){return!(t.ctrlKey||t.altKey||t.metaKey||t.shiftKey)}}),BEM.DOM.decl("snippet",{setTarget:function(t){this.elem("link").attr("target",t),this.elem("title").attr("target",t)},update:function(t){var e=t.snippet,n=BEM.blocks["i-global"].param("isPumpkin")?e.url:e.redirUrl,i=e.url;e.title=_.trunc(e.title,60);try{i=decodeURIComponent(i)}catch(s){}return e.visibleURL=_.trunc(i,70),this.elem("title").attr("href",n).text(e.title),this.elem("link").attr("href",n).text(e.visibleURL),this.elem("text").html(e.text),t.contentsTitle&&this.elem("series").text(t.contentsTitle),this.trigger("updated"),this}},{live:function(){this.liveBindTo("title","leftclick tap",function(t){this.trigger("title:click",t.target)}),this.liveBindTo("link","leftclick tap",function(t){this.trigger("link:click",t.target)})}}),BEM.DOM.decl({block:"snippet",modName:"type",modVal:"series"},{updateSeriesInfo:function(t){return this.elem("link").attr("href",t.site),this.elem("link-text").html(t.title),this}}),BEM.DOM.decl({block:"snippet2",baseBlock:"snippet"},{update:function(t){this.__base.apply(this,arguments);var e=t.snippet.domain;return this.elem("link").text(e),this},updateFavicon:function(t){var e=window.location.protocol+this.params.faviconURL+t,n=new Image,i=this,s=function(){n.width>1&&n.height>1?i.showFavicon(e):i.hideFavicon()};return n.onload=s,n.onerror=s,n.src=e,n.complete&&s(),this},showFavicon:function(t){return this.elem("link").css("background-image","url("+t+")"),this.setMod(this.elem("link"),"favicon","yes"),this},hideFavicon:function(){return this.delMod(this.elem("link"),"favicon"),this.elem("link").css("background-image","none"),this},getDefaultParams:function(){return{faviconURL:"//favicon.yandex.net/favicon/"}}}),BEM.DOM.decl({block:"snippet2",baseBlock:"snippet"},{update:function(t){this.__base.apply(this,arguments);var e=t.snippet,n=t.isDirectIncut;return this.elem("link").text(e.domain),t.isMarketIncut||n?(this.setMod("type","market"),n||this.elem("price").text(e.price),this.elem("shopping-button").attr("href",e.redirUrl)):this.delMod("type"),this},isShoppingButton:function(){return!!this.elem("shopping-button")[0]}},{live:function(){this.__base.apply(this,arguments),this.liveBindTo("shopping-button","leftclick tap",function(t){this.trigger("shopping:click",t.target)})}}),BEM.DOM.decl("preview2",{onSetMod:{js:function(){this.findBlocks().bindEvents().updateWrapperSize(),screenfull&&screenfull.enabled||this.setMod(this.elem("fullscreen"),"disabled","yes")}},findBlocks:function(){return this._preloader=BEM.create({block:"i-preloader",mods:{timeout:"yes","preview-speed":"yes"}}),this.thumb=this.elem("thumb"),this._spin=this.findBlockOn(this.elem("spin"),"spinner"),this},bindEvents:function(){return this.bindTo("fullscreen","click",this._onFullscreenEnter).bindTo("wrapper","click",this._onThumbClick).bindTo("thumb","contextmenu",this._onRightClick).bindTo("arrow","click",this._onArrowClick),BEM.blocks["i-keyrouter"].on("f",this._onFullscreenEnter,this),this._preloader.on("success",this._onPreloaderSuccess,this).on("error",this._onPreloaderError,this),this},destruct:function(){this.__base.apply(this,arguments),BEM.blocks["i-keyrouter"].un("f",this._onFullscreenEnter,this),this._preloader.un("success",this._onPreloaderSuccess,this).un("error",this._onPreloaderError,this)},_onFullscreenEnter:function(t,e){return screenfull&&screenfull.enabled&&("f"!==t.type||BEM.blocks["i-keyrouter"].isSpecialKey(e))?this.hasMod("animation","yes")?!1:this.hasMod("fullscreen","yes")?!1:(this.setMod("fullscreen","yes"),void this.trigger("fullscreen:enter")):!1},exitFullscreen:function(){return this.setMod("fullscreen","no"),screenfull.exit(),this},load:function(){var t=BEM.blocks["pane2-api"].getItemParams(),e=t.thumb&&t.thumb.url,n=t.images,i=this._preloader.getSuccessfulDup(n),s=this;return!_.isEmpty(t.dups)&&this.trigger("load:started",t.dups[0]),_.isEmpty(n)?this:(this._preloader.stop(),void(i?BEM.blocks["pane2-api"].frameQueue.add(function(){s.hideSpin().updateImage(i).setThumbSize(i)._duplicateLoaded(i)}):(i=n[0],BEM.blocks["pane2-api"].frameQueue.add(function(){s.hideSpin().showSpin()._setThumbSrc(e).setThumbSize(i)._duplicateLoaded({width:i.width,height:i.height,url:e})}).add(function(){s._preloader.load(n)}))))},_duplicateLoaded:function(t){this.trigger("duplicate:loaded",t)},_setMaxThumbSize:function(t,e){return this.elem("thumb").css({"max-width":t,"max-height":e}),this},_setThumbSrc:function(t){return this.thumb.attr("src",t),window.opera&&this._forceOperaRepaint(),this},_forceOperaRepaint:function(){var t=document.body.style;return t.position="static",setTimeout(function(){t.position="relative"},1),this},setThumbSize:function(t){var e=this._wrapper.width/this._wrapper.height,n=t.width/t.height;return this._setMaxThumbSize(t.width,t.height),n>e?this.setMod(this.elem("thumb"),"fit","width"):this.setMod(this.elem("thumb"),"fit","height"),this},updateWrapperSize:function(){return this._wrapper={width:this.elem("wrapper").width(),height:this.elem("wrapper").height()},this},_onThumbClick:function(t){this.trigger("thumbClick",t)},_onRightClick:function(t){this.trigger("rightClick",t)},_onArrowClick:function(t){this.trigger("arrowClick",t)},_onPreloaderSuccess:function(t,e){this.hideError().trigger("success").hideSpin().updateImage(e)._duplicateLoaded(e)},_onPreloaderError:function(){this.trigger("error"),this.hideSpin(),this.updateErrorLink().showError()},updateErrorLink:function(){var t=BEM.blocks["pane2-api"].getItemParams();return this.elem("error-link").attr("href",t.snippet.url),this},showError:function(){return this.setMod("error","yes")},hideError:function(){return this.delMod("error")},updateSeriesMeta:function(t){return this.getSnippet().updateSeriesInfo(t),this},getSnippet:function(){return this.snippet||(this.snippet=this.findBlockInside("caption",{block:"snippet",mods:{type:"series"}}))},showCaption:function(){return this.setMod(this.elem("caption"),"visibility","visible")},hideCaption:function(){return this.delMod(this.elem("caption"),"visibility")},updateImage:function(t){return this._setThumbSrc(t.url),this.trigger("loaded",{image:t,stats:this._preloader._getImageStats(t.url)}),this},removeImageParams:function(){return this.elem("thumb").removeAttr("src style"),this},showSpin:function(){var t=this._spin;return this._spinnerTimer=setTimeout(function(){t.setMod("progress","yes")},1e3),this},hideSpin:function(){return clearTimeout(this._spinnerTimer),this._spin.delMod("progress"),this}}),BEM.DOM.decl("preview2",{onSetMod:{js:function(){screenfull||this.setMod(this.elem("fullscreen"),"disabled","yes"),this.__base.apply(this,arguments)},fullscreen:{yes:function(){screenfull.request(),this._hitFullscreenCounter("open").trigger("fullscreen:enter")},no:function(){this._hitFullscreenCounter("close").trigger("fullscreen:exit")}}},_hitFullscreenCounter:function(t){return c.hitDelayed({dtype:"iweb",path:"/image/new/fullscreen/"+t,reqid:BEM.blocks["pane2-api"].getItemParams().reqid}),this}}),BEM.decl({block:"i-preloader",modName:"preview-speed",modVal:"yes"},{loadImage:function(t){return this._getImageStats(t.url)||this._setImageStats(t.url,{start:+new Date}),this.__base.apply(this,arguments)},_onSuccess:function(t){var e=this._getImageStats(t.url);return e&&!e.latency&&(e.latency=+new Date-e.start,this._setImageStats(t.url,e)),this.__base.apply(this,arguments)},_getImageStats:function(t){return this.__self._imagesLoadingStats[t]},_setImageStats:function(t,e){return this.__self._imagesLoadingStats[t]=e,this}},{_imagesLoadingStats:{}}),BEM.decl({block:"i-preloader",modName:"timeout",modVal:"yes"},{totalImages:0,totalTime:0,loadTimeout:15e3,createLoader:function(t){return this._timeout=setTimeout(this.changeThis(function(){this._onError(t)}),this.loadTimeout),this._loadStart=+new Date,this.__base.apply(this,arguments)},destroyLoader:function(){return clearTimeout(this._timeout),this._loader&&this._loader.complete&&(this._loadEnd=+new Date,this.totalImages++,this.totalTime+=this._loadEnd-this._loadStart,this.totalImages>10&&(this.loadTimeout=Math.max(4*~~(this.totalTime/this.totalImages),2e3))),this.__base.apply(this,arguments)}}),BEM.DOM.decl({block:"i-preloader",modName:"batch",modVal:"yes"},{images:[],onSetMod:{js:function(){this.__base.apply(this,arguments),this.on("success error",this.batchLoad)}},batchLoad:function(){return this.load(this.images.shift()),this},setImages:function(t){return this.images=t,this}}),function(){function t(e,n){"use strict";function s(t,e){return function(){return t.apply(e,arguments)}}var r;if(n=n||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=n.touchBoundary||10,this.layer=e,this.tapDelay=n.tapDelay||200,!t.notNeeded(e)){for(var o=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],a=this,c=0,u=o.length;u>c;c++)a[o[c]]=s(a[o[c]],a);i&&(e.addEventListener("mouseover",this.onMouse,!0),e.addEventListener("mousedown",this.onMouse,!0),e.addEventListener("mouseup",this.onMouse,!0)),e.addEventListener("click",this.onClick,!0),e.addEventListener("touchstart",this.onTouchStart,!1),e.addEventListener("touchmove",this.onTouchMove,!1),e.addEventListener("touchend",this.onTouchEnd,!1),e.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(e.removeEventListener=function(t,n,i){var s=Node.prototype.removeEventListener;"click"===t?s.call(e,t,n.hijacked||n,i):s.call(e,t,n,i)},e.addEventListener=function(t,n,i){var s=Node.prototype.addEventListener;"click"===t?s.call(e,t,n.hijacked||(n.hijacked=function(t){t.propagationStopped||n(t)}),i):s.call(e,t,n,i)}),"function"==typeof e.onclick&&(r=e.onclick,e.addEventListener("click",function(t){r(t)},!1),e.onclick=null)}}function e(){t.attach(document.body)}function e(){document.body.classList&&document.body.classList.contains("b-page_mobile_yes")&&t.attach(document.body)}var n=!1;document.addEventListener||(document.addEventListener=function(){},n=!0);var i=navigator.userAgent.indexOf("Android")>0,s=/iP(ad|hone|od)/.test(navigator.userAgent),r=s&&/OS 4_\d(_\d)?/.test(navigator.userAgent),o=s&&/OS ([6-9]|\d{2})_\d/.test(navigator.userAgent),a=navigator.userAgent.indexOf("BB10")>0;t.prototype.needsClick=function(t){"use strict";switch(t.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(t.disabled)return!0;break;case"input":if(s&&"file"===t.type||i&&"checkbox"===t.type||t.disabled)return!0;break;case"label":case"video":return!0}return/\bneedsclick\b/.test(t.className)},t.prototype.needsFocus=function(t){"use strict";switch(t.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!i;case"input":switch(t.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!t.disabled&&!t.readOnly;default:return/\bneedsfocus\b/.test(t.className)}},t.prototype.sendClick=function(t,e){"use strict";var n,i,s;document.activeElement&&document.activeElement!==t&&document.activeElement.blur(),i=e.changedTouches[0],s=document.createEvent("MouseEvents"),s.initMouseEvent("mousedown",!0,!0,window,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null),s.forwardedTouchEvent=!0,t.dispatchEvent(s),n=document.createEvent("MouseEvents"),n.initMouseEvent("click",!0,!0,window,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null),n.forwardedTouchEvent=!0,t.dispatchEvent(n)},t.prototype.focus=function(t){"use strict";var e;s&&t.setSelectionRange&&0!==t.type.indexOf("date")&&"time"!==t.type?(e=t.value.length,t.setSelectionRange(e,e)):t.focus()},t.prototype.updateScrollParent=function(t){"use strict";var e,n;if(e=t.fastClickScrollParent,!e||!e.contains(t)){n=t;do{if(n.scrollHeight>n.offsetHeight){e=n,t.fastClickScrollParent=n;break}n=n.parentElement}while(n)}e&&(e.fastClickLastScrollTop=e.scrollTop)},t.prototype.getTargetElementFromEventTarget=function(t){"use strict";return t.nodeType===Node.TEXT_NODE?t.parentNode:t},t.prototype.onTouchStart=function(t){"use strict";var e,n,i;if(t.targetTouches.length>1)return!0;if(e=this.getTargetElementFromEventTarget(t.target),n=t.targetTouches[0],s){if(i=window.getSelection(),i.rangeCount&&!i.isCollapsed)return!0;if(!r){if(n.identifier&&n.identifier===this.lastTouchIdentifier)return t.preventDefault(),!1;this.lastTouchIdentifier=n.identifier,this.updateScrollParent(e)}}return this.trackingClick=!0,this.trackingClickStart=t.timeStamp,this.targetElement=e,this.touchStartX=n.pageX,this.touchStartY=n.pageY,t.timeStamp-this.lastClickTime<this.tapDelay&&t.preventDefault(),!0},t.prototype.touchHasMoved=function(t){"use strict";var e=t.changedTouches[0],n=this.touchBoundary;return Math.abs(e.pageX-this.touchStartX)>n||Math.abs(e.pageY-this.touchStartY)>n?!0:!1},t.prototype.onTouchMove=function(t){"use strict";return this.trackingClick?((this.targetElement!==this.getTargetElementFromEventTarget(t.target)||this.touchHasMoved(t))&&(this.trackingClick=!1,this.targetElement=null),!0):!0},t.prototype.findControl=function(t){"use strict";return void 0!==t.control?t.control:t.htmlFor?document.getElementById(t.htmlFor):t.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},t.prototype.onTouchEnd=function(t){"use strict";var e,n,a,c,u,l=this.targetElement;if(!this.trackingClick)return!0;if(t.timeStamp-this.lastClickTime<this.tapDelay)return this.cancelNextClick=!0,!0;if(this.cancelNextClick=!1,this.lastClickTime=t.timeStamp,n=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,o&&(u=t.changedTouches[0],l=document.elementFromPoint(u.pageX-window.pageXOffset,u.pageY-window.pageYOffset)||l,l.fastClickScrollParent=this.targetElement.fastClickScrollParent),a=l.tagName.toLowerCase(),"label"===a){if(e=this.findControl(l)){if(this.focus(l),i)return!1;l=e}}else if(this.needsFocus(l))return t.timeStamp-n>100||s&&window.top!==window&&"input"===a?(this.targetElement=null,!1):(this.focus(l),this.sendClick(l,t),s&&"select"===a||(this.targetElement=null,t.preventDefault()),!1);return s&&!r&&(c=l.fastClickScrollParent,c&&c.fastClickLastScrollTop!==c.scrollTop)?!0:(this.needsClick(l)||(t.preventDefault(),this.sendClick(l,t)),!1)},t.prototype.onTouchCancel=function(){"use strict";this.trackingClick=!1,this.targetElement=null},t.prototype.onMouse=function(t){"use strict";return this.targetElement?t.forwardedTouchEvent?!0:t.cancelable&&(!this.needsClick(this.targetElement)||this.cancelNextClick)?(t.stopImmediatePropagation?t.stopImmediatePropagation():t.propagationStopped=!0,t.stopPropagation(),t.preventDefault(),!1):!0:!0},t.prototype.onClick=function(t){"use strict";var e;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===t.target.type&&0===t.detail?!0:(e=this.onMouse(t),e||(this.targetElement=null),e)},t.prototype.destroy=function(){"use strict";var t=this.layer;i&&(t.removeEventListener("mouseover",this.onMouse,!0),t.removeEventListener("mousedown",this.onMouse,!0),t.removeEventListener("mouseup",this.onMouse,!0)),t.removeEventListener("click",this.onClick,!0),t.removeEventListener("touchstart",this.onTouchStart,!1),t.removeEventListener("touchmove",this.onTouchMove,!1),t.removeEventListener("touchend",this.onTouchEnd,!1),t.removeEventListener("touchcancel",this.onTouchCancel,!1)},t.notNeeded=function(t){"use strict";var e,n,s;if("undefined"==typeof window.ontouchstart)return!0;if(n=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!i)return!0;if(e=document.querySelector("meta[name=viewport]")){if(-1!==e.content.indexOf("user-scalable=no"))return!0;if(n>31&&document.documentElement.scrollWidth<=window.outerWidth)return!0}}if(a&&(s=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/),s[1]>=10&&s[2]>=3&&(e=document.querySelector("meta[name=viewport]")))){if(-1!==e.content.indexOf("user-scalable=no"))return!0;if(document.documentElement.scrollWidth<=window.outerWidth)return!0}return"none"===t.style.msTouchAction?!0:!1},t.attach=function(e,n){"use strict";return new t(e,n)},"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){"use strict";return t}):"undefined"!=typeof module&&module.exports?(module.exports=t.attach,module.exports.FastClick=t):window.FastClick=t,"complete"===document.readyState?e():document.addEventListener("DOMContentLoaded",e),n&&delete document.addEventListener}(),BEM.DOM.decl("slideshow-switcher",{onSetMod:{js:function(){this.bindEvents()},active:{yes:function(){this.trigger("start")},"":function(){this.trigger("stop")}}},bindEvents:function(){return this.findBlockOn("button").on("click",this._onButtonClick,this),BEM.blocks["pane2-api"].on("fullscreen:exit",this._onFullscreenExit,this),this},destruct:function(){this.__base.apply(this,arguments),BEM.blocks["pane2-api"].un("fullscreen:exit",this._onFullscreenExit,this)},_onButtonClick:function(){this.toggleMod("active","yes")},_onFullscreenExit:function(){this.delMod("active")}}),BEM.DOM.decl("slideshow-icon",{onSetMod:{js:function(){BEM.blocks["slideshow-switcher"].on("start",this._onSlideshowStart,this).on("stop",this._onSlideshowStop,this)}},destruct:function(){BEM.blocks["slideshow-switcher"].un("start",this._onSlideshowStart,this).un("stop",this._onSlideshowStop,this),this.__base.apply(this,arguments)
},_onSlideshowStart:function(){this._animate(function(){this.setMod("active","yes")})},_onSlideshowStop:function(){this._animate(function(){this.delMod("active")})},_animate:function(t){this.setMod("animation","yes"),setTimeout(function(){this.delMod("animation"),t.apply(this)}.bind(this),2e3)}}),BEM.DOM.decl("button",{onSetMod:{focused:{yes:function(){return this.hasMod("focus","no")?!1:this.__base.apply(this,arguments)}}}}),BEM.DOM.decl({block:"pane2-api",modName:"carousel",modVal:"fast"},{_onMouseWheel:function(t){var e,n=t.originalEvent;e=n.deltaY||5*n.detail,e&&(1===t.originalEvent.deltaMode&&(e*=16),this._getGallery().move(this._getGallery().getCurrentScrollPos()+e),t.preventDefault())}}),BEM.DOM.decl("gallery",{getDefaultParams:function(){return{animationTime:200,thumbsMargin:10,pages:[],minPage:-1,maxPage:-1}},onSetMod:{js:function(){this._onAnimationEndDebounced=$.debounce(this._onAnimationEnd,this.params.animationTime+50,this)}},selectItem:function(t){var e=this.findElem("item","selected","yes");return this.delMod(e,"selected").delMod(e,"selection").delMod(this.elem("group","selected","yes"),"selected").setMod(t,"selected","yes"),this.isGroupElem(t)&&this.setMod(this.getItemGroup(t),"selected","yes"),_.isEmpty(e)||window.opera||BEM.blocks["i-global"].param("isOldBrowser")?this._scrollTo(t,e):this._animatedScrollTo(t,e),this},getItemGroup:function(t){return t.parent(".gallery__group")},isGroupElem:function(t){return this.hasMod(t,"series","yes")},selectItemByID:function(t){this.selectItem(this._getItemBySerpItemId(t))},isSpinVisible:function(t){return!!this.hasMod(this._getSpinner(t),"visibility","visible")},showSpin:function(t){return this._getSpinner(t)&&(this._moveSpinner(t),this.setMod(this._getSpinner(t),"visibility","visible")),this},delSelected:function(){this.delMod(this.findElem("item","selected","yes"),"selected")},_moveSpinner:function(t){return"left"===t?this._getSpinner(t).prependTo(this.getCarousel().getList()):this._getSpinner(t).appendTo(this.getCarousel().getList()),this},_getSpinner:function(t){return this.spinner||(this.spinner=[]),this.spinner[t]||(this.setContent(BEMHTML.apply({block:"gallery",elem:"spinner",mods:{direction:t},content:{block:"spinner",mods:{size:"m",progress:"yes"}}}),t),this.spinner[t]=this.findElem("spinner","direction",t)),this.spinner[t]},hideSpin:function(t){return this.delMod(this._getSpinner(t),"visibility","visible")},scrollToItemByID:function(t,e){this.move(this.getScrollPos(this._getItemBySerpItemId(t)),e)},_scrollTo:function(t,e){this.move(this.getScrollPos(t,e))},_animatedScrollTo:function(t,e){this.move(this.getScrollPos(t,e),!0)},getScrollPos:function(t){return t.position().left+(this._getItemWidth()+this.params.thumbsMargin)/2},getCurrentScrollPos:function(){return this.getCarouselWrap().scrollLeft()},_getWrapLeft:function(){return this._wrapLeft||(this._wrapLeft=this.getCarouselWrap().offset().left)},_getItemWidth:function(){return this._itemWidth||(this._itemWidth=this.elem("item").width())},clear:function(){return this.params.maxPage=-1,this.params.minPage=-1,this.params.pages=[],this.spinner=[],this._uniqIds={},this.getCarousel().elem("list").empty(),this},move:function(t,e){var n=this.getCarouselWrap();this._shouldShowSelectionFrame(t,n)?this.setMod("scrolling","yes")._showSelectionFrame()._hideItemSelectionFrame():this._showItemSelectionFrame()._hideSelectionFrame(),n.animate({scrollLeft:t},e?this.params.animationTime:0,this._onAnimationEndDebounced)},_shouldShowSelectionFrame:function(t,e){return t<this.getCarousel().elem("list")[0].scrollWidth-e.width()/2},_onAnimationEnd:function(){this.delMod("scrolling")._hideSelectionFrame()._showItemSelectionFrame()},_onItemClick:function(t){var e=t.data.domElem;t.preventDefault(),this.hasMod(e,"selected","yes")||(this.itemClickOffsetX=t.offsetX,this.trigger("click",this._getSerpItemId(e)))},_getSerpItemId:function(t){return t.attr("id").replace("gallery-","")},getDirectionByNum:function(t){var e="direct";return-1===this.params.maxPage&&-1===this.params.minPage?e="direct":t>this.params.maxPage?e="right":t<this.params.minPage&&(e="left"),e},savePageNum:function(t){return-1===this.params.maxPage&&-1===this.params.minPage?(this.params.maxPage=t,this.params.minPage=t):t>this.params.maxPage?this.params.maxPage=t:t<this.params.minPage&&(this.params.minPage=t),this.params.pages.push(t),this},needAddList:function(t){return-1===_.indexOf(this.params.pages,t)},getPageNumByDirection:function(t){var e;return"left"===t?e=this.params.minPage-1:"right"===t&&(e=this.params.maxPage+1),e},setContent:function(t,e){var n=this.getCarousel();switch(e){case"left":n.prependItemsInList(t);break;case"right":n.appendItemsInList(t);break;default:n.setItemsInList(t)}return window.inNextFrame(n.setScrollMod,n),this},addList:function(t,e){t=$("<div>").append(t),this._removeDuplicates(t);var n=t.contents();return this.setContent(n,e),n.length},_getItemBySerpItemId:function(t){return $("#gallery-"+t)},getCarousel:function(){return this.carousel||(this.carousel=this.findBlockInside("carousel"))},getCarouselWrap:function(){return this.carouselWrap||(this.carouselWrap=this.getCarousel().elem("wrap"))},isScrolling:function(){return this.hasMod("scrolling","yes")},_showSelectionFrame:function(){return this.delMod(this.elem("selection"),"hidden")},_hideSelectionFrame:function(){return this.setMod(this.elem("selection"),"hidden","yes")},_showItemSelectionFrame:function(){return this.setMod(this.findElem("item","selected","yes"),"selection","yes")},_hideItemSelectionFrame:function(){return this.delMod(this.findElem("item","selected","yes"),"selection")},setBase64FromSerpList:function(t){var e=this;return _.forEach(t.getIds(),function(t){var n=e._getItemBySerpItemId(t).find(".gallery__thumb"),i=$("#"+t).find("img").attr("src");n.attr("src",i)}),this},_removeDuplicates:function(t){this._uniqIds||(this._uniqIds={});var e=this;_.forEach(t.find(".gallery__item"),function(t){e._uniqIds[t.id]?e.hasMod($(t),"series","yes")?$(t).closest(".gallery__group").remove():$(t).remove():e._uniqIds[t.id]=!0})},insertAfterThumb:function(t,e){this.getCarousel().insertAfterThumb(t,e)},insertBeforeAllThumbs:function(t){this.getCarousel().insertBeforeAllThumbs(t)}},{live:function(){this.liveBindTo("item","click",function(t){this._onItemClick(t)})}}),BEM.DOM.decl({block:"gallery",modName:"carousel",modVal:"fast"},{getDefaultParams:function(){var t=this.__base.apply(this,arguments);return t.animationTime=100,t},move:function(t,e){var n=this.getCarouselWrap();return e?(this.hasMod("scrolling")&&n.stop(),this.setMod("scrolling","yes"),void n.animate({scrollLeft:t},{queue:!1,easing:"linear",duration:this.params.animationTime,complete:function(){this.delMod("scrolling"),n.stop()}.bind(this)})):void n.scrollLeft(t)},getScrollPos:function(t,e){if(!e)return this.__base.apply(this,arguments);var n,i=0,s=this._getItemWidth(),r=this.getCurrentScrollPos(),o=e.index()<t.index();return this.itemClickOffsetX?(n=this.itemClickOffsetX,i=this.params.thumbsMargin+s/2,i=o?s-n+i:-n-i,this.itemClickOffsetX=null,r+i):o?this.isItemLeftFromCenter(t)?r:this.calcItemCenterPos(t):this.isItemRightFromCenter(t)?r:this.calcItemCenterPos(t)},isItemLeftFromCenter:function(t){return t.position().left<this.calcCenterPos()},isItemRightFromCenter:function(t){return t.position().left>this.calcCenterPos()},calcCenterPos:function(){return Math.round(this.getCurrentScrollPos()-this._getItemWidth()/2)},calcItemCenterPos:function(t){return Math.round(t.position().left+this._getItemWidth()/2)}}),BEM.DOM.decl("related2",{_onItemClick:function(t){var e={};e[this.getMod("position")]="p"+this.getItemIndex(t.data.domElem),BEM.blocks["b-statcounter"].hit({params:{query:{related:{preview:e}}}})},getItemIndex:function(t){return this.elem("thumb").index(t)}},{live:function(){return this.liveBindTo("thumb","click",function(t){this._onItemClick(t)}),!1}}),BEM.DOM.decl("sizes",{onSetMod:{js:function(){BEM.blocks.button.on(this.elem("download"),"click",this._onClick,this),this.getDropdown().on("show",this._onPopupShow,this)}},destruct:function(){BEM.blocks.button.un(this.elem("download"),"click",this._onClick,this),this.getDropdown().un("show",this._onPopupShow,this),this.__base.apply(this,arguments)},_onPopupShow:function(){this.updateLinks()},_onClick:function(){this.trigger("download")},getDropdown:function(){return this._dropdown||(this._dropdown=this.findBlockInside("dropdown"))},getDownload:function(){return this._downloadButton||(this._downloadButton=this.findBlockInside({block:"button",modName:"side",modVal:"left"})),this._downloadButton},getDownloadSwitcher:function(){return this._downloadSwitcher||(this._downloadSwitcher=this.findBlockInside({block:"button",modName:"side",modVal:"right"}))},getDownloadDOMNode:function(){return this.elem("download")[0]},updateButton:function(t){var e=t.params.fitSize;this.elem("width").text(e.width),this.elem("height").text(e.height),this.getDownload().url(e.url)},updateLinks:function(){var t=this.data,e=t.params.dups||[],n=this.isPin?"/image/new/preview/duplicates/image/othersize/p":"/image/new/serp/duplicates/image/othersize/p";this.getDropdown().setContent(BEMHTML.apply({block:"dropdown-menu",elem:"menu",content:e.map(function(e){return{elem:"item",content:{block:"link",url:e.url,counter:['c.hit({dtype: "iweb", path: "',n,t.params.dups.indexOf(e)+1,'", reqid: "',t.params.reqid,'" });'].join(""),target:"_blank",content:e.width+"&times;"+e.height}}})}))},update:function(t,e){var n=t.params.dups||[];this.data=t,this.isPin=e,this.updateButton(t),1===n.length?this.hideDropdown():this.showDropdown()},showDropdown:function(){this.delMod("hide-dropdown"),this.getDownload().setMod("side","left")},hideDropdown:function(){this.setMod("hide-dropdown","yes"),this.getDownload().delMod("side")},setButtonTheme:function(t){this.getDownload().setMod("theme",t),this.getDownloadSwitcher().setMod("theme",t)}}),BEM.DOM.decl("search-by-image",{onSetMod:{js:function(){this._button=this.findBlockInside("button"),this._button.on("click",this._onButtonClick,this),BEM.blocks.preview2.on("duplicate:loaded",this._updateLink,this),BEM.blocks.preview2.on("load:started",this._updateLink,this)}},destruct:function(){this._button.un("click",this._onButtonClick,this),BEM.blocks.preview2.un("duplicate:loaded",this._updateLink,this),BEM.blocks.preview2.un("load:started",this._updateLink,this),this.__base.apply(this,arguments)},_onButtonClick:function(){BEM.blocks["b-statcounter"].hit({params:{query:{cbir:"view"}}})},update:function(t){return this._button.url(this._getViewUrl(t)),this},_updateLink:function(t,e){e.url.match(/(^\/\/im[0123]-tub-(ru|tr))/)||this.update(e.url)},_getViewUrl:function(t){return BEM.blocks.uri.buildRelativeUrl(BEM.blocks["i-global"].param("router").search,{text:BEM.blocks["i-global"].param("query"),rpt:"imageview",url:t})}}),BEM.DOM.decl("open-image",{update:function(t){this.domElem.attr("href",t.fitSize.url),this.findBlockOn("button").elem("sizes").html(" "+t.fitSize.width+"×"+t.fitSize.height)}}),BEM.DOM.decl("share-dropdown",{updateLink:function(t,e){var n=this.findBlockInside(this.elem("share-item","service",t),"link");return this._updateLink(n,e),this},updateLinks:function(t){var e=this;this.findBlocksInside("link").forEach(function(n){e._updateLink(n,t)})},_updateLink:function(t,e){var n=t.domElem;e=e||{},n.attr("href","//share.yandex.ru/go.xml?service="+(e.service?e.service:n.attr("data-service"))+"&url="+encodeURIComponent(void 0!==e.url?e.url:window.location.href)+"&title="+encodeURIComponent(e.title?e.title:document.title)+(e.image?"&image="+e.image:"")+"&description="+(e.description?e.description:document.getElementsByName("description")[0].getAttribute("content")||""))}},{live:!0}),BEM.DOM.decl("share-dropdown",{updateLink:function(t,e){var n=this.findBlockInside(this.elem("share-item","service",t),"link");return n&&this._updateLink(n,e),this}}),BEM.DOM.decl("share-dropdown",{_updateLink:function(t,e){this.__base.apply(this,arguments),t.params.mode=e.mode,t.params.reqid=e.reqid,t.params.url=void 0!==e.url?e.url:window.location.href,t.params.counterUrl=e.counterUrl,t.params.binded||t.bindTo("click",this._onLinkClick,this),t.params.binded=!0},_onLinkClick:function(t){var e=this.params,n="/image/new/"+(e.mode||"preview")+"/share/",i=$(t.target),s=i.attr("data-service");c.hit({dtype:"iweb",path:n+s,reqid:e.reqid},{href:e.counterUrl})}}),BEM.DOM.decl("pane2-controller",{_viewParams:["img_url","rpt","pos"],_relatedRequest:null,getDefaultParams:function(){return{directUpdateTime:1e4}},onSetMod:{js:function(){this.findBlocks().bindEvents(),this._relatedBaseData=this._getPane().getRelated(),this._throttledUpdateDirect=$.throttle(this._tryUpdateDirect,this.params.directUpdateTime,this),this.loadInitialItem(),this._addInitialItemsToGallery()}},findBlocks:function(){return this.location=BEM.blocks.location.getInstance(),this.changeUrlDebounced||(this.changeUrlDebounced=$.debounce(this.changeUrl,700,this)),this},bindEvents:function(){return BEM.blocks["b-page"].on("related2:update",this._onRelatedUpdate,this),BEM.blocks["b-page"].on("change",this._onPageChanged,this),BEM.blocks["serp-controller"].on("galleryLoaded",this._onGalleryLoaded,this),BEM.blocks["serp-item"].on("clicked",$.throttle(this._onSerpItemClicked.bind(this),100),this),this},unbindEvents:function(){BEM.blocks["b-page"].un("related2:update",this._onRelatedUpdate,this),BEM.blocks["b-page"].un("change",this._onPageChanged,this),BEM.blocks["serp-controller"].un("galleryLoaded",this._onGalleryLoaded,this),BEM.blocks["serp-item"].un(this.domElem,"open-pane2",this._onSerpItemClicked,this),this.unbindPane2Events()},destruct:function(){this.unbindEvents(),clearTimeout(this._locationTimeout),this.__base.apply(this,arguments)},bindPane2Events:function(){BEM.blocks["i-global"].param("isPumpkin")||BEM.blocks["pane2-api"].on("gallery:listOut",this._onGalleryListOut,this),BEM.blocks["pane2-api"].on("pane:open",this._onPaneOpen,this),BEM.blocks["pane2-api"].on("pane:close",this._onPaneClose,this),BEM.blocks["pane2-api"].on("gallery:click",this._onGalleryItemClicked,this),BEM.blocks["pane2-api"].on("preview:rightClick",this._onRightClick,this),BEM.blocks["pane2-api"].on("preview:loaded",this._onPreviewLoaded,this),BEM.blocks["pane2-api"].on("preview:error",this._onPreviewError,this),BEM.blocks["pane2-api"].on("thumb:click",this._onThumbClick,this),BEM.blocks["pane2-api"].on("title:click",this._onTitleClick,this),BEM.blocks["pane2-api"].on("link:click",this._onLinkClick,this),BEM.blocks["pane2-api"].on("shopping:click",this._onShoppingButtonClick,this),BEM.blocks["pane2-api"].on("next prev",this._onImageSwitch,this),BEM.blocks.sizes.on("download",this._onDownloadClick,this),BEM.blocks["pane2-api"].on("open:image",this._onDownloadClick,this),BEM.blocks["pane2-api"].on("slideshow:start",this._onSlideshowStart,this),BEM.blocks["pane2-api"].on("slideshow:stop",this._onSlideshowStop,this)},unbindPane2Events:function(){BEM.blocks["i-global"].param("isPumpkin")||BEM.blocks["pane2-api"].un("gallery:listOut",this._onGalleryListOut,this),BEM.blocks["pane2-api"].un("pane:open",this._onPaneOpen,this),BEM.blocks["pane2-api"].un("pane:close",this._onPaneClose,this),BEM.blocks["pane2-api"].un("gallery:click",this._onGalleryItemClicked,this),BEM.blocks["pane2-api"].un("preview:rightClick",this._onRightClick,this),BEM.blocks["pane2-api"].un("preview:loaded",this._onPreviewLoaded,this),BEM.blocks["pane2-api"].un("preview:error",this._onPreviewError,this),BEM.blocks["pane2-api"].un("thumb:click",this._onThumbClick,this),BEM.blocks["pane2-api"].un("title:click",this._onTitleClick,this),BEM.blocks["pane2-api"].un("link:click",this._onLinkClick,this),BEM.blocks["pane2-api"].un("shopping:click",this._onShoppingButtonClick,this),BEM.blocks["pane2-api"].un("next prev",this._onImageSwitch,this),BEM.blocks.sizes.un("download",this._onDownloadClick,this),BEM.blocks["pane2-api"].un("open:image",this._onDownloadClick,this),BEM.blocks["pane2-api"].un("slideshow:start",this._onSlideshowStart,this),BEM.blocks["pane2-api"].un("slideshow:stop",this._onSlideshowStop,this)},_getPane2API:function(){return this._pane2api||(this._pane2api=this.findBlockInside("pane2-api"))},_getPane:function(){return this._pane||(this._pane=this.findBlockInside("pane2"))},_getGallery:function(){return this._gallery||(this._gallery=this.findBlockInside("gallery"))},_getDirect:function(){return this._direct||(this._direct=this._getPane2API().findBlockInside({block:"direct",modName:"type",modVal:this._getDirectType()}))},_getDirectType:function(){var t=BEM.blocks["i-global"].getFlag("doge_fridge_direct");return t?"fridge":this._getDirectStripeType()},_getDirectStripeType:function(){var t=!(!BEM.blocks["i-global"].getFlag("images_direct_stripe_over_gallery")||$.browser.msie&&$.browser.version<=9||$.browser.opera&&$.browser.version<=12.16);return t?"stripe-over-gallery":"stripe"},_getSizes:function(){return this.sizes||(this.sizes=this.findBlockInside("sizes"))},_onGalleryListOut:function(t,e){if(this.isPageExists(e)&&!this.isMissingIncut()){var n=this._getPane2API();n.showSpin(e),this.trigger("listOut",n.getDirectionByPageNum(e))}},isPageExists:function(t){return t>=0&&t<=BEM.blocks["serp-controller"].get().getLastPage()},isMissingIncut:function(){return 0===BEM.blocks["i-global"].getFlag("images_incut_position")&&!this.findBlockInside("serp-list_type_market")},_onGalleryItemClicked:function(t,e){this.getItemById(e).click("mouse")},_onImageSwitch:function(t,e){var n=t.type;this[n](e.source),"arrow"===e.source&&this._hitPreviewCounter(n+"/mouse")},_onThumbClick:function(){this.next("mouse"),this._hitPreviewCounter("imgclick")},_onRightClick:function(){this._hitPreviewCounter("save")},_onTitleClick:function(t,e){var n=BEM.blocks["pane2-api"].getItemParams(),i=this._isMarketIncut()?"/market":"";i&&BEM.blocks["b-statcounter"].goal({goal:this.params.metrikaIncutCounter}),this._hitPreviewCounter("site"+i,e,{pos:i&&n.pos})},_onLinkClick:function(t,e){var n=BEM.blocks["pane2-api"].getItemParams(),i=this._isMarketIncut()?"/market":"";i&&BEM.blocks["b-statcounter"].goal({goal:this.params.metrikaIncutCounter}),this._hitPreviewCounter("duplicates/url"+i,e,{pos:i&&n.pos})},_onShoppingButtonClick:function(t,e){var n=BEM.blocks["pane2-api"].getItemParams();BEM.blocks["b-statcounter"].goal({goal:this.params.metrikaIncutCounter}),this._hitPreviewCounter("market",e,{pos:n.pos})},_onDownloadClick:function(){this._hitPreviewCounter("duplicates/image",this._getSizes().getDownloadDOMNode())},_onSlideshowStart:function(){this._hitPreviewCounter("slideshow/play")},_onSlideshowStop:function(){this._hitPreviewCounter("slideshow/stop")},_onPageChanged:function(){this._getPane2API().close("ajax"),this._addInitialItemsToGallery()},_onPaneOpen:function(){this._hitPreviewCounter("open")},_onPaneClose:function(t,e){clearTimeout(this._locationTimeout),("mouse"===e||"keyboard"===e)&&(this._hitPreviewCounter("close"),"copy"!==BEM.blocks["i-global"].param("page")&&this.delViewParams()),"ajax"!==e&&BEM.blocks["navigation-controller"].get().scroll("down"),this.unbindPane2Events()},_onPreviewLoaded:function(t,e){this._countPreview(e)},_onPreviewError:function(){errcnt(null,2104)},_onRelatedUpdate:function(t,e){this._relatedBaseData=e.html,this.updateRelated(e)},_isMarketIncut:function(){return!!this.params.metrikaIncutCounter},updateRelated:function(t){t.params.isEmpty&&(t.html=this._relatedBaseData),this._getPane().updateRelated(t)},loadRelated:function(t){this._relatedRequest&&this._relatedRequest.abort(),this._relatedRequest=BEM.create("i-request_type_bem",{url:t}).block("related2:ajax",this.updateRelated.bind(this)).get()},_hitPreviewCounter:function(t,e,n){return c.hitDelayed(_.assign({dtype:"iweb",path:"/image/new/preview/"+t,reqid:BEM.blocks["pane2-api"].getItemParams().reqid},n),e),this},loadItem:function(t){var e=this._getPane2API(),n=!e.isOpened,i=this;return t.params.reqid||this._addReqId(t),t.params.images=this.getActualImages(t.params),n?(this.bindPane2Events(),BEM.blocks["pane2-api"].frameQueue.add(function(){e.open(t)})):BEM.blocks["pane2-api"].frameQueue.add(function(){e.loadItem(t)}),BEM.blocks["pane2-api"].frameQueue.add(function(){t.hasMod("series","yes")&&t.hasMod("last","yes")?e.showItemCaption(t.getSeries().params.meta):e.hideItemCaption()}).add(function(){e.preloadItems(i.getNextImages(t.params.pos))}).add(function(){i.checkListOut(t)}),e.isFullscreen||this._isMarketIncut()||!this._shouldUpdateDirect()||this._throttledUpdateDirect(t),e.isFullscreen||t.params.img_related_url&&BEM.blocks["pane2-api"].frameQueue.add(function(){i.loadRelated(t.params.img_related_url)}),"copy"!==BEM.blocks["i-global"].param("page")&&BEM.blocks["pane2-api"].frameQueue.add(function(){i.changeUrlDebounced(i.getImageURL(t),n)}),BEM.blocks["pane2-api"].frameQueue.run(),this},_tryUpdateDirect:function(t){var e=this._getDirect(),n=this;e&&BEM.blocks["pane2-api"].frameQueue.add(function(){e&&e.update(n.getDirectGrab(t))})},_shouldUpdateDirect:function(){var t=this._getDirect();return t&&(!t.isExists()||this.params.directUpdateTime>0)},getDirectGrab:function(t){return 0===t.params.pos?BEM.blocks["i-global"].param("query")+" - "+t.params.snippet.grab:t.params.snippet.grab||BEM.blocks["i-global"].param("query")},_addReqId:function(t){return t.params.reqid=c.getReqId(t.domElem)||!1,this},changeUrl:function(t,e){this.addViewParams(t,e)},_onSerpItemClicked:function(t,e){"search"===e.getMod("type")&&this.loadItem(e)._countSelected(e)},move:function(t,e){BEM.blocks["navigation-controller"].get().goTo(t,!1,e)},next:function(t){this.move("right",t)},prev:function(t){this.move("left",t)},addViewParams:function(t,e){return screenfull&&screenfull.isFullscreen||this.location.change({url:t,trigger:!1,history:!!e}),this},delViewParams:function(t){return t=t||location.href,this.location.change({url:BEM.blocks.uri.delParams(t,this._viewParams),trigger:!1,history:!1}),this},getImageURL:function(t){var e=t.params.detail_url;return this.updateLinkParams?this.updateLinkParams(e):e},updateLinkParams:function(t){return BEM.blocks.uri.setParams(t,{source:void 0})},getItemById:function(t){var e=$("#"+t);return e.length?e.bem("serp-item"):void 0},hasInitialItem:function(){return!(!this.params.item||!this.params.item.selected)},getInitialItem:function(){return this.hasInitialItem()?this.getItemById(this.params.item.selected):!1},loadInitialItem:function(){var t=this.getInitialItem();return t&&(BEM.blocks["serp-item"].setCurrent(t),this.params.dontOpenImage?t.setMod("selected","yes").saveCurrent():this.loadItem(t)),this},_addInitialItemsToGallery:function(){var t,e=this.findBlockInside("serp-list");_.isEmpty(e)||(t=this.findElem("gallery-list").contents(),this._getGallery().clear(),this._getPane2API().loadGallery(t,e.getCurrentPageNumber()),BEM.blocks["i-global"].param("isPumpkin")&&this._getGallery().setBase64FromSerpList(e),this.trigger("initialItemAddedToGallery"))},_onGalleryLoaded:function(t,e){return this._getPane2API().loadGallery(e.html,e.params.pageNum),this},_countSelected:function(t){var e=t.params,n=e.seriesParams,i=n?"/series/p"+n.index:"",s=t.eventSource,r=t.eventParams,o="keyboard"===s&&r?"426,-info="+r:void 0,a=this._isMarketIncut()?"market":e.freshness;return("keyboard"===s||"slideshow"===s)&&c.hitDelayed({dtype:"iweb",path:"/image/new/serp/results/"+s+"/"+a+i,pos:e.pos,vars:o},t.domElem),this},_countPreview:function(t){var e=t.image,n=t.stats,i=["1473="+e.width,"1474="+e.height,n&&n.latency?"207="+n.latency:void 0].join(",");return this._hitPreviewCounter("image/show",{href:e.url},{vars:i}),this}}),BEM.DOM.decl("pane2-controller",{getItemById:function(t){var e=$("#"+t);return e.length?e.bem("serp-item"):void 0},getItemByPos:function(t){return $(".serp-item_pos_"+t+":eq(0)")},checkListOut:function(t){var e=!!this.getItemByPos(+t.params.pos+5).length;return e||this.trigger("listOut","right"),this},getActualImages:function(t){if(!t)return[];var e=[];return e=this._getPane2API().isFullscreen?t.dups.concat(t.preview):t.preview.concat(t.dups),t.useProxy&&e.forEach(function(t){t.url=(t.proxy_url.indexOf("http")?location.protocol:"")+t.proxy_url}),e}}),BEM.DOM.decl({block:"pane2-controller",modName:"preload",modVal:"yes"},{IMAGES_COUNT:5,getNextImages:function(t){for(var e,n=t+1,i=this.IMAGES_COUNT,s=5,r=[];r.length<i&&i+s>=n-t;)e=document.querySelector(".serp-item_pos_"+n++),e&&r.push(JSON.parse(e.getAttribute("data-bem"))["serp-item"]);return _.map(r,this.getActualImages,this)}}),function(t){t.fn.animateRaf=function(t,e){function n(t,e){for(var n=0;n<e.length;n++)i(t,e[n])}function i(t,e){var n,i,a=e.duration,l=o(e.timing,a),h=function(){i||(i=Date.now()),n=r(e.from,e.to,i,a,l),t.css(s(e.property,n)),n!==e.to?u(h):c()};u(h)}function s(t,e){var n={},i=t,s=e;return"translateY"===t&&(i="transform",s="translateY("+e+"px)"),n[i]=s,n}function r(t,e,n,i,s){return(e-t)*s((Date.now()-n)/i)+t}function o(t,e){var n,i=1e3/60/e/4;switch(t){case"ease":n=a(.25,.1,.25,1,i);break;default:n=a(.08,.39,.25,1,i)}return n}function a(t,e,n,i,s){var r=function(e){var i=1-e;return 3*i*i*e*t+3*i*e*e*n+e*e*e},o=function(t){var n=1-t;return 3*n*n*t*e+3*n*t*t*i+t*t*t},a=function(e){var i=1-e;return 3*(2*(e-1)*e+i*i)*t+3*(-e*e*e+2*i*e)*n};return function(t){var e,n,i,c,u,l,h=t;for(i=h,l=0;8>l;l++){if(c=r(i)-h,Math.abs(c)<s)return o(i);if(u=a(i),Math.abs(u)<1e-6)break;i-=c/u}if(e=0,n=1,i=h,e>i)return o(e);if(i>n)return o(n);for(;n>e;){if(c=r(i),Math.abs(c-h)<s)return o(i);h>c?e=i:n=i,i=.5*(n-e)+e}return o(i)}}function c(){++l===t.length&&e&&u(e)}var u=window.requestAnimationFrame,l=0;return n(this,t),this}}(jQuery),BEM.DOM.decl("incut-controller",{onSetMod:{js:function(){BEM.blocks["b-page"].on("change",this._syncState,this),BEM.blocks["serp-controller"].on("loading",this._tryInitIncuts,this),BEM.blocks["pane2-controller"].on("initialItemAddedToGallery",this._tryInitIncuts,this),this._syncState()}},destruct:function(){BEM.blocks["b-page"].un("change",this._syncState,this),BEM.blocks["pane2-controller"].un("initialItemAddedToGallery",this._tryInitIncuts,this),BEM.blocks["serp-controller"].un("loading",this._tryInitIncuts,this),this.__base.apply(this,arguments)},_syncState:function(){this._serpList=void 0,this.incuts=this.findBlocksInside("incut"),this._tryInitIncuts()},_tryInitIncuts:function(){return this.incuts&&-1!==_.pluck(this.incuts,"isInserted").indexOf(!1)?(_.forEach(this.incuts,function(t){this._shouldShowIncut(t)&&this.initIncut(t.load())},this),this):this},_shouldShowIncut:function(t){var e=t.params,n=this._getSerpController();return!t.isInserted&&{line:this._getSerpList().isRowVisible(e.position-1),page:n.getListCount()===e.position,bottom:(n.getListCount()+1)%n.getScrollPagesCount()===0,top:!0}[e.positionType]},initIncut:function(t){var e,n=t.params;switch(n.positionType){case"line":e=this._getSerpList().getLastThumbOfRow(n.position-1),e.after(t.domElem.parent());break;case"page":this._getSerpList().appendIncutElem(t.domElem.parent());break;case"bottom":break;case"top":this._getSerpList().prependIncutElem(t.domElem.parent())}return t.setShown().checkFilling()},_getSerpList:function(){return this._serpList||(this._serpList=this.findBlockInside("serp-list"))},_getSerpController:function(){return this._serpController||(this._serpController=this.findBlockOn("serp-controller"))}}),BEM.DOM.decl("competitors",{onSetMod:{js:function(){BEM.blocks["i-global"].param("isPumpkin")&&this.delMod("visibility")}}}),BEM.DOM.decl("navigation",{onSetMod:{js:{inited:function(){this._selectedItem=-1,this._items=this.elem("item","service","yes").map(this.changeThis(this._processItem,this)),this._onWindowResize=$.throttle(this._onWindowResize,100,this),this._onWindowResize(),this.bindToWin("resize",this._onWindowResize)}}},onElemSetMod:{item:{state:{selected:function(t){t.attr({role:"link","aria-hidden":!0})},"":function(t){t.attr("role","listitem").removeAttr("aria-hidden")}}}},_processItem:function(t,e){var n=$(e),i=this.getMod(n,"name"),s=this.hasMod(n,"state","selected");return i?(s&&(this._selectedItem=t),$.extend(n,{_index:t,_cachedBottom:this._getBorders(n).bottom,_sticky:s}),n):null},_onWindowResize:function(){this.reflow()},reflow:function(){var t,e=this._getViewportThreshold(),n=this._items.length,i=0;for(t=n;t--;)this._items[t]._cachedBottom>e&&i++;if(i=this._reflowExtra(e,n,i),i===n)for(t=n;t--;)this.setMod(this._items[t],"stacked","yes");else{var s=i;for(t=n;t--;){var r=this._items[t];s&&!r._sticky?(this.setMod(r,"stacked","yes"),s--):this.delMod(r,"stacked")}}return i},_reflowExtra:function(t,e,n){return n},_onMoreClick:function(){},_getViewportThreshold:function(){return this.__self.win.height()},_getBorders:function(t){"number"==typeof t&&(t=this._items[t]),!t instanceof $&&(t=$(t));var e=t.outerHeight(),n=t.offset().top-BEM.DOM.win.scrollTop();return{top:n,bottom:e+n}}},{live:function(){return this.liveBindTo("more","leftclick tap",function(t){this._onMoreClick(t)}).liveBindTo("more","keyup",function(t){t.shiftKey||t.ctrlKey||t.altKey||(13===t.which||32===t.which)&&this._onMoreClick(t)}),!1}}),BEM.DOM.decl("navigation",{_getBorders:function(){if($.browser.opera||$.browser.msie&&$.browser.version<9){var t=this.elem("more").css("bottom");this.elem("more").css("bottom","0"),this.elem("more").offset().top,this.elem("more").css("bottom",t)}return this.__base.apply(this,arguments)}}),BEM.DOM.decl("navigation",{_getBorders:function(){return($.browser.opera||$.browser.msie&&$.browser.version<=9)&&(this.elem("more").offset=function(){return{}}),this.__base.apply(this,arguments)}}),function(t){var e=t.DOM,n=e.win;e.decl({block:"navigation",modName:"more-type",modVal:"tablo"},{_onMoreClick:function(){var t=this._getHeader();t&&t.setMod(this._getActionSrv(t),"pressed","yes")},_getActionSrv:function(t){return t.elem("action","type","srv")},_getViewportThreshold:function(){return n.height()-this.elem("more").height()},_getHeader:function(){return this._header||(this._header=this.findBlockInside(e.doc,"header"))}})}(BEM),BEM.DOM.decl({block:"navigation",modName:"more-type",modVal:"tablo"},{_onMoreClick:function(){this.__base.apply(this,arguments);var t=this._getHeader();t&&this._getActionSrv(t).focus()}}),BEM.DOM.decl({block:"navigation",modName:"more-type",modVal:"tablo"},{_onMoreClick:function(){var t=this._getHeader();if(t){var e=t.findElem("action","type","srv");$(window).scrollTop()>0?(this.bindToWin("scroll",$.debounce(function(){t.setMod(e,"pressed","yes"),this.unbindFromWin("scroll")}.bind(this))),scrollTo(0,0)):t.setMod(e,"pressed","yes")}}}),BEM.DOM.decl("fade",{onSetMod:{progress:function(t,e){this.getSpin().setMod(t,e)}},getSpin:function(){return this._spin||(this._spin=this.findBlockInside("spinner")),this._spin},show:function(){this.setMod("progress","yes")},hide:function(){this.delMod("progress")}}),BEM.DOM.decl("internal",{onSetMod:{js:function(){function t(t){var n=t.params,i="bool"!=n.type?t.val():t.hasMod("checked")?1:0,s=t.domElem.find("[name]").attr("name");!e[n.rule]&&(e[n.rule]={}),e[n.rule][s]="&rearr="+s+"="+encodeURIComponent(i)}var e,n=this,i=this.findBlockInside("internal-table"),s=(this.findBlockInside("row","internal-table"),this.findBlockInside("wizard-debug","internal-table")),r=this.findBlockInside("rearrange","internal-table"),o=this.findBlockOutside("b-page").findBlockInside({blockName:"internal",modName:"for",modVal:"list"}),a=this.findBlockInside({blockName:"radio-button",modName:"type",modVal:"debug-switchers"}),c=this.findBlockInside({blockName:"checkbox",modName:"type",modVal:"rearrange"}),u=this.findBlockInside({blockName:"checkbox",modName:"type",modVal:"wizards"});this.cookieRelevSwitcher=this.findBlockOutside("b-page").findBlockInside({blockName:"tumbler",modName:"type",modVal:"display-switcher"}),this.serpItemInternal=this.findBlockOutside("b-page").findBlocksInside({blockName:"serp-item",modName:"type",modVal:"internal"}),this.sbh=o&&o.params.sbh,this._isFullRelevance=!!this.sbh&&!!this.cookieRelevSwitcher,r&&(e=this.findBlockInside("rearrange","internal-table").params.rearr||{}),a&&a.on("change",function(){switch(this.val()){case"components":n.setMod(n.elem("eventlog"),"visibility","hidden"),n.delMod(n.elem("components"),"visibility"),localStorage.showComponents=!0;
break;case"eventlog":n.setMod(n.elem("components"),"visibility","hidden"),n.delMod(n.elem("eventlog"),"visibility"),localStorage.showComponents=!1}n.delMod(n.elem("hide-debug"),"visibility")}),this.cookieRelevSwitcher&&this.cookieRelevSwitcher.on("change",function(){n._toggleInternal()}),a&&n.bindTo("hide-debug","click",function(){a.uncheckAll(),n.setMod(n.elem("hide-debug"),"visibility","hidden"),n.setMod(n.elem("components eventlog"),"visibility","hidden"),localStorage.showComponents=!1}),"true"!==localStorage.showComponents&&n.elem("hide-debug").click(),s&&n.bindTo("wizards-switcher","click",function(){i.toggleMod(s.elem("row","working","no"),"visibility","visible")}),n.bindTo("rearrange-button","click",function(){var t=[],i=location.href,s={blockName:"checkbox",modName:"type",modVal:"components"};n.findBlocksInside("wizard-debug",s).forEach(function(e){!e.hasMod("checked")&&t.push("&rwr=-"+e.val())}),n.findBlocksInside("rearrange",s).forEach(function(n){var i,s=n.val();if(n.hasMod("checked")){if(e[s])for(i in e[s])t.push(e[s][i])}else t.push("&rearr="+s+"_off")});var r=n.findBlockOn("rearrange-button","button").params.confirmText;confirm(r)&&location.replace(i+t.join(""))}),n.bindTo("eventlog-button","click",function(){var t=n.findBlockOn("eventlog-button","button").params.confirmText;confirm(t)&&(document.location.href+="&dump=eventlog")});var l=this.findBlocksInside({block:"input",modName:"type",modVal:"rearr-param"})||[],h=this.findBlocksInside({block:"select",modName:"type",modVal:"rearr-param"})||[],d=this.findBlocksInside({block:"checkbox",modName:"type",modVal:"rearr-param"})||[];l.length&&$.each(l,function(e,n){n.on("change",function(){t(n)})}),h.length&&$.each(h,function(e,n){n.on("change",function(){t(n)})}),d.length&&$.each(d,function(e,n){n.on("change",function(){t(n)})}),c&&c.bindTo("click",function(){n._uncheckAllCheckboxes(this,"rearrange")}),u&&u.bindTo("click",function(){n._uncheckAllCheckboxes(this,"wizard-debug")}),n._toggleSwitchTree(n,"switch-ftree","ftree"),n._toggleSwitchTree(n,"switch-wzrdebug","wzrdebug"),this._initVisibility(),BEM.blocks["serp-list"].on("loaded",this._onListLoaded,this)}},destruct:function(){BEM.blocks["serp-list"].un("loaded",this._onListLoaded,this)},_onListLoaded:function(){var t=this._isFullRelevance?this.cookieRelevSwitcher.isChecked():!0;t&&this._showInternal(this._getInternalItems())},_initVisibility:function(){this.sbh&&(this._isFullRelevance?1==localStorage.showRelev&&this.cookieRelevSwitcher.toggle():this._toggleInternal())},_showInternal:function(t){t.forEach(function(t){t.delMod("visibility")})},_hideInternal:function(t){t.forEach(function(t){t.setMod("visibility","hidden")})},_toggleInternal:function(){var t=this._isFullRelevance?this.cookieRelevSwitcher.isChecked():!1;t?(this._hideInternal(this.serpItemInternal),this._hideInternal(this._getInternalItems()),this._isFullRelevance&&(localStorage.showRelev=0,this.trigger("hideRelevance"))):(this._showInternal(this.serpItemInternal),this._showInternal(this._getInternalItems()),this._isFullRelevance&&(localStorage.showRelev=1,this.trigger("showRelevance")))},_getInternalItems:function(){return this.findBlockOutside("b-page").findBlocksInside("internal-item")},_toggleSwitchTree:function(t,e,n){t.bindTo(e,"click",function(){t.elem("info","type",n).show(),t.elem(e).hide()})},_uncheckAllCheckboxes:function(t,e){var n=this.findBlocksInside(e,{blockName:"checkbox",modName:"type",modVal:"components"});n.map(function(e){t.hasMod("checked","yes")?e.delMod("checked"):e.setMod("checked","yes")})}}),BEM.DOM.decl("internal-display-options",{onSetMod:{js:function(){this.relevDisplayOptions=this.canUseLocalStorage()&&localStorage.relevDisplayOptions?$.parseJSON(localStorage.relevDisplayOptions):{}}},canUseLocalStorage:function(){try{return"localStorage"in window&&null!==window.localStorage}catch(t){return!1}},toggleInfoElems:function(t,e){var n=this,i=e.hasMod("opened");t.elem("info").each(function(){var e=$(this),s=t.getMod(e,"type");if(t.hasMod(e,"type","data")){var r=t.findBlockInside(e,"internal-data");r.elem("button-wrap").each(function(){var t=$(this),e=r.getMod(t,"type"),s=r.hasMod(t,"disabled");!i&&s?r.setMod(t,"visibility","hidden"):i&&s&&r.delMod(t,"visibility"),!i&&n.canUseLocalStorage()&&(n.relevDisplayOptions.buttons||(n.relevDisplayOptions.buttons={}),n.relevDisplayOptions.buttons[e]=s?0:1)})}else!i&&t.hasMod(e,"disabled")?t.setMod(e,"visibility","hidden"):i&&t.hasMod(e,"disabled")&&t.delMod(e,"visibility"),!i&&n.canUseLocalStorage()&&(n.relevDisplayOptions[s]=t.hasMod(e,"disabled")?0:1)}),!i&&n.canUseLocalStorage()&&(localStorage.relevDisplayOptions=JSON.stringify(n.relevDisplayOptions))},_relevDisplayOptionsInit:function(t,e){var n=this;e.forEach(function(t){t.elem("info").each(function(){var i=$(this),s=t.getMod(i,"type"),r=n.findBlockInside(i,{blockName:"checkbox",modName:"type",modVal:"display-options"});r?r.toggleMod("visibility","hidden"):(n._buildCheckboxes(s,i,"display-options"),t.findBlockInside(i,{blockName:"checkbox",modName:"type",modVal:"display-options"}).on("change",function(){var r=this;this.hasMod("checked")?t.delMod(i,"disabled"):t.setMod(i,"disabled","yes"),n._uncheckAllInternalCb(n,e,r,s)}))})}),t.forEach(function(e){var i=e,s=i.findBlockInside("internal-data");i.elem("info").each(function(){var e=$(this),s=i.getMod(e,"type"),r=n.findBlockInside(e,{blockName:"checkbox",modName:"type",modVal:"display-options"});i.hasMod(e,"type","data")||(r?r.toggleMod("visibility","hidden"):(n._buildCheckboxes(s,e,"display-options"),i.findBlockInside(e,{blockName:"checkbox",modName:"type",modVal:"display-options"}).on("change",function(){var r=this;this.hasMod("checked")?i.delMod(e,"disabled"):i.setMod(e,"disabled","yes"),n._uncheckAllInternalCb(n,t,r,s)})))}),s.elem("button-wrap").each(function(){var e=$(this),r=s.getMod(e,"type"),o=n.findBlockInside(e,{blockName:"checkbox",modName:"type",modVal:"display-buttons-options"});o?o.toggleMod("visibility","hidden"):(n._buildCheckboxes(r,e,"display-buttons-options",n.relevDisplayOptions.buttons),i.findBlockInside(e,{blockName:"checkbox",modName:"type",modVal:"display-buttons-options"}).on("change",function(){var i=this;this.hasMod("checked")?s.delMod(e,"disabled"):s.setMod(e,"disabled","yes"),this.hasMod("focused")&&t.forEach(function(t){var e=t,s=e.findBlockOutside("button-wrap","internal-data"),o=e.findBlockInside("internal-data"),a=o.findBlockInside(s,{blockName:"checkbox",modName:"for",modVal:r});n._unCheckIternalItems(a,i,o,s)})}))})})},_uncheckAllInternalCb:function(t,e,n,i){n.hasMod("focused")&&e.forEach(function(e){var s=e,r=n.findBlockOutside("info","internal"),o=s.findBlockInside(r,{blockName:"checkbox",modName:"for",modVal:i});t._unCheckIternalItems(o,n,s,r)})},_buildCheckboxes:function(t,e,n,i){BEM.DOM.prepend(e,BEMHTML.apply({block:"checkbox",mods:{size:"s",checked:i?i&&0===this.relevDisplayOptions.buttons[t]?"":"yes":0!==this.relevDisplayOptions[t]&&"yes",type:n,"for":t},checkboxAttrs:{name:t}}))},_unCheckIternalItems:function(t,e,n,i){t&&!t.hasMod("focused")&&(e.hasMod("checked")?(t.setMod("checked","yes"),n.delMod(i,"disabled")):(t.delMod("checked"),n.setMod(i,"disabled","yes")))}},{live:function(){return this.liveBindTo("display-button","click",function(){var t=this;this.internals=this.findBlockOutside("main").findBlocksInside({blockName:"internal",modName:"for",modVal:"list"}),this.iternalItems=this.findBlockOutside("main").findBlocksInside("internal-item"),this.toggleMod("opened","yes"),this._relevDisplayOptionsInit(this.iternalItems,this.internals),this.internals.forEach(function(e){t.toggleInfoElems(e,t)}),this.iternalItems.forEach(function(e){t.toggleInfoElems(e,t)})}),!1}}),BEM.DOM.decl("internal-data",{onSetMod:{js:function(){var t=this;t.findBlocksInside({blockName:"check-button",modName:"action",modVal:"info-request"}).forEach(function(e){e.bindTo("click",function(e){t.getInfo(e,this)})})}},getInfo:function(t,e){function n(t){return s.dataName||alert("infoReqConfig.dataName empty"),t?(i.analyzeMetadata(e,t,s,o),void i.showDataInfo(e,t,o,s)):void alert("document is empty")}var i=this,s=e.params,r=s.customImpl,o=i.params;return s.filterProps=s.defaultFilters?$.extend(!0,{},s.defaultFilters):{},r?void i.callFuncWithErrHandling(function(){switch(s.name){case"Doc attr":i.showDocAttr(o,s);break;case"Meta response":i.showMetaResponse(o,s);break;case"Markers":i.showMarkers(e,o,s);break;case"richtree":i.showRichTree(e,o,s);break;case"CGI":i.showCgiParams(e,o,s);break;case"CGI sep":i.showCgiSepParams(e,o,s);break;case"CGI snip":i.showSnipCgiParams(e,o,s);break;case"CGI snip sep":i.showSnipCgiSepParams(e,o,s)}}):s.cache?void i.switchInfo(e,s):void this.doInfoRequest(t,o,s,1,s.defaultFilters,n,null)},doInfoRequest:function(t,e,n,i,s,r,o,a){var c=this,u=c.getInfoHandlerUrl(e,n.requestType),l=c.getInfoRequestUrlForMetasearch(e,n,i,s,void 0);t&&t.ctrlKey&&alert(l),c.doHttpRequest(u,{url:l},r,o,a)},doHttpRequest:function(t,e,n,i,s){$.ajax({type:"POST",url:t,cache:!1,data:e,dataType:s?"text":"json",success:function(t,e){n(t,e)},error:function(t,e){alert(e+"\nresponse text:\n"+t.responseText),i&&i()}})},analyzeMetadata:function(t,e,n,i){function s(){return o.Relevance?"BOOKS"==i.serverDescr&&0x8000000000000000==i.docRelevance?!0:o.Relevance!=i.docRelevance?(alert("report: incorrect data received from server. incorrect metadata.Relevance: "+o.Relevance+"\ndocUrl: "+unescape(i.docUrl)+"\ndocRelevance: "+i.docRelevance+"\n try the same query with &nocache=da"),!1):!0:!0}function r(){var t={},n=e.MetaData;if(!n)return null;var i=n.rows;return t.PageCount=1,t.PageNumber=1,i.map(function(e){t[e.cells[0]]=e.cells[1]}),t.PageCount=parseInt(t.PageCount),t.PageNumber=parseInt(t.PageNumber),t}var o=r(e);o?(n.pageCount=o.PageCount,n.currentPage=o.PageNumber,n.ignoreRelev||s()||t.setMod("error","yes")):(n.pageCount=1,n.currentPage=1)},showDataInfo:function(t,e,n,i,s){function r(t){var e=1;return t.map(function(t){count=t.cells.length,count>e&&(e=count)}),e}var o=this,a={},c=e[i.dataName],u=c.rows||c.data;if(s||!i.cache){if(!c)return void o.showData(t,i,"no data returned from the server",null,"error");if(u.length>0)if("table"===c.type){var l=r(c.rows),h=[];c.rows.forEach(function(t,e){var s="",r="td",a="cell",c=!1;switch(t.t){case"0":break;case"1":r="th",a="head",c=!0;break;case"2":s="red";break;case"3":r="th",a="head",c=!0;break;default:alert("unknown row type: "+t.t)}var u=t.cells.map(function(t,u){return formatCell=i.cellFormatter?o.getFormatCell(t,i.dataName,u+1,e,n):t,{elem:a,mods:{color:s},js:{pos:u},tag:r,content:o._getTableContent(a,formatCell,c)}});if(u.length<l)for(var d=u.length;u.length<l;d++)u.push({elem:a,mods:{color:s},js:{pos:d},tag:r,content:o._getTableContent(a,"",c)});if(0===e&&"0"===t.t)var p=u.map(function(t,e){return{elem:"head",mix:[{block:"internal-table",elem:"head",mods:{empty:"yes"}}],js:{pos:e},tag:"th",content:[{elem:a+"-inner",content:""},{block:"input",mods:{size:"s"},mix:[{block:"internal-table",elem:"filter-input"}],content:{elem:"control"}}]}});h.push({elem:"row",tag:"tr",content:u}),0===e&&"0"===t.t&&h.unshift({elem:"row",tag:"tr",content:p})}),a=[{block:"internal-arrow",mods:{visibility:"hidden"},content:"►"},{block:"internal-table",tag:"table",content:h}]}else"text"===c.type&&(a={block:"internal-data",elem:"data-text",content:o._base64Decode(c.data)});else a={block:"internal-data",elem:"data-text",mods:{state:"error"},content:"the table is empty"};s?BEM.DOM.update(s,BEMHTML.apply({block:"internal-data",elem:"info-inner",content:a})):(i.cache=BEMHTML.apply({block:"internal-data",elem:"info",mods:{type:i.dataName},content:{elem:"info-inner",content:a}}),BEM.DOM.append(o.domElem,i.cache)),i.cache=o.elem("info","type",i.dataName);var d=o.findBlockInside(i.cache,"internal-table");d&&o.toggleFilterDataTable(d),i.filterControls&&(BEM.DOM.prepend(i.cache,BEMHTML.apply(o.createFilterControls(i,e))),o.initFilter(t,i,n)),i.pageCount>1&&(BEM.DOM.prepend(i.cache,BEMHTML.apply(o.createPagerControls(i))),o.initPager(t,i,n)),s||o.switchInfo(t,i),o.showTableArrow(d,i)}},_getTableContent:function(t,e,n){return[{elem:t+"-inner",content:e},n?{block:"input",mods:{size:"s"},mix:[{block:"internal-table",elem:"filter-input"}],content:{elem:"control"}}:""]},toggleFilterDataTable:function(t){var e=this;t.bindTo("head","click",function(n){this.head=$(n.data.domElem),this.elem("head").each(function(){t.hasMod($(this),"filter")&&t.delMod($(this),"filter")}),this.setMod(this.head,"filter","yes"),e.doFilterDataTable(this)}).bindToDoc("click",function(t){this.head&&(this.containsDomElem($(t.target))||this.delMod(this.head,"filter"))}).bindTo("cell","click",function(){this.head&&this.delMod(this.head,"filter")})},doFilterDataTable:function(t){function e(t,e){return t.toLowerCase().indexOf(e.toLowerCase())+1}var n=t.findBlockInside(t.head,"input"),i=t.elemParams(t.head).pos;n.hasMod("focused")||n.val(""),n.setMod("focused","yes"),n.on("change",function(){var n=this.val();t.elem("cell").each(function(){var s=t.elemParams($(this)).pos;i===s&&(e($(this).text(),n)?$(this).parent().show():$(this).parent().hide())})})},switchInfo:function(t,e){if(e.cache.toggle(),t.toggleMod("state","active"),t.setMod("pressed","yes"),!t.hasMod("state","active")){var n=this.findBlockInside(e.cache,"internal-arrow");this.setMod(this.findElem(e.cache,"info-inner"),"overflow","yes"),n&&n.delMod("visibility"),this.afterCurrentEvent(function(){t.delMod("pressed")})}},showTableArrow:function(t,e){var n=this,i=n.findBlockInside(e.cache,"internal-arrow");t&&(t.domElem.width()>e.cache.width()&&(n.setMod(n.findElem(e.cache,"info-inner"),"overflow","yes"),i.delMod("visibility")),i&&i.bindTo("click",function(){n.delMod(n.findElem(e.cache,"info-inner"),"overflow"),this.setMod("visibility","hidden")}))},getInfoHandlerUrl:function(t,e){return"//"+t.httpHost+"/search/inforequest?request_type="+e+"&doc_url="+t.docUrl},getInfoRequestUrlForMetasearch:function(t,e,n,i,s){return url=t.searchUrlFromEventLog,url=this.patchSearchUrl(url),url+=this.getInfoCgiParamStr(t,e,n,i,s)},getInfoCgiParamStr:function(t,e,n,s,r){var o=t.docId.indexOf("-"),a=t.docId.substr(o+1),c="&info="+e.requestType+":docid:"+a;if(t.docIndGen&&(c+=","+t.docIndGen),1!=n&&(c+=";p:"+n),r&&(c+=";dl:true"),null!=s)for(i in s){var u;u="boolean"==typeof s[i]?s[i]?"true":"false":s[i],c+=";flt_"+i+":"+this._base64Encode(u)}return c+";json"},patchSearchUrl:function(t){var e=this.getParamValue(t,"metahost");e&&(t=t.replace("&metahost="+e,""));var n=this.getParamValue(t,"p");if(!n)return t;if(n=parseInt(n),0==n)return t;var i=this.getParamValue(t,"g"),s=new RegExp("([^\\.]+\\.[^\\.]+\\.)([^\\.]+)(.+)"),r=s.exec(i);if(null==r)return alert("cannot parse grouping: "+i),t;var o=parseInt(r[2])*(n+1),a=i.replace(s,r[1]+o+r[3]);return t=t.replace("g="+i,"g="+a)},getParamValue:function(t,e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var n=new RegExp("[\\?&]"+e+"=([^&#]*)"),i=n.exec(t);return null==i?void 0:i[1]},getFormatCell:function(t,e,n,i,s){function r(t,e){return{block:"link",url:t,content:e}}function o(t,e){return{tag:"div",attrs:e&&{style:"width:"+e+"px"},content:t}}function a(t){return{tag:"span",content:t}}var c=this;switch(e){case"RelevFactors":case"FastRelevFactors":switch(n){case 1:t&&(t=[i-2+".&nbsp;",r(document.location.href+"&pron=sortby"+t,t)])}break;case"fm":switch(n){case 1:if("LR"==t){var u="FOREIGN"==s.serverDescr?"f":"r",l="https://ossa2.yandex.ru/dlnk/dlnk.py?query="+s.docUrl+"&amp;opt="+u;t=r(l,"LR")}}break;case"MatrixNet":case"MatrixNetFactors":switch(n){case 1:case 2:case 3:var h=c.htmlDecode(t).split("; "),d=h.map(function(t){return"*"==t.charAt(0)?(t=t.substr(1),"<b>"+c.htmlEncode(t)+"</b>"):c.htmlEncode(t)});t={elem:"inner",tag:"span",content:d.join("<br/>")}}break;case"MangoQuotes":switch(n){case 1:t=o(t,400);break;case 2:t=o(t,200);break;case 3:t=o(t,200);break;case 5:t=o(t)}break;case"Snippets":switch(n){case 1:case 2:t=a(t)}break;case"SnippetHits":switch(n){case 1:case 2:case 3:t={tag:"span",content:t}}break;case"SnippetDump":switch(n){case 1:t={tag:"div",content:[{block:"link",tag:"a",attrs:{style:"font-size:large",href:"data:text/plain,"+t,title:"Download the snippet context",target:"_blank"},content:"Download the snippet context"},{tag:"br"},"Use arcadia/tools/snipmake/csnip to decode"]}}}return t},createFilterControls:function(t,e){function n(t,e){return{block:"checkbox",mods:{size:"s"},mix:[{block:"internal-filters",elem:"name"}],checkboxAttrs:{name:t,value:"1"},content:{elem:"label",content:e}}}function i(t,e){return{block:"input",mods:{size:"s"},name:t,mix:[{block:"internal-filters",elem:t}],value:"",content:[{elem:"label",content:e},{elem:"control"}]}}function s(t,e,n){var i=[];return e.map(function(t){i.push({tag:"option",attrs:{value:t[1]},content:t[0]})}),{block:"internal-select",mods:n&&{submitonchange:"yes"},tag:"select",attrs:{name:t},content:i}}function r(t){return{block:"button",mods:{size:"s",valign:"middle"},mix:[{block:"internal-filters",elem:"submit"}],content:t}}function o(t){return{block:"internal-filters",elem:"label",tag:"span",content:t}}var a=[];switch(t.dataName){case"MatrixNet":a.push(i("factname","Factor name filter:"),n("usebias","Add bias"),n("usecoeff","Mult. by monom weight"),n("nodefault","Non-default trees only"));break;case"MatrixNetFactors":a.push(i("factname","Factor name filter:"),n("usebias","Add bias"),n("usecoeff","Mult. by monom weight"));break;case"MangoFactors":var c=this.getDataTableRowArrays(e.FactorGroupTypes);a.push(o("Factor group type: "),s("factor_group_type",c,!0));break;case"FreshRelevFactors":var c=this.getDataTableRowArrays(e.FactorGroupTypes);a.push(o("Factor slice:"),s("factor_group_type",c,!0));break;case"Snippets":var c=this.getDataTableRowArrays(e.SnippetsSectionNames);a.push(o("View mode: "),s("algoname",c,!0));break;case"SnippetHits":a.push(n("unpackall","Unpack all sentences",!0),n("markup","Show markup"),o("Archive: "),s("archive",[["Link","link"],["Text","text"]],!0))}return a.push(r("Apply")),{block:"internal-filters",content:{block:"internal-filters",elem:"form",tag:"form",attrs:{action:"#"},content:a}}},getDataTableRowArrays:function(t){var e=[];return t.rows.map(function(t){var n=[];t.cells.map(function(t){n.push(t)}),e.push(n)}),e},initFilter:function(t,e,n){function i(){for(p in h)d[p]=h[p];c.forEach(function(t){var e=t.elem("checkbox").attr("name");e in d&&(d[e]=t.isChecked())}),u.forEach(function(t){var e=t.elem("input").attr("name");e in d&&(d[e]=t.val())}),l.forEach(function(t){var e=t.domElem.attr("name");e in d&&(d[e]=t.domElem.val())}),e.filterProps=d}function s(){c.forEach(function(t){var e=t.elem("checkbox").attr("name");e in d&&d[e]&&t.setMod("checked","yes")}),u.forEach(function(t){var e=t.elem("input").attr("name");e in d&&t.val(d[e])}),l.forEach(function(t){var e=t.domElem.attr("name");e in d&&t.domElem.val(d[e])})}var r=this,o=r.elem("info","type",e.dataName),a=r.findBlockInside(o,"internal-filters"),c=a.findBlocksInside("checkbox"),u=a.findBlocksInside("input"),l=a.findBlocksInside("internal-select"),h=e.defaultFilters,d=e.filterProps;a.bindTo("form","submit",function(){return i(),r.loadPage(t,1,n,e,o),!1}),l.forEach(function(t){t.hasMod("submitonchange","yes")&&t.bindTo("change",function(){a.elem("form").submit()})}),s()},createPagerControls:function(t){var e={block:"internal-pager",content:[{block:"button",mods:{size:"s",pseudo:"yes"},mix:[{block:"internal-pager",elem:"first-page"}],content:"⇤"},{block:"button",mods:{size:"s",pseudo:"yes"},mix:[{block:"internal-pager",elem:"prev-page"}],content:"←"},"page ",{block:"input",mods:{size:"s"},mix:[{block:"internal-pager",elem:"form-input"}],value:t.currentPage,content:{elem:"control"}}," of "+t.pageCount,{block:"button",mods:{size:"s",pseudo:"yes"},mix:[{block:"internal-pager",elem:"next-page"}],content:"→"},{block:"button",mods:{size:"s",pseudo:"yes"},mix:[{block:"internal-pager",elem:"last-page"}],content:"⇥"}]};return e},initPager:function(t,e,n){function i(){1!=e.currentPage&&c.loadPage(t,1,n,e,u)}function s(){e.currentPage!=e.pageCount&&c.loadPage(t,e.currentPage+1,n,e,u)}function r(){1!=e.currentPage&&c.loadPage(t,e.currentPage-1,n,e,u)}function o(){e.currentPage!=e.pageCount&&c.loadPage(t,e.pageCount,n,e,u)}function a(i){return!i||1>i||i>e.pageCount?void alert("incorrect page number"):void c.loadPage(t,i,n,e,u)}var c=this,u=c.elem("info","type",e.dataName),l=c.findBlockInside(u,"internal-pager"),h=l.findBlockOn("form-input","input");l.bindTo("first-page","click",function(){i(t,n,e,u)}),l.bindTo("prev-page","click",function(){r(t,n,e,u)}),l.bindTo("next-page","click",function(){s(t,n,e,u)}),l.bindTo("last-page","click",function(){o(t,n,e,u)}),h.bindTo("control","keydown",function(t){13===t.keyCode&&a(parseInt(h.val()),10)})},showDocAttr:function(t,e){var n=this.getInfoHandlerUrl(t,e.requestType),i=this.getInfoRequestUrlForMetasearch(t,e,1,void 0,void 0);this.openWindowUsingPost(e,n,{url:i})},openWindowUsingPost:function(t,e,n){if(!t.cache){var i=[];for(p in n)i.push({tag:"input",attrs:{type:"text",name:p,value:n[p]}});t.cache=BEMHTML.apply({block:"internal-data",elem:"form",tag:"form",mods:{type:t.requestType},attrs:{action:e,target:"_blank",method:"post",style:"display: none"},content:i}),BEM.DOM.append(this.domElem,t.cache)}this.elem("form","type",t.requestType).submit()},showMetaResponse:function(t,e){var n=this.getInfoHandlerUrl(t,e.requestType),i=t.searchUrlFromEventLog+"&hr=da";this.openWindowUsingPost(e,n,{url:i,content_type:"text/plain"})},showMarkers:function(t,e,n){e.markers.length>0?this.showData(t,n,e.markers):this.showData(t,n,"no markers",null,"error")},showRichTree:function(t,e,n){function i(e){s.showData(t,n,e,null,null,!0)}var s=this;return n.cache?void s.switchInfo(t,n):void s.doInfoRequest(null,e,n,1,null,i,null,!0)},showCgiParams:function(t,e,n){return this.shouldReask()?void this.showData(t,n,e.firstStageUrl):!1},showSnipCgiParams:function(t,e,n){return this.shouldReask()?void this.showData(t,n,e.fetchStageUrl):!1},showCgiSepParams:function(t,e,n){return this.shouldReask()?void this.showData(t,n,this.beatutifyQueryString(e.firstStageUrl),!0):!1},showSnipCgiSepParams:function(t,e,n){return this.shouldReask()?void this.showData(t,n,this.beatutifyQueryString(e.fetchStageUrl),!0):!1},shouldReask:function(){for(var t=["nocache=da","fsgta=_SearchHttpUrl","gta=_SearchHttpUrl"],e="",n=0;n<t.length;++n)-1==document.location.href.indexOf(t[n])&&(e+="&"+t[n]);return e?confirm("To see cgi params you should reask query with "+e+"?")?void(document.location.href+=e):!1:!0},beatutifyQueryString:function(t){function e(t){return"rearr"==t||"relev"==t||"snip"==t}function n(t){var e=t.split(";").sort(),n=[];e.map(function(t){var e=t.split("="),i=[];i.push({elem:"cell",tag:"td",content:e[0]},{elem:"cell",tag:"td",content:e[1]?e[1]:""}),n.push({elem:"row",tag:"tr",content:i})});var i={block:"internal-table",tag:"table",content:n};return i}function i(t){t=t.sort();var e=[];return t.map(function(t){e.push({block:"internal-table",elem:"cgi-param",tag:"span",content:t})}),e}function s(t){t=t.sort();var e=[];return t.map(function(t){e.push(n(t))}),e}function r(t,r){var o;return o=r.length>1?e(t)?s(r):i(r):e(t)?n(r[0]):r[0]}var o=[],a=[],c=this.getUrlParameters(t);for(var u in c)a.push(u);a=a.sort(),a.map(function(t){var e=c[t],n=[];n.push({elem:"cell",tag:"td",content:t},{elem:"cell",tag:"td",content:r(t,e)}),o.push({elem:"row",tag:"tr",content:n})});var l={block:"internal-table",tag:"table",content:o};return l},getUrlParameters:function(t){var e={},n=t.split("?");n.length>1&&(t=n[1]);var n=t.split("#");n.length>1&&(t=n[0]),n=t.split("&");for(var i=0;i<n.length;++i)if(n[i]){var s=n[i].split("="),r=s.length>1?unescape(s[1]):"";e[s[0]]?e[s[0]].push(r):e[s[0]]=[r]}return e},showData:function(t,e,n,i,s,r){e.cache||(e.cache=BEMHTML.apply({block:"internal-data",elem:"info",mods:{type:e.dataName},content:i?n:{block:"internal-data",elem:"data-text",mods:s&&{state:"error"},content:[r?{tag:"pre",content:n}:this.htmlEncode(n)]}}),BEM.DOM.append(this.domElem,e.cache),e.cache=this.elem("info","type",e.dataName)),this.switchInfo(t,e)},loadPage:function(t,e,n,i,s){var r=this,o=function(e){r.callFuncWithErrHandling(function(){r.analyzeMetadata(t,e,i,n),r.showDataInfo(t,e,n,i,s)})};r.doInfoRequest(null,n,i,e,i.filterProps,o,null)},callFuncWithErrHandling:function(t){try{t()}catch(e){var n="Unknown error in report: ";e&&(n+=e.message?e.message:e),alert(n)}},htmlEncode:function(t){return String(t).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},htmlDecode:function(t){return String(t).replace(/(&amp;)/g,"&").replace(/(&quot;)/g,'"').replace(/(&#39;)/g,"'").replace(/(&lt;)/g,"<").replace(/(&gt;)/g,">")},_base64Encode:function(t){function e(t){t=t.replace(/\r\n/g,"\n");for(var e="",n=0;n<t.length;n++){var i=t.charCodeAt(n);128>i?e+=String.fromCharCode(i):i>127&&2048>i?(e+=String.fromCharCode(i>>6|192),e+=String.fromCharCode(63&i|128)):(e+=String.fromCharCode(i>>12|224),e+=String.fromCharCode(i>>6&63|128),e+=String.fromCharCode(63&i|128))}return e}var n,i,s,r,o,a,c,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_,",l="",h=0;for(t=e(t);h<t.length;)n=t.charCodeAt(h++),i=t.charCodeAt(h++),s=t.charCodeAt(h++),r=n>>2,o=(3&n)<<4|i>>4,a=(15&i)<<2|s>>6,c=63&s,isNaN(i)?a=c=64:isNaN(s)&&(c=64),l=l+u.charAt(r)+u.charAt(o)+u.charAt(a)+u.charAt(c);return l},_base64Decode:function(t){function e(t){for(var e="",n=0,i=c1=c2=0;n<t.length;)i=t.charCodeAt(n),128>i?(e+=String.fromCharCode(i),n++):i>191&&224>i?(c2=t.charCodeAt(n+1),e+=String.fromCharCode((31&i)<<6|63&c2),n+=2):(c2=t.charCodeAt(n+1),c3=t.charCodeAt(n+2),e+=String.fromCharCode((15&i)<<12|(63&c2)<<6|63&c3),n+=3);return e}var n,i,s,r,o,a,c,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_,",l="",h=0;for(t=t.replace(/[^A-Za-z0-9\-\_\,]/g,"");h<t.length;)r=u.indexOf(t.charAt(h++)),o=u.indexOf(t.charAt(h++)),a=u.indexOf(t.charAt(h++)),c=u.indexOf(t.charAt(h++)),n=r<<2|o>>4,i=(15&o)<<4|a>>2,s=(3&a)<<6|c,l+=String.fromCharCode(n),64!=a&&(l+=String.fromCharCode(i)),64!=c&&(l+=String.fromCharCode(s));return l=e(l)}}),BEM.DOM.decl({block:"popup",modName:"autosize",modVal:"yes"},{getDefaultParams:function(){var t=this.__base();return t.offsetWithoutTail=5,t},repaint:function(){return this._saveDefault(),this.__base(),this.domElem.css({maxWidth:this.size.width,height:this.size.height}),this},_saveDefault:function(){this._defSize||(this._defSize=this.getPopupSize())},_resetDefault:function(){return this._defSize=null,this.domElem.css({maxWidth:"",height:""}),this},_getAvailableSpace:function(t){return this._owner?{width:this._getAvailableWidth(t),height:this._getAvailableHeight(t)}:$.extend({},this._defSize)},_getAvailableWidth:function(t){var e=BEM.DOM.getWindowSize(),n=e.width,i=t.offset,s=this._owner[0].getBoundingClientRect(),r=$.extend({},this._defSize);switch(t.to){case"left":n=s.left,"number"==typeof i&&(n-=i),"object"==typeof i&&(i.left&&(n+=i.left),i.right&&(n-=i.right));break;case"right":n=e.width-s.right,"number"==typeof i&&(n-=i),"object"==typeof i&&(i.left&&(n-=i.left),i.right&&(n+=i.right))}return("left"===t.to||"right"===t.to)&&(n-=this._tailPos?2*this.params.tail.width:this.params.offsetWithoutTail),Math.min(r.width,n)},_getAvailableHeight:function(t){var e=BEM.DOM.getWindowSize(),n=e.height,i=t.offset,s=this._owner[0].getBoundingClientRect(),r=$.extend({},this._defSize);switch(t.to){case"bottom":n=e.height-s.bottom,"number"==typeof i&&(n-=i),"object"==typeof i&&(i.bottom&&(n+=i.bottom),i.top&&(n-=i.top));break;case"top":n=s.top,"number"==typeof i&&(n-=i),"object"==typeof i&&(i.bottom&&(n-=i.bottom),i.top&&(n+=i.top))}return("bottom"===t.to||"top"===t.to)&&(n-=this._tailPos?2*this.params.tail.height:this.params.offsetWithoutTail),Math.min(r.height,n)},_calcTop:function(t){var e,n=this.__base(t),i=$(window).scrollTop(),s=BEM.DOM.getWindowSize(),r=this.getPlacingSize(),o=this.getOwnerPos(),a=this.getOwnerSize();return 0>n&&(n=0),e=Math.max(s.height+i,o.top+a.height),n+r.height>e&&(n=e-r.height),n},_calcLeft:function(t){var e,n=this.__base(t),i=$(window).scrollLeft(),s=BEM.DOM.getWindowSize(),r=this.getPlacingSize(),o=this.getOwnerPos(),a=this.getOwnerSize();return 0>n&&(n=0),e=Math.max(s.width+i,o.left+a.width),n+r.width>e&&(n=e-r.width),n},getPlacingSize:function(){return this._availSizes},_calcPlacingSize:function(t){return this._availSizes=this._getAvailableSpace(t),this._availSizes},_calcVisibilityFactor:function(){var t=this._defSize,e=this.getPlacingSize(),n=e.height*e.width,i=t.height*t.width;return n/i*100}}),function(t,e){function n(t){var e={};return"option"===t.item?(e={block:c,elem:"option",tag:"option",attrs:{value:t.value},content:t.content},t.disabled&&(e.attrs.disabled="disabled"),t.selected&&(e.attrs.selected="selected")):"optgroup"===t.item&&(e={elem:"option-group",tag:"optgroup",attrs:{label:t.label}},t.disabled&&(e.attrs.disabled="disabled"),e.content=Array.isArray(t.content)?t.content.map(function(t,e){return n(t,e)}):t.content),e.block=c,e}var i=t.browser.opera&&t.browser.version<12.1?"keypress":"keydown",s=t.browser,r=s.msie&&parseInt(s.version,10)<=10,o=s.msie&&8===parseInt(s.version,10),a=null,c="select";e.DOM.decl("select",{onSetMod:{js:function(){this._items=[],this._curItemIndex=-1,this._scrollableElemOutsidePopup=null,this._rowHeight=22,this.on("change",this._redrawParentPopup),this._getSelectedText()!==this._getButtonText()&&this.elem("control").trigger("change")},disabled:function(t,e){var n="yes"===e;this.elem("control").attr("disabled",n),this._getButton().setMod(t,e),n&&this.delMod("opened").delMod("focused")},focused:{yes:function(){return this.hasMod("disabled","yes")?!1:(this._useNativeControl()||this.bindTo(i,this._onKeyDown),void this.afterCurrentEvent(function(){this.trigger("focus")}))},"":function(){this._useNativeControl()||this.delMod("opened").unbindFrom(i),this.afterCurrentEvent(function(){this.trigger("blur")})}}},isDisabled:function(){return this.hasMod("disabled","yes")},isOpened:function(){return this.hasMod("opened","yes")},open:function(){return this.setMod("opened","yes")},close:function(){return this.delMod("opened")},val:function(e,n){if("undefined"==typeof e)return this.elem("control").val();var i,s=-1;return this.findElem("option").each(function(n){this.value===e&&!this.disabled&&(i=t(this).parent("optgroup")[0],!(i&&i.disabled))&&(s=n)}),s>-1&&this._selectedIndex(s,n),this},name:function(t){var e=this.elem("control");return arguments.length?(e.attr("name",t),this):e.attr("name")},_selectedIndex:function(e,n){var i=this._getSelectedIndex();return"undefined"==typeof e||e===i?i:(this.elem("control").prop("selectedIndex",e),this._useNativeControl()||(this._setButtonText(this._getSelectedText()),this._items[0]&&this.delMod(this._items,"selected").setMod(this._items.eq(e),"selected","yes")),this.trigger("change",t.extend({index:e,prev:i},n)),e)},setOptions:function(i){return i?(e.DOM.update(this.elem("control"),BEMHTML.apply(t.map(i,n))),this.redraw()):this},redraw:function(){return this._popup&&this._redrawList(),this.elem("control").trigger("change"),this},_useNativeControl:function(){return null!==a?a:a="none"!==this.elem("control").css("display")},_redrawParentPopup:function(){return this._isParentPopup()&&this._popup._parent.repaint(),this},_isParentPopup:function(){return this._popup&&this._popup._parent&&!this.hasMod("layout","fixed")},_onSelectChange:function(){var t=this;t._setButtonText(t._getSelectedText()),t.trigger("change",{index:t._getSelectedIndex(),prev:-1})},_onControlFocusInOut:function(t){this._useNativeControl()&&this.toggleMod("focused","yes","","focusin"===t.type)},_onMouseDown:function(t){this._isControlFocused()&&t.preventDefault()},_onKeyDown:function(t){var e=38===t.keyCode,n=40===t.keyCode,i=13===t.keyCode,s=32===t.keyCode;if(e||n){if(t.preventDefault(),!this.isOpened())return this.open();var r=this._items.length,o=this._curItemIndex;if(e&&0===o||n&&o>r-2)return;
if(r){var a=n?1:-1,c=0;for(c=o;c>=0&&r>=c;)if(c+=a,this._isSelectableItem(this._items.eq(c))){o=c;break}this._onEnterItem(this._items.eq(o),!0)}}(i||s)&&this._onEnterItem(this._items.eq(this._curItemIndex),!0,!0)},_onEnterItem:function(t,e,n){this.elem("button").attr("aria-activedescendant",t.attr("id"));var i=this._curItemIndex,s=this._getItemIndex(t),r=this._items;i>-1&&this.delMod(r.eq(i),"hovered"),s>-1&&(this._curItemIndex=s,this.setMod(r.eq(s),"hovered","yes")),n&&this._selectedIndex(this._curItemIndex),e&&this._scrollToCurrent()},_onLeaveItem:function(t){var e=this._curItemIndex;e>-1&&e===this._getItemIndex(t)&&(this.delMod(this._items.eq(e),"hovered")._curItemIndex=-1)},_onSelectItem:function(t){return this._isSelectableItem(t)&&this._selectedIndex(this._curItemIndex),this.close()},_onButtonFocus:function(){this.setMod("focused","yes")},_findScrollableElemOutsidePopup:function(){if(null===this._scrollableElemOutsidePopup){var t,e=this._getPopup().domElem;do e=e.parent(),t=e.css("overflow-y");while("scroll"!==t&&"auto"!==t&&"HTML"!==e.prop("tagName"));this._scrollableElemOutsidePopup=e}return this._scrollableElemOutsidePopup},_onButtonBlur:function(){if(this.isOpened()&&this._isPopupFocused())if(o){var t=this._findScrollableElemOutsidePopup(),e=t.scrollTop();this._focusButton(),t.scrollTop(e)}else this._focusButton();else this.delMod("focused")},_onButtonPress:function(){this.toggleMod("opened","yes","")},_focusButton:function(){return this._getButton().setMod("focused","yes"),this},_blurButton:function(){return this._getButton().delMod("focused"),this},_isPopupFocused:function(){try{return this._getPopup().containsDomElem(t(document.activeElement))}catch(e){return!1}},_getButtonText:function(){return this._getButton().elem("text").text()},_setButtonText:function(t){this._getButton().elem("text").text(t||"​"),r&&this.domElem.parent().css("outline","")},_isOutsideClicked:function(e,n){return this.containsDomElem(t(n.target))},_getItemIndex:function(e){return t.inArray(e.get(0),this._items)},_getSelectedText:function(){return this.elem("control").find(":selected").text()},_getSelectedIndex:function(){return this.elem("control").prop("selectedIndex")},_isSelectableItem:function(t){var e;return e=this.hasMod(t,"disabled","yes")||this.hasMod(t,"label","yes")?!1:!0},_getButton:function(){return this._button||(this._button=this.findBlockOn("button","button"))},_getRowHeight:function(){return this.findElem(this._getPopup().domElem,"item").outerHeight()},_isControlFocused:function(){try{return this.containsDomElem(t(this.__self.doc[0].activeElement))}catch(e){return!1}},destruct:function(){this._outPopup&&this._outPopup.un("outside-click"),this.delMod("opened");var t=this._popup;t&&t.domElem&&t.destruct(),this.__base.apply(this,arguments)},getDefaultParams:function(){return{rows:15,popupMods:{direction:"down"}}}},{live:function(){this.liveBindTo("control","change",function(){this._onSelectChange()}),this.liveBindTo("control","focusin focusout",function(t){this._onControlFocusInOut(t)}),this.liveBindTo("mousedown",function(t){this._onMouseDown(t)}),this.liveInitOnBlockInsideEvent("focus","button",function(){this._onButtonFocus()}).liveInitOnBlockInsideEvent("blur","button",function(){this._onButtonBlur()}).liveInitOnBlockInsideEvent("press","button",function(){this._onButtonPress()})}})}(jQuery,BEM),function(t,e){var n=t.browser.opera&&t.browser.version<15;e.DOM.decl("select",{onElemSetMod:{item:{hovered:function(){n&&this._popup.domElem.css("display","inline").css("display","")}}}})}(jQuery,BEM),function(t){function e(t,e,n){var i={block:"select",elem:"item",content:{elem:"text",tag:"span",content:e||" &nbsp; "},elemMods:{}};return n&&(i.elemMods=n),i}function n(t){function n(t,i){var c=t.length;if(c){var u=0;do{var l=$(t[u]),h=l.attr("disabled")&&{disabled:"yes"};if(l.is("optgroup")){a=!0,!l.prev().is("optgroup")&&u>0&&r.push(s),o.push(r),r=[],r.push(e(l,l.attr("label"),$.extend({label:"yes"},h,i))),n(l.children(),$.extend({inner:"yes"},h,i));var d=r;r=o.pop(),r.push({block:"select",elem:"group",content:d})}else r.push(e(l,l.text(),$.extend(h,l.is(":selected")&&{selected:"yes"},i)))}while(++u<c||(a=!1))}}var i="select",s={block:i,elem:"separator",tag:"i"},r=[],o=[],a=!1;return n(t),BEMHTML.apply(r)}t.DOM.decl("select",{onSetMod:{js:function(){this.__base.apply(this,arguments),this._initButton()}},_initButton:function(){},_redrawList:function(){var e,i=this,s=this._getPopup().domElem;return t.DOM.update(this.findElem(s,"list"),n(this.elem("control").children())),e=this.findElem(s,"item"),this._curItemIndex=-1,this._items=e.filter(function(){return!i.hasMod($(this),"label","yes")}),this}})}(BEM),BEM.DOM.decl("select",{_redrawList:function(){this.__base();var t=this;this.bindTo(t._items,{mouseup:function(e){1===e.which&&(e.preventDefault(),t._onSelectItem(e.data.domElem))},mouseover:function(e){t._onEnterItem(e.data.domElem)},mouseout:function(e){t._onLeaveItem(e.data.domElem)}})}}),BEM.DOM.decl("select",{onSetMod:{opened:{yes:function(){if(this.hasMod("disabled","yes"))return!1;this._drawPopup();var t=this.findElem(this._popup.domElem,"item","selected","yes");this.elem("button").attr({"aria-activedescendant":t.attr("id"),"aria-expanded":!0})},"":function(){this.elem("button").attr("aria-expanded",!1).removeAttr("aria-activedescendant"),this._getPopup().hide()}}},_getPopupContent:function(t){return{block:t,elem:"list"}},_getPopupMix:function(t){return{block:t,elem:"popup",elemMods:{}}},_getPopup:function(){if(this._popup)return this._popup;var t=this,e=t.params,n=t.__self.getName(),i=this._getPopupContent(n),s=this._getPopupMix(n),r={animate:"no"},o={directions:[{to:"bottom",axis:"left",offset:{top:8}},{to:"top",axis:"left",offset:{bottom:8}}]};["size","layout","theme","width"].forEach(function(e){t.hasMod(e)&&(s.elemMods[e]=t.getMod(e))}),$.extend(s.elemMods,e.elemPopupMods),$.extend(r,e.popupMods),$.extend(o,e.popupParams);var a=$(BEMHTML.apply({block:"popup",mods:r,mix:s,js:o,content:{elem:"content",content:i}}));return(t._popup=t.findBlockOn(a,"popup")).on({show:function(){t._curItemIndex=t._getSelectedIndex();var e=t._items.eq(t._curItemIndex);t.delMod(t._items,"selected").setMod(e,"hovered","yes").setMod(e,"selected","yes")},"outside-click":function(e,n){t._isOutsideClicked(e,n)?e.preventDefault():t._blurButton()},hide:function(){t.delMod("opened").delMod(t._items,"hovered").delMod(t.findElem(t._popup.domElem,"popup"),"scrollable")}}).bindTo("mousedown",function(t){t.preventDefault()}),BEM.DOM.append(BEM.DOM.scope,t._popup.domElem),t._redrawList(),t._outPopup=t.findBlockOutside("button","popup"),t._outPopup&&t._outPopup.on("outside-click",function(e,n){t._popup.containsDomElem($(n.target))&&e.preventDefault()}),t._popup},_calcPopupDimensions:function(){this._popupContent||(this._popupContent=this._getPopup().findBlockInside("popup").elem("content"));var t=parseInt(this.params.rows,10)||!1;if(t&&this.findElem(this._popupContent,"item").size()>t){this._rowHeight=this._getRowHeight();var e=parseInt(this._getPopup().domElem.css("height"),10);if(e>t*this._rowHeight)this._getPopup().setSize({height:t*this._rowHeight}),this.setMod(this.findElem(this._getPopup().domElem,"popup"),"scrollable","yes");else{var n=t*this._rowHeight+"px";this._getPopup().domElem.css("height")!==n&&this._getPopup().setSize({height:n})}}else this._getPopup().setSize({height:"auto"})},_drawPopup:function(){var t=this.findBlockInside("select"),e=this._getPopup();e.show(t),this._calcPopupDimensions(),this._scrollToCurrent()},_scrollToCurrent:function(){if(this._popupContent&&!(this._curItemIndex<0)){var t,e=this._items.eq(this._curItemIndex).get(0).offsetTop,n=this._popupContent,i=n.scrollTop(),s=e-i,r=2*this._rowHeight;s>n.height()-r?t=e-r:i&&r>s&&(t=e-n.height()+r),t&&n.scrollTop(t)}}},{SHADOW_OFFSET:1}),BEM.DOM.decl("tumbler",{onSetMod:{js:function(){this._check(this.isChecked());var t=this.elem("button").width();this._maxLeft=this.elem("box").width()-t,this._buttonWidth=t;var e=this.hasMod("disabled","yes");this.elem("button").attr({role:"button",tabindex:e?-1:0,"aria-disabled":e,"aria-pressed":this.hasMod("checked")}),this.elem("input").attr({tabindex:-1,"aria-hidden":!0})},checked:function(t,e){return this.isDisabled()?!1:(this._check(e),this.elem("button").attr("aria-pressed","yes"===e),void this.trigger("change",{checked:!!e,value:this.val()}))},disabled:function(t,e){var n="yes"===e;this.elem("button").attr({tabindex:n?-1:0,"aria-disabled":n})}},toggle:function(){return this.toggleMod("checked","yes")},uncheck:function(){return this.delMod("checked")},check:function(){return this.setMod("checked","yes")},val:function(t){if("undefined"==typeof t)return this.elem("input").filter(":checked").val();var e=this.elem("input").filter(function(){return this.value===t});return e.length&&this[e.is(this.buildSelector("input","side","right"))?"check":"uncheck"](),this},isChecked:function(){return this.hasMod("checked")},isDisabled:function(){return this.hasMod("disabled","yes")},_check:function(t){return this.elem("input","side",t?"right":"left").attr("checked",!0)},_focus:function(){return this.elem("button").focus(),this},_onChange:function(){return this.isDisabled()?this:this.toggle()},_onInputClick:function(t){return"left"===this.getMod(t.data.domElem,"side")?this.uncheck():this.check()},_getXFromEvent:function(t){return"number"==typeof t.clientX?t.clientX:t.originalEvent.touches[0].clientX},_setPositions:function(t,e){var n=Math.min(Math.max(t+e,0),this._maxLeft);this.elem("button").css("left",n),this.elem("sticker","position","left").css("width",n+this._buttonWidth),this.elem("sticker","position","right").css("width",this._maxLeft-n+this._buttonWidth)}},{live:function(){var t={mouseover:{name:"hovered",val:"yes"},mouseout:{name:"hovered"},mousedown:{name:"pressed",val:"yes"},mouseup:{name:"pressed"},focusin:{name:"focused",val:"yes"},focusout:{name:"focused"}},e={over:"mouseover mouseout",start:"mousedown",stop:"mouseup touchend",move:"mousemove touchmove"},n=function(e){var n=t[e];this.setMod(n.name,n.val||"")};this.liveBindTo([e.start,e.stop,e.over].join(" "),function(t){this.isDisabled()||n.call(this,t.type)}).liveBindTo("label",e.stop,function(){this.isDisabled()||this._focus()}).liveBindTo("box",e.stop,function(t){1===t.which&&this._onChange(),this.isDisabled()||this.afterCurrentEvent(function(){this._focus()})}).liveBindTo("button",e.stop,function(t){n.call(this,t.type),t.stopPropagation()}).liveBindTo("input","change",function(t){this._onInputClick(t)}).liveBindTo("input","focusin",function(){this._focus()}).liveBindTo("button","focusin focusout",function(t){this.isDisabled()||n.call(this,t.type)}).liveBindTo("button","keydown",function(t){if(!(t.shiftKey||t.ctrlKey||t.altKey||t.metaKey))switch(t.which){case 32:case 37:case 38:case 39:case 40:t.preventDefault()}}).liveBindTo("button","keyup",function(t){if(!(t.shiftKey||t.ctrlKey||t.altKey||t.metaKey)){var e=t.which;13===e||32===e?this._onChange():37===e||38===e?this.uncheck():(39===e||40===e)&&this.check()}}).liveBindTo("button",e.start,function(t){if(!this.isDisabled()&&1===t.which){var i=this._getXFromEvent(t),s=this.elem("button").position().left,r=!1,o=!1;this.bindToDoc(e.move,$.throttle(function(t){r=!0,o||this._setPositions(s,this._getXFromEvent(t)-i)},30)).bindToDoc(e.stop,function(t){o=!0,this.unbindFromDoc(e.move+" "+e.stop),r?(this[parseInt(this.elem("button").css("left"),10)>this._maxLeft/2?"check":"uncheck"](),this.elem("button").css("left",""),this.elem("sticker").css("width","")):this.toggle(),n.call(this,t.type)}),t.preventDefault()}})}}),BEM.DOM.decl("i-debugger",{onSetMod:{js:function(){this.bindTo("name","click",function(t){this.toggleMod(t.data.domElem.parent(),"collapsed","yes","")}).bindTo("name","dblclick",function(t){this.toggleMod(t.data.domElem.parent().children(".i-debugger__val").children(".i-debugger__node"),"collapsed","yes","")})}}}),BEM.DOM.decl("mobile-suggest",{onSetMod:{js:function(){this.findBlocks().bindEvents(),this.header.setMod("mobile-suggest","yes"),this.fade.setMod("mobile-suggest","yes")}},findBlocks:function(){return this.rejectButton=this.findBlockInside({block:"button",modName:"action",modVal:"reject"}),this.acceptButton=this.findBlockInside({block:"button",modName:"accept",modVal:"yes"}),this.page=this.findBlockOutside("b-page"),this.header=this.page.findBlockInside("header"),this.fade=this.page.findBlockInside({block:"fade",modName:"region",modVal:"main"}),this},bindEvents:function(){return this.rejectButton.on("click",this._onReject,this),BEM.blocks["b-page"].on("scroll",this._onPageScroll,this).on("change",this._onPageChange,this),this},destruct:function(){this.__base.apply(this,arguments),this.rejectButton.un("click",this._onReject,this),BEM.blocks["b-page"].un("scroll",this._onPageScroll,this).un("change",this._onPageChange,this)},_onReject:function(){var t=this.params,e=t.today,n=$.cookie("nmb")?"2":"1:"+e;this.fold(),$.cookie("nmb",n,{expires:365,path:"/"+t.service})},_onPageScroll:function(){this.domElem.css("left",BEM.DOM.win.scrollLeft())},fold:function(){this.header.delMod("mobile-suggest"),this.fade.delMod("mobile-suggest"),this.destruct()},_onPageChange:function(){this.updateMobileLink()},updateMobileLink:function(){var t=this.acceptButton.domElem.attr("href"),e=BEM.blocks.uri.getParamValue(t,"retpath"),n=BEM.blocks.uri.getParamValue("text"),i=BEM.blocks.uri.parse(e),s=_.isEmpty(n)?i.getRoot():i.getRoot()+"/search?text="+encodeURIComponent(n);this.acceptButton.domElem.attr("href",BEM.blocks.uri.setParam(t,"retpath",s))}}),BEM.DOM.decl("cookies",{onSetMod:{js:function(){this.__self.save(this.params.cookies)}}},{save:function(t){_.forEach(t,function(t){document.cookie=t})}}),function(){BEM.DOM.decl("b-mooa",{onSetMod:{js:function(){var e=this,n=e.params.checker,i=function(){e._show()};if($.isFunction(n))n.call(e,i);else if("string"==typeof n){if(!t[n])throw'b-mooa: undefined checker "'+n+'"';t[n].call(e,i)}else n&&i()},loading:{progress:function(){var t=this;BEM.blocks["i-loader"].load("b-mooa",t.params.bundlePath,function(){t._onBundleSuccess()},function(){t._onBundleError()},t.params.lang)}}},_show:function(){this.setMod("visibility","visible")},_onOpenClick:function(){this.setMod("loading","progress")},_onBundleError:function(){this.delMod("loading")},getDefaultParams:function(){return{checker:function(t){BEM.blocks["i-user-services"].get(function(e){e.sids[668]&&t()})},bundlePath:BEM.blocks["i-global"].param("lego-static-host")+"/blocks-desktop/b-mooa/_b-mooa.bembundle.js",standId:"test",apiUrl:"http://b.yandex.ru/api/1.0/",panels:[{type:"bug",title:BEM.I18N("b-mooa","error")},{type:"idea",title:BEM.I18N("b-mooa","idea")}],lang:BEM.blocks["i-global"].param("lang")}}},{regChecker:function(e,n){t[e]=n},live:function(){return this.liveBindTo("open","leftclick",function(){this._onOpenClick()}),!1}});var t={}}(),function(t,e){var n,i={},s=BEM.decl("i-loader",{},{load:function(t,r,o,a,c){"string"!=typeof r&&(c=a,a=o,o=r,r=t),void 0===c&&void 0!==a&&"function"!=typeof a&&(c=a,a=void 0);var u=i[t];if(u)return void(u.successFns?(u.successFns.push(o),a&&u.errorFns.push(a)):this.afterCurrentEvent(function(){o()}));var l=document,h=l.createElement("script"),d=function(){s._error(t)},p=r.split("."),f=p.splice(-2,2);c&&f.unshift("string"==typeof c?c:BEM.blocks["i-global"].param("lang")),e.browser.msie&&e.browser.version<=8&&f.splice(-1,0,"ie"),h.type="text/javascript",h.charset="utf-8",h.src=p.concat(f).join("."),h.onerror=d,this.afterCurrentEvent(function(){(n||(n=e("head")[0])).insertBefore(h,n.firstChild)}),i[t]={successFns:[o],errorFns:a?[a]:[],timer:setTimeout(d,2e4)}},loaded:function(e){var n,r=i[e.id];if(clearTimeout(r.timer),e.js&&e.js(),e.css&&s._appendCss(e.css),e.hcss){var o=t._ycssjs;n=[],e.hcss.forEach(function(t){if(o){if(t[0]in o)return;o(t[0])}n.push(t[1])}),n.length&&s._appendCss(n.join(""))}if(e.hcss2){var a,c=e.hcss2,u=document,l=u.createElement("div"),h=u.body,d="ycssjs_";n=[],l.style.position="absolute",h.insertBefore(l,h.lastChild.nextSibling),a=window.getComputedStyle?window.getComputedStyle(l):l.currentStyle,Object.keys(c).forEach(function(t){l.className=d+t,"-"===a.top.charAt(0)||n.push(c[t])}),a=null,h.removeChild(l),n.length&&s._appendCss(n.join(""))}for(var p,f=r.successFns;p=f.shift();)p();delete r.successFns},_error:function(t){var e,n=i[t],s=n.errorFns;for(clearTimeout(n.timer);e=s.shift();)e();delete i[t]},_appendCss:function(t){var e=document.createElement("style");e.type="text/css",n.insertBefore(e,n.firstChild),e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}})}(this,jQuery),BEM.DOM.decl("b-mooa",{onSetMod:{js:function(){var t=this,e=this.params.standId;this.__self.regChecker("beta",function(n){BEM.blocks["i-user-services"].get(function(i){i.sids[669]||i.attributes&&i.attributes.staff===!0&&"string"==typeof i.attributes["staff-login"]?(t.setMod("internal","yes"),t.params.standId=e,n()):i.sids[668]&&t.params.betaStandId&&(t.params.standId=t.params.betaStandId,n())})}),this.__base.apply(this,arguments)}}}),BEM.DOM.decl("b-page",{bindEvents:function(){return this.__base.apply(this,arguments),BEM.blocks["pane2-api"].on("fullscreen:enter",this._onFullscreenEnter,this).on("fullscreen:exit",this._onFullscreenExit,this),this},destruct:function(){BEM.blocks["pane2-api"].un("fullscreen:enter",this._onFullscreenEnter,this).un("fullscreen:exit",this._onFullscreenExit,this),this.__base.apply(this,arguments)},_onFullscreenEnter:function(){this.setMod("fullscreen","yes")},_onFullscreenExit:function(){this.setMod("fullscreen","no")}}),BEM.DOM.decl("b-page",{onSetMod:{js:function(){this.__base.apply(this,arguments),BEM.blocks.internal.on("showRelevance",this._onShowRelevance,this).on("hideRelevance",this._onHideRelevance,this)}},destruct:function(){this.__base.apply(this,arguments),BEM.blocks.internal.un("showRelevance",this._onShowRelevance,this).un("hideRelevance",this._onHideRelevance,this)},_onShowRelevance:function(){this.setMod("relevance","yes")},_onHideRelevance:function(){this.setMod("relevance","no")}}),BEM.DOM.decl("sticky-controller",{onSetMod:{js:function(){this._page=this.findBlockOn("b-page"),this._page.on("change",this._onPageChange,this),this._header=this.findBlockInside("header"),this._onPageChange()}},bindEvents:function(){BEM.blocks["pane2-api"].on("pane:open pane:close",this._onPaneToggle,this),BEM.blocks["b-page"].on("scroll",this._onScroll,this),BEM.blocks.location.on("change",this._onLocationChange,this)},unbindEvents:function(){BEM.blocks["pane2-api"].un("pane:open pane:close",this._onPaneToggle,this),BEM.blocks["b-page"].un("scroll",this._onScroll,this),BEM.blocks.location.un("change",this._onLocationChange,this)},_onScroll:function(){this._isPane2Opened||this._setPosition()},_getPaneController:function(){return this.paneController||(this.paneController=this.findBlockInside("pane2-controller"))},_onPageChange:function(){this._stickyRelates=null,this._getRelates()?(this._counted=!1,this._getPaneController().hasInitialItem()?(this.fixHeader(),this._isPane2Opened=!0):(this._header.setMod("fixed",""),this._isPane2Opened=!1),this.bindEvents()):this.fixHeader()},_onLocationChange:function(){this.unbindEvents()},fixHeader:function(){this._header.setMod("fixed","yes")},_getRelates:function(){return this._stickyRelates||(this._stickyRelates=this.findBlockInside("sticky-relates"))},_count:function(){this._counted||(w(null,"/image/new/sticky/show"),this._counted=!0)},_onPaneToggle:function(){this._isPane2Opened=!this._isPane2Opened,this._scrolledEnough()&&this._getRelates().toggle(),this._header.toggleMod("fixed","yes","")},_setPosition:function(){this._shouldShowRelates&&this._count(),this._shouldToggleRelates()&&this._getRelates().toggle()},_shouldToggleRelates:function(){return this._shouldShowRelates()||this._shouldHideRelates()},_shouldShowRelates:function(){return this._scrolledEnough()&&!this._getRelates().isVisible()},_shouldHideRelates:function(){return!this._scrolledEnough()&&this._getRelates().isVisible()},_scrolledEnough:function(){return BEM.DOM.win.scrollTop()>218}}),BEM.DOM.decl({block:"sticky-controller",modName:"with-input",modVal:"yes"},{bindEvents:function(){this.__base.apply(this,arguments),BEM.blocks["sticky-relates"].on("animated",this._onStickyAnimatedEnd,this)},unbindEvents:function(){this.__base.apply(this,arguments),BEM.blocks["sticky-relates"].un("animated",this._onStickyAnimatedEnd,this)},_onLocationChange:function(){this.__base.apply(this,arguments),this._getRelates().isSearchArrow()&&this._moveSearchArrow2Header()},_onPageChange:function(){this.__base.apply(this,arguments),this._arrow=null,this._suggestForm=null,this._suggest=null},_getArrow:function(){return this._arrow||(this._arrow=this.findBlockInside("arrow"))},_getSuggestForm:function(){return this._suggestForm||(this._suggestForm=this._getArrow().findBlockInside("suggest2-form"))},_getSuggest:function(){return this._suggest||(this._suggest=this.findBlockInside("suggest2"))},_onPaneToggle:function(){this.__base.apply(this,arguments),this._scrolledEnough()&&(this._isPane2Opened?this._moveSearchArrow2Header():this._moveSearchArrow2Panel())},_setPosition:function(){this._shouldShowRelates()&&this._moveSearchArrow2Panel(),this._shouldHideRelates()&&this._moveSearchArrow2Header(),this.__base.apply(this,arguments)},_moveSearchArrow2Panel:function(){var t=this._getRelates();t.setArrowContent(this._getArrow().domElem),this._getSuggest().setOwner(t),this._getSuggest().setMod("sticky-relates","yes")},_moveSearchArrow2Header:function(){this._header.elem("search").html(this._getArrow().domElem),this._getRelates().setArrowContent(this._getArrow().domElem[0].cloneNode(!0)),this._getSuggest().setOwner(this._getSuggestForm().getOwner()),this._getSuggest().delMod("sticky-relates")},_onStickyAnimatedEnd:function(){var t=this._getRelates();t.isVisible()||t.elem("input").empty()}}),BEM.DOM.decl("sticky-relates",{toggle:function(){this.toggleMod("visibility","visible","")},setArrowContent:function(t){this.elem("input").html(t)},isSearchArrow:function(){return!!this.findBlockInside("arrow")},isVisible:function(){return this.hasMod("visibility","visible")},_onTransitionEnd:function(t){"transform"===t.originalEvent.propertyName&&this.trigger("animated")}},{live:function(){this.liveBindTo(BEM.blocks["i-ua"].getTransitionEndEvent(),function(t){this._onTransitionEnd(t)})}}),BEM.DOM.decl("head-filter",{getDefaultParams:function(){return{reloadParams:["p","img_url","rpt","pos"],pagesToFilter:{"search-by-image":["rpt","img_url"],copy:["rpt","img_url"],similar:["rpt","img_url"]},popupDelay:1e3}},onSetMod:{js:function(){this.hasMod("disabled","yes")||this.findBlocks().bindEvents()},hovered:function(t,e){"yes"===e?this.setColorIcon():this.setBlackIcon()},menu:{hidden:function(){this.setBlackIcon(),BEM.blocks["i-keyrouter"].un("esc",this._onEsc,this)},visible:function(){this.setBlackIcon(),this.bindTo("item","keypress",this._onItemSelect),BEM.blocks["i-keyrouter"].on("esc",this._onEsc,this)}},type:function(t,e){this.params.selected=e,this.trigger("saved"),this.updatePage().updateButton().updateTooltip().updateMenu().closeMenu()},disabled:function(t,e){this.button.setMod("disabled",e)}},destruct:function(){this.unbindEvents(),this.__base.apply(this,arguments)},findBlocks:function(){return this.dropdown=this.findBlockInside("dropdown-menu"),this.infoPopup=this.findBlockInside({block:"popup",modName:"type",modVal:"info"}),this.button=this.dropdown.findBlockInside("button"),this.filterPopup=this.dropdown.findBlockInside("popup"),this.menu=this.filterPopup.findBlockInside("b-menu-vert"),this.elem("item"),this},bindEvents:function(){return this.filterPopup.on("show",this._onMenuShow,this).on("hide",this._onMenuHide,this),this.infoPopup.on("show",this._onInfoShow,this).on("hide",this._onInfoHide,this),BEM.blocks["b-page"].on("warning",this._onWarning,this),this.bindTo("mouseover mouseout",this._onMouseMove,this),this.menu.bindTo(this.menu.elem("item"),"click",this.changeThis(this._onItemClick)),this},unbindEvents:function(){this.filterPopup.un("show",this._onMenuShow,this).un("hide",this._onMenuHide,this),this.infoPopup.un("show",this._onInfoShow,this).un("hide",this._onInfoHide,this),BEM.blocks["b-page"].un("warning",this._onWarning,this)},_onItemSelect:function(t){this.selectItem($(t.target))},_onEsc:function(){this.filterPopup.hide(),this.domElem.focus()},_onWarning:function(t,e){this.params.warning=e.pornoWarning,e.onlyFamily?(this.setMod("type","family").setMod("disabled","yes"),this.dropdown.params.switcherBlock=!0):(this.delMod("disabled"),this.dropdown.params.switcherBlock=!1)},_onMouseMove:function(t){this.hasMod("disabled","yes")||this.setMod("hovered","mouseover"===t.type?"yes":"")},_onItemClick:function(t){return this.selectItem($(t.target)),!1},_onMenuShow:function(){this.infoPopup.isShown()&&this.infoPopup.hide(),this.setMod("menu","visible")},_onMenuHide:function(){this.setMod("menu","hidden")},_onInfoShow:function(){this.closeMenu().setColorIcon().setMod("info","visible")},_onInfoHide:function(){this.delMod("info").setBlackIcon()},selectItem:function(t){var e=this.elemParams(t).value;e&&this.setMod("type",e),BEM.blocks["b-statcounter"].hit({params:{query:{safe:e}}})},updateMenu:function(){var t=this.getFilterData(this.params.selected),e=this.menu;return e.delMod(e.elem("item","selected","yes"),"selected").setMod(e.elem("item","type",t.type),"selected","yes"),this},updateButton:function(){var t=this.getFilterData(this.params.selected);return this.button.elem("title").text(t.title),this},updateTooltip:function(){var t=this.getFilterData(this.params.selected),e=this.findBlockOn("tooltip-owner");return e&&e.setContent(t.tooltip),this},updatePage:function(){var t=this.params,e=this.getFilterData(t.selected),n=BEM.blocks["i-global"],i=BEM.blocks.location.getInstance().getState(),s=i.url.replace("/images/images/","/images/"),r=BEM.blocks.uri.delParams(s,this.getFilteredParams(n.param("page")));return this.saveFilter({save:1,retpath:t.needRefresh?r:t.retpath,yandexuid:n.param("yandexuid"),family:e.value}),this},saveFilter:function(t){var e=this.params,n=e.saveUrl;e.needRefresh?location.href=n+BEM.blocks.uri.buildRelativeUrl("",t):BEM.create("i-request_type_ajax",{url:n,type:"iframe",cache:!1,dataType:"html"}).get(t,this.reloadPage.bind(this),this.reloadPage.bind(this))},reloadPage:function(){var t=BEM.blocks["i-global"].param("page");return BEM.blocks.location.getInstance().change({url:BEM.blocks.uri.delParams(this.getFilteredParams(t)),params:{ncrnd:~~(1e4*Math.random())},history:!1}),this.checkInfoMessage(!0)},checkInfoMessage:function(t){var e=this.params,n=this.getFilterData(e.selected).type;return this.infoPopup?(t&&"unlimited"===n&&this.showInfo(),this):this},showInfo:function(){return this.prepareInfo(),setTimeout(this.changeThis(this.showInfoPopup),this.params.popupDelay),this},prepareInfo:function(){var t=this.getFilterData(this.params.selected),e=this.infoPopup;return e.setMod("filter",t.type),e.elem("content-wrap").html(t.info),this},showInfoPopup:function(){var t=this.infoPopup;return t.show(this.elem("icon")),this.setMod("info","visible")},closeMenu:function(){return this.filterPopup.isShown()&&this.filterPopup.hide(),this},getFilteredParams:function(t){var e=this.params.reloadParams,n=this.params.pagesToFilter[t];return n?_.difference(e,n):e},getFilterData:function(t){for(var e=this.params.filters,n=0,i=e.length;i>n;n++)if(e[n].type===t)return e[n]},setColorIcon:function(){return this.setMod("color","yes")},setBlackIcon:function(){return setTimeout(this.changeThis(function(){this.isActive()||this.setMod("color","no")}),150),this},isActive:function(){return this.hasMod("hovered","yes")||this.hasMod("menu","visible")||this.hasMod("info","visible")}}),function(){"use strict";var t="undefined"!=typeof module&&module.exports,e="undefined"!=typeof Element&&"ALLOW_KEYBOARD_INPUT"in Element,n=function(){for(var t,e,n=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],i=0,s=n.length,r={};s>i;i++)if(t=n[i],t&&t[1]in document){for(i=0,e=t.length;e>i;i++)r[n[0][i]]=t[i];return r}return!1}(),i={request:function(t){var i=n.requestFullscreen;t=t||document.documentElement,/5\.1[\.\d]* Safari/.test(navigator.userAgent)?t[i]():t[i](e&&Element.ALLOW_KEYBOARD_INPUT)},exit:function(){document[n.exitFullscreen]()},toggle:function(t){this.isFullscreen?this.exit():this.request(t)},raw:n};return n?(Object.defineProperties(i,{isFullscreen:{get:function(){return!!document[n.fullscreenElement]}},element:{enumerable:!0,get:function(){return document[n.fullscreenElement]}},enabled:{enumerable:!0,get:function(){return!!document[n.fullscreenEnabled]}}}),void(t?module.exports=i:window.screenfull=i)):void(t?module.exports=!1:window.screenfull=!1)}(),Date.now||(Date.now=function(){return(new Date).getTime()}),BEM.DOM.decl("b-page",{bindEvents:function(){return this.__base.apply(this,arguments),this._location.on("b-page_type_search-by-image",this._onCbirSearch,this),this},_onCbirSearch:function(t,e){this.checkCacheKey()&&this.loadPage(e,"search-by-image"),BEM.blocks.header.getSearch().updateCopyPages()}}),BEM.DOM.decl({block:"b-page",modName:"type",modVal:"search-by-image"},{buildCacheKey:function(){var t=this._location.getState();return[t.block?t.block:"",t.type?t.type:"",BEM.blocks.uri.delParams(t.url,_.without(this._getFilterParams(),"img_url"))].join("_")}}),BEM.DOM.decl("b-page",{bindEvents:function(){return this.__base.apply(this,arguments),this._location.on("b-page_type_similar",this._onPageSimilar,this),this},_onPageSimilar:function(t,e){this.checkCacheKey()&&this.loadPage(e,"similar"),BEM.blocks.header.getSearch().updateCopyPages()}}),BEM.DOM.decl("b-page",{bindEvents:function(){return this.__base.apply(this,arguments),this._location.on("b-page_type_copy",this._onPageCopy,this),this},_onPageCopy:function(t,e){this.checkCacheKey()&&this.loadPage(e,"copy"),BEM.blocks.header.getSearch().updateCopyPages()}}),BEM.DOM.decl("feedback",{externalData:{},onSetMod:{js:function(){this.checkboxes=this.findBlocksInside("checkbox"),this.submit=this.findBlockInside({block:"button",modName:"type",modVal:"submit"}).on("press",this.submitFeedback,this),this.findBlockInside({block:"button",modName:"type",modVal:"close"}).on("press",function(){this.popup.hide()},this),this.popup=this.findBlockInside("popup").on("show",this.onShowPopup,this).on("hide",this.onHidePopup,this),this.popup.params.top="50%",this.setCheckboxEvent(),this._ajax=BEM.create("i-request_type_ajax",{url:this.params.abuseLink,cache:!1,dataType:"script",type:"POST"}),this.channel("feedback").on("show",this.showFeedback,this)}},showFeedback:function(t,e){this.externalData=e,this.resetPopup(),this.popup.toggle()},resetPopup:function(){this.checkboxes.forEach(function(t){t.delMod("checked")}),this.popup.findBlockInside("radiobox").val("no"),this.popup.delMod("thanks"),this.popup.findElem("result").hide(),this.popup.findElem("complaint").show()},setCheckboxEvent:function(){var t=this.findBlocksInside("checkbox"),e=this;t&&t.map(function(t){t.on("change",e.checkboxChanged,e)})},checkboxChanged:function(){this.submit.setMod("disabled",this.hasCheckedItems()?"no":"yes")},hasCheckedItems:function(){return this.checkboxes.filter(function(t){return t.isChecked()}).length>0},submitFeedback:function(){var t=this;this._ajax.params.url=this.externalData.abuseLink,this._ajax.get(t.getLogParams(),this.onSuccess),setTimeout(function(){t.popup.setMod("thanks","true"),t.popup.findElem("result").show(),t.popup.findElem("complaint").hide()
},200)},defaultParams:function(){var t=this.popup.findBlocksInside("checkbox").filter(function(t){return t.isChecked()}).map(function(t){return t.val()}).toString(),e=this.popup.findBlockInside("radiobox").val(),n=this.params&&this.params.request,i={"complaint-query":e,"reason-complaint":t};return n&&$.extend(i,n),i},getLogParams:function(){return this.defaultParams()},onShowPopup:function(){},onHidePopup:function(){var t=this.popup;t.setMod("modal","hide"),setTimeout(function(){t.delMod("visibility"),t.delMod("modal")},150)},onSuccess:function(){}}),BEM.DOM.decl("feedback",{onSetMod:{js:function(){this.__base.apply(this,arguments),this.findBlockInside({blockName:"button",modName:"type",modVal:"submit"}).domElem.attr("onmousedown",this.params.submitCounter)}},getLogParams:function(){return $.extend({},this.__base.apply(this,arguments),{query:BEM.blocks["i-global"].param("query"),lr:this.params.lr,service:[BEM.blocks["i-global"].param("id"),"yandex",BEM.blocks["i-global"].param("tld")].join("."),"url-complaint":this.externalData.url,reqid:BEM.blocks["i-global"].param("serpid")})}}),BEM.DOM.decl("feedback",{getLogParams:function(){return _.assign(this.__base.apply(this,arguments),{"shows-urls":BEM.blocks["serp-list"].getUrls().join(";")})}},{showPopup:function(t){BEM.channel("feedback").trigger("show",{url:t.domElem.hasClass("serp-group")?BEM.blocks["serp-group"].getUrls(t).join(","):BEM.blocks["serp-item"].getUrls(t).join(";"),timeQuery:t.params.timeQuery,abuseLink:BEM.blocks["i-global"].param("abuseLink")})}}),BEM.DOM.decl("i-cbir-initer",{onSetMod:{js:function(){this.bindEvents()}},bindEvents:function(){return this.bindToDoc("drag dragstart dragover drop",this._onFirstDragEvent),(BEM.blocks["i-global"].getFlag("images_supernova_header")?BEM.blocks.search2:BEM.blocks.search).onFirst("search:submit",this._onSearchSubmit,this),BEM.blocks["cbir-logo"].onFirst("showPanel",this._onLogoClick,this),BEM.blocks["cbir-error"].onFirst("showParanja",this.cbirControllerShowParanja,this).onFirst("hideParanja",this.cbirControllerHideParanja,this),this},destruct:function(){this._unbindControllerEvents().__base.apply(this,arguments)},_onLogoClick:function(){this.getController().showPanel(!BEM.blocks["i-global"].param("mobile"))},cbirControllerShowParanja:function(){this.getController().showParanja()},cbirControllerHideParanja:function(){this.getController().hideParanja()},_onSearchSubmit:function(t,e){this.getController().processSubmitEvent(e)},_onFirstDragEvent:function(t){var e=this.getPanel();return e&&e.isDragSupported()?e.processDragEvent(t):void 0},_unbindControllerEvents:function(){return(BEM.blocks["i-global"].getFlag("images_supernova_header")?BEM.blocks.search2:BEM.blocks.search).un("search:submit",this._onSearchSubmit,this),BEM.blocks["cbir-logo"].un("showPanel",this._onLogoClick,this),BEM.blocks["cbir-error"].un("showParanja",this.cbirControllerShowParanja,this).un("hideParanja",this.cbirControllerHideParanja,this),this.unbindFromDoc("drag dragstart dragover drop",this._onFirstDragEvent)},getPanel:function(){return this._unbindControllerEvents().findBlockInside("cbir-panel")},getController:function(){return this._unbindControllerEvents().findBlockOn("i-cbir-controller")}}),BEM.DOM.decl("incut",{isInserted:!1,isIncutShown:!1,onSetMod:{js:function(){this.justifier=BEM.blocks.justifier,this.prepareToView(),BEM.blocks["b-page"].on("resize",this._onPageResize,this)}},destruct:function(){BEM.blocks["b-page"].un("resize",this._onPageResize,this),this.__base.apply(this,arguments)},hitCounter:function(){var t=this.params.cpHitLoadPath;return this.isIncutVisible()&&(this.params.goalLoadPath&&BEM.blocks["b-statcounter"].on("hitAndGoalInited",this._reachGoalMetrikaCounter,this),c.cpHitDelayed({pid:40,cid:72872,path:t,vars:this.getVarsForHitCounter()})),this},_reachGoalMetrikaCounter:function(){var t=setInterval(function(){window.Ya&&Ya.Metrika&&(BEM.blocks["b-statcounter"].goal({goal:this.params.goalLoadPath}),clearInterval(t))}.bind(this),1e3);BEM.blocks["b-statcounter"].un("hitAndGoalInited",this._reachGoalMetrikaCounter,this)},_onPageResize:function(){return this.prepareToView().checkFilling(),this},prepareToView:function(){return this.setThumbRows(this.justifier.fitImages({container:this.domElem[0],containerWidth:this.domElem.parent().parent().width(),showDangling:!1,itemSelector:".incut__item"})).removeExtraRows(),this},checkFilling:function(){var t=this.findElem("item").first();return 0===t.length||"none"===t.css("display")?this.isIncutVisible()&&this.hide():this.show(),this},load:function(){return this},show:function(){return this.isIncutShown=!0,this._hitDisplayCounters(),BEM.blocks["b-page"].on("scroll",this._hitDisplayCounters,this),this.delMod("visibility")},_hitDisplayCounters:function(){this.isIncutInViewport()&&(this.hitCounter(),BEM.blocks["b-page"].un("scroll",this._hitDisplayCounters,this))},isIncutVisible:function(){return!this.hasMod("visibility")},hide:function(){var t=this.params.cpHitHidePath;return t&&c.cpHitDelayed({pid:40,cid:72872,path:t}),this.setMod("visibility","hidden")},removeExtraRows:function(){var t,e=this.params.incutRows;return this.thumbRows.length>e?(t=_.flatten(this.thumbRows.slice(e)),$("#"+t.join(",#")).remove(),$("#gallery-"+t.join(",#gallery-")).remove(),this.setThumbRows(this.thumbRows.slice(0,e))):(this.findElem("item").each(function(){"none"===this.style.display&&($("#gallery-"+this.id).remove(),this.remove())}),this.setThumbRows(this.thumbRows.slice(0,1))),this},setThumbRows:function(t){return this.thumbRows=t,this},getGalleryItems:function(){return this.elem("gallery-list").contents()},getVarsForHitCounter:function(){return"1341,-info="+_.pluck(this.thumbRows,"length").join("-")},setShown:function(){return this.isInserted=!0,this},isIncutInViewport:function(){var t=this.domElem&&this.domElem[0].getBoundingClientRect();return t&&t.top>=0&&t.left>=0&&t.bottom-t.height/2<=$(window).height()&&t.right<=$(window).width()}},{live:!0}),BEM.DOM.decl({block:"incut",modName:"type",modVal:"direct-like"},{_jsonData:null,onSetMod:{js:function(){BEM.blocks["b-page"].on("resize",this._onPageResize,this),this._fillCounterPathParams()}},_getDataPromise:function(){return BEM.create("direct-parser",{url:this._getDirectUrl()}).load().then(this._fillBemhtml.bind(this))},_fillCounterPathParams:function(){var t=this.params.counterPath;return _.assign(this.params,{cpHitLoadPath:t+".loaded",cpHitHidePath:t+".hide",itemClickPath:t+".item"}),this},destruct:function(){this.unbindFrom(this.elem("item"),"click",this._onItemClick),this.__base.apply(this,arguments)},_onPageResize:function(){return this.updateWidth()},_getDirectUrl:function(){var t=BEM.blocks["i-global"].param("query"),e=this.params.positionType,n="top"===e?1e3:"bottom"===e?1e6:this.params.position+1;return BEM.blocks.uri.setParams(this.params.linkHead,{"target-ref":encodeURI(window.location.href),grab:BEM.blocks["i-global__utils"].base64Encode("t"+(this.params.tags||t)),"stat-id":n})},checkFilling:function(){return this._dataPromise.then(this._initItems.bind(this))},_fillBemhtml:function(t){_.isEmpty(t.direct.ads)||(BEM.DOM.append(this.domElem,_.reduce(t.direct.ads,function(t,e){var n={width:_.last(e.images)[1],height:_.last(e.images)[2]};return n.width&&n.height?t+BEMHTML.apply({block:"incut",elem:"item",mods:{type:"direct-like"},size:n,description:e.body,title:e.title,img_href:_.last(e.images)[0],url:e.url,domain:e.domain,warning:e.warning}):t},"",this)),this._jsonData=t)},_initItems:function(){return this.updateWidth(),this._jsonData&&this._checkOccupancy()?(BEM.blocks["b-page"].on("scroll",this._hitDisplayCounters,this),this.show()._prepareIncutToVisibilityOnPage()._hitDisplayCounters(),this.bindTo(this.elem("item"),"click",this._onItemClick),this):this},_prepareIncutToVisibilityOnPage:function(){return this._checkDanglingThumbs()&&this._removeDanglingThumbs(),_.isEmpty(this.elem("warning"))||this.setMod("warning","yes"),this.setMod("flexbox","yes"),this},_hitDisplayCounters:function(){if(this.isIncutInViewport()){var t=this._jsonData,e=this.findElem("item").length;$.ajax({url:t.common.linkHead+_.pluck(t.direct.ads,"linkTail").slice(0,e).join(""),dataType:"script",cache:!0}),this.hitCounter(),BEM.blocks["b-page"].un("scroll",this._hitDisplayCounters,this)}},updateWidth:function(){var t=$(".serp-controller").width()-$(".incut__header").outerWidth();return this.domElem.css("width",t),this},getDefaultParams:function(){return{widthPercent:.8}},_onItemClick:function(){c.hitDelayed({dtype:"iweb",path:this.params.itemClickPath,reqid:this.params.reqid})},hitCounter:function(){return c.hitDelayed({dtype:"iweb",path:this.params.cpHitLoadPath,reqid:this.params.reqid}),this},show:function(){return this.isIncutShown=!0,this.delMod("visibility")},_checkDanglingThumbs:function(){var t=this.domElem,e=t.find(".incut__item:first"),n=t.find(".incut__item:last");return e.offset().top!==n.offset().top},_checkOccupancy:function(){var t=this.domElem,e=this.elem("thumb"),n=_.reduce(e,function(t,e){return t+=parseInt(e.style.width,10)},0);return n/t.width()>this.params.widthPercent},_removeDanglingThumbs:function(){for(var t,e,n=this.findElem("item").last().offset().top,i=this.elem("item").toArray().reverse(),s=1,r=1,o=0,a=i.length;a>o&&(e=$(i[o]),t=e.offset().top,t!==n&&(n=t,s++),!(s>r));o++)e.remove();return this}}),BEM.DOM.decl({block:"incut",modName:"type",modVal:"market"},{getDefaultParams:function(){return{goalLoadPath:"fake-market:load",cpHitLoadPath:"image.new.serp.incut.market.loaded",cpHitHidePath:"image.new.serp.incut.market.hide"}}}),BEM.DOM.decl({block:"incut",modName:"type",modVal:"direct"},{getDefaultParams:function(){return{goalLoadPath:"fake-direct:load",cpHitLoadPath:"image.new.serp.incut.direct.loaded",cpHitHidePath:"image.new.serp.incut.direct.hide"}}}),BEM.DOM.decl({block:"incut",modName:"kind",modVal:"context"},{onSetMod:{js:function(){this.__base.apply(this,arguments),this._dataPromise=this._getDataPromise()}}}),BEM.DOM.decl({block:"incut",modName:"kind",modVal:"behavioral"},{load:function(){return!this._dataPromise&&(this._dataPromise=this._getDataPromise()),this}}),BEM.decl("direct-parser",{load:function(){var t=$.Deferred(),e=this.__base.apply(this,arguments);return e?e:($.ajax({url:this.params.url,xhrFields:{withCredentials:!0}}).success(function(e){try{t.resolve(new Function("return"+e.match(/^(\/\*\*\/)?\('(.*)\'\)$/)[2])())}catch(n){t.reject(n)}}).error(t.reject),t)}}),BEM.DOM.decl("distro",{_onItemClick:function(t){t.preventDefault();var e=this.elemParams("item"),n=e.counter,i=e.url;BEM.create("chrome-webstore-item",{url:i}).on({installed:function(){c.hit({dtype:"iweb",path:n+"install",vars:"-app_url="+i})},installationFailed:function(t,e){c.hit({dtype:"iweb",path:n+"error",vars:"-app_url="+i+",-error_code="+e.errorCode})},installationCancelled:function(){c.hit({dtype:"iweb",path:n+"popup_close",vars:"-app_url="+i})}}).install()},show:function(){this.delMod("hidden"),this.setMod("shown","yes"),this._hitCounter()},hide:function(){this.delMod("shown"),this.setMod("hidden","yes")},_hitCounter:function(){c.cpHitDelayed({pid:40,cid:72921,path:"image.serp.footer.show"})}},{live:function(){return this.liveBindTo({elem:"item",modName:"inline",modVal:"yes"},"click",function(t){this._onItemClick(t)}),!1}}),BEM.decl("chrome-webstore-item",{onSetMod:{js:function(){this.url=this.params.url}},install:function(){this.addLink(),chrome.webstore.install(this.url,this.onInstalled.bind(this),this.onInstallationFailed.bind(this))},addLink:function(){this.linkAdded||($(document.head).append($("<link />").attr({rel:"chrome-webstore-item",href:this.url})),this.linkAdded=!0)},onInstalled:function(){this.trigger("installed")},onInstallationFailed:function(t,e){var n="userCancelled"===e?"installationCancelled":"installationFailed";this.trigger(n,{errorMessage:t,errorCode:e})}}),function(t,e){function n(){p&&f&&console.log.apply(console,arguments)}function i(t){return"string"==typeof t&&(t={block:t}),t.block+(t.elem?u+t.elem:"")+(t.modName?c+t.modName+c+t.modVal:"")}function s(t){var e={};return t.split(u).forEach(function(t,n){var i=[n?"elem":"block","mod","val"];t.split(c).forEach(function(t,n){e[i[n]]=t})}),e}function r(t){return t?d.push(t):!1}function o(){return d.length&&d.pop()}function a(){this._lang="",this._prj="lego",this._keyset="",this._key=""}if("function"==typeof e.I18N&&e.I18N._proto)return e.I18N;"undefined"==typeof i18n&&(i18n={}),BEM=e;var c="_",u="__",l="ru",h={},d=[],p=!1,f="undefined"!=typeof console&&"function"==typeof console.log;a.prototype={lang:function(t){return this._lang=t,this},project:function(t){return this._prj=t,this},keyset:function(t,e){return e&&r(this._keyset),this._keyset=i(t),this},key:function(t){return this._key=t,this},decl:function(t){var e=s(this._keyset),n="i-tanker"===e.block?"tanker":this._prj,i=e.elem||this._keyset,r=this._key;n=i18n[n]||(i18n[n]={}),i=n[i]||(n[i]={}),i[r]="function"==typeof t?t:function(){return t};var o=h[this._lang]||(h[this._lang]={}),a=o[this._keyset]||(o[this._keyset]={});a[r]=t},val:function(t,e){var i=h[this._lang]&&h[this._lang][this._keyset],s="keyset: "+this._keyset+" key: "+this._key+" (lang: "+this._lang+")";if(!i)return n("[I18N_NO_KEYSET] %s",s),"";i=i[this._key];var r=typeof i;return"undefined"===r?(n("[I18N_NO_VALUE] %s",s),""):"string"===r?i:(e||(e=this),i.call(e,t))},_cache:function(){return h}},e.I18N=function(t){var e=function(t,n,i){return e.keyset(t).key(n,i)};return e._proto=t,e.project=function(t){return this._proto.project(t),this},e.keyset=function(t){return this._proto.keyset(t,!0),this},e.key=function(t,n){var i,s,r=this._proto;return r.lang(this._lang).key(t),i=r.val.call(r,n,e),s=o(),s&&r.keyset(s,!1),i},e.decl=function(t,e,n){var i,s=this._proto;n||(n={}),n.lang&&s.lang(n.lang),s.keyset(t);for(i in e)e.hasOwnProperty(i)&&s.key(i).decl(e[i]);return this},e.lang=function(t){return"undefined"!=typeof t&&(this._lang=t),this._lang},e.debug=function(t){p=!!t},e.lang(l),e}(new a)}(this,"undefined"==typeof BEM?{}:BEM),function(t){function e(e,n,i){var s;if(t.lang(BEM.I18N.lang()),s=t(e,n,i),!s){var r=n||"";if(i=i||{},i.hasOwnProperty("count")){var o=isNaN(parseInt(i.count,10))?0:i.count,a=o%10,c=o%100;r=1===a&&11!==c?n:a>1&&5>a&&(10>c||c>20)?i.some:i.many,r=r||n||""}s=r.replace(/({([\w-]*)})/gm,function(t,e,n){return i[n]||"-UNKNOWN_PARAM-"}),console.error('Нет перевода ключа "%s" кейсета %s, не забудь синкнуть переводы перед вливанием!',n,e)}return s||console.error("Что-то пошло не так, как планировали, пожалуйста, проверьте правильность ключа "+n),s}Object.keys(t).forEach(function(n){e[n]=t[n]}),BEM.I18N=e}(BEM.I18N),"undefined"!=typeof BEM&&BEM.I18N&&(BEM.I18N.decl("advanced-search_spok_yes",{"Сбросить":"Сбросить","Белые":"Белые","Большие":"Большие","Вертикальные":"Вертикальные","Голубые":"Голубые","Горизонтальные":"Горизонтальные","Демотиваторы":"Демотиваторы","Жёлтые":"Жёлтые","Зелёные":"Зелёные","Квадратные":"Квадратные","Красные":"Красные","Лица":"Лица","Любая ориентация":"Любая ориентация","Любой размер":"Любой размер","Любой тип":"Любой тип","Любой файл":"Любой файл","Любой цвет":"Любой цвет","Маленькие":"Маленькие","Назад в поиск":"Назад в поиск","Обои":"Обои","Оранжевые":"Оранжевые","Рисунки и чертежи":"Рисунки и чертежи","С белым фоном":"С белым фоном","Свежие":"Свежие","Синие":"Синие","Средние":"Средние","Только цветные":"Только цветные","Фиолетовые":"Фиолетовые","Фото":"Фото","Чёрно-белые":"Чёрно-белые","Чёрные":"Чёрные"},{lang:"ru"}),BEM.I18N.decl("auth",{auth:"Авторизация","fill-input":"Заполните это поле",login:"Логин",logon:"Войти",more:"Ещё",password:"Пароль",permanent:"Запомнить меня",register:"Регистрация",remember:"Вспомнить пароль","social-log-in":"Войти при помощи социальной сети",temporary:"Чужой компьютер","wrong-characters":"Недопустимый ввод","wrong-keyboard-layout":"Смените раскладку","wrong-password":"Пароль не может совпадать с логином"},{lang:"ru"}),BEM.I18N.decl("b-501px-info_spok_yes",{"В{nbsp}течение суток картинку дня можно скачать для{nbsp}заставки на{nbsp}рабочий стол.":function(t){return"В"+t.nbsp+"течение суток картинку дня можно скачать для"+t.nbsp+"заставки на"+t.nbsp+"рабочий стол."},"Все картинки подходят под{nbsp}экраны любого размера.":function(t){return"Все картинки подходят под"+t.nbsp+"экраны любого размера."},"Наши партнёры":"Наши партнёры","Партнёрская программа":"Партнёрская программа","Специальный алгоритм выбирает фотографии, у{nbsp}которых больше шансов понравиться пользователям.":function(t){return"Специальный алгоритм выбирает фотографии, у"+t.nbsp+"которых больше шансов понравиться пользователям."},"Узнать больше":"Узнать больше"},{lang:"ru"}),BEM.I18N.decl("b-501px__caption",{"Картинка дня":"Картинка дня","Подробнее о проекте":"Подробнее о проекте"},{lang:"ru"}),BEM.I18N.decl("b-501px__download",{"Скачать обои<br> для моего экрана":"Скачать обои<br> для моего экрана"},{lang:"ru"}),BEM.I18N.decl("b-501px__search",{"Ещё картинки<br> по этой теме":"Ещё картинки<br> по этой теме"},{lang:"ru"}),BEM.I18N.decl("b-501px_spok_yes",{"{author} на {site}":function(t){return t.author+" на "+t.site},"Вернуться к картинке дня":"Вернуться к картинке дня","Вернуться<br> к картинке дня":"Вернуться<br> к картинке дня","Новая картинка каждый день":"Новая картинка каждый день","Эту картинку можно было скачать {date}":function(t){return"Эту картинку можно было скачать "+t.date},"Эту картинку можно было скачать вчера":"Эту картинку можно было скачать вчера","Яндекс.Фотках":"Яндекс.Фотках"},{lang:"ru"}),BEM.I18N.decl("b-mooa",{brak_ticket_added:"Добавлен тикет",brak_ticket_updated:"Обновлён тикет",close:"Закрыть",error:"Ошибка",idea:"Идея",message_error:"Сообщение отправить не удалось, попробуйте еще раз",message_sending:"Сообщение отправляется",message_success:"Ваше сообщение отправлено"},{lang:"ru"}),BEM.I18N.decl("b-page_spok_yes",{"Видео":"Видео","Картинки":"Картинки","{query}: {count} изображение найдено в Яндекс.Картинках":function(t){return this.keyset("i-tanker__dynamic").key("plural",{count:t.count,one:t.query+": "+t.count+" изображение найдено в Яндекс.Картинках",some:t.query+": "+t.count+" изображения найдено в Яндекс.Картинках",many:t.query+": "+t.count+" изображений найдено в Яндекс.Картинках",none:t.query+": "+t.count+" изображений найдено в Яндекс.Картинках"})},"{query}: {count} млн изображений найдено в Яндекс.Картинках":function(t){return t.query+": "+t.count+" млн изображений найдено в Яндекс.Картинках"},"{query}: {count} тыс изображений найдено в Яндекс.Картинках":function(t){return t.query+": "+t.count+" тыс изображений найдено в Яндекс.Картинках"},"Картинок по вашему запросу не найдено":"Картинок по вашему запросу не найдено","Яндекс.Картинки: поиск изображений в интернете, поиск по картинке":"Яндекс.Картинки: поиск изображений в интернете, поиск по картинке","Яндекс.Картинки: поиск по картинке":"Яндекс.Картинки: поиск по картинке","Яндекс.Картинки: поиск похожих картинок":"Яндекс.Картинки: поиск похожих картинок","Заставки для рабочего стола, забавные картинки, схемы и иллюстрированные инструкции - ответы на ваши вопросы в виде изображений":"Заставки для рабочего стола, забавные картинки, схемы и иллюстрированные инструкции - ответы на ваши вопросы в виде изображений",'Результаты поиска по запросу "{query}" в Яндекс.Картинках':function(t){return'Результаты поиска по запросу "'+t.query+'" в Яндекс.Картинках'}},{lang:"ru"}),BEM.I18N.decl("b-statcounter__metrika",{JSERR_incorrectID:"Incorrect ID has been passed."},{lang:"ru"}),BEM.I18N.decl("back_spok_yes",{"Вернуться назад":"Вернуться назад"},{lang:"ru"}),BEM.I18N.decl("carousel-banner",{"Сегодня на{br}Яндекс.Картинках":function(t){return"Сегодня на"+t.br+"Яндекс.Картинках"}},{lang:"ru"}),BEM.I18N.decl("categories-index",{"Популярные запросы":"Популярные запросы"},{lang:"ru"}),BEM.I18N.decl("cbir-error_spok_yes",{"Закрыть":"Закрыть","Картинка не загрузилась, попробуйте загрузить другую.":"Картинка не загрузилась, попробуйте загрузить другую.","Неправильный формат загружаемого файла. Попробуйте загрузить файл изображения.":"Неправильный формат загружаемого файла. Попробуйте загрузить файл изображения.","Ошибка":"Ошибка","По указанному адресу не смогли найти картинку, попробуйте ввести другой адрес.":"По указанному адресу не смогли найти картинку, попробуйте ввести другой адрес.","Слишком большой файл, попробуйте загрузить другую картинку.":"Слишком большой файл, попробуйте загрузить другую картинку."},{lang:"ru"}),BEM.I18N.decl("cbir-intent_spok_yes",{"Загружаем картинку":"Загружаем картинку","Загруженная картинка":"Загруженная картинка","Закрыть":"Закрыть"},{lang:"ru"}),BEM.I18N.decl("cbir-logo_spok_yes",{"Поиск по картинке":"Поиск по картинке"},{lang:"ru"}),BEM.I18N.decl("cbir-no-results_spok_yes",{"Таких же картинок не найдено":"Таких же картинок не найдено"},{lang:"ru"}),BEM.I18N.decl("cbir-panel_spok_yes",{"Введите адрес картинки":"Введите адрес картинки","Найти":"Найти","Перетащите картинку сюда или":"Перетащите картинку сюда или","Поиск по картинке":"Поиск по картинке","выберите файл":"выберите файл","или":"или"},{lang:"ru"}),BEM.I18N.decl("competitors",{"Посмотреть «{query}» в других поисковых системах:":function(t){return"Посмотреть «"+t.query+"» в других поисковых системах:"},"Ссылки на поисковые системы скрыты, так как включен семейный фильтр":"Ссылки на поисковые системы скрыты, так как включен семейный фильтр"},{lang:"ru"}),BEM.I18N.decl("complain",{"Пожаловаться":"Пожаловаться"},{lang:"ru"}),BEM.I18N.decl("content_spok_yes",{"Эта картинка в других размерах:":"Эта картинка в других размерах:"},{lang:"ru"}),BEM.I18N.decl("copyright",{link:function(t){return"ООО «"+t.content+"»"},yandex:"Яндекс"},{lang:"ru"}),BEM.I18N.decl("custom-site_spok_yes",{"Адрес сайта указан неправильно.":"Адрес сайта указан неправильно.","На сайте":"На сайте"},{lang:"ru"}),BEM.I18N.decl("custom-size_spok_yes",{"Размер картинок указан неправильно.":"Размер картинок указан неправильно."},{lang:"ru"}),BEM.I18N.decl("date",{"{day} августа":function(t){return t.day+" августа"},"{day} августа {year} г.":function(t){return t.day+" августа "+t.year+" г."},"{day} апреля":function(t){return t.day+" апреля"},"{day} апреля {year} г.":function(t){return t.day+" апреля "+t.year+" г."},"{day} декабря":function(t){return t.day+" декабря"},"{day} декабря {year} г.":function(t){return t.day+" декабря "+t.year+" г."},"{day} июля":function(t){return t.day+" июля"},"{day} июля {year} г.":function(t){return t.day+" июля "+t.year+" г."},"{day} июня":function(t){return t.day+" июня"},"{day} июня {year} г.":function(t){return t.day+" июня "+t.year+" г."},"{day} марта":function(t){return t.day+" марта"},"{day} марта {year} г.":function(t){return t.day+" марта "+t.year+" г."},"{day} мая":function(t){return t.day+" мая"},"{day} мая {year} г.":function(t){return t.day+" мая "+t.year+" г."},"{day} ноября":function(t){return t.day+" ноября"},"{day} ноября {year} г.":function(t){return t.day+" ноября "+t.year+" г."},"{day} октября":function(t){return t.day+" октября"},"{day} октября {year} г.":function(t){return t.day+" октября "+t.year+" г."},"{day} сентября":function(t){return t.day+" сентября"},"{day} сентября {year} г.":function(t){return t.day+" сентября "+t.year+" г."},"{day} февраля":function(t){return t.day+" февраля"},"{day} февраля {year} г.":function(t){return t.day+" февраля "+t.year+" г."},"{day} января":function(t){return t.day+" января"},"{day} января {year} г.":function(t){return t.day+" января "+t.year+" г."},"Вчера":"Вчера","Сегодня":"Сегодня"},{lang:"ru"}),BEM.I18N.decl("distro",{"Всё ваше в сети<br>Диск сохранит":"Всё ваше в сети<br>Диск сохранит","Любимую музыку<br>угадает и дополнит Радио":"Любимую музыку<br>угадает и дополнит Радио","Мобильный Яндекс<br>в телефоне и планшете":"Мобильный Яндекс<br>в телефоне и планшете","Сделать Яндекс<br>любимым поиском":"Сделать Яндекс<br>любимым поиском","Установить<br>Яндекс.Браузер":"Установить<br>Яндекс.Браузер"},{lang:"ru"}),BEM.I18N.decl("feedback",{"Ваш отзыв будет использован алгоритмами Поиска.":"Ваш отзыв будет использован алгоритмами Поиска.","Вернуться на Яндекс":"Вернуться на Яндекс","На всю страницу":"На всю страницу","На этот результат":"На этот результат","Несоответствие запросу":"Несоответствие запросу","Пожаловаться":"Пожаловаться","Порнография":"Порнография","Причина жалобы":"Причина жалобы","Спасибо, что помогаете делать Яндекс лучше!":"Спасибо, что помогаете делать Яндекс лучше!","Шокирующая или неприятная информация":"Шокирующая или неприятная информация"},{lang:"ru"}),BEM.I18N.decl("footer",{about:"О компании","about-url":"//company.yandex.ru",advert:"Реклама","advert-url":"//advertising.yandex.ru/kupislova.xml?advertising",agreement:"Пользовательское соглашение",apps:"Мобильные приложения","apps-url":"//mobile.yandex.ru",beta:"β-версия","copyright-notice":"",design:"Дизайн","design-artlebedev":"Студия Артемия Лебедева","design-artlebedev-url":"http://www.artlebedev.ru",mobile:"Мобильная версия","privacy-policy":"","services-button-value":"Перейти",stat:"Статистика","terms-of-service":"",termsofuse:"Лицензия на поиск","termsofuse-url":"//legal.yandex.ru/termsofuse/",vacancies:"Вакансии","yandex-is-local":"Яндекс локален","yandex-is-not-local":"Как сделать Яндекс локальным"},{lang:"ru"}),BEM.I18N.decl("footer_spok_yes",{"Лицензия на поиск":"Лицензия на поиск","Мобильная версия":"Мобильная версия","Обратная связь":"Обратная связь","Политика конфиденциальности":"Политика конфиденциальности","Помощь":"Помощь","Уведомление об авторских правах":"Уведомление об авторских правах"},{lang:"ru"}),BEM.I18N.decl("gallery",{"Ещё {more}":function(t){return"Ещё "+t.more}},{lang:"ru"}),BEM.I18N.decl("head-filter_spok_yes",{"Без защиты":"Без защиты","Поиск без защиты":"Поиск без защиты","Семейный":"Семейный","Семейный поиск":"Семейный поиск","Тип безопасного поиска":"Тип безопасного поиска","Умеренный":"Умеренный","Умеренный поиск":"Умеренный поиск","Фильтрация выключена.<br />Умеренный фильтр включится<br />автоматически через 2 часа.":"Фильтрация выключена.<br />Умеренный фильтр включится<br />автоматически через 2 часа."},{lang:"ru"}),BEM.I18N.decl("header__action_type_srv",{"services-table":"Табло сервисов"},{lang:"ru"}),BEM.I18N.decl("header_spok_yes",{"Расширенный поиск":"Расширенный поиск"},{lang:"ru"}),BEM.I18N.decl("i-global",{"Яндекс.Картинки":"Яндекс.Картинки"},{lang:"ru"}),BEM.I18N.decl("i-global_spok_yes",{"Видео":"Видео","Картинки":"Картинки","Яндекс.Картинки":"Яндекс.Картинки"},{lang:"ru"}),BEM.I18N.decl("i-seo_spok_yes",{"Забавные картинки, заставки для рабочего стола, схемы и иллюстрированные инструкции - ответы на ваши вопросы в виде изображений, Поиск по картинке и фото":"Забавные картинки, заставки для рабочего стола, схемы и иллюстрированные инструкции - ответы на ваши вопросы в виде изображений, Поиск по картинке и фото",'Результаты поиска по запросу "{query}" в Яндекс.Картинках':function(t){return'Результаты поиска по запросу "'+t.query+'" в Яндекс.Картинках'},"Результаты поиска по пустому запросу в Яндекс.Картинках":"Результаты поиска по пустому запросу в Яндекс.Картинках","изображения, фото, яндекс картинки, поиск":"изображения, фото, яндекс картинки, поиск","яндекс картинки, поиск изображений, фото, фотографии, поиск по картинке и фото":"яндекс картинки, поиск изображений, фото, фотографии, поиск по картинке и фото"},{lang:"ru"}),BEM.I18N.decl("i-services",{404:"404",adresa:"Адреса",advertising:"Реклама",afisha:"Афиша",all:"Все сервисы",api:"API",appsearch:"Приложения",auto:"Авто",avia:"Авиабилеты",aziada:"Азиада",ba:"Баян",backapv:"Партнер Я.Карт",balance:"Баланс",bar:"Бар","bar-ie":"Бар для ИЕ","bar-ie9":"Бар для ИЕ9",bayan:"Баннеры Яндекса",blogs:"Блоги",books:"Книги",browser:"Браузер",calendar:"Календарь",captcha:"ой...",catalogwdgt:"Каталог виджетов",chrome:"Хром с поиском Яндекса",city:"Города",cityday:"День города",collection:"Коллекция",company:"Компания",contest:"Contest",desktop:"Персональный поиск",direct:"Директ","direct.market":"Маркет",disk:"Диск",ege:"ЕГЭ",expert:"Эксперт",feedback:"Обратная связь",feedback2:"Обратная связь",ff:"ФФ с поиском Яндекса",fotki:"Фотки",fresh:"Свежее",games:"Игрушки",geocontext:"Геоконтекст",goroda:"Города",help:"Помощь",i:"Мои сервисы",ie:"ИЕ с поиском Яндекса",images:"Картинки","images-com":"Картинки",interests:"Интересы",internet:"Интернет",kassa:"Касса",keyboard:"Клавиатура",kraski:"Краски",kuda:"Куда все идут",large:"Яндекс для слабовидящих",legal:"Правовые документы",lenta:"Лента",libra:"Библиотека",literacy:"Неделя борьбы за грамотность",local:"Локальная сеть",lost:"Незабудки",love:"День взаимного тяготения — 13 августа",mail:"Почта",maps:"Карты","maps-wiki":"Народная карта",market:"Маркет","market.advertising":"Маркет",master:"Мастер",metrika:"Метрика",metro:"Метро",mobile:"Мобильный",moikrug:"Мой Круг",money:"Деньги",museums:"Дни исторического и культурного наследия",music:"Музыка","music-partner":"Музыка: статистика",nahodki:"Мои находки",nano:"Нано",newhire:"Наниматор",news:"Новости",notifications:"Нотификационная панель",oauth:"Авторизация",online:"Онлайн",openid:"OpenID",opera:"Opera Software",opinion:"Цитаты",partners:"Рекламная сеть",partnersearch:"Поиск для партнеров",passport:"Паспорт",pdd:"Почта для домена",peoplesearch:"Люди",perevod:"Перевод",probki:"Пробки",pulse:"блоги: пульс",punto:"Punto switcher",pvo:"Ответы",rabota:"Работа",ramazan:"",rasp:"Расписания",realty:"Недвижимость",referats:"Рефераты",rk:"Есть вопросы?",root:"Яндекс.Олимпиада для Unix администраторов",school:"Школа",search:"Поиск",server:"Сервер",shtrafi:"Штрафы",site:"Поиск для сайта",slovari:"Словари",so:"Самооборона",social:"Социализм",soft:"Программы",sport:"Спорт",sprav:"Справочник",start:"Стартовая страница",stat:"Статистика",subs:"Подписки",taxi:"Такси",terms:"Разговорник",tests:"Тесты и опросы",tickets:"Билеты",time:"Яндекс.Время",toster:"Тосты",translate:"Перевод",tune:"Настройки",tv:"Телепрограмма",uslugi:"Услуги",video:"Видео","video-com":"Видео",vno:"ВНО",wdgt:"Виджеты",weather:"Погода",webmaster:"Вебмастер",widgets:"Виджеты",wordstat:"Статистика",wow:"Я.ру",www:"Поиск",xmlsearch:"XML",yaca:"Каталог",yamb:"Медийные баннеры",zakladki:"Закладки"},{lang:"ru"}),BEM.I18N.decl("i-tanker__dynamic",{gender:function(t){return function(t){return t[t.gender]}.call(this,t)},plural:function(t){return function(t){var e=isNaN(parseInt(t.count))?0:t.count,n=e%10,i=e%100;return 1==n&&11!=i?t.one:n>1&&5>n&&(10>i||i>20)?t.some:t.many}.call(this,t)},plural_adv:function(t){return function(t){var e=isNaN(parseInt(t.count))?0:t.count;return 0===e?t.none:this.keyset("i-tanker__dynamic").key("plural",{count:t.count,one:t.one,some:t.some,many:t.many})}.call(this,t)},toggle:function(t){return function(t){return Boolean(t.condition)?t["true"]:t["false"]}.call(this,t)}},{lang:"ru"}),BEM.I18N.decl("images-sizes_spok_yes",{"Большие":"Большие","Большие и маленькие":"Большие и маленькие","Большие и средние":"Большие и средние","Все размеры":"Все размеры","Маленькие":"Маленькие","Средние":"Средние","Средние и маленькие":"Средние и маленькие"},{lang:"ru"}),BEM.I18N.decl("lang-switcher",{all:"Ещё"},{lang:"ru"}),BEM.I18N.decl("lang-switcher_spok_yes",{"Ещё":"Ещё"},{lang:"ru"}),BEM.I18N.decl("logo",{yandex:"Яндекс"},{lang:"ru"}),BEM.I18N.decl("misspell",{"В запросе «{query}» была исправлена опечатка.":function(t){return"В запросе «"+t.query+"» была исправлена опечатка."},"Длина вашего запроса превышает максимально допустимую. Запрос сокращён до первых 400 символов.":"Длина вашего запроса превышает максимально допустимую. Запрос сокращён до первых 400 символов.","Исправлена раскладка клавиатуры в «{query}»":function(t){return"Исправлена раскладка клавиатуры в «"+t.query+"»"},"По запросу «{query}» ничего не нашлось.":function(t){return"По запросу «"+t.query+"» ничего не нашлось."},"Слишком длинный запрос. Поиск ведется по 40 первым словам.":"Слишком длинный запрос. Поиск ведется по 40 первым словам.","Точная цитата {query} в кавычках нигде не встречается. Показаны результаты по запросу без кавычек.":function(t){return"Точная цитата "+t.query+" в кавычках нигде не встречается. Показаны результаты по запросу без кавычек."
},"Быть может, вы хотели воспользоваться поиском по {link}.":function(t){return"Быть может, вы хотели воспользоваться поиском по "+t.link+"."},"картинке":"картинке"},{lang:"ru"}),BEM.I18N.decl("misspell_spok_yes",{"Быть может, вы искали: «{query}».":function(t){return"Быть может, вы искали: «"+t.query+"»."},"В выдачу добавлены ответы по запросу «{query}».":function(t){return"В выдачу добавлены ответы по запросу «"+t.query+"»."},"В запросе «{query}» была исправлена опечатка.":function(t){return"В запросе «"+t.query+"» была исправлена опечатка."},"Длина вашего запроса превышает максимально допустимую. Запрос сокращён до первых 400 символов.":"Длина вашего запроса превышает максимально допустимую. Запрос сокращён до первых 400 символов.","Задан пустой поисковый запрос.":"Задан пустой поисковый запрос.","Искать только «{query}».":function(t){return"Искать только «"+t.query+"»."},"Исправлена раскладка клавиатуры в «{query}»":function(t){return"Исправлена раскладка клавиатуры в «"+t.query+"»"},"Неизвестная ошибка.":"Неизвестная ошибка.","По вашему запросу ничего не нашлось.":"По вашему запросу ничего не нашлось.","По запросу «{query}» ничего не нашлось.":function(t){return"По запросу «"+t.query+"» ничего не нашлось."},"Синтаксическая ошибка.":"Синтаксическая ошибка.","Слишком длинный запрос. Поиск ведется по 40 первым словам.":"Слишком длинный запрос. Поиск ведется по 40 первым словам.","Точная цитата {query} в кавычках нигде не встречается. Показаны результаты по запросу без кавычек.":function(t){return"Точная цитата "+t.query+" в кавычках нигде не встречается. Показаны результаты по запросу без кавычек."},"Быть может, вы хотели воспользоваться поиском по {link}.":function(t){return"Быть может, вы хотели воспользоваться поиском по "+t.link+"."},"картинке":"картинке"},{lang:"ru"}),BEM.I18N.decl("mobile-suggest_spok_yes",{"Да":"Да","Нет":"Нет","Показать мобильную версию?":"Показать мобильную версию?"},{lang:"ru"}),BEM.I18N.decl("more_spok_yes",{"Ещё картинки":"Ещё картинки","Ещё сайты, где встречается картинка":"Ещё сайты, где встречается картинка","Предыдущие картинки":"Предыдущие картинки"},{lang:"ru"}),BEM.I18N.decl("navigation",{more:"Ещё","search-also":"Найти также","search-on":function(t){return"Найти "+t.query+" в других сервисах"}},{lang:"ru"}),BEM.I18N.decl("nps",{"Вам сложно было найти то, что нужно?":"Вам сложно было найти то, что нужно?","Вы посоветовали бы друзьям Яндекс для поиска картинок?":"Вы посоветовали бы друзьям Яндекс для поиска картинок?","Ответить":"Ответить","Отправить":"Отправить","Помогите улучшить Яндекс.Картинки, ответив на вопрос":"Помогите улучшить Яндекс.Картинки, ответив на вопрос","Спасибо, что помогли нам улучшить картинки!":"Спасибо, что помогли нам улучшить картинки!","да, конечно":"да, конечно","легко":"легко","не удалось найти":"не удалось найти","оцените":"оцените","очень легко":"очень легко","очень сложно":"очень сложно","сложно":"сложно","точно нет":"точно нет"},{lang:"ru"}),BEM.I18N.decl("open-image_spok_yes",{"Открыть":"Открыть"},{lang:"ru"}),BEM.I18N.decl("original-image_spok_yes",{"Исходная картинка":"Исходная картинка"},{lang:"ru"}),BEM.I18N.decl("other-sites_spok_yes",{"Перейти на страницу с картинкой":"Перейти на страницу с картинкой","Сайты, где встречается картинка":"Сайты, где встречается картинка"},{lang:"ru"}),BEM.I18N.decl("other-sizes_spok_yes",{"Большие":"Большие","Ещё размеры":"Ещё размеры","Маленькие":"Маленькие","Средние":"Средние","Эта картинка в других размерах":"Эта картинка в других размерах"},{lang:"ru"}),BEM.I18N.decl("pane2",{"Не удалось загрузить картинку, возможно, она есть на {site}.":function(t){return"Не удалось загрузить картинку, возможно, она есть на "+t.site+"."},"сайте":"сайте"},{lang:"ru"}),BEM.I18N.decl("prevention",{"Некоторые изображения были удалены из результатов поиска. {details}":function(t){return"Некоторые изображения были удалены из результатов поиска. "+t.details},"Подробнее":"Подробнее","Причины удаления: {numbers}":function(t){return"Причины удаления: "+t.numbers}},{lang:"ru"}),BEM.I18N.decl("preview2",{"Не удалось загрузить картинку, возможно, она есть на {site}.":function(t){return"Не удалось загрузить картинку, возможно, она есть на "+t.site+"."},"сайте":"сайте"},{lang:"ru"}),BEM.I18N.decl("preview2_spok_yes",{"Не удалось загрузить картинку, возможно, она есть на {site}.":function(t){return"Не удалось загрузить картинку, возможно, она есть на "+t.site+"."},"сайте":"сайте"},{lang:"ru"}),BEM.I18N.decl("related2_spok_yes",{"Похожие запросы":"Похожие запросы"},{lang:"ru"}),BEM.I18N.decl("related_spok_yes",{"Похожие поисковые запросы":"Похожие поисковые запросы","Смотрите также":"Смотрите также"},{lang:"ru"}),BEM.I18N.decl("search",{"search-for":"Искать",query:"Запрос"},{lang:"ru"}),BEM.I18N.decl("search-by-image",{"Другие размеры и похожие":"Другие размеры и похожие","Поиск по картинке":"Поиск по картинке"},{lang:"ru"}),BEM.I18N.decl("search-by-image_spok_yes",{"Другие размеры и похожие":"Другие размеры и похожие"},{lang:"ru"}),BEM.I18N.decl("search2",{"search-button-text":"Найти","search-input-label":"Запрос","search-service-label":"Поиск по сервису","search-web-label":"Поиск в интернете"},{lang:"ru"}),BEM.I18N.decl("search_spok_yes",{"Найти":"Найти","{count} картинка":function(t){return this.keyset("i-tanker__dynamic").key("plural",{count:t.count,one:t.count+" картинка",some:t.count+" картинки",many:t.count+" картинок",none:t.count+" картинок"})},"{count} млн картинок":function(t){return t.count+" млн картинок"},"{count} тыс картинок":function(t){return t.count+" тыс картинок"}},{lang:"ru"}),BEM.I18N.decl("serp-controller_spok_yes",{"Результаты поиска":"Результаты поиска"},{lang:"ru"}),BEM.I18N.decl("serp-group",{"{count} картинка":function(t){return this.keyset("i-tanker__dynamic").key("plural",{count:t.count,one:t.count+" картинка",some:t.count+" картинки",many:t.count+" картинок",none:t.count+" картинок"})},"{images} из серии на {site}":function(t){return t.images+" из серии на "+t.site},"Перейти на страницу с серией":"Перейти на страницу с серией"},{lang:"ru"}),BEM.I18N.decl("serp-item_spok_yes",{"{count} год":function(t){return this.keyset("i-tanker__dynamic").key("plural",{count:t.count,one:t.count+" год",some:t.count+" года",many:t.count+" лет",none:t.count+" лет"})},"{count} день":function(t){return this.keyset("i-tanker__dynamic").key("plural",{count:t.count,one:t.count+" день",some:t.count+" дня",many:t.count+" дней",none:t.count+" дней"})},"{count} месяц":function(t){return this.keyset("i-tanker__dynamic").key("plural",{count:t.count,one:t.count+" месяц",some:t.count+" месяца",many:t.count+" месяцев",none:t.count+" месяцев"})},"{count} час":function(t){return this.keyset("i-tanker__dynamic").key("plural",{count:t.count,one:t.count+" час",some:t.count+" часа",many:t.count+" часов",none:t.count+" часов"})},"Перейти на страницу с картинкой":"Перейти на страницу с картинкой"},{lang:"ru"}),BEM.I18N.decl("serp-mark",{"Просмотрено 2 недели назад":"Просмотрено 2 недели назад","Просмотрено больше 2 недель назад":"Просмотрено больше 2 недель назад","Просмотрено больше 3 недель назад":"Просмотрено больше 3 недель назад","Просмотрено больше недели назад":"Просмотрено больше недели назад","Просмотрено в воскресенье":"Просмотрено в воскресенье","Просмотрено в понедельник":"Просмотрено в понедельник","Просмотрено в пятницу":"Просмотрено в пятницу","Просмотрено в среду":"Просмотрено в среду","Просмотрено в субботу":"Просмотрено в субботу","Просмотрено в четверг":"Просмотрено в четверг","Просмотрено во вторник":"Просмотрено во вторник","Просмотрено вчера":"Просмотрено вчера","Просмотрено давно":"Просмотрено давно","Просмотрено месяц назад":"Просмотрено месяц назад","Просмотрено неделю назад":"Просмотрено неделю назад","Просмотрено позавчера":"Просмотрено позавчера","Просмотрено сегодня":"Просмотрено сегодня","Просмотрено только что":"Просмотрено только что"},{lang:"ru"}),BEM.I18N.decl("share-dropdown",{facebook:"Facebook",gplus:"Google +",moimir:"Мой Мир",odnoklassniki:"Одноклассники",pinterest:"Pinterest",share:"Поделиться",twitter:"Twitter",vkontakte:"Вконтакте"},{lang:"ru"}),BEM.I18N.decl("similar_spok_yes",{"Ещё {br} похожие":function(t){return"Ещё "+t.br+" похожие"},"Похожие картинки":"Похожие картинки"},{lang:"ru"}),BEM.I18N.decl("sizes_spok_yes",{"Выбрать размер картинки":"Выбрать размер картинки","Открыть":"Открыть"},{lang:"ru"}),BEM.I18N.decl("slideshow-switcher_spok_yes",{"Слайдшоу":"Слайдшоу"},{lang:"ru"}),BEM.I18N.decl("snippet_spok_yes",{"Перейти на":"Перейти на"},{lang:"ru"}),BEM.I18N.decl("suggest2",{fact:"Факты",group:"Группа подсказок",nah:"Вы искали",nav:"Сайт",text:"Поиск",traffic:"Пробки",weather:"Погода"},{lang:"ru"}),BEM.I18N.decl("suggest2-item",{"quick-answer":"Быстрый ответ"},{lang:"ru"}),BEM.I18N.decl("ticker__text",{notifications:"Уведомлений"},{lang:"ru"}),BEM.I18N.decl("tumbler",{off:"Откл",on:"Вкл"},{lang:"ru"}),BEM.I18N.decl("user",{enter:"Войти",exit:"Выйти",letter:function(t){return this.keyset("i-tanker__dynamic").key("plural_adv",{count:t.count,one:"новое письмо",some:"новых письма",many:"новых писем",none:"Нет новых писем"})},letter_compose:"Написать письмо",passport:"Паспорт",tune:"Настройка",upload_files:"Мой диск"},{lang:"ru"}),BEM.I18N.lang("ru"));